function MT(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function Ub(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $m={exports:{}},xl={},Bm={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function DT(){if(Ly)return ot;Ly=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,j={};function S(I,te,se){this.props=I,this.context=te,this.refs=j,this.updater=se||N}S.prototype.isReactComponent={},S.prototype.setState=function(I,te){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,te,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function T(){}T.prototype=S.prototype;function R(I,te,se){this.props=I,this.context=te,this.refs=j,this.updater=se||N}var A=R.prototype=new T;A.constructor=R,w(A,S.prototype),A.isPureReactComponent=!0;var k=Array.isArray,P=Object.prototype.hasOwnProperty,F={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function z(I,te,se){var fe,ve={},Pe=null,$=null;if(te!=null)for(fe in te.ref!==void 0&&($=te.ref),te.key!==void 0&&(Pe=""+te.key),te)P.call(te,fe)&&!W.hasOwnProperty(fe)&&(ve[fe]=te[fe]);var G=arguments.length-2;if(G===1)ve.children=se;else if(1<G){for(var X=Array(G),me=0;me<G;me++)X[me]=arguments[me+2];ve.children=X}if(I&&I.defaultProps)for(fe in G=I.defaultProps,G)ve[fe]===void 0&&(ve[fe]=G[fe]);return{$$typeof:t,type:I,key:Pe,ref:$,props:ve,_owner:F.current}}function oe(I,te){return{$$typeof:t,type:I.type,key:te,ref:I.ref,props:I.props,_owner:I._owner}}function q(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function J(I){var te={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(se){return te[se]})}var K=/\/+/g;function B(I,te){return typeof I=="object"&&I!==null&&I.key!=null?J(""+I.key):te.toString(36)}function V(I,te,se,fe,ve){var Pe=typeof I;(Pe==="undefined"||Pe==="boolean")&&(I=null);var $=!1;if(I===null)$=!0;else switch(Pe){case"string":case"number":$=!0;break;case"object":switch(I.$$typeof){case t:case e:$=!0}}if($)return $=I,ve=ve($),I=fe===""?"."+B($,0):fe,k(ve)?(se="",I!=null&&(se=I.replace(K,"$&/")+"/"),V(ve,te,se,"",function(me){return me})):ve!=null&&(q(ve)&&(ve=oe(ve,se+(!ve.key||$&&$.key===ve.key?"":(""+ve.key).replace(K,"$&/")+"/")+I)),te.push(ve)),1;if($=0,fe=fe===""?".":fe+":",k(I))for(var G=0;G<I.length;G++){Pe=I[G];var X=fe+B(Pe,G);$+=V(Pe,te,se,X,ve)}else if(X=y(I),typeof X=="function")for(I=X.call(I),G=0;!(Pe=I.next()).done;)Pe=Pe.value,X=fe+B(Pe,G++),$+=V(Pe,te,se,X,ve);else if(Pe==="object")throw te=String(I),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return $}function re(I,te,se){if(I==null)return I;var fe=[],ve=0;return V(I,fe,"","",function(Pe){return te.call(se,Pe,ve++)}),fe}function M(I){if(I._status===-1){var te=I._result;te=te(),te.then(function(se){(I._status===0||I._status===-1)&&(I._status=1,I._result=se)},function(se){(I._status===0||I._status===-1)&&(I._status=2,I._result=se)}),I._status===-1&&(I._status=0,I._result=te)}if(I._status===1)return I._result.default;throw I._result}var D={current:null},E={transition:null},Y={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:E,ReactCurrentOwner:F};function Q(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:re,forEach:function(I,te,se){re(I,function(){te.apply(this,arguments)},se)},count:function(I){var te=0;return re(I,function(){te++}),te},toArray:function(I){return re(I,function(te){return te})||[]},only:function(I){if(!q(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},ot.Component=S,ot.Fragment=s,ot.Profiler=a,ot.PureComponent=R,ot.StrictMode=r,ot.Suspense=h,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ot.act=Q,ot.cloneElement=function(I,te,se){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var fe=w({},I.props),ve=I.key,Pe=I.ref,$=I._owner;if(te!=null){if(te.ref!==void 0&&(Pe=te.ref,$=F.current),te.key!==void 0&&(ve=""+te.key),I.type&&I.type.defaultProps)var G=I.type.defaultProps;for(X in te)P.call(te,X)&&!W.hasOwnProperty(X)&&(fe[X]=te[X]===void 0&&G!==void 0?G[X]:te[X])}var X=arguments.length-2;if(X===1)fe.children=se;else if(1<X){G=Array(X);for(var me=0;me<X;me++)G[me]=arguments[me+2];fe.children=G}return{$$typeof:t,type:I.type,key:ve,ref:Pe,props:fe,_owner:$}},ot.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},ot.createElement=z,ot.createFactory=function(I){var te=z.bind(null,I);return te.type=I,te},ot.createRef=function(){return{current:null}},ot.forwardRef=function(I){return{$$typeof:d,render:I}},ot.isValidElement=q,ot.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:M}},ot.memo=function(I,te){return{$$typeof:m,type:I,compare:te===void 0?null:te}},ot.startTransition=function(I){var te=E.transition;E.transition={};try{I()}finally{E.transition=te}},ot.unstable_act=Q,ot.useCallback=function(I,te){return D.current.useCallback(I,te)},ot.useContext=function(I){return D.current.useContext(I)},ot.useDebugValue=function(){},ot.useDeferredValue=function(I){return D.current.useDeferredValue(I)},ot.useEffect=function(I,te){return D.current.useEffect(I,te)},ot.useId=function(){return D.current.useId()},ot.useImperativeHandle=function(I,te,se){return D.current.useImperativeHandle(I,te,se)},ot.useInsertionEffect=function(I,te){return D.current.useInsertionEffect(I,te)},ot.useLayoutEffect=function(I,te){return D.current.useLayoutEffect(I,te)},ot.useMemo=function(I,te){return D.current.useMemo(I,te)},ot.useReducer=function(I,te,se){return D.current.useReducer(I,te,se)},ot.useRef=function(I){return D.current.useRef(I)},ot.useState=function(I){return D.current.useState(I)},ot.useSyncExternalStore=function(I,te,se){return D.current.useSyncExternalStore(I,te,se)},ot.useTransition=function(){return D.current.useTransition()},ot.version="18.3.1",ot}var Oy;function fu(){return Oy||(Oy=1,Bm.exports=DT()),Bm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function IT(){if(Fy)return xl;Fy=1;var t=fu(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,m){var f,p={},y=null,N=null;m!==void 0&&(y=""+m),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(N=h.ref);for(f in h)r.call(h,f)&&!l.hasOwnProperty(f)&&(p[f]=h[f]);if(d&&d.defaultProps)for(f in h=d.defaultProps,h)p[f]===void 0&&(p[f]=h[f]);return{$$typeof:e,type:d,key:y,ref:N,props:p,_owner:a.current}}return xl.Fragment=s,xl.jsx=c,xl.jsxs=c,xl}var zy;function LT(){return zy||(zy=1,$m.exports=IT()),$m.exports}var n=LT(),hd={},Um={exports:{}},Gs={},Vm={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function OT(){return $y||($y=1,(function(t){function e(E,Y){var Q=E.length;E.push(Y);e:for(;0<Q;){var I=Q-1>>>1,te=E[I];if(0<a(te,Y))E[I]=Y,E[Q]=te,Q=I;else break e}}function s(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var Y=E[0],Q=E.pop();if(Q!==Y){E[0]=Q;e:for(var I=0,te=E.length,se=te>>>1;I<se;){var fe=2*(I+1)-1,ve=E[fe],Pe=fe+1,$=E[Pe];if(0>a(ve,Q))Pe<te&&0>a($,ve)?(E[I]=$,E[Pe]=Q,I=Pe):(E[I]=ve,E[fe]=Q,I=fe);else if(Pe<te&&0>a($,Q))E[I]=$,E[Pe]=Q,I=Pe;else break e}}return Y}function a(E,Y){var Q=E.sortIndex-Y.sortIndex;return Q!==0?Q:E.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],m=[],f=1,p=null,y=3,N=!1,w=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(E){for(var Y=s(m);Y!==null;){if(Y.callback===null)r(m);else if(Y.startTime<=E)r(m),Y.sortIndex=Y.expirationTime,e(h,Y);else break;Y=s(m)}}function k(E){if(j=!1,A(E),!w)if(s(h)!==null)w=!0,M(P);else{var Y=s(m);Y!==null&&D(k,Y.startTime-E)}}function P(E,Y){w=!1,j&&(j=!1,T(z),z=-1),N=!0;var Q=y;try{for(A(Y),p=s(h);p!==null&&(!(p.expirationTime>Y)||E&&!J());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var te=I(p.expirationTime<=Y);Y=t.unstable_now(),typeof te=="function"?p.callback=te:p===s(h)&&r(h),A(Y)}else r(h);p=s(h)}if(p!==null)var se=!0;else{var fe=s(m);fe!==null&&D(k,fe.startTime-Y),se=!1}return se}finally{p=null,y=Q,N=!1}}var F=!1,W=null,z=-1,oe=5,q=-1;function J(){return!(t.unstable_now()-q<oe)}function K(){if(W!==null){var E=t.unstable_now();q=E;var Y=!0;try{Y=W(!0,E)}finally{Y?B():(F=!1,W=null)}}else F=!1}var B;if(typeof R=="function")B=function(){R(K)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,re=V.port2;V.port1.onmessage=K,B=function(){re.postMessage(null)}}else B=function(){S(K,0)};function M(E){W=E,F||(F=!0,B())}function D(E,Y){z=S(function(){E(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){w||N||(w=!0,M(P))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return s(h)},t.unstable_next=function(E){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var Q=y;y=Y;try{return E()}finally{y=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,Y){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var Q=y;y=E;try{return Y()}finally{y=Q}},t.unstable_scheduleCallback=function(E,Y,Q){var I=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?I+Q:I):Q=I,E){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,E={id:f++,callback:Y,priorityLevel:E,startTime:Q,expirationTime:te,sortIndex:-1},Q>I?(E.sortIndex=Q,e(m,E),s(h)===null&&E===s(m)&&(j?(T(z),z=-1):j=!0,D(k,Q-I))):(E.sortIndex=te,e(h,E),w||N||(w=!0,M(P))),E},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(E){var Y=y;return function(){var Q=y;y=Y;try{return E.apply(this,arguments)}finally{y=Q}}}})(Wm)),Wm}var By;function FT(){return By||(By=1,Vm.exports=OT()),Vm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function zT(){if(Uy)return Gs;Uy=1;var t=fu(),e=FT();function s(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function l(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(a[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(i){return h.call(p,i)?!0:h.call(f,i)?!1:m.test(i)?p[i]=!0:(f[i]=!0,!1)}function N(i,o,u,g){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,o,u,g){if(o===null||typeof o>"u"||N(i,o,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(i,o,u,g,v,b,_){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=b,this.removeEmptyString=_}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new j(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];S[o]=new j(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new j(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new j(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new j(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new j(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new j(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new j(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new j(i,5,!1,i.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(T,R);S[o]=new j(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(T,R);S[o]=new j(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(T,R);S[o]=new j(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new j(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new j(i,1,!1,i.toLowerCase(),null,!0,!0)});function A(i,o,u,g){var v=S.hasOwnProperty(o)?S[o]:null;(v!==null?v.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(w(o,u,v,g)&&(u=null),g||v===null?y(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(o=v.attributeName,g=v.attributeNamespace,u===null?i.removeAttribute(o):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,g?i.setAttributeNS(g,o,u):i.setAttribute(o,u))))}var k=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),F=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),J=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),E=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=E&&i[E]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Object.assign,I;function te(i){if(I===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);I=o&&o[1]||""}return`
`+I+i}var se=!1;function fe(i,o){if(!i||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ce){var g=ce}Reflect.construct(i,[],o)}else{try{o.call()}catch(ce){g=ce}i.call(o.prototype)}else{try{throw Error()}catch(ce){g=ce}i()}}catch(ce){if(ce&&g&&typeof ce.stack=="string"){for(var v=ce.stack.split(`
`),b=g.stack.split(`
`),_=v.length-1,O=b.length-1;1<=_&&0<=O&&v[_]!==b[O];)O--;for(;1<=_&&0<=O;_--,O--)if(v[_]!==b[O]){if(_!==1||O!==1)do if(_--,O--,0>O||v[_]!==b[O]){var H=`
`+v[_].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=_&&0<=O);break}}}finally{se=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?te(i):""}function ve(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=fe(i.type,!1),i;case 11:return i=fe(i.type.render,!1),i;case 1:return i=fe(i.type,!0),i;default:return""}}function Pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case W:return"Fragment";case F:return"Portal";case oe:return"Profiler";case z:return"StrictMode";case B:return"Suspense";case V:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case J:return(i.displayName||"Context")+".Consumer";case q:return(i._context.displayName||"Context")+".Provider";case K:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return o=i.displayName||null,o!==null?o:Pe(i.type)||"Memo";case M:o=i._payload,i=i._init;try{return Pe(i(o))}catch{}}return null}function $(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(o);case 8:return o===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function G(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function X(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function me(i){var o=X(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,b=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(_){g=""+_,b.call(this,_)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(_){g=""+_},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ye(i){i._valueTracker||(i._valueTracker=me(i))}function je(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),g="";return i&&(g=X(i)?i.checked?"true":"false":i.value),i=g,i!==u?(o.setValue(i),!0):!1}function Ae(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function U(i,o){var u=o.checked;return Q({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Te(i,o){var u=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;u=G(o.value!=null?o.value:u),i._wrapperState={initialChecked:g,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Se(i,o){o=o.checked,o!=null&&A(i,"checked",o,!1)}function We(i,o){Se(i,o);var u=G(o.value),g=o.type;if(u!=null)g==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?pe(i,o.type,u):o.hasOwnProperty("defaultValue")&&pe(i,o.type,G(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ct(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function pe(i,o,u){(o!=="number"||Ae(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ie=Array.isArray;function le(i,o,u,g){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&g&&(i[u].defaultSelected=!0)}else{for(u=""+G(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,g&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Le(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(s(91));return Q({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function et(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(s(92));if(ie(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:G(u)}}function wt(i,o){var u=G(o.value),g=G(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),g!=null&&(i.defaultValue=""+g)}function ds(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Bt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Bt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var cn,gr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,g,v){MSApp.execUnsafeLocalFunction(function(){return i(o,u,g,v)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(cn=cn||document.createElement("div"),cn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=cn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Os(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},us=["Webkit","ms","Moz","O"];Object.keys(Xs).forEach(function(i){us.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Xs[o]=Xs[i]})});function wi(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Xs.hasOwnProperty(i)&&Xs[i]?(""+o).trim():o+"px"}function xr(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var g=u.indexOf("--")===0,v=wi(u,o[u],g);u==="float"&&(u="cssFloat"),g?i.setProperty(u,v):i[u]=v}}var bi=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dn(i,o){if(o){if(bi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(s(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(s(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(s(61))}if(o.style!=null&&typeof o.style!="object")throw Error(s(62))}}function Ma(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function ut(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ur=null,dn=null,un=null;function Vr(i){if(i=sl(i)){if(typeof Ur!="function")throw Error(s(280));var o=i.stateNode;o&&(o=Tc(o),Ur(i.stateNode,i.type,o))}}function Ke(i){dn?un?un.push(i):un=[i]:dn=i}function Pt(){if(dn){var i=dn,o=un;if(un=dn=null,Vr(i),o)for(i=0;i<o.length;i++)Vr(o[i])}}function At(i,o){return i(o)}function Dt(){}var In=!1;function jt(i,o,u){if(In)return i(o,u);In=!0;try{return At(i,o,u)}finally{In=!1,(dn!==null||un!==null)&&(Dt(),Pt())}}function It(i,o){var u=i.stateNode;if(u===null)return null;var g=Tc(u);if(g===null)return null;u=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(s(231,o,typeof u));return u}var hs=!1;if(d)try{var es={};Object.defineProperty(es,"passive",{get:function(){hs=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{hs=!1}function vs(i,o,u,g,v,b,_,O,H){var ce=Array.prototype.slice.call(arguments,3);try{o.apply(u,ce)}catch(be){this.onError(be)}}var hn=!1,zs=null,Da=!1,Io=null,Lo={onError:function(i){hn=!0,zs=i}};function sh(i,o,u,g,v,b,_,O,H){hn=!1,zs=null,vs.apply(Lo,arguments)}function nh(i,o,u,g,v,b,_,O,H){if(sh.apply(this,arguments),hn){if(hn){var ce=zs;hn=!1,zs=null}else throw Error(s(198));Da||(Da=!0,Io=ce)}}function yr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function lc(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function cc(i){if(yr(i)!==i)throw Error(s(188))}function rh(i){var o=i.alternate;if(!o){if(o=yr(i),o===null)throw Error(s(188));return o!==i?null:i}for(var u=i,g=o;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(g=v.return,g!==null){u=g;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return cc(v),i;if(b===g)return cc(v),o;b=b.sibling}throw Error(s(188))}if(u.return!==g.return)u=v,g=b;else{for(var _=!1,O=v.child;O;){if(O===u){_=!0,u=v,g=b;break}if(O===g){_=!0,g=v,u=b;break}O=O.sibling}if(!_){for(O=b.child;O;){if(O===u){_=!0,u=b,g=v;break}if(O===g){_=!0,g=b,u=v;break}O=O.sibling}if(!_)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?i:o}function Wr(i){return i=rh(i),i!==null?ji(i):null}function ji(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=ji(i);if(o!==null)return o;i=i.sibling}return null}var Ne=e.unstable_scheduleCallback,Ee=e.unstable_cancelCallback,Re=e.unstable_shouldYield,Ve=e.unstable_requestPaint,_e=e.unstable_now,qe=e.unstable_getCurrentPriorityLevel,xt=e.unstable_ImmediatePriority,Qn=e.unstable_UserBlockingPriority,it=e.unstable_NormalPriority,$s=e.unstable_LowPriority,ws=e.unstable_IdlePriority,Ln=null,Ps=null;function Oo(i){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(Ln,i,void 0,(i.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:hx,ah=Math.log,ih=Math.LN2;function hx(i){return i>>>=0,i===0?32:31-(ah(i)/ih|0)|0}var Ni=64,dc=4194304;function Fo(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,o){var u=i.pendingLanes;if(u===0)return 0;var g=0,v=i.suspendedLanes,b=i.pingedLanes,_=u&268435455;if(_!==0){var O=_&~v;O!==0?g=Fo(O):(b&=_,b!==0&&(g=Fo(b)))}else _=u&~v,_!==0?g=Fo(_):b!==0&&(g=Fo(b));if(g===0)return 0;if(o!==0&&o!==g&&(o&v)===0&&(v=g&-g,b=o&-o,v>=b||v===16&&(b&4194240)!==0))return o;if((g&4)!==0&&(g|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=g;0<o;)u=31-bs(o),v=1<<u,g|=i[u],o&=~v;return g}function Q2(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X2(i,o){for(var u=i.suspendedLanes,g=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes;0<b;){var _=31-bs(b),O=1<<_,H=v[_];H===-1?((O&u)===0||(O&g)!==0)&&(v[_]=Q2(O,o)):H<=o&&(i.expiredLanes|=O),b&=~O}}function oh(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function mx(){var i=Ni;return Ni<<=1,(Ni&4194240)===0&&(Ni=64),i}function lh(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function zo(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-bs(o),i[o]=u}function eC(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-bs(u),b=1<<v;o[v]=0,g[v]=-1,i[v]=-1,u&=~b}}function ch(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var g=31-bs(u),v=1<<g;v&o|i[g]&o&&(i[g]|=o),u&=~v}}var yt=0;function fx(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var px,dh,gx,xx,yx,uh=!1,hc=[],Hr=null,Gr=null,qr=null,$o=new Map,Bo=new Map,Kr=[],tC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vx(i,o){switch(i){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":$o.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(o.pointerId)}}function Uo(i,o,u,g,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:u,eventSystemFlags:g,nativeEvent:b,targetContainers:[v]},o!==null&&(o=sl(o),o!==null&&dh(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function sC(i,o,u,g,v){switch(o){case"focusin":return Hr=Uo(Hr,i,o,u,g,v),!0;case"dragenter":return Gr=Uo(Gr,i,o,u,g,v),!0;case"mouseover":return qr=Uo(qr,i,o,u,g,v),!0;case"pointerover":var b=v.pointerId;return $o.set(b,Uo($o.get(b)||null,i,o,u,g,v)),!0;case"gotpointercapture":return b=v.pointerId,Bo.set(b,Uo(Bo.get(b)||null,i,o,u,g,v)),!0}return!1}function wx(i){var o=Ia(i.target);if(o!==null){var u=yr(o);if(u!==null){if(o=u.tag,o===13){if(o=lc(u),o!==null){i.blockedOn=o,yx(i.priority,function(){gx(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=mh(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var g=new u.constructor(u.type,u);Fs=g,u.target.dispatchEvent(g),Fs=null}else return o=sl(u),o!==null&&dh(o),i.blockedOn=u,!1;o.shift()}return!0}function bx(i,o,u){mc(i)&&u.delete(o)}function nC(){uh=!1,Hr!==null&&mc(Hr)&&(Hr=null),Gr!==null&&mc(Gr)&&(Gr=null),qr!==null&&mc(qr)&&(qr=null),$o.forEach(bx),Bo.forEach(bx)}function Vo(i,o){i.blockedOn===o&&(i.blockedOn=null,uh||(uh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nC)))}function Wo(i){function o(v){return Vo(v,i)}if(0<hc.length){Vo(hc[0],i);for(var u=1;u<hc.length;u++){var g=hc[u];g.blockedOn===i&&(g.blockedOn=null)}}for(Hr!==null&&Vo(Hr,i),Gr!==null&&Vo(Gr,i),qr!==null&&Vo(qr,i),$o.forEach(o),Bo.forEach(o),u=0;u<Kr.length;u++)g=Kr[u],g.blockedOn===i&&(g.blockedOn=null);for(;0<Kr.length&&(u=Kr[0],u.blockedOn===null);)wx(u),u.blockedOn===null&&Kr.shift()}var Si=k.ReactCurrentBatchConfig,fc=!0;function rC(i,o,u,g){var v=yt,b=Si.transition;Si.transition=null;try{yt=1,hh(i,o,u,g)}finally{yt=v,Si.transition=b}}function aC(i,o,u,g){var v=yt,b=Si.transition;Si.transition=null;try{yt=4,hh(i,o,u,g)}finally{yt=v,Si.transition=b}}function hh(i,o,u,g){if(fc){var v=mh(i,o,u,g);if(v===null)Ah(i,o,g,pc,u),vx(i,g);else if(sC(v,i,o,u,g))g.stopPropagation();else if(vx(i,g),o&4&&-1<tC.indexOf(i)){for(;v!==null;){var b=sl(v);if(b!==null&&px(b),b=mh(i,o,u,g),b===null&&Ah(i,o,g,pc,u),b===v)break;v=b}v!==null&&g.stopPropagation()}else Ah(i,o,g,null,u)}}var pc=null;function mh(i,o,u,g){if(pc=null,i=ut(g),i=Ia(i),i!==null)if(o=yr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=lc(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return pc=i,null}function jx(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case xt:return 1;case Qn:return 4;case it:case $s:return 16;case ws:return 536870912;default:return 16}default:return 16}}var Zr=null,fh=null,gc=null;function Nx(){if(gc)return gc;var i,o=fh,u=o.length,g,v="value"in Zr?Zr.value:Zr.textContent,b=v.length;for(i=0;i<u&&o[i]===v[i];i++);var _=u-i;for(g=1;g<=_&&o[u-g]===v[b-g];g++);return gc=v.slice(i,1<g?1-g:void 0)}function xc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function yc(){return!0}function Sx(){return!1}function en(i){function o(u,g,v,b,_){this._reactName=u,this._targetInst=v,this.type=g,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?yc:Sx,this.isPropagationStopped=Sx,this}return Q(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),o}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ph=en(ki),Ho=Q({},ki,{view:0,detail:0}),iC=en(Ho),gh,xh,Go,vc=Q({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Go&&(Go&&i.type==="mousemove"?(gh=i.screenX-Go.screenX,xh=i.screenY-Go.screenY):xh=gh=0,Go=i),gh)},movementY:function(i){return"movementY"in i?i.movementY:xh}}),kx=en(vc),oC=Q({},vc,{dataTransfer:0}),lC=en(oC),cC=Q({},Ho,{relatedTarget:0}),yh=en(cC),dC=Q({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),uC=en(dC),hC=Q({},ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mC=en(hC),fC=Q({},ki,{data:0}),Cx=en(fC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yC(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=xC[i])?!!o[i]:!1}function vh(){return yC}var vC=Q({},Ho,{key:function(i){if(i.key){var o=pC[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=xc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(i){return i.type==="keypress"?xc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wC=en(vC),bC=Q({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tx=en(bC),jC=Q({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),NC=en(jC),SC=Q({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),kC=en(SC),CC=Q({},vc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),TC=en(CC),EC=[9,13,27,32],wh=d&&"CompositionEvent"in window,qo=null;d&&"documentMode"in document&&(qo=document.documentMode);var PC=d&&"TextEvent"in window&&!qo,Ex=d&&(!wh||qo&&8<qo&&11>=qo),Px=" ",Ax=!1;function _x(i,o){switch(i){case"keyup":return EC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ci=!1;function AC(i,o){switch(i){case"compositionend":return Rx(o);case"keypress":return o.which!==32?null:(Ax=!0,Px);case"textInput":return i=o.data,i===Px&&Ax?null:i;default:return null}}function _C(i,o){if(Ci)return i==="compositionend"||!wh&&_x(i,o)?(i=Nx(),gc=fh=Zr=null,Ci=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ex&&o.locale!=="ko"?null:o.data;default:return null}}var RC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!RC[i.type]:o==="textarea"}function Dx(i,o,u,g){Ke(g),o=Sc(o,"onChange"),0<o.length&&(u=new ph("onChange","change",null,u,g),i.push({event:u,listeners:o}))}var Ko=null,Zo=null;function MC(i){Qx(i,0)}function wc(i){var o=_i(i);if(je(o))return i}function DC(i,o){if(i==="change")return o}var Ix=!1;if(d){var bh;if(d){var jh="oninput"in document;if(!jh){var Lx=document.createElement("div");Lx.setAttribute("oninput","return;"),jh=typeof Lx.oninput=="function"}bh=jh}else bh=!1;Ix=bh&&(!document.documentMode||9<document.documentMode)}function Ox(){Ko&&(Ko.detachEvent("onpropertychange",Fx),Zo=Ko=null)}function Fx(i){if(i.propertyName==="value"&&wc(Zo)){var o=[];Dx(o,Zo,i,ut(i)),jt(MC,o)}}function IC(i,o,u){i==="focusin"?(Ox(),Ko=o,Zo=u,Ko.attachEvent("onpropertychange",Fx)):i==="focusout"&&Ox()}function LC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return wc(Zo)}function OC(i,o){if(i==="click")return wc(o)}function FC(i,o){if(i==="input"||i==="change")return wc(o)}function zC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var On=typeof Object.is=="function"?Object.is:zC;function Yo(i,o){if(On(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),g=Object.keys(o);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var v=u[g];if(!h.call(o,v)||!On(i[v],o[v]))return!1}return!0}function zx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $x(i,o){var u=zx(i);i=0;for(var g;u;){if(u.nodeType===3){if(g=i+u.textContent.length,i<=o&&g>=o)return{node:u,offset:o-i};i=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=zx(u)}}function Bx(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Bx(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ux(){for(var i=window,o=Ae();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Ae(i.document)}return o}function Nh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function $C(i){var o=Ux(),u=i.focusedElem,g=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Bx(u.ownerDocument.documentElement,u)){if(g!==null&&Nh(u)){if(o=g.start,i=g.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,b=Math.min(g.start,v);g=g.end===void 0?b:Math.min(g.end,v),!i.extend&&b>g&&(v=g,g=b,b=v),v=$x(u,b);var _=$x(u,g);v&&_&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==_.node||i.focusOffset!==_.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),i.removeAllRanges(),b>g?(i.addRange(o),i.extend(_.node,_.offset)):(o.setEnd(_.node,_.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var BC=d&&"documentMode"in document&&11>=document.documentMode,Ti=null,Sh=null,Jo=null,kh=!1;function Vx(i,o,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;kh||Ti==null||Ti!==Ae(g)||(g=Ti,"selectionStart"in g&&Nh(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Jo&&Yo(Jo,g)||(Jo=g,g=Sc(Sh,"onSelect"),0<g.length&&(o=new ph("onSelect","select",null,o,u),i.push({event:o,listeners:g}),o.target=Ti)))}function bc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ei={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},Ch={},Wx={};d&&(Wx=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function jc(i){if(Ch[i])return Ch[i];if(!Ei[i])return i;var o=Ei[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Wx)return Ch[i]=o[u];return i}var Hx=jc("animationend"),Gx=jc("animationiteration"),qx=jc("animationstart"),Kx=jc("transitionend"),Zx=new Map,Yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(i,o){Zx.set(i,o),l(o,[i])}for(var Th=0;Th<Yx.length;Th++){var Eh=Yx[Th],UC=Eh.toLowerCase(),VC=Eh[0].toUpperCase()+Eh.slice(1);Yr(UC,"on"+VC)}Yr(Hx,"onAnimationEnd"),Yr(Gx,"onAnimationIteration"),Yr(qx,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(Kx,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function Jx(i,o,u){var g=i.type||"unknown-event";i.currentTarget=u,nh(g,o,void 0,i),i.currentTarget=null}function Qx(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var g=i[u],v=g.event;g=g.listeners;e:{var b=void 0;if(o)for(var _=g.length-1;0<=_;_--){var O=g[_],H=O.instance,ce=O.currentTarget;if(O=O.listener,H!==b&&v.isPropagationStopped())break e;Jx(v,O,ce),b=H}else for(_=0;_<g.length;_++){if(O=g[_],H=O.instance,ce=O.currentTarget,O=O.listener,H!==b&&v.isPropagationStopped())break e;Jx(v,O,ce),b=H}}}if(Da)throw i=Io,Da=!1,Io=null,i}function Ct(i,o){var u=o[Lh];u===void 0&&(u=o[Lh]=new Set);var g=i+"__bubble";u.has(g)||(Xx(o,i,2,!1),u.add(g))}function Ph(i,o,u){var g=0;o&&(g|=4),Xx(u,i,g,o)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Xo(i){if(!i[Nc]){i[Nc]=!0,r.forEach(function(u){u!=="selectionchange"&&(WC.has(u)||Ph(u,!1,i),Ph(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Nc]||(o[Nc]=!0,Ph("selectionchange",!1,o))}}function Xx(i,o,u,g){switch(jx(o)){case 1:var v=rC;break;case 4:v=aC;break;default:v=hh}u=v.bind(null,o,u,i),v=void 0,!hs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),g?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function Ah(i,o,u,g,v){var b=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var _=g.tag;if(_===3||_===4){var O=g.stateNode.containerInfo;if(O===v||O.nodeType===8&&O.parentNode===v)break;if(_===4)for(_=g.return;_!==null;){var H=_.tag;if((H===3||H===4)&&(H=_.stateNode.containerInfo,H===v||H.nodeType===8&&H.parentNode===v))return;_=_.return}for(;O!==null;){if(_=Ia(O),_===null)return;if(H=_.tag,H===5||H===6){g=b=_;continue e}O=O.parentNode}}g=g.return}jt(function(){var ce=b,be=ut(u),ke=[];e:{var we=Zx.get(i);if(we!==void 0){var Me=ph,Oe=i;switch(i){case"keypress":if(xc(u)===0)break e;case"keydown":case"keyup":Me=wC;break;case"focusin":Oe="focus",Me=yh;break;case"focusout":Oe="blur",Me=yh;break;case"beforeblur":case"afterblur":Me=yh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=lC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=NC;break;case Hx:case Gx:case qx:Me=uC;break;case Kx:Me=kC;break;case"scroll":Me=iC;break;case"wheel":Me=TC;break;case"copy":case"cut":case"paste":Me=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Tx}var $e=(o&4)!==0,Ht=!$e&&i==="scroll",ee=$e?we!==null?we+"Capture":null:we;$e=[];for(var Z=ce,ae;Z!==null;){ae=Z;var Ce=ae.stateNode;if(ae.tag===5&&Ce!==null&&(ae=Ce,ee!==null&&(Ce=It(Z,ee),Ce!=null&&$e.push(el(Z,Ce,ae)))),Ht)break;Z=Z.return}0<$e.length&&(we=new Me(we,Oe,null,u,be),ke.push({event:we,listeners:$e}))}}if((o&7)===0){e:{if(we=i==="mouseover"||i==="pointerover",Me=i==="mouseout"||i==="pointerout",we&&u!==Fs&&(Oe=u.relatedTarget||u.fromElement)&&(Ia(Oe)||Oe[vr]))break e;if((Me||we)&&(we=be.window===be?be:(we=be.ownerDocument)?we.defaultView||we.parentWindow:window,Me?(Oe=u.relatedTarget||u.toElement,Me=ce,Oe=Oe?Ia(Oe):null,Oe!==null&&(Ht=yr(Oe),Oe!==Ht||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Me=null,Oe=ce),Me!==Oe)){if($e=kx,Ce="onMouseLeave",ee="onMouseEnter",Z="mouse",(i==="pointerout"||i==="pointerover")&&($e=Tx,Ce="onPointerLeave",ee="onPointerEnter",Z="pointer"),Ht=Me==null?we:_i(Me),ae=Oe==null?we:_i(Oe),we=new $e(Ce,Z+"leave",Me,u,be),we.target=Ht,we.relatedTarget=ae,Ce=null,Ia(be)===ce&&($e=new $e(ee,Z+"enter",Oe,u,be),$e.target=ae,$e.relatedTarget=Ht,Ce=$e),Ht=Ce,Me&&Oe)t:{for($e=Me,ee=Oe,Z=0,ae=$e;ae;ae=Pi(ae))Z++;for(ae=0,Ce=ee;Ce;Ce=Pi(Ce))ae++;for(;0<Z-ae;)$e=Pi($e),Z--;for(;0<ae-Z;)ee=Pi(ee),ae--;for(;Z--;){if($e===ee||ee!==null&&$e===ee.alternate)break t;$e=Pi($e),ee=Pi(ee)}$e=null}else $e=null;Me!==null&&e0(ke,we,Me,$e,!1),Oe!==null&&Ht!==null&&e0(ke,Ht,Oe,$e,!0)}}e:{if(we=ce?_i(ce):window,Me=we.nodeName&&we.nodeName.toLowerCase(),Me==="select"||Me==="input"&&we.type==="file")var Be=DC;else if(Mx(we))if(Ix)Be=FC;else{Be=LC;var He=IC}else(Me=we.nodeName)&&Me.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Be=OC);if(Be&&(Be=Be(i,ce))){Dx(ke,Be,u,be);break e}He&&He(i,we,ce),i==="focusout"&&(He=we._wrapperState)&&He.controlled&&we.type==="number"&&pe(we,"number",we.value)}switch(He=ce?_i(ce):window,i){case"focusin":(Mx(He)||He.contentEditable==="true")&&(Ti=He,Sh=ce,Jo=null);break;case"focusout":Jo=Sh=Ti=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,Vx(ke,u,be);break;case"selectionchange":if(BC)break;case"keydown":case"keyup":Vx(ke,u,be)}var Ge;if(wh)e:{switch(i){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ci?_x(i,u)&&(Je="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Je="onCompositionStart");Je&&(Ex&&u.locale!=="ko"&&(Ci||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ci&&(Ge=Nx()):(Zr=be,fh="value"in Zr?Zr.value:Zr.textContent,Ci=!0)),He=Sc(ce,Je),0<He.length&&(Je=new Cx(Je,i,null,u,be),ke.push({event:Je,listeners:He}),Ge?Je.data=Ge:(Ge=Rx(u),Ge!==null&&(Je.data=Ge)))),(Ge=PC?AC(i,u):_C(i,u))&&(ce=Sc(ce,"onBeforeInput"),0<ce.length&&(be=new Cx("onBeforeInput","beforeinput",null,u,be),ke.push({event:be,listeners:ce}),be.data=Ge))}Qx(ke,o)})}function el(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Sc(i,o){for(var u=o+"Capture",g=[];i!==null;){var v=i,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=It(i,u),b!=null&&g.unshift(el(i,b,v)),b=It(i,o),b!=null&&g.push(el(i,b,v))),i=i.return}return g}function Pi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function e0(i,o,u,g,v){for(var b=o._reactName,_=[];u!==null&&u!==g;){var O=u,H=O.alternate,ce=O.stateNode;if(H!==null&&H===g)break;O.tag===5&&ce!==null&&(O=ce,v?(H=It(u,b),H!=null&&_.unshift(el(u,H,O))):v||(H=It(u,b),H!=null&&_.push(el(u,H,O)))),u=u.return}_.length!==0&&i.push({event:o,listeners:_})}var HC=/\r\n?/g,GC=/\u0000|\uFFFD/g;function t0(i){return(typeof i=="string"?i:""+i).replace(HC,`
`).replace(GC,"")}function kc(i,o,u){if(o=t0(o),t0(i)!==o&&u)throw Error(s(425))}function Cc(){}var _h=null,Rh=null;function Mh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Dh=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,s0=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof s0<"u"?function(i){return s0.resolve(null).then(i).catch(ZC)}:Dh;function ZC(i){setTimeout(function(){throw i})}function Ih(i,o){var u=o,g=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(g===0){i.removeChild(v),Wo(o);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=v}while(u);Wo(o)}function Jr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function n0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Ai,tl="__reactProps$"+Ai,vr="__reactContainer$"+Ai,Lh="__reactEvents$"+Ai,YC="__reactListeners$"+Ai,JC="__reactHandles$"+Ai;function Ia(i){var o=i[Xn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[vr]||u[Xn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=n0(i);i!==null;){if(u=i[Xn])return u;i=n0(i)}return o}i=u,u=i.parentNode}return null}function sl(i){return i=i[Xn]||i[vr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _i(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(s(33))}function Tc(i){return i[tl]||null}var Oh=[],Ri=-1;function Qr(i){return{current:i}}function Tt(i){0>Ri||(i.current=Oh[Ri],Oh[Ri]=null,Ri--)}function Nt(i,o){Ri++,Oh[Ri]=i.current,i.current=o}var Xr={},js=Qr(Xr),Bs=Qr(!1),La=Xr;function Mi(i,o){var u=i.type.contextTypes;if(!u)return Xr;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in u)v[b]=o[b];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=v),v}function Us(i){return i=i.childContextTypes,i!=null}function Ec(){Tt(Bs),Tt(js)}function r0(i,o,u){if(js.current!==Xr)throw Error(s(168));Nt(js,o),Nt(Bs,u)}function a0(i,o,u){var g=i.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var v in g)if(!(v in o))throw Error(s(108,$(i)||"Unknown",v));return Q({},u,g)}function Pc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Xr,La=js.current,Nt(js,i),Nt(Bs,Bs.current),!0}function i0(i,o,u){var g=i.stateNode;if(!g)throw Error(s(169));u?(i=a0(i,o,La),g.__reactInternalMemoizedMergedChildContext=i,Tt(Bs),Tt(js),Nt(js,i)):Tt(Bs),Nt(Bs,u)}var wr=null,Ac=!1,Fh=!1;function o0(i){wr===null?wr=[i]:wr.push(i)}function QC(i){Ac=!0,o0(i)}function ea(){if(!Fh&&wr!==null){Fh=!0;var i=0,o=yt;try{var u=wr;for(yt=1;i<u.length;i++){var g=u[i];do g=g(!0);while(g!==null)}wr=null,Ac=!1}catch(v){throw wr!==null&&(wr=wr.slice(i+1)),Ne(xt,ea),v}finally{yt=o,Fh=!1}}return null}var Di=[],Ii=0,_c=null,Rc=0,mn=[],fn=0,Oa=null,br=1,jr="";function Fa(i,o){Di[Ii++]=Rc,Di[Ii++]=_c,_c=i,Rc=o}function l0(i,o,u){mn[fn++]=br,mn[fn++]=jr,mn[fn++]=Oa,Oa=i;var g=br;i=jr;var v=32-bs(g)-1;g&=~(1<<v),u+=1;var b=32-bs(o)+v;if(30<b){var _=v-v%5;b=(g&(1<<_)-1).toString(32),g>>=_,v-=_,br=1<<32-bs(o)+v|u<<v|g,jr=b+i}else br=1<<b|u<<v|g,jr=i}function zh(i){i.return!==null&&(Fa(i,1),l0(i,1,0))}function $h(i){for(;i===_c;)_c=Di[--Ii],Di[Ii]=null,Rc=Di[--Ii],Di[Ii]=null;for(;i===Oa;)Oa=mn[--fn],mn[fn]=null,jr=mn[--fn],mn[fn]=null,br=mn[--fn],mn[fn]=null}var tn=null,sn=null,_t=!1,Fn=null;function c0(i,o){var u=yn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function d0(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,tn=i,sn=Jr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,tn=i,sn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Oa!==null?{id:br,overflow:jr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=yn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,tn=i,sn=null,!0):!1;default:return!1}}function Bh(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Uh(i){if(_t){var o=sn;if(o){var u=o;if(!d0(i,o)){if(Bh(i))throw Error(s(418));o=Jr(u.nextSibling);var g=tn;o&&d0(i,o)?c0(g,u):(i.flags=i.flags&-4097|2,_t=!1,tn=i)}}else{if(Bh(i))throw Error(s(418));i.flags=i.flags&-4097|2,_t=!1,tn=i}}}function u0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;tn=i}function Mc(i){if(i!==tn)return!1;if(!_t)return u0(i),_t=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Mh(i.type,i.memoizedProps)),o&&(o=sn)){if(Bh(i))throw h0(),Error(s(418));for(;o;)c0(i,o),o=Jr(o.nextSibling)}if(u0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){sn=Jr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}sn=null}}else sn=tn?Jr(i.stateNode.nextSibling):null;return!0}function h0(){for(var i=sn;i;)i=Jr(i.nextSibling)}function Li(){sn=tn=null,_t=!1}function Vh(i){Fn===null?Fn=[i]:Fn.push(i)}var XC=k.ReactCurrentBatchConfig;function nl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(s(309));var g=u.stateNode}if(!g)throw Error(s(147,i));var v=g,b=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===b?o.ref:(o=function(_){var O=v.refs;_===null?delete O[b]:O[b]=_},o._stringRef=b,o)}if(typeof i!="string")throw Error(s(284));if(!u._owner)throw Error(s(290,i))}return i}function Dc(i,o){throw i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function m0(i){var o=i._init;return o(i._payload)}function f0(i){function o(ee,Z){if(i){var ae=ee.deletions;ae===null?(ee.deletions=[Z],ee.flags|=16):ae.push(Z)}}function u(ee,Z){if(!i)return null;for(;Z!==null;)o(ee,Z),Z=Z.sibling;return null}function g(ee,Z){for(ee=new Map;Z!==null;)Z.key!==null?ee.set(Z.key,Z):ee.set(Z.index,Z),Z=Z.sibling;return ee}function v(ee,Z){return ee=la(ee,Z),ee.index=0,ee.sibling=null,ee}function b(ee,Z,ae){return ee.index=ae,i?(ae=ee.alternate,ae!==null?(ae=ae.index,ae<Z?(ee.flags|=2,Z):ae):(ee.flags|=2,Z)):(ee.flags|=1048576,Z)}function _(ee){return i&&ee.alternate===null&&(ee.flags|=2),ee}function O(ee,Z,ae,Ce){return Z===null||Z.tag!==6?(Z=Dm(ae,ee.mode,Ce),Z.return=ee,Z):(Z=v(Z,ae),Z.return=ee,Z)}function H(ee,Z,ae,Ce){var Be=ae.type;return Be===W?be(ee,Z,ae.props.children,Ce,ae.key):Z!==null&&(Z.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===M&&m0(Be)===Z.type)?(Ce=v(Z,ae.props),Ce.ref=nl(ee,Z,ae),Ce.return=ee,Ce):(Ce=rd(ae.type,ae.key,ae.props,null,ee.mode,Ce),Ce.ref=nl(ee,Z,ae),Ce.return=ee,Ce)}function ce(ee,Z,ae,Ce){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ae.containerInfo||Z.stateNode.implementation!==ae.implementation?(Z=Im(ae,ee.mode,Ce),Z.return=ee,Z):(Z=v(Z,ae.children||[]),Z.return=ee,Z)}function be(ee,Z,ae,Ce,Be){return Z===null||Z.tag!==7?(Z=Ga(ae,ee.mode,Ce,Be),Z.return=ee,Z):(Z=v(Z,ae),Z.return=ee,Z)}function ke(ee,Z,ae){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=Dm(""+Z,ee.mode,ae),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return ae=rd(Z.type,Z.key,Z.props,null,ee.mode,ae),ae.ref=nl(ee,null,Z),ae.return=ee,ae;case F:return Z=Im(Z,ee.mode,ae),Z.return=ee,Z;case M:var Ce=Z._init;return ke(ee,Ce(Z._payload),ae)}if(ie(Z)||Y(Z))return Z=Ga(Z,ee.mode,ae,null),Z.return=ee,Z;Dc(ee,Z)}return null}function we(ee,Z,ae,Ce){var Be=Z!==null?Z.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Be!==null?null:O(ee,Z,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case P:return ae.key===Be?H(ee,Z,ae,Ce):null;case F:return ae.key===Be?ce(ee,Z,ae,Ce):null;case M:return Be=ae._init,we(ee,Z,Be(ae._payload),Ce)}if(ie(ae)||Y(ae))return Be!==null?null:be(ee,Z,ae,Ce,null);Dc(ee,ae)}return null}function Me(ee,Z,ae,Ce,Be){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ee=ee.get(ae)||null,O(Z,ee,""+Ce,Be);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case P:return ee=ee.get(Ce.key===null?ae:Ce.key)||null,H(Z,ee,Ce,Be);case F:return ee=ee.get(Ce.key===null?ae:Ce.key)||null,ce(Z,ee,Ce,Be);case M:var He=Ce._init;return Me(ee,Z,ae,He(Ce._payload),Be)}if(ie(Ce)||Y(Ce))return ee=ee.get(ae)||null,be(Z,ee,Ce,Be,null);Dc(Z,Ce)}return null}function Oe(ee,Z,ae,Ce){for(var Be=null,He=null,Ge=Z,Je=Z=0,ls=null;Ge!==null&&Je<ae.length;Je++){Ge.index>Je?(ls=Ge,Ge=null):ls=Ge.sibling;var ht=we(ee,Ge,ae[Je],Ce);if(ht===null){Ge===null&&(Ge=ls);break}i&&Ge&&ht.alternate===null&&o(ee,Ge),Z=b(ht,Z,Je),He===null?Be=ht:He.sibling=ht,He=ht,Ge=ls}if(Je===ae.length)return u(ee,Ge),_t&&Fa(ee,Je),Be;if(Ge===null){for(;Je<ae.length;Je++)Ge=ke(ee,ae[Je],Ce),Ge!==null&&(Z=b(Ge,Z,Je),He===null?Be=Ge:He.sibling=Ge,He=Ge);return _t&&Fa(ee,Je),Be}for(Ge=g(ee,Ge);Je<ae.length;Je++)ls=Me(Ge,ee,Je,ae[Je],Ce),ls!==null&&(i&&ls.alternate!==null&&Ge.delete(ls.key===null?Je:ls.key),Z=b(ls,Z,Je),He===null?Be=ls:He.sibling=ls,He=ls);return i&&Ge.forEach(function(ca){return o(ee,ca)}),_t&&Fa(ee,Je),Be}function $e(ee,Z,ae,Ce){var Be=Y(ae);if(typeof Be!="function")throw Error(s(150));if(ae=Be.call(ae),ae==null)throw Error(s(151));for(var He=Be=null,Ge=Z,Je=Z=0,ls=null,ht=ae.next();Ge!==null&&!ht.done;Je++,ht=ae.next()){Ge.index>Je?(ls=Ge,Ge=null):ls=Ge.sibling;var ca=we(ee,Ge,ht.value,Ce);if(ca===null){Ge===null&&(Ge=ls);break}i&&Ge&&ca.alternate===null&&o(ee,Ge),Z=b(ca,Z,Je),He===null?Be=ca:He.sibling=ca,He=ca,Ge=ls}if(ht.done)return u(ee,Ge),_t&&Fa(ee,Je),Be;if(Ge===null){for(;!ht.done;Je++,ht=ae.next())ht=ke(ee,ht.value,Ce),ht!==null&&(Z=b(ht,Z,Je),He===null?Be=ht:He.sibling=ht,He=ht);return _t&&Fa(ee,Je),Be}for(Ge=g(ee,Ge);!ht.done;Je++,ht=ae.next())ht=Me(Ge,ee,Je,ht.value,Ce),ht!==null&&(i&&ht.alternate!==null&&Ge.delete(ht.key===null?Je:ht.key),Z=b(ht,Z,Je),He===null?Be=ht:He.sibling=ht,He=ht);return i&&Ge.forEach(function(RT){return o(ee,RT)}),_t&&Fa(ee,Je),Be}function Ht(ee,Z,ae,Ce){if(typeof ae=="object"&&ae!==null&&ae.type===W&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case P:e:{for(var Be=ae.key,He=Z;He!==null;){if(He.key===Be){if(Be=ae.type,Be===W){if(He.tag===7){u(ee,He.sibling),Z=v(He,ae.props.children),Z.return=ee,ee=Z;break e}}else if(He.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===M&&m0(Be)===He.type){u(ee,He.sibling),Z=v(He,ae.props),Z.ref=nl(ee,He,ae),Z.return=ee,ee=Z;break e}u(ee,He);break}else o(ee,He);He=He.sibling}ae.type===W?(Z=Ga(ae.props.children,ee.mode,Ce,ae.key),Z.return=ee,ee=Z):(Ce=rd(ae.type,ae.key,ae.props,null,ee.mode,Ce),Ce.ref=nl(ee,Z,ae),Ce.return=ee,ee=Ce)}return _(ee);case F:e:{for(He=ae.key;Z!==null;){if(Z.key===He)if(Z.tag===4&&Z.stateNode.containerInfo===ae.containerInfo&&Z.stateNode.implementation===ae.implementation){u(ee,Z.sibling),Z=v(Z,ae.children||[]),Z.return=ee,ee=Z;break e}else{u(ee,Z);break}else o(ee,Z);Z=Z.sibling}Z=Im(ae,ee.mode,Ce),Z.return=ee,ee=Z}return _(ee);case M:return He=ae._init,Ht(ee,Z,He(ae._payload),Ce)}if(ie(ae))return Oe(ee,Z,ae,Ce);if(Y(ae))return $e(ee,Z,ae,Ce);Dc(ee,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,Z!==null&&Z.tag===6?(u(ee,Z.sibling),Z=v(Z,ae),Z.return=ee,ee=Z):(u(ee,Z),Z=Dm(ae,ee.mode,Ce),Z.return=ee,ee=Z),_(ee)):u(ee,Z)}return Ht}var Oi=f0(!0),p0=f0(!1),Ic=Qr(null),Lc=null,Fi=null,Wh=null;function Hh(){Wh=Fi=Lc=null}function Gh(i){var o=Ic.current;Tt(Ic),i._currentValue=o}function qh(i,o,u){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===u)break;i=i.return}}function zi(i,o){Lc=i,Wh=Fi=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Vs=!0),i.firstContext=null)}function pn(i){var o=i._currentValue;if(Wh!==i)if(i={context:i,memoizedValue:o,next:null},Fi===null){if(Lc===null)throw Error(s(308));Fi=i,Lc.dependencies={lanes:0,firstContext:i}}else Fi=Fi.next=i;return o}var za=null;function Kh(i){za===null?za=[i]:za.push(i)}function g0(i,o,u,g){var v=o.interleaved;return v===null?(u.next=u,Kh(o)):(u.next=v.next,v.next=u),o.interleaved=u,Nr(i,g)}function Nr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var ta=!1;function Zh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x0(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Sr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function sa(i,o,u){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(dt&2)!==0){var v=g.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),g.pending=o,Nr(i,u)}return v=g.interleaved,v===null?(o.next=o,Kh(g)):(o.next=v.next,v.next=o),g.interleaved=o,Nr(i,u)}function Oc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var g=o.lanes;g&=i.pendingLanes,u|=g,o.lanes=u,ch(i,u)}}function y0(i,o){var u=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var _={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};b===null?v=b=_:b=b.next=_,u=u.next}while(u!==null);b===null?v=b=o:b=b.next=o}else v=b=o;u={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:g.shared,effects:g.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Fc(i,o,u,g){var v=i.updateQueue;ta=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var H=O,ce=H.next;H.next=null,_===null?b=ce:_.next=ce,_=H;var be=i.alternate;be!==null&&(be=be.updateQueue,O=be.lastBaseUpdate,O!==_&&(O===null?be.firstBaseUpdate=ce:O.next=ce,be.lastBaseUpdate=H))}if(b!==null){var ke=v.baseState;_=0,be=ce=H=null,O=b;do{var we=O.lane,Me=O.eventTime;if((g&we)===we){be!==null&&(be=be.next={eventTime:Me,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Oe=i,$e=O;switch(we=o,Me=u,$e.tag){case 1:if(Oe=$e.payload,typeof Oe=="function"){ke=Oe.call(Me,ke,we);break e}ke=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=$e.payload,we=typeof Oe=="function"?Oe.call(Me,ke,we):Oe,we==null)break e;ke=Q({},ke,we);break e;case 2:ta=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,we=v.effects,we===null?v.effects=[O]:we.push(O))}else Me={eventTime:Me,lane:we,tag:O.tag,payload:O.payload,callback:O.callback,next:null},be===null?(ce=be=Me,H=ke):be=be.next=Me,_|=we;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;we=O,O=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);if(be===null&&(H=ke),v.baseState=H,v.firstBaseUpdate=ce,v.lastBaseUpdate=be,o=v.shared.interleaved,o!==null){v=o;do _|=v.lane,v=v.next;while(v!==o)}else b===null&&(v.shared.lanes=0);Ua|=_,i.lanes=_,i.memoizedState=ke}}function v0(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var g=i[o],v=g.callback;if(v!==null){if(g.callback=null,g=u,typeof v!="function")throw Error(s(191,v));v.call(g)}}}var rl={},er=Qr(rl),al=Qr(rl),il=Qr(rl);function $a(i){if(i===rl)throw Error(s(174));return i}function Yh(i,o){switch(Nt(il,o),Nt(al,i),Nt(er,rl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Mn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Mn(o,i)}Tt(er),Nt(er,o)}function $i(){Tt(er),Tt(al),Tt(il)}function w0(i){$a(il.current);var o=$a(er.current),u=Mn(o,i.type);o!==u&&(Nt(al,i),Nt(er,u))}function Jh(i){al.current===i&&(Tt(er),Tt(al))}var Lt=Qr(0);function zc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Qh=[];function Xh(){for(var i=0;i<Qh.length;i++)Qh[i]._workInProgressVersionPrimary=null;Qh.length=0}var $c=k.ReactCurrentDispatcher,em=k.ReactCurrentBatchConfig,Ba=0,Ot=null,ts=null,is=null,Bc=!1,ol=!1,ll=0,eT=0;function Ns(){throw Error(s(321))}function tm(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!On(i[u],o[u]))return!1;return!0}function sm(i,o,u,g,v,b){if(Ba=b,Ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$c.current=i===null||i.memoizedState===null?rT:aT,i=u(g,v),ol){b=0;do{if(ol=!1,ll=0,25<=b)throw Error(s(301));b+=1,is=ts=null,o.updateQueue=null,$c.current=iT,i=u(g,v)}while(ol)}if($c.current=Wc,o=ts!==null&&ts.next!==null,Ba=0,is=ts=Ot=null,Bc=!1,o)throw Error(s(300));return i}function nm(){var i=ll!==0;return ll=0,i}function tr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?Ot.memoizedState=is=i:is=is.next=i,is}function gn(){if(ts===null){var i=Ot.alternate;i=i!==null?i.memoizedState:null}else i=ts.next;var o=is===null?Ot.memoizedState:is.next;if(o!==null)is=o,ts=i;else{if(i===null)throw Error(s(310));ts=i,i={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},is===null?Ot.memoizedState=is=i:is=is.next=i}return is}function cl(i,o){return typeof o=="function"?o(i):o}function rm(i){var o=gn(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var g=ts,v=g.baseQueue,b=u.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}g.baseQueue=v=b,u.pending=null}if(v!==null){b=v.next,g=g.baseState;var O=_=null,H=null,ce=b;do{var be=ce.lane;if((Ba&be)===be)H!==null&&(H=H.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),g=ce.hasEagerState?ce.eagerState:i(g,ce.action);else{var ke={lane:be,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};H===null?(O=H=ke,_=g):H=H.next=ke,Ot.lanes|=be,Ua|=be}ce=ce.next}while(ce!==null&&ce!==b);H===null?_=g:H.next=O,On(g,o.memoizedState)||(Vs=!0),o.memoizedState=g,o.baseState=_,o.baseQueue=H,u.lastRenderedState=g}if(i=u.interleaved,i!==null){v=i;do b=v.lane,Ot.lanes|=b,Ua|=b,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function am(i){var o=gn(),u=o.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var g=u.dispatch,v=u.pending,b=o.memoizedState;if(v!==null){u.pending=null;var _=v=v.next;do b=i(b,_.action),_=_.next;while(_!==v);On(b,o.memoizedState)||(Vs=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,g]}function b0(){}function j0(i,o){var u=Ot,g=gn(),v=o(),b=!On(g.memoizedState,v);if(b&&(g.memoizedState=v,Vs=!0),g=g.queue,im(k0.bind(null,u,g,i),[i]),g.getSnapshot!==o||b||is!==null&&is.memoizedState.tag&1){if(u.flags|=2048,dl(9,S0.bind(null,u,g,v,o),void 0,null),os===null)throw Error(s(349));(Ba&30)!==0||N0(u,o,v)}return v}function N0(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ot.updateQueue,o===null?(o={lastEffect:null,stores:null},Ot.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function S0(i,o,u,g){o.value=u,o.getSnapshot=g,C0(o)&&T0(i)}function k0(i,o,u){return u(function(){C0(o)&&T0(i)})}function C0(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!On(i,u)}catch{return!0}}function T0(i){var o=Nr(i,1);o!==null&&Un(o,i,1,-1)}function E0(i){var o=tr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:i},o.queue=i,i=i.dispatch=nT.bind(null,Ot,i),[o.memoizedState,i]}function dl(i,o,u,g){return i={tag:i,create:o,destroy:u,deps:g,next:null},o=Ot.updateQueue,o===null?(o={lastEffect:null,stores:null},Ot.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(g=u.next,u.next=i,i.next=g,o.lastEffect=i)),i}function P0(){return gn().memoizedState}function Uc(i,o,u,g){var v=tr();Ot.flags|=i,v.memoizedState=dl(1|o,u,void 0,g===void 0?null:g)}function Vc(i,o,u,g){var v=gn();g=g===void 0?null:g;var b=void 0;if(ts!==null){var _=ts.memoizedState;if(b=_.destroy,g!==null&&tm(g,_.deps)){v.memoizedState=dl(o,u,b,g);return}}Ot.flags|=i,v.memoizedState=dl(1|o,u,b,g)}function A0(i,o){return Uc(8390656,8,i,o)}function im(i,o){return Vc(2048,8,i,o)}function _0(i,o){return Vc(4,2,i,o)}function R0(i,o){return Vc(4,4,i,o)}function M0(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function D0(i,o,u){return u=u!=null?u.concat([i]):null,Vc(4,4,M0.bind(null,o,i),u)}function om(){}function I0(i,o){var u=gn();o=o===void 0?null:o;var g=u.memoizedState;return g!==null&&o!==null&&tm(o,g[1])?g[0]:(u.memoizedState=[i,o],i)}function L0(i,o){var u=gn();o=o===void 0?null:o;var g=u.memoizedState;return g!==null&&o!==null&&tm(o,g[1])?g[0]:(i=i(),u.memoizedState=[i,o],i)}function O0(i,o,u){return(Ba&21)===0?(i.baseState&&(i.baseState=!1,Vs=!0),i.memoizedState=u):(On(u,o)||(u=mx(),Ot.lanes|=u,Ua|=u,i.baseState=!0),o)}function tT(i,o){var u=yt;yt=u!==0&&4>u?u:4,i(!0);var g=em.transition;em.transition={};try{i(!1),o()}finally{yt=u,em.transition=g}}function F0(){return gn().memoizedState}function sT(i,o,u){var g=ia(i);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},z0(i))$0(o,u);else if(u=g0(i,o,u,g),u!==null){var v=_s();Un(u,i,g,v),B0(u,o,g)}}function nT(i,o,u){var g=ia(i),v={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if(z0(i))$0(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var _=o.lastRenderedState,O=b(_,u);if(v.hasEagerState=!0,v.eagerState=O,On(O,_)){var H=o.interleaved;H===null?(v.next=v,Kh(o)):(v.next=H.next,H.next=v),o.interleaved=v;return}}catch{}finally{}u=g0(i,o,v,g),u!==null&&(v=_s(),Un(u,i,g,v),B0(u,o,g))}}function z0(i){var o=i.alternate;return i===Ot||o!==null&&o===Ot}function $0(i,o){ol=Bc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function B0(i,o,u){if((u&4194240)!==0){var g=o.lanes;g&=i.pendingLanes,u|=g,o.lanes=u,ch(i,u)}}var Wc={readContext:pn,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},rT={readContext:pn,useCallback:function(i,o){return tr().memoizedState=[i,o===void 0?null:o],i},useContext:pn,useEffect:A0,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Uc(4194308,4,M0.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Uc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Uc(4,2,i,o)},useMemo:function(i,o){var u=tr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var g=tr();return o=u!==void 0?u(o):o,g.memoizedState=g.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},g.queue=i,i=i.dispatch=sT.bind(null,Ot,i),[g.memoizedState,i]},useRef:function(i){var o=tr();return i={current:i},o.memoizedState=i},useState:E0,useDebugValue:om,useDeferredValue:function(i){return tr().memoizedState=i},useTransition:function(){var i=E0(!1),o=i[0];return i=tT.bind(null,i[1]),tr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var g=Ot,v=tr();if(_t){if(u===void 0)throw Error(s(407));u=u()}else{if(u=o(),os===null)throw Error(s(349));(Ba&30)!==0||N0(g,o,u)}v.memoizedState=u;var b={value:u,getSnapshot:o};return v.queue=b,A0(k0.bind(null,g,b,i),[i]),g.flags|=2048,dl(9,S0.bind(null,g,b,u,o),void 0,null),u},useId:function(){var i=tr(),o=os.identifierPrefix;if(_t){var u=jr,g=br;u=(g&~(1<<32-bs(g)-1)).toString(32)+u,o=":"+o+"R"+u,u=ll++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=eT++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},aT={readContext:pn,useCallback:I0,useContext:pn,useEffect:im,useImperativeHandle:D0,useInsertionEffect:_0,useLayoutEffect:R0,useMemo:L0,useReducer:rm,useRef:P0,useState:function(){return rm(cl)},useDebugValue:om,useDeferredValue:function(i){var o=gn();return O0(o,ts.memoizedState,i)},useTransition:function(){var i=rm(cl)[0],o=gn().memoizedState;return[i,o]},useMutableSource:b0,useSyncExternalStore:j0,useId:F0,unstable_isNewReconciler:!1},iT={readContext:pn,useCallback:I0,useContext:pn,useEffect:im,useImperativeHandle:D0,useInsertionEffect:_0,useLayoutEffect:R0,useMemo:L0,useReducer:am,useRef:P0,useState:function(){return am(cl)},useDebugValue:om,useDeferredValue:function(i){var o=gn();return ts===null?o.memoizedState=i:O0(o,ts.memoizedState,i)},useTransition:function(){var i=am(cl)[0],o=gn().memoizedState;return[i,o]},useMutableSource:b0,useSyncExternalStore:j0,useId:F0,unstable_isNewReconciler:!1};function zn(i,o){if(i&&i.defaultProps){o=Q({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function lm(i,o,u,g){o=i.memoizedState,u=u(g,o),u=u==null?o:Q({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Hc={isMounted:function(i){return(i=i._reactInternals)?yr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var g=_s(),v=ia(i),b=Sr(g,v);b.payload=o,u!=null&&(b.callback=u),o=sa(i,b,v),o!==null&&(Un(o,i,v,g),Oc(o,i,v))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var g=_s(),v=ia(i),b=Sr(g,v);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=sa(i,b,v),o!==null&&(Un(o,i,v,g),Oc(o,i,v))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=_s(),g=ia(i),v=Sr(u,g);v.tag=2,o!=null&&(v.callback=o),o=sa(i,v,g),o!==null&&(Un(o,i,g,u),Oc(o,i,g))}};function U0(i,o,u,g,v,b,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,b,_):o.prototype&&o.prototype.isPureReactComponent?!Yo(u,g)||!Yo(v,b):!0}function V0(i,o,u){var g=!1,v=Xr,b=o.contextType;return typeof b=="object"&&b!==null?b=pn(b):(v=Us(o)?La:js.current,g=o.contextTypes,b=(g=g!=null)?Mi(i,v):Xr),o=new o(u,b),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Hc,i.stateNode=o,o._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=b),o}function W0(i,o,u,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,g),o.state!==i&&Hc.enqueueReplaceState(o,o.state,null)}function cm(i,o,u,g){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs={},Zh(i);var b=o.contextType;typeof b=="object"&&b!==null?v.context=pn(b):(b=Us(o)?La:js.current,v.context=Mi(i,b)),v.state=i.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(lm(i,o,b,u),v.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&Hc.enqueueReplaceState(v,v.state,null),Fc(i,u,v,g),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Bi(i,o){try{var u="",g=o;do u+=ve(g),g=g.return;while(g);var v=u}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:o,stack:v,digest:null}}function dm(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function um(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var oT=typeof WeakMap=="function"?WeakMap:Map;function H0(i,o,u){u=Sr(-1,u),u.tag=3,u.payload={element:null};var g=o.value;return u.callback=function(){Qc||(Qc=!0,Cm=g),um(i,o)},u}function G0(i,o,u){u=Sr(-1,u),u.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var v=o.value;u.payload=function(){return g(v)},u.callback=function(){um(i,o)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(u.callback=function(){um(i,o),typeof g!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})}),u}function q0(i,o,u){var g=i.pingCache;if(g===null){g=i.pingCache=new oT;var v=new Set;g.set(o,v)}else v=g.get(o),v===void 0&&(v=new Set,g.set(o,v));v.has(u)||(v.add(u),i=bT.bind(null,i,o,u),o.then(i,i))}function K0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Z0(i,o,u,g,v){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Sr(-1,1),o.tag=2,sa(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var lT=k.ReactCurrentOwner,Vs=!1;function As(i,o,u,g){o.child=i===null?p0(o,null,u,g):Oi(o,i.child,u,g)}function Y0(i,o,u,g,v){u=u.render;var b=o.ref;return zi(o,v),g=sm(i,o,u,g,b,v),u=nm(),i!==null&&!Vs?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,kr(i,o,v)):(_t&&u&&zh(o),o.flags|=1,As(i,o,g,v),o.child)}function J0(i,o,u,g,v){if(i===null){var b=u.type;return typeof b=="function"&&!Mm(b)&&b.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=b,Q0(i,o,b,g,v)):(i=rd(u.type,null,g,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,(i.lanes&v)===0){var _=b.memoizedProps;if(u=u.compare,u=u!==null?u:Yo,u(_,g)&&i.ref===o.ref)return kr(i,o,v)}return o.flags|=1,i=la(b,g),i.ref=o.ref,i.return=o,o.child=i}function Q0(i,o,u,g,v){if(i!==null){var b=i.memoizedProps;if(Yo(b,g)&&i.ref===o.ref)if(Vs=!1,o.pendingProps=g=b,(i.lanes&v)!==0)(i.flags&131072)!==0&&(Vs=!0);else return o.lanes=i.lanes,kr(i,o,v)}return hm(i,o,u,g,v)}function X0(i,o,u){var g=o.pendingProps,v=g.children,b=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Vi,nn),nn|=u;else{if((u&1073741824)===0)return i=b!==null?b.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Nt(Vi,nn),nn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:u,Nt(Vi,nn),nn|=g}else b!==null?(g=b.baseLanes|u,o.memoizedState=null):g=u,Nt(Vi,nn),nn|=g;return As(i,o,v,u),o.child}function ey(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function hm(i,o,u,g,v){var b=Us(u)?La:js.current;return b=Mi(o,b),zi(o,v),u=sm(i,o,u,g,b,v),g=nm(),i!==null&&!Vs?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~v,kr(i,o,v)):(_t&&g&&zh(o),o.flags|=1,As(i,o,u,v),o.child)}function ty(i,o,u,g,v){if(Us(u)){var b=!0;Pc(o)}else b=!1;if(zi(o,v),o.stateNode===null)qc(i,o),V0(o,u,g),cm(o,u,g,v),g=!0;else if(i===null){var _=o.stateNode,O=o.memoizedProps;_.props=O;var H=_.context,ce=u.contextType;typeof ce=="object"&&ce!==null?ce=pn(ce):(ce=Us(u)?La:js.current,ce=Mi(o,ce));var be=u.getDerivedStateFromProps,ke=typeof be=="function"||typeof _.getSnapshotBeforeUpdate=="function";ke||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==g||H!==ce)&&W0(o,_,g,ce),ta=!1;var we=o.memoizedState;_.state=we,Fc(o,g,_,v),H=o.memoizedState,O!==g||we!==H||Bs.current||ta?(typeof be=="function"&&(lm(o,u,be,g),H=o.memoizedState),(O=ta||U0(o,u,O,g,we,H,ce))?(ke||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=H),_.props=g,_.state=H,_.context=ce,g=O):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{_=o.stateNode,x0(i,o),O=o.memoizedProps,ce=o.type===o.elementType?O:zn(o.type,O),_.props=ce,ke=o.pendingProps,we=_.context,H=u.contextType,typeof H=="object"&&H!==null?H=pn(H):(H=Us(u)?La:js.current,H=Mi(o,H));var Me=u.getDerivedStateFromProps;(be=typeof Me=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==ke||we!==H)&&W0(o,_,g,H),ta=!1,we=o.memoizedState,_.state=we,Fc(o,g,_,v);var Oe=o.memoizedState;O!==ke||we!==Oe||Bs.current||ta?(typeof Me=="function"&&(lm(o,u,Me,g),Oe=o.memoizedState),(ce=ta||U0(o,u,ce,g,we,Oe,H)||!1)?(be||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Oe,H),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Oe,H)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||O===i.memoizedProps&&we===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&we===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=Oe),_.props=g,_.state=Oe,_.context=H,g=ce):(typeof _.componentDidUpdate!="function"||O===i.memoizedProps&&we===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&we===i.memoizedState||(o.flags|=1024),g=!1)}return mm(i,o,u,g,b,v)}function mm(i,o,u,g,v,b){ey(i,o);var _=(o.flags&128)!==0;if(!g&&!_)return v&&i0(o,u,!1),kr(i,o,b);g=o.stateNode,lT.current=o;var O=_&&typeof u.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,i!==null&&_?(o.child=Oi(o,i.child,null,b),o.child=Oi(o,null,O,b)):As(i,o,O,b),o.memoizedState=g.state,v&&i0(o,u,!0),o.child}function sy(i){var o=i.stateNode;o.pendingContext?r0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&r0(i,o.context,!1),Yh(i,o.containerInfo)}function ny(i,o,u,g,v){return Li(),Vh(v),o.flags|=256,As(i,o,u,g),o.child}var fm={dehydrated:null,treeContext:null,retryLane:0};function pm(i){return{baseLanes:i,cachePool:null,transitions:null}}function ry(i,o,u){var g=o.pendingProps,v=Lt.current,b=!1,_=(o.flags&128)!==0,O;if((O=_)||(O=i!==null&&i.memoizedState===null?!1:(v&2)!==0),O?(b=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),Nt(Lt,v&1),i===null)return Uh(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(_=g.children,i=g.fallback,b?(g=o.mode,b=o.child,_={mode:"hidden",children:_},(g&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=_):b=ad(_,g,0,null),i=Ga(i,g,u,null),b.return=o,i.return=o,b.sibling=i,o.child=b,o.child.memoizedState=pm(u),o.memoizedState=fm,i):gm(o,_));if(v=i.memoizedState,v!==null&&(O=v.dehydrated,O!==null))return cT(i,o,_,g,O,v,u);if(b){b=g.fallback,_=o.mode,v=i.child,O=v.sibling;var H={mode:"hidden",children:g.children};return(_&1)===0&&o.child!==v?(g=o.child,g.childLanes=0,g.pendingProps=H,o.deletions=null):(g=la(v,H),g.subtreeFlags=v.subtreeFlags&14680064),O!==null?b=la(O,b):(b=Ga(b,_,u,null),b.flags|=2),b.return=o,g.return=o,g.sibling=b,o.child=g,g=b,b=o.child,_=i.child.memoizedState,_=_===null?pm(u):{baseLanes:_.baseLanes|u,cachePool:null,transitions:_.transitions},b.memoizedState=_,b.childLanes=i.childLanes&~u,o.memoizedState=fm,g}return b=i.child,i=b.sibling,g=la(b,{mode:"visible",children:g.children}),(o.mode&1)===0&&(g.lanes=u),g.return=o,g.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=g,o.memoizedState=null,g}function gm(i,o){return o=ad({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Gc(i,o,u,g){return g!==null&&Vh(g),Oi(o,i.child,null,u),i=gm(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function cT(i,o,u,g,v,b,_){if(u)return o.flags&256?(o.flags&=-257,g=dm(Error(s(422))),Gc(i,o,_,g)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(b=g.fallback,v=o.mode,g=ad({mode:"visible",children:g.children},v,0,null),b=Ga(b,v,_,null),b.flags|=2,g.return=o,b.return=o,g.sibling=b,o.child=g,(o.mode&1)!==0&&Oi(o,i.child,null,_),o.child.memoizedState=pm(_),o.memoizedState=fm,b);if((o.mode&1)===0)return Gc(i,o,_,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var O=g.dgst;return g=O,b=Error(s(419)),g=dm(b,g,void 0),Gc(i,o,_,g)}if(O=(_&i.childLanes)!==0,Vs||O){if(g=os,g!==null){switch(_&-_){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|_))!==0?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,Nr(i,v),Un(g,i,v,-1))}return Rm(),g=dm(Error(s(421))),Gc(i,o,_,g)}return v.data==="$?"?(o.flags|=128,o.child=i.child,o=jT.bind(null,i),v._reactRetry=o,null):(i=b.treeContext,sn=Jr(v.nextSibling),tn=o,_t=!0,Fn=null,i!==null&&(mn[fn++]=br,mn[fn++]=jr,mn[fn++]=Oa,br=i.id,jr=i.overflow,Oa=o),o=gm(o,g.children),o.flags|=4096,o)}function ay(i,o,u){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),qh(i.return,o,u)}function xm(i,o,u,g,v){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:v}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=u,b.tailMode=v)}function iy(i,o,u){var g=o.pendingProps,v=g.revealOrder,b=g.tail;if(As(i,o,g.children,u),g=Lt.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ay(i,u,o);else if(i.tag===19)ay(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Nt(Lt,g),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&zc(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),xm(o,!1,v,u,b);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&zc(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}xm(o,!0,u,null,b);break;case"together":xm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function qc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function kr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ua|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,u=la(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=la(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function dT(i,o,u){switch(o.tag){case 3:sy(o),Li();break;case 5:w0(o);break;case 1:Us(o.type)&&Pc(o);break;case 4:Yh(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,v=o.memoizedProps.value;Nt(Ic,g._currentValue),g._currentValue=v;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(Nt(Lt,Lt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?ry(i,o,u):(Nt(Lt,Lt.current&1),i=kr(i,o,u),i!==null?i.sibling:null);Nt(Lt,Lt.current&1);break;case 19:if(g=(u&o.childLanes)!==0,(i.flags&128)!==0){if(g)return iy(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Nt(Lt,Lt.current),g)break;return null;case 22:case 23:return o.lanes=0,X0(i,o,u)}return kr(i,o,u)}var oy,ym,ly,cy;oy=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},ym=function(){},ly=function(i,o,u,g){var v=i.memoizedProps;if(v!==g){i=o.stateNode,$a(er.current);var b=null;switch(u){case"input":v=U(i,v),g=U(i,g),b=[];break;case"select":v=Q({},v,{value:void 0}),g=Q({},g,{value:void 0}),b=[];break;case"textarea":v=Le(i,v),g=Le(i,g),b=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Cc)}Dn(u,g);var _;u=null;for(ce in v)if(!g.hasOwnProperty(ce)&&v.hasOwnProperty(ce)&&v[ce]!=null)if(ce==="style"){var O=v[ce];for(_ in O)O.hasOwnProperty(_)&&(u||(u={}),u[_]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(a.hasOwnProperty(ce)?b||(b=[]):(b=b||[]).push(ce,null));for(ce in g){var H=g[ce];if(O=v?.[ce],g.hasOwnProperty(ce)&&H!==O&&(H!=null||O!=null))if(ce==="style")if(O){for(_ in O)!O.hasOwnProperty(_)||H&&H.hasOwnProperty(_)||(u||(u={}),u[_]="");for(_ in H)H.hasOwnProperty(_)&&O[_]!==H[_]&&(u||(u={}),u[_]=H[_])}else u||(b||(b=[]),b.push(ce,u)),u=H;else ce==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,O=O?O.__html:void 0,H!=null&&O!==H&&(b=b||[]).push(ce,H)):ce==="children"?typeof H!="string"&&typeof H!="number"||(b=b||[]).push(ce,""+H):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(a.hasOwnProperty(ce)?(H!=null&&ce==="onScroll"&&Ct("scroll",i),b||O===H||(b=[])):(b=b||[]).push(ce,H))}u&&(b=b||[]).push("style",u);var ce=b;(o.updateQueue=ce)&&(o.flags|=4)}},cy=function(i,o,u,g){u!==g&&(o.flags|=4)};function ul(i,o){if(!_t)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Ss(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,g=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=g,i.childLanes=u,o}function uT(i,o,u){var g=o.pendingProps;switch($h(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(o),null;case 1:return Us(o.type)&&Ec(),Ss(o),null;case 3:return g=o.stateNode,$i(),Tt(Bs),Tt(js),Xh(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Mc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Fn!==null&&(Pm(Fn),Fn=null))),ym(i,o),Ss(o),null;case 5:Jh(o);var v=$a(il.current);if(u=o.type,i!==null&&o.stateNode!=null)ly(i,o,u,g,v),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(s(166));return Ss(o),null}if(i=$a(er.current),Mc(o)){g=o.stateNode,u=o.type;var b=o.memoizedProps;switch(g[Xn]=o,g[tl]=b,i=(o.mode&1)!==0,u){case"dialog":Ct("cancel",g),Ct("close",g);break;case"iframe":case"object":case"embed":Ct("load",g);break;case"video":case"audio":for(v=0;v<Qo.length;v++)Ct(Qo[v],g);break;case"source":Ct("error",g);break;case"img":case"image":case"link":Ct("error",g),Ct("load",g);break;case"details":Ct("toggle",g);break;case"input":Te(g,b),Ct("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},Ct("invalid",g);break;case"textarea":et(g,b),Ct("invalid",g)}Dn(u,b),v=null;for(var _ in b)if(b.hasOwnProperty(_)){var O=b[_];_==="children"?typeof O=="string"?g.textContent!==O&&(b.suppressHydrationWarning!==!0&&kc(g.textContent,O,i),v=["children",O]):typeof O=="number"&&g.textContent!==""+O&&(b.suppressHydrationWarning!==!0&&kc(g.textContent,O,i),v=["children",""+O]):a.hasOwnProperty(_)&&O!=null&&_==="onScroll"&&Ct("scroll",g)}switch(u){case"input":ye(g),ct(g,b,!0);break;case"textarea":ye(g),ds(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=Cc)}g=v,o.updateQueue=g,g!==null&&(o.flags|=4)}else{_=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Bt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=_.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=_.createElement(u,{is:g.is}):(i=_.createElement(u),u==="select"&&(_=i,g.multiple?_.multiple=!0:g.size&&(_.size=g.size))):i=_.createElementNS(i,u),i[Xn]=o,i[tl]=g,oy(i,o,!1,!1),o.stateNode=i;e:{switch(_=Ma(u,g),u){case"dialog":Ct("cancel",i),Ct("close",i),v=g;break;case"iframe":case"object":case"embed":Ct("load",i),v=g;break;case"video":case"audio":for(v=0;v<Qo.length;v++)Ct(Qo[v],i);v=g;break;case"source":Ct("error",i),v=g;break;case"img":case"image":case"link":Ct("error",i),Ct("load",i),v=g;break;case"details":Ct("toggle",i),v=g;break;case"input":Te(i,g),v=U(i,g),Ct("invalid",i);break;case"option":v=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},v=Q({},g,{value:void 0}),Ct("invalid",i);break;case"textarea":et(i,g),v=Le(i,g),Ct("invalid",i);break;default:v=g}Dn(u,v),O=v;for(b in O)if(O.hasOwnProperty(b)){var H=O[b];b==="style"?xr(i,H):b==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&gr(i,H)):b==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&Os(i,H):typeof H=="number"&&Os(i,""+H):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(a.hasOwnProperty(b)?H!=null&&b==="onScroll"&&Ct("scroll",i):H!=null&&A(i,b,H,_))}switch(u){case"input":ye(i),ct(i,g,!1);break;case"textarea":ye(i),ds(i);break;case"option":g.value!=null&&i.setAttribute("value",""+G(g.value));break;case"select":i.multiple=!!g.multiple,b=g.value,b!=null?le(i,!!g.multiple,b,!1):g.defaultValue!=null&&le(i,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=Cc)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ss(o),null;case 6:if(i&&o.stateNode!=null)cy(i,o,i.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(s(166));if(u=$a(il.current),$a(er.current),Mc(o)){if(g=o.stateNode,u=o.memoizedProps,g[Xn]=o,(b=g.nodeValue!==u)&&(i=tn,i!==null))switch(i.tag){case 3:kc(g.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&kc(g.nodeValue,u,(i.mode&1)!==0)}b&&(o.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[Xn]=o,o.stateNode=g}return Ss(o),null;case 13:if(Tt(Lt),g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_t&&sn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)h0(),Li(),o.flags|=98560,b=!1;else if(b=Mc(o),g!==null&&g.dehydrated!==null){if(i===null){if(!b)throw Error(s(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Xn]=o}else Li(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ss(o),b=!1}else Fn!==null&&(Pm(Fn),Fn=null),b=!0;if(!b)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Lt.current&1)!==0?ss===0&&(ss=3):Rm())),o.updateQueue!==null&&(o.flags|=4),Ss(o),null);case 4:return $i(),ym(i,o),i===null&&Xo(o.stateNode.containerInfo),Ss(o),null;case 10:return Gh(o.type._context),Ss(o),null;case 17:return Us(o.type)&&Ec(),Ss(o),null;case 19:if(Tt(Lt),b=o.memoizedState,b===null)return Ss(o),null;if(g=(o.flags&128)!==0,_=b.rendering,_===null)if(g)ul(b,!1);else{if(ss!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=zc(i),_!==null){for(o.flags|=128,ul(b,!1),g=_.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=u,u=o.child;u!==null;)b=u,i=g,b.flags&=14680066,_=b.alternate,_===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=_.childLanes,b.lanes=_.lanes,b.child=_.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=_.memoizedProps,b.memoizedState=_.memoizedState,b.updateQueue=_.updateQueue,b.type=_.type,i=_.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Nt(Lt,Lt.current&1|2),o.child}i=i.sibling}b.tail!==null&&_e()>Wi&&(o.flags|=128,g=!0,ul(b,!1),o.lanes=4194304)}else{if(!g)if(i=zc(_),i!==null){if(o.flags|=128,g=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),ul(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!_t)return Ss(o),null}else 2*_e()-b.renderingStartTime>Wi&&u!==1073741824&&(o.flags|=128,g=!0,ul(b,!1),o.lanes=4194304);b.isBackwards?(_.sibling=o.child,o.child=_):(u=b.last,u!==null?u.sibling=_:o.child=_,b.last=_)}return b.tail!==null?(o=b.tail,b.rendering=o,b.tail=o.sibling,b.renderingStartTime=_e(),o.sibling=null,u=Lt.current,Nt(Lt,g?u&1|2:u&1),o):(Ss(o),null);case 22:case 23:return _m(),g=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(o.flags|=8192),g&&(o.mode&1)!==0?(nn&1073741824)!==0&&(Ss(o),o.subtreeFlags&6&&(o.flags|=8192)):Ss(o),null;case 24:return null;case 25:return null}throw Error(s(156,o.tag))}function hT(i,o){switch($h(o),o.tag){case 1:return Us(o.type)&&Ec(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return $i(),Tt(Bs),Tt(js),Xh(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Jh(o),null;case 13:if(Tt(Lt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Li()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Tt(Lt),null;case 4:return $i(),null;case 10:return Gh(o.type._context),null;case 22:case 23:return _m(),null;case 24:return null;default:return null}}var Kc=!1,ks=!1,mT=typeof WeakSet=="function"?WeakSet:Set,De=null;function Ui(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){Ut(i,o,g)}else u.current=null}function vm(i,o,u){try{u()}catch(g){Ut(i,o,g)}}var dy=!1;function fT(i,o){if(_h=fc,i=Ux(),Nh(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var v=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var _=0,O=-1,H=-1,ce=0,be=0,ke=i,we=null;t:for(;;){for(var Me;ke!==u||v!==0&&ke.nodeType!==3||(O=_+v),ke!==b||g!==0&&ke.nodeType!==3||(H=_+g),ke.nodeType===3&&(_+=ke.nodeValue.length),(Me=ke.firstChild)!==null;)we=ke,ke=Me;for(;;){if(ke===i)break t;if(we===u&&++ce===v&&(O=_),we===b&&++be===g&&(H=_),(Me=ke.nextSibling)!==null)break;ke=we,we=ke.parentNode}ke=Me}u=O===-1||H===-1?null:{start:O,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(Rh={focusedElem:i,selectionRange:u},fc=!1,De=o;De!==null;)if(o=De,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,De=i;else for(;De!==null;){o=De;try{var Oe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var $e=Oe.memoizedProps,Ht=Oe.memoizedState,ee=o.stateNode,Z=ee.getSnapshotBeforeUpdate(o.elementType===o.type?$e:zn(o.type,$e),Ht);ee.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ae=o.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Ce){Ut(o,o.return,Ce)}if(i=o.sibling,i!==null){i.return=o.return,De=i;break}De=o.return}return Oe=dy,dy=!1,Oe}function hl(i,o,u){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&i)===i){var b=v.destroy;v.destroy=void 0,b!==void 0&&vm(o,u,b)}v=v.next}while(v!==g)}}function Zc(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var g=u.create;u.destroy=g()}u=u.next}while(u!==o)}}function wm(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function uy(i){var o=i.alternate;o!==null&&(i.alternate=null,uy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Xn],delete o[tl],delete o[Lh],delete o[YC],delete o[JC])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function hy(i){return i.tag===5||i.tag===3||i.tag===4}function my(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||hy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bm(i,o,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Cc));else if(g!==4&&(i=i.child,i!==null))for(bm(i,o,u),i=i.sibling;i!==null;)bm(i,o,u),i=i.sibling}function jm(i,o,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(jm(i,o,u),i=i.sibling;i!==null;)jm(i,o,u),i=i.sibling}var ms=null,$n=!1;function na(i,o,u){for(u=u.child;u!==null;)fy(i,o,u),u=u.sibling}function fy(i,o,u){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(Ln,u)}catch{}switch(u.tag){case 5:ks||Ui(u,o);case 6:var g=ms,v=$n;ms=null,na(i,o,u),ms=g,$n=v,ms!==null&&($n?(i=ms,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):ms.removeChild(u.stateNode));break;case 18:ms!==null&&($n?(i=ms,u=u.stateNode,i.nodeType===8?Ih(i.parentNode,u):i.nodeType===1&&Ih(i,u),Wo(i)):Ih(ms,u.stateNode));break;case 4:g=ms,v=$n,ms=u.stateNode.containerInfo,$n=!0,na(i,o,u),ms=g,$n=v;break;case 0:case 11:case 14:case 15:if(!ks&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var b=v,_=b.destroy;b=b.tag,_!==void 0&&((b&2)!==0||(b&4)!==0)&&vm(u,o,_),v=v.next}while(v!==g)}na(i,o,u);break;case 1:if(!ks&&(Ui(u,o),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(O){Ut(u,o,O)}na(i,o,u);break;case 21:na(i,o,u);break;case 22:u.mode&1?(ks=(g=ks)||u.memoizedState!==null,na(i,o,u),ks=g):na(i,o,u);break;default:na(i,o,u)}}function py(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new mT),o.forEach(function(g){var v=NT.bind(null,i,g);u.has(g)||(u.add(g),g.then(v,v))})}}function Bn(i,o){var u=o.deletions;if(u!==null)for(var g=0;g<u.length;g++){var v=u[g];try{var b=i,_=o,O=_;e:for(;O!==null;){switch(O.tag){case 5:ms=O.stateNode,$n=!1;break e;case 3:ms=O.stateNode.containerInfo,$n=!0;break e;case 4:ms=O.stateNode.containerInfo,$n=!0;break e}O=O.return}if(ms===null)throw Error(s(160));fy(b,_,v),ms=null,$n=!1;var H=v.alternate;H!==null&&(H.return=null),v.return=null}catch(ce){Ut(v,o,ce)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)gy(o,i),o=o.sibling}function gy(i,o){var u=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Bn(o,i),sr(i),g&4){try{hl(3,i,i.return),Zc(3,i)}catch($e){Ut(i,i.return,$e)}try{hl(5,i,i.return)}catch($e){Ut(i,i.return,$e)}}break;case 1:Bn(o,i),sr(i),g&512&&u!==null&&Ui(u,u.return);break;case 5:if(Bn(o,i),sr(i),g&512&&u!==null&&Ui(u,u.return),i.flags&32){var v=i.stateNode;try{Os(v,"")}catch($e){Ut(i,i.return,$e)}}if(g&4&&(v=i.stateNode,v!=null)){var b=i.memoizedProps,_=u!==null?u.memoizedProps:b,O=i.type,H=i.updateQueue;if(i.updateQueue=null,H!==null)try{O==="input"&&b.type==="radio"&&b.name!=null&&Se(v,b),Ma(O,_);var ce=Ma(O,b);for(_=0;_<H.length;_+=2){var be=H[_],ke=H[_+1];be==="style"?xr(v,ke):be==="dangerouslySetInnerHTML"?gr(v,ke):be==="children"?Os(v,ke):A(v,be,ke,ce)}switch(O){case"input":We(v,b);break;case"textarea":wt(v,b);break;case"select":var we=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var Me=b.value;Me!=null?le(v,!!b.multiple,Me,!1):we!==!!b.multiple&&(b.defaultValue!=null?le(v,!!b.multiple,b.defaultValue,!0):le(v,!!b.multiple,b.multiple?[]:"",!1))}v[tl]=b}catch($e){Ut(i,i.return,$e)}}break;case 6:if(Bn(o,i),sr(i),g&4){if(i.stateNode===null)throw Error(s(162));v=i.stateNode,b=i.memoizedProps;try{v.nodeValue=b}catch($e){Ut(i,i.return,$e)}}break;case 3:if(Bn(o,i),sr(i),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Wo(o.containerInfo)}catch($e){Ut(i,i.return,$e)}break;case 4:Bn(o,i),sr(i);break;case 13:Bn(o,i),sr(i),v=i.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(km=_e())),g&4&&py(i);break;case 22:if(be=u!==null&&u.memoizedState!==null,i.mode&1?(ks=(ce=ks)||be,Bn(o,i),ks=ce):Bn(o,i),sr(i),g&8192){if(ce=i.memoizedState!==null,(i.stateNode.isHidden=ce)&&!be&&(i.mode&1)!==0)for(De=i,be=i.child;be!==null;){for(ke=De=be;De!==null;){switch(we=De,Me=we.child,we.tag){case 0:case 11:case 14:case 15:hl(4,we,we.return);break;case 1:Ui(we,we.return);var Oe=we.stateNode;if(typeof Oe.componentWillUnmount=="function"){g=we,u=we.return;try{o=g,Oe.props=o.memoizedProps,Oe.state=o.memoizedState,Oe.componentWillUnmount()}catch($e){Ut(g,u,$e)}}break;case 5:Ui(we,we.return);break;case 22:if(we.memoizedState!==null){vy(ke);continue}}Me!==null?(Me.return=we,De=Me):vy(ke)}be=be.sibling}e:for(be=null,ke=i;;){if(ke.tag===5){if(be===null){be=ke;try{v=ke.stateNode,ce?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(O=ke.stateNode,H=ke.memoizedProps.style,_=H!=null&&H.hasOwnProperty("display")?H.display:null,O.style.display=wi("display",_))}catch($e){Ut(i,i.return,$e)}}}else if(ke.tag===6){if(be===null)try{ke.stateNode.nodeValue=ce?"":ke.memoizedProps}catch($e){Ut(i,i.return,$e)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===i)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===i)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===i)break e;be===ke&&(be=null),ke=ke.return}be===ke&&(be=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:Bn(o,i),sr(i),g&4&&py(i);break;case 21:break;default:Bn(o,i),sr(i)}}function sr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(hy(u)){var g=u;break e}u=u.return}throw Error(s(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(Os(v,""),g.flags&=-33);var b=my(i);jm(i,b,v);break;case 3:case 4:var _=g.stateNode.containerInfo,O=my(i);bm(i,O,_);break;default:throw Error(s(161))}}catch(H){Ut(i,i.return,H)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function pT(i,o,u){De=i,xy(i)}function xy(i,o,u){for(var g=(i.mode&1)!==0;De!==null;){var v=De,b=v.child;if(v.tag===22&&g){var _=v.memoizedState!==null||Kc;if(!_){var O=v.alternate,H=O!==null&&O.memoizedState!==null||ks;O=Kc;var ce=ks;if(Kc=_,(ks=H)&&!ce)for(De=v;De!==null;)_=De,H=_.child,_.tag===22&&_.memoizedState!==null?wy(v):H!==null?(H.return=_,De=H):wy(v);for(;b!==null;)De=b,xy(b),b=b.sibling;De=v,Kc=O,ks=ce}yy(i)}else(v.subtreeFlags&8772)!==0&&b!==null?(b.return=v,De=b):yy(i)}}function yy(i){for(;De!==null;){var o=De;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:ks||Zc(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!ks)if(u===null)g.componentDidMount();else{var v=o.elementType===o.type?u.memoizedProps:zn(o.type,u.memoizedProps);g.componentDidUpdate(v,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=o.updateQueue;b!==null&&v0(o,b,g);break;case 3:var _=o.updateQueue;if(_!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}v0(o,_,u)}break;case 5:var O=o.stateNode;if(u===null&&o.flags&4){u=O;var H=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ce=o.alternate;if(ce!==null){var be=ce.memoizedState;if(be!==null){var ke=be.dehydrated;ke!==null&&Wo(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ks||o.flags&512&&wm(o)}catch(we){Ut(o,o.return,we)}}if(o===i){De=null;break}if(u=o.sibling,u!==null){u.return=o.return,De=u;break}De=o.return}}function vy(i){for(;De!==null;){var o=De;if(o===i){De=null;break}var u=o.sibling;if(u!==null){u.return=o.return,De=u;break}De=o.return}}function wy(i){for(;De!==null;){var o=De;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Zc(4,o)}catch(H){Ut(o,u,H)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var v=o.return;try{g.componentDidMount()}catch(H){Ut(o,v,H)}}var b=o.return;try{wm(o)}catch(H){Ut(o,b,H)}break;case 5:var _=o.return;try{wm(o)}catch(H){Ut(o,_,H)}}}catch(H){Ut(o,o.return,H)}if(o===i){De=null;break}var O=o.sibling;if(O!==null){O.return=o.return,De=O;break}De=o.return}}var gT=Math.ceil,Yc=k.ReactCurrentDispatcher,Nm=k.ReactCurrentOwner,xn=k.ReactCurrentBatchConfig,dt=0,os=null,Jt=null,fs=0,nn=0,Vi=Qr(0),ss=0,ml=null,Ua=0,Jc=0,Sm=0,fl=null,Ws=null,km=0,Wi=1/0,Cr=null,Qc=!1,Cm=null,ra=null,Xc=!1,aa=null,ed=0,pl=0,Tm=null,td=-1,sd=0;function _s(){return(dt&6)!==0?_e():td!==-1?td:td=_e()}function ia(i){return(i.mode&1)===0?1:(dt&2)!==0&&fs!==0?fs&-fs:XC.transition!==null?(sd===0&&(sd=mx()),sd):(i=yt,i!==0||(i=window.event,i=i===void 0?16:jx(i.type)),i)}function Un(i,o,u,g){if(50<pl)throw pl=0,Tm=null,Error(s(185));zo(i,u,g),((dt&2)===0||i!==os)&&(i===os&&((dt&2)===0&&(Jc|=u),ss===4&&oa(i,fs)),Hs(i,g),u===1&&dt===0&&(o.mode&1)===0&&(Wi=_e()+500,Ac&&ea()))}function Hs(i,o){var u=i.callbackNode;X2(i,o);var g=uc(i,i===os?fs:0);if(g===0)u!==null&&Ee(u),i.callbackNode=null,i.callbackPriority=0;else if(o=g&-g,i.callbackPriority!==o){if(u!=null&&Ee(u),o===1)i.tag===0?QC(jy.bind(null,i)):o0(jy.bind(null,i)),KC(function(){(dt&6)===0&&ea()}),u=null;else{switch(fx(g)){case 1:u=xt;break;case 4:u=Qn;break;case 16:u=it;break;case 536870912:u=ws;break;default:u=it}u=Ay(u,by.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function by(i,o){if(td=-1,sd=0,(dt&6)!==0)throw Error(s(327));var u=i.callbackNode;if(Hi()&&i.callbackNode!==u)return null;var g=uc(i,i===os?fs:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||o)o=nd(i,g);else{o=g;var v=dt;dt|=2;var b=Sy();(os!==i||fs!==o)&&(Cr=null,Wi=_e()+500,Wa(i,o));do try{vT();break}catch(O){Ny(i,O)}while(!0);Hh(),Yc.current=b,dt=v,Jt!==null?o=0:(os=null,fs=0,o=ss)}if(o!==0){if(o===2&&(v=oh(i),v!==0&&(g=v,o=Em(i,v))),o===1)throw u=ml,Wa(i,0),oa(i,g),Hs(i,_e()),u;if(o===6)oa(i,g);else{if(v=i.current.alternate,(g&30)===0&&!xT(v)&&(o=nd(i,g),o===2&&(b=oh(i),b!==0&&(g=b,o=Em(i,b))),o===1))throw u=ml,Wa(i,0),oa(i,g),Hs(i,_e()),u;switch(i.finishedWork=v,i.finishedLanes=g,o){case 0:case 1:throw Error(s(345));case 2:Ha(i,Ws,Cr);break;case 3:if(oa(i,g),(g&130023424)===g&&(o=km+500-_e(),10<o)){if(uc(i,0)!==0)break;if(v=i.suspendedLanes,(v&g)!==g){_s(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=Dh(Ha.bind(null,i,Ws,Cr),o);break}Ha(i,Ws,Cr);break;case 4:if(oa(i,g),(g&4194240)===g)break;for(o=i.eventTimes,v=-1;0<g;){var _=31-bs(g);b=1<<_,_=o[_],_>v&&(v=_),g&=~b}if(g=v,g=_e()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*gT(g/1960))-g,10<g){i.timeoutHandle=Dh(Ha.bind(null,i,Ws,Cr),g);break}Ha(i,Ws,Cr);break;case 5:Ha(i,Ws,Cr);break;default:throw Error(s(329))}}}return Hs(i,_e()),i.callbackNode===u?by.bind(null,i):null}function Em(i,o){var u=fl;return i.current.memoizedState.isDehydrated&&(Wa(i,o).flags|=256),i=nd(i,o),i!==2&&(o=Ws,Ws=u,o!==null&&Pm(o)),i}function Pm(i){Ws===null?Ws=i:Ws.push.apply(Ws,i)}function xT(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var v=u[g],b=v.getSnapshot;v=v.value;try{if(!On(b(),v))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oa(i,o){for(o&=~Sm,o&=~Jc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-bs(o),g=1<<u;i[u]=-1,o&=~g}}function jy(i){if((dt&6)!==0)throw Error(s(327));Hi();var o=uc(i,0);if((o&1)===0)return Hs(i,_e()),null;var u=nd(i,o);if(i.tag!==0&&u===2){var g=oh(i);g!==0&&(o=g,u=Em(i,g))}if(u===1)throw u=ml,Wa(i,0),oa(i,o),Hs(i,_e()),u;if(u===6)throw Error(s(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ha(i,Ws,Cr),Hs(i,_e()),null}function Am(i,o){var u=dt;dt|=1;try{return i(o)}finally{dt=u,dt===0&&(Wi=_e()+500,Ac&&ea())}}function Va(i){aa!==null&&aa.tag===0&&(dt&6)===0&&Hi();var o=dt;dt|=1;var u=xn.transition,g=yt;try{if(xn.transition=null,yt=1,i)return i()}finally{yt=g,xn.transition=u,dt=o,(dt&6)===0&&ea()}}function _m(){nn=Vi.current,Tt(Vi)}function Wa(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,qC(u)),Jt!==null)for(u=Jt.return;u!==null;){var g=u;switch($h(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Ec();break;case 3:$i(),Tt(Bs),Tt(js),Xh();break;case 5:Jh(g);break;case 4:$i();break;case 13:Tt(Lt);break;case 19:Tt(Lt);break;case 10:Gh(g.type._context);break;case 22:case 23:_m()}u=u.return}if(os=i,Jt=i=la(i.current,null),fs=nn=o,ss=0,ml=null,Sm=Jc=Ua=0,Ws=fl=null,za!==null){for(o=0;o<za.length;o++)if(u=za[o],g=u.interleaved,g!==null){u.interleaved=null;var v=g.next,b=u.pending;if(b!==null){var _=b.next;b.next=v,g.next=_}u.pending=g}za=null}return i}function Ny(i,o){do{var u=Jt;try{if(Hh(),$c.current=Wc,Bc){for(var g=Ot.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}Bc=!1}if(Ba=0,is=ts=Ot=null,ol=!1,ll=0,Nm.current=null,u===null||u.return===null){ss=1,ml=o,Jt=null;break}e:{var b=i,_=u.return,O=u,H=o;if(o=fs,O.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ce=H,be=O,ke=be.tag;if((be.mode&1)===0&&(ke===0||ke===11||ke===15)){var we=be.alternate;we?(be.updateQueue=we.updateQueue,be.memoizedState=we.memoizedState,be.lanes=we.lanes):(be.updateQueue=null,be.memoizedState=null)}var Me=K0(_);if(Me!==null){Me.flags&=-257,Z0(Me,_,O,b,o),Me.mode&1&&q0(b,ce,o),o=Me,H=ce;var Oe=o.updateQueue;if(Oe===null){var $e=new Set;$e.add(H),o.updateQueue=$e}else Oe.add(H);break e}else{if((o&1)===0){q0(b,ce,o),Rm();break e}H=Error(s(426))}}else if(_t&&O.mode&1){var Ht=K0(_);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),Z0(Ht,_,O,b,o),Vh(Bi(H,O));break e}}b=H=Bi(H,O),ss!==4&&(ss=2),fl===null?fl=[b]:fl.push(b),b=_;do{switch(b.tag){case 3:b.flags|=65536,o&=-o,b.lanes|=o;var ee=H0(b,H,o);y0(b,ee);break e;case 1:O=H;var Z=b.type,ae=b.stateNode;if((b.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(ra===null||!ra.has(ae)))){b.flags|=65536,o&=-o,b.lanes|=o;var Ce=G0(b,O,o);y0(b,Ce);break e}}b=b.return}while(b!==null)}Cy(u)}catch(Be){o=Be,Jt===u&&u!==null&&(Jt=u=u.return);continue}break}while(!0)}function Sy(){var i=Yc.current;return Yc.current=Wc,i===null?Wc:i}function Rm(){(ss===0||ss===3||ss===2)&&(ss=4),os===null||(Ua&268435455)===0&&(Jc&268435455)===0||oa(os,fs)}function nd(i,o){var u=dt;dt|=2;var g=Sy();(os!==i||fs!==o)&&(Cr=null,Wa(i,o));do try{yT();break}catch(v){Ny(i,v)}while(!0);if(Hh(),dt=u,Yc.current=g,Jt!==null)throw Error(s(261));return os=null,fs=0,ss}function yT(){for(;Jt!==null;)ky(Jt)}function vT(){for(;Jt!==null&&!Re();)ky(Jt)}function ky(i){var o=Py(i.alternate,i,nn);i.memoizedProps=i.pendingProps,o===null?Cy(i):Jt=o,Nm.current=null}function Cy(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=uT(u,o,nn),u!==null){Jt=u;return}}else{if(u=hT(u,o),u!==null){u.flags&=32767,Jt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ss=6,Jt=null;return}}if(o=o.sibling,o!==null){Jt=o;return}Jt=o=i}while(o!==null);ss===0&&(ss=5)}function Ha(i,o,u){var g=yt,v=xn.transition;try{xn.transition=null,yt=1,wT(i,o,u,g)}finally{xn.transition=v,yt=g}return null}function wT(i,o,u,g){do Hi();while(aa!==null);if((dt&6)!==0)throw Error(s(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(s(177));i.callbackNode=null,i.callbackPriority=0;var b=u.lanes|u.childLanes;if(eC(i,b),i===os&&(Jt=os=null,fs=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Xc||(Xc=!0,Ay(it,function(){return Hi(),null})),b=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||b){b=xn.transition,xn.transition=null;var _=yt;yt=1;var O=dt;dt|=4,Nm.current=null,fT(i,u),gy(u,i),$C(Rh),fc=!!_h,Rh=_h=null,i.current=u,pT(u),Ve(),dt=O,yt=_,xn.transition=b}else i.current=u;if(Xc&&(Xc=!1,aa=i,ed=v),b=i.pendingLanes,b===0&&(ra=null),Oo(u.stateNode),Hs(i,_e()),o!==null)for(g=i.onRecoverableError,u=0;u<o.length;u++)v=o[u],g(v.value,{componentStack:v.stack,digest:v.digest});if(Qc)throw Qc=!1,i=Cm,Cm=null,i;return(ed&1)!==0&&i.tag!==0&&Hi(),b=i.pendingLanes,(b&1)!==0?i===Tm?pl++:(pl=0,Tm=i):pl=0,ea(),null}function Hi(){if(aa!==null){var i=fx(ed),o=xn.transition,u=yt;try{if(xn.transition=null,yt=16>i?16:i,aa===null)var g=!1;else{if(i=aa,aa=null,ed=0,(dt&6)!==0)throw Error(s(331));var v=dt;for(dt|=4,De=i.current;De!==null;){var b=De,_=b.child;if((De.flags&16)!==0){var O=b.deletions;if(O!==null){for(var H=0;H<O.length;H++){var ce=O[H];for(De=ce;De!==null;){var be=De;switch(be.tag){case 0:case 11:case 15:hl(8,be,b)}var ke=be.child;if(ke!==null)ke.return=be,De=ke;else for(;De!==null;){be=De;var we=be.sibling,Me=be.return;if(uy(be),be===ce){De=null;break}if(we!==null){we.return=Me,De=we;break}De=Me}}}var Oe=b.alternate;if(Oe!==null){var $e=Oe.child;if($e!==null){Oe.child=null;do{var Ht=$e.sibling;$e.sibling=null,$e=Ht}while($e!==null)}}De=b}}if((b.subtreeFlags&2064)!==0&&_!==null)_.return=b,De=_;else e:for(;De!==null;){if(b=De,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:hl(9,b,b.return)}var ee=b.sibling;if(ee!==null){ee.return=b.return,De=ee;break e}De=b.return}}var Z=i.current;for(De=Z;De!==null;){_=De;var ae=_.child;if((_.subtreeFlags&2064)!==0&&ae!==null)ae.return=_,De=ae;else e:for(_=Z;De!==null;){if(O=De,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Zc(9,O)}}catch(Be){Ut(O,O.return,Be)}if(O===_){De=null;break e}var Ce=O.sibling;if(Ce!==null){Ce.return=O.return,De=Ce;break e}De=O.return}}if(dt=v,ea(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(Ln,i)}catch{}g=!0}return g}finally{yt=u,xn.transition=o}}return!1}function Ty(i,o,u){o=Bi(u,o),o=H0(i,o,1),i=sa(i,o,1),o=_s(),i!==null&&(zo(i,1,o),Hs(i,o))}function Ut(i,o,u){if(i.tag===3)Ty(i,i,u);else for(;o!==null;){if(o.tag===3){Ty(o,i,u);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ra===null||!ra.has(g))){i=Bi(u,i),i=G0(o,i,1),o=sa(o,i,1),i=_s(),o!==null&&(zo(o,1,i),Hs(o,i));break}}o=o.return}}function bT(i,o,u){var g=i.pingCache;g!==null&&g.delete(o),o=_s(),i.pingedLanes|=i.suspendedLanes&u,os===i&&(fs&u)===u&&(ss===4||ss===3&&(fs&130023424)===fs&&500>_e()-km?Wa(i,0):Sm|=u),Hs(i,o)}function Ey(i,o){o===0&&((i.mode&1)===0?o=1:(o=dc,dc<<=1,(dc&130023424)===0&&(dc=4194304)));var u=_s();i=Nr(i,o),i!==null&&(zo(i,o,u),Hs(i,u))}function jT(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),Ey(i,u)}function NT(i,o){var u=0;switch(i.tag){case 13:var g=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(o),Ey(i,u)}var Py;Py=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Bs.current)Vs=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return Vs=!1,dT(i,o,u);Vs=(i.flags&131072)!==0}else Vs=!1,_t&&(o.flags&1048576)!==0&&l0(o,Rc,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;qc(i,o),i=o.pendingProps;var v=Mi(o,js.current);zi(o,u),v=sm(null,o,g,i,v,u);var b=nm();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Us(g)?(b=!0,Pc(o)):b=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Zh(o),v.updater=Hc,o.stateNode=v,v._reactInternals=o,cm(o,g,i,u),o=mm(null,o,g,!0,b,u)):(o.tag=0,_t&&b&&zh(o),As(null,o,v,u),o=o.child),o;case 16:g=o.elementType;e:{switch(qc(i,o),i=o.pendingProps,v=g._init,g=v(g._payload),o.type=g,v=o.tag=kT(g),i=zn(g,i),v){case 0:o=hm(null,o,g,i,u);break e;case 1:o=ty(null,o,g,i,u);break e;case 11:o=Y0(null,o,g,i,u);break e;case 14:o=J0(null,o,g,zn(g.type,i),u);break e}throw Error(s(306,g,""))}return o;case 0:return g=o.type,v=o.pendingProps,v=o.elementType===g?v:zn(g,v),hm(i,o,g,v,u);case 1:return g=o.type,v=o.pendingProps,v=o.elementType===g?v:zn(g,v),ty(i,o,g,v,u);case 3:e:{if(sy(o),i===null)throw Error(s(387));g=o.pendingProps,b=o.memoizedState,v=b.element,x0(i,o),Fc(o,g,null,u);var _=o.memoizedState;if(g=_.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){v=Bi(Error(s(423)),o),o=ny(i,o,g,u,v);break e}else if(g!==v){v=Bi(Error(s(424)),o),o=ny(i,o,g,u,v);break e}else for(sn=Jr(o.stateNode.containerInfo.firstChild),tn=o,_t=!0,Fn=null,u=p0(o,null,g,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Li(),g===v){o=kr(i,o,u);break e}As(i,o,g,u)}o=o.child}return o;case 5:return w0(o),i===null&&Uh(o),g=o.type,v=o.pendingProps,b=i!==null?i.memoizedProps:null,_=v.children,Mh(g,v)?_=null:b!==null&&Mh(g,b)&&(o.flags|=32),ey(i,o),As(i,o,_,u),o.child;case 6:return i===null&&Uh(o),null;case 13:return ry(i,o,u);case 4:return Yh(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=Oi(o,null,g,u):As(i,o,g,u),o.child;case 11:return g=o.type,v=o.pendingProps,v=o.elementType===g?v:zn(g,v),Y0(i,o,g,v,u);case 7:return As(i,o,o.pendingProps,u),o.child;case 8:return As(i,o,o.pendingProps.children,u),o.child;case 12:return As(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(g=o.type._context,v=o.pendingProps,b=o.memoizedProps,_=v.value,Nt(Ic,g._currentValue),g._currentValue=_,b!==null)if(On(b.value,_)){if(b.children===v.children&&!Bs.current){o=kr(i,o,u);break e}}else for(b=o.child,b!==null&&(b.return=o);b!==null;){var O=b.dependencies;if(O!==null){_=b.child;for(var H=O.firstContext;H!==null;){if(H.context===g){if(b.tag===1){H=Sr(-1,u&-u),H.tag=2;var ce=b.updateQueue;if(ce!==null){ce=ce.shared;var be=ce.pending;be===null?H.next=H:(H.next=be.next,be.next=H),ce.pending=H}}b.lanes|=u,H=b.alternate,H!==null&&(H.lanes|=u),qh(b.return,u,o),O.lanes|=u;break}H=H.next}}else if(b.tag===10)_=b.type===o.type?null:b.child;else if(b.tag===18){if(_=b.return,_===null)throw Error(s(341));_.lanes|=u,O=_.alternate,O!==null&&(O.lanes|=u),qh(_,u,o),_=b.sibling}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===o){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}As(i,o,v.children,u),o=o.child}return o;case 9:return v=o.type,g=o.pendingProps.children,zi(o,u),v=pn(v),g=g(v),o.flags|=1,As(i,o,g,u),o.child;case 14:return g=o.type,v=zn(g,o.pendingProps),v=zn(g.type,v),J0(i,o,g,v,u);case 15:return Q0(i,o,o.type,o.pendingProps,u);case 17:return g=o.type,v=o.pendingProps,v=o.elementType===g?v:zn(g,v),qc(i,o),o.tag=1,Us(g)?(i=!0,Pc(o)):i=!1,zi(o,u),V0(o,g,v),cm(o,g,v,u),mm(null,o,g,!0,i,u);case 19:return iy(i,o,u);case 22:return X0(i,o,u)}throw Error(s(156,o.tag))};function Ay(i,o){return Ne(i,o)}function ST(i,o,u,g){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(i,o,u,g){return new ST(i,o,u,g)}function Mm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function kT(i){if(typeof i=="function")return Mm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===K)return 11;if(i===re)return 14}return 2}function la(i,o){var u=i.alternate;return u===null?(u=yn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function rd(i,o,u,g,v,b){var _=2;if(g=i,typeof i=="function")Mm(i)&&(_=1);else if(typeof i=="string")_=5;else e:switch(i){case W:return Ga(u.children,v,b,o);case z:_=8,v|=8;break;case oe:return i=yn(12,u,o,v|2),i.elementType=oe,i.lanes=b,i;case B:return i=yn(13,u,o,v),i.elementType=B,i.lanes=b,i;case V:return i=yn(19,u,o,v),i.elementType=V,i.lanes=b,i;case D:return ad(u,v,b,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:_=10;break e;case J:_=9;break e;case K:_=11;break e;case re:_=14;break e;case M:_=16,g=null;break e}throw Error(s(130,i==null?i:typeof i,""))}return o=yn(_,u,o,v),o.elementType=i,o.type=g,o.lanes=b,o}function Ga(i,o,u,g){return i=yn(7,i,g,o),i.lanes=u,i}function ad(i,o,u,g){return i=yn(22,i,g,o),i.elementType=D,i.lanes=u,i.stateNode={isHidden:!1},i}function Dm(i,o,u){return i=yn(6,i,null,o),i.lanes=u,i}function Im(i,o,u){return o=yn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function CT(i,o,u,g,v){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lh(0),this.expirationTimes=lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lh(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Lm(i,o,u,g,v,b,_,O,H){return i=new CT(i,o,u,O,H),o===1?(o=1,b===!0&&(o|=8)):o=0,b=yn(3,null,null,o),i.current=b,b.stateNode=i,b.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zh(b),i}function TT(i,o,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:g==null?null:""+g,children:i,containerInfo:o,implementation:u}}function _y(i){if(!i)return Xr;i=i._reactInternals;e:{if(yr(i)!==i||i.tag!==1)throw Error(s(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Us(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(s(171))}if(i.tag===1){var u=i.type;if(Us(u))return a0(i,u,o)}return o}function Ry(i,o,u,g,v,b,_,O,H){return i=Lm(u,g,!0,i,v,b,_,O,H),i.context=_y(null),u=i.current,g=_s(),v=ia(u),b=Sr(g,v),b.callback=o??null,sa(u,b,v),i.current.lanes=v,zo(i,v,g),Hs(i,g),i}function id(i,o,u,g){var v=o.current,b=_s(),_=ia(v);return u=_y(u),o.context===null?o.context=u:o.pendingContext=u,o=Sr(b,_),o.payload={element:i},g=g===void 0?null:g,g!==null&&(o.callback=g),i=sa(v,o,_),i!==null&&(Un(i,v,_,b),Oc(i,v,_)),_}function od(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function My(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Om(i,o){My(i,o),(i=i.alternate)&&My(i,o)}function ET(){return null}var Dy=typeof reportError=="function"?reportError:function(i){console.error(i)};function Fm(i){this._internalRoot=i}ld.prototype.render=Fm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));id(i,o,null,null)},ld.prototype.unmount=Fm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Va(function(){id(null,i,null,null)}),o[vr]=null}};function ld(i){this._internalRoot=i}ld.prototype.unstable_scheduleHydration=function(i){if(i){var o=xx();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Kr.length&&o!==0&&o<Kr[u].priority;u++);Kr.splice(u,0,i),u===0&&wx(i)}};function zm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function cd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Iy(){}function PT(i,o,u,g,v){if(v){if(typeof g=="function"){var b=g;g=function(){var ce=od(_);b.call(ce)}}var _=Ry(o,g,i,0,null,!1,!1,"",Iy);return i._reactRootContainer=_,i[vr]=_.current,Xo(i.nodeType===8?i.parentNode:i),Va(),_}for(;v=i.lastChild;)i.removeChild(v);if(typeof g=="function"){var O=g;g=function(){var ce=od(H);O.call(ce)}}var H=Lm(i,0,!1,null,null,!1,!1,"",Iy);return i._reactRootContainer=H,i[vr]=H.current,Xo(i.nodeType===8?i.parentNode:i),Va(function(){id(o,H,u,g)}),H}function dd(i,o,u,g,v){var b=u._reactRootContainer;if(b){var _=b;if(typeof v=="function"){var O=v;v=function(){var H=od(_);O.call(H)}}id(o,_,i,v)}else _=PT(u,o,i,v,g);return od(_)}px=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Fo(o.pendingLanes);u!==0&&(ch(o,u|1),Hs(o,_e()),(dt&6)===0&&(Wi=_e()+500,ea()))}break;case 13:Va(function(){var g=Nr(i,1);if(g!==null){var v=_s();Un(g,i,1,v)}}),Om(i,1)}},dh=function(i){if(i.tag===13){var o=Nr(i,134217728);if(o!==null){var u=_s();Un(o,i,134217728,u)}Om(i,134217728)}},gx=function(i){if(i.tag===13){var o=ia(i),u=Nr(i,o);if(u!==null){var g=_s();Un(u,i,o,g)}Om(i,o)}},xx=function(){return yt},yx=function(i,o){var u=yt;try{return yt=i,o()}finally{yt=u}},Ur=function(i,o,u){switch(o){case"input":if(We(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var g=u[o];if(g!==i&&g.form===i.form){var v=Tc(g);if(!v)throw Error(s(90));je(g),We(g,v)}}}break;case"textarea":wt(i,u);break;case"select":o=u.value,o!=null&&le(i,!!u.multiple,o,!1)}},At=Am,Dt=Va;var AT={usingClientEntryPoint:!1,Events:[sl,_i,Tc,Ke,Pt,Am]},gl={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_T={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wr(i),i===null?null:i.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||ET,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{Ln=ud.inject(_T),Ps=ud}catch{}}return Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AT,Gs.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(o))throw Error(s(200));return TT(i,o,null,u)},Gs.createRoot=function(i,o){if(!zm(i))throw Error(s(299));var u=!1,g="",v=Dy;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=Lm(i,1,!1,null,null,u,!1,g,v),i[vr]=o.current,Xo(i.nodeType===8?i.parentNode:i),new Fm(o)},Gs.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=Wr(o),i=i===null?null:i.stateNode,i},Gs.flushSync=function(i){return Va(i)},Gs.hydrate=function(i,o,u){if(!cd(o))throw Error(s(200));return dd(null,i,o,!0,u)},Gs.hydrateRoot=function(i,o,u){if(!zm(i))throw Error(s(405));var g=u!=null&&u.hydratedSources||null,v=!1,b="",_=Dy;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(_=u.onRecoverableError)),o=Ry(o,null,i,1,u??null,v,!1,b,_),i[vr]=o.current,Xo(i),g)for(i=0;i<g.length;i++)u=g[i],v=u._getVersion,v=v(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,v]:o.mutableSourceEagerHydrationData.push(u,v);return new ld(o)},Gs.render=function(i,o,u){if(!cd(o))throw Error(s(200));return dd(null,i,o,!1,u)},Gs.unmountComponentAtNode=function(i){if(!cd(i))throw Error(s(40));return i._reactRootContainer?(Va(function(){dd(null,null,i,!1,function(){i._reactRootContainer=null,i[vr]=null})}),!0):!1},Gs.unstable_batchedUpdates=Am,Gs.unstable_renderSubtreeIntoContainer=function(i,o,u,g){if(!cd(u))throw Error(s(200));if(i==null||i._reactInternals===void 0)throw Error(s(38));return dd(i,o,u,!1,g)},Gs.version="18.3.1-next-f1338f8080-20240426",Gs}var Vy;function Vb(){if(Vy)return Um.exports;Vy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Um.exports=zT(),Um.exports}var Wy;function $T(){if(Wy)return hd;Wy=1;var t=Vb();return hd.createRoot=t.createRoot,hd.hydrateRoot=t.hydrateRoot,hd}var BT=$T();const UT="modulepreload",VT=function(t){return"/"+t},Hy={},Wb=function(e,s,r){let a=Promise.resolve();if(s&&s.length>0){let c=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");a=c(s.map(m=>{if(m=VT(m),m in Hy)return;Hy[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":UT,f||(y.as="script"),y.crossOrigin="",y.href=m,h&&y.setAttribute("nonce",h),document.head.appendChild(y),f)return new Promise((N,w)=>{y.addEventListener("load",N),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};var x=fu();const he=Ub(x),Hb=MT({__proto__:null,default:he},[x]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),Gy=t=>{const e=HT(t);return e.charAt(0).toUpperCase()+e.slice(1)},Gb=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...d},h)=>x.createElement("svg",{ref:h,...GT,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:Gb("lucide",a),...d},[...c.map(([m,f])=>x.createElement(m,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(t,e)=>{const s=x.forwardRef(({className:r,...a},l)=>x.createElement(qT,{ref:l,iconNode:e,className:Gb(`lucide-${WT(Gy(t))}`,`lucide-${t}`,r),...a}));return s.displayName=Gy(t),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],io=ge("accessibility",KT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hd=ge("activity",ZT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],JT=ge("arrow-down",YT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gt=ge("arrow-left",QT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qy=ge("arrow-right",XT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],tE=ge("arrow-up",eE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Lp=ge("award",sE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],rE=ge("battery",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],pu=ge("bell",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],qb=ge("bike",iE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],lE=ge("book",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],dE=ge("bookmark",cE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Mf=ge("brain",uE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Kb=ge("briefcase",hE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],Df=ge("bug",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],fa=ge("bus",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Op=ge("calendar",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Hn=ge("camera",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Ls=ge("car",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Tl=ge("chart-column",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_r=ge("check",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],oo=ge("chevron-down",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],or=ge("chevron-right",bE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gd=ge("chevron-up",jE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ar=ge("circle-alert",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ai=ge("circle-check-big",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zb=ge("circle-help",kE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],TE=ge("circle-stop",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],xs=ge("clock",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],AE=ge("cloud-rain",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],RE=ge("cloud",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],DE=ge("code",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Yb=ge("coffee",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],OE=ge("compass",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Jb=ge("copy",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lo=ge("credit-card",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],BE=ge("crown",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ky=ge("database",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Rr=ge("download",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]],HE=ge("dumbbell",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Qb=ge("external-link",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],KE=ge("eye-off",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ii=ge("eye",ZE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],JE=ge("flag",YE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]],oi=ge("fuel",QE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Xb=ge("funnel",XE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],tP=ge("gift",eP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Dl=ge("globe",sP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rP=ge("grip-vertical",nP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Zy=ge("hard-drive",aP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],e1=ge("heart",iP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],lP=ge("hotel",oP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Kl=ge("house",cP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],t1=ge("info",dP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],hP=ge("key",uP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],fP=ge("landmark",mP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],gP=ge("layers",pP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],qd=ge("leaf",xP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],vP=ge("link-2",yP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bP=ge("loader-circle",wP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Dd=ge("loader",jP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],SP=ge("lock",NP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Yy=ge("log-in",kP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],TP=ge("mail",CP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pt=ge("map-pin",EP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],AP=ge("map",PP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],RP=ge("menu",_P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],If=ge("message-circle",MP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],IP=ge("mic-off",DP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],pa=ge("mic",LP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M5 12h14",key:"1ays0h"}]],FP=ge("minus",OP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],s1=ge("moon",zP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Jy=ge("music",$P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["polygon",{points:"12 2 19 21 12 17 5 21 12 2",key:"x8c0qg"}]],co=ge("navigation-2",BP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],rt=ge("navigation",UP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],WP=ge("pause",VP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Il=ge("phone",HP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Qy=ge("play",GP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ja=ge("plus",qP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lf=ge("refresh-cw",KP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],mr=ge("route",ZP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]],JP=ge("satellite",YP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],n1=ge("save",QP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Gn=ge("search",XP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xy=ge("send",e4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wt=ge("settings",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],r1=ge("share-2",s4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],gu=ge("share",n4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lr=ge("shield",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],a1=ge("smartphone",a4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],i1=ge("sparkles",i4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["circle",{cx:"12",cy:"14",r:"4",key:"1jruaj"}],["path",{d:"M12 14h.01",key:"1etili"}]],l4=ge("speaker",o4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],d4=ge("square-pen",c4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ds=ge("star",u4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M12 8a2.83 2.83 0 0 0 4 4 4 4 0 1 1-4-4",key:"1fu5g2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.9 4.9 1.4 1.4",key:"b9915j"}],["path",{d:"m17.7 17.7 1.4 1.4",key:"qc3ed3"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.3 17.7-1.4 1.4",key:"5gca6"}],["path",{d:"m19.1 4.9-1.4 1.4",key:"wpu9u6"}]],m4=ge("sun-moon",h4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],p4=ge("sun",f4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ll=ge("target",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Of=ge("test-tube",x4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],v4=ge("thumbs-up",y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Ff=ge("timer",w4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]],ev=ge("toggle-left",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]],N4=ge("toggle-right",j4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]],Hm=ge("tram-front",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Fp=ge("trash-2",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Pn=ge("trending-up",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Et=ge("triangle-alert",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],o1=ge("trophy",E4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],A4=ge("truck",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],R4=ge("type",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],D4=ge("upload",M4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Gm=ge("user-plus",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],O4=ge("user-round",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xu=ge("user",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],yu=ge("users",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],qm=ge("utensils-crossed",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],U4=ge("utensils",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mr=ge("volume-2",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],zp=ge("volume-x",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ga=ge("wifi-off",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Kd=ge("wifi",G4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ys=ge("x",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],po=ge("zap",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Y4=ge("zoom-in",Z4);function tv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function l1(...t){return e=>{let s=!1;const r=t.map(a=>{const l=tv(a,e);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let a=0;a<r.length;a++){const l=r[a];typeof l=="function"?l():tv(t[a],null)}}}}function ft(...t){return x.useCallback(l1(...t),t)}function li(t){const e=J4(t),s=x.forwardRef((r,a)=>{const{children:l,...c}=r,d=x.Children.toArray(l),h=d.find(X4);if(h){const m=h.props.children,f=d.map(p=>p===h?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:p);return n.jsx(e,{...c,ref:a,children:x.isValidElement(m)?x.cloneElement(m,void 0,f):null})}return n.jsx(e,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}var c1=li("Slot");function J4(t){const e=x.forwardRef((s,r)=>{const{children:a,...l}=s;if(x.isValidElement(a)){const c=tA(a),d=eA(l,a.props);return a.type!==x.Fragment&&(d.ref=r?l1(r,c):c),x.cloneElement(a,d)}return x.Children.count(a)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Q4=Symbol("radix.slottable");function X4(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Q4}function eA(t,e){const s={...e};for(const r in e){const a=t[r],l=e[r];/^on[A-Z]/.test(r)?a&&l?s[r]=(...d)=>{const h=l(...d);return a(...d),h}:a&&(s[r]=a):r==="style"?s[r]={...a,...l}:r==="className"&&(s[r]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function tA(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function d1(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(s=d1(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function u1(){for(var t,e,s=0,r="",a=arguments.length;s<a;s++)(t=arguments[s])&&(e=d1(t))&&(r&&(r+=" "),r+=e);return r}const sv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nv=u1,$p=(t,e)=>s=>{var r;if(e?.variants==null)return nv(t,s?.class,s?.className);const{variants:a,defaultVariants:l}=e,c=Object.keys(a).map(m=>{const f=s?.[m],p=l?.[m];if(f===null)return null;const y=sv(f)||sv(p);return a[m][y]}),d=s&&Object.entries(s).reduce((m,f)=>{let[p,y]=f;return y===void 0||(m[p]=y),m},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,f)=>{let{class:p,className:y,...N}=f;return Object.entries(N).every(w=>{let[j,S]=w;return Array.isArray(S)?S.includes({...l,...d}[j]):{...l,...d}[j]===S})?[...m,p,y]:m},[]);return nv(t,c,h,s?.class,s?.className)},Bp="-",sA=t=>{const e=rA(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const d=c.split(Bp);return d[0]===""&&d.length!==1&&d.shift(),h1(d,e)||nA(c)},getConflictingClassGroupIds:(c,d)=>{const h=s[c]||[];return d&&r[c]?[...h,...r[c]]:h}}},h1=(t,e)=>{if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),a=r?h1(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const l=t.join(Bp);return e.validators.find(({validator:c})=>c(l))?.classGroupId},rv=/^\[(.+)\]$/,nA=t=>{if(rv.test(t)){const e=rv.exec(t)[1],s=e?.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},rA=t=>{const{theme:e,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const a in s)zf(s[a],r,a,e);return r},zf=(t,e,s,r)=>{t.forEach(a=>{if(typeof a=="string"){const l=a===""?e:av(e,a);l.classGroupId=s;return}if(typeof a=="function"){if(aA(a)){zf(a(r),e,s,r);return}e.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([l,c])=>{zf(c,av(e,l),s,r)})})},av=(t,e)=>{let s=t;return e.split(Bp).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},aA=t=>t.isThemeGetter,iA=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const a=(l,c)=>{s.set(l,c),e++,e>t&&(e=0,r=s,s=new Map)};return{get(l){let c=s.get(l);if(c!==void 0)return c;if((c=r.get(l))!==void 0)return a(l,c),c},set(l,c){s.has(l)?s.set(l,c):a(l,c)}}},$f="!",Bf=":",oA=Bf.length,lA=t=>{const{prefix:e,experimentalParseClassName:s}=t;let r=a=>{const l=[];let c=0,d=0,h=0,m;for(let w=0;w<a.length;w++){let j=a[w];if(c===0&&d===0){if(j===Bf){l.push(a.slice(h,w)),h=w+oA;continue}if(j==="/"){m=w;continue}}j==="["?c++:j==="]"?c--:j==="("?d++:j===")"&&d--}const f=l.length===0?a:a.substring(h),p=cA(f),y=p!==f,N=m&&m>h?m-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:N}};if(e){const a=e+Bf,l=r;r=c=>c.startsWith(a)?l(c.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(s){const a=r;r=l=>s({className:l,parseClassName:a})}return r},cA=t=>t.endsWith($f)?t.substring(0,t.length-1):t.startsWith($f)?t.substring(1):t,dA=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let l=[];return r.forEach(c=>{c[0]==="["||e[c]?(a.push(...l.sort(),c),l=[]):l.push(c)}),a.push(...l.sort()),a}},uA=t=>({cache:iA(t.cacheSize),parseClassName:lA(t),sortModifiers:dA(t),...sA(t)}),hA=/\s+/,mA=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,c=[],d=t.trim().split(hA);let h="";for(let m=d.length-1;m>=0;m-=1){const f=d[m],{isExternal:p,modifiers:y,hasImportantModifier:N,baseClassName:w,maybePostfixModifierPosition:j}=s(f);if(p){h=f+(h.length>0?" "+h:h);continue}let S=!!j,T=r(S?w.substring(0,j):w);if(!T){if(!S){h=f+(h.length>0?" "+h:h);continue}if(T=r(w),!T){h=f+(h.length>0?" "+h:h);continue}S=!1}const R=l(y).join(":"),A=N?R+$f:R,k=A+T;if(c.includes(k))continue;c.push(k);const P=a(T,S);for(let F=0;F<P.length;++F){const W=P[F];c.push(A+W)}h=f+(h.length>0?" "+h:h)}return h};function fA(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=m1(e))&&(r&&(r+=" "),r+=s);return r}const m1=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=m1(t[r]))&&(s&&(s+=" "),s+=e);return s};function pA(t,...e){let s,r,a,l=c;function c(h){const m=e.reduce((f,p)=>p(f),t());return s=uA(m),r=s.cache.get,a=s.cache.set,l=d,d(h)}function d(h){const m=r(h);if(m)return m;const f=mA(h,s);return a(h,f),f}return function(){return l(fA.apply(null,arguments))}}const ns=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},f1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,p1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gA=/^\d+\/\d+$/,xA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,wA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gi=t=>gA.test(t),at=t=>!!t&&!Number.isNaN(Number(t)),da=t=>!!t&&Number.isInteger(Number(t)),Km=t=>t.endsWith("%")&&at(t.slice(0,-1)),Tr=t=>xA.test(t),jA=()=>!0,NA=t=>yA.test(t)&&!vA.test(t),g1=()=>!1,SA=t=>wA.test(t),kA=t=>bA.test(t),CA=t=>!Fe(t)&&!ze(t),TA=t=>No(t,v1,g1),Fe=t=>f1.test(t),qa=t=>No(t,w1,NA),Zm=t=>No(t,RA,at),iv=t=>No(t,x1,g1),EA=t=>No(t,y1,kA),md=t=>No(t,b1,SA),ze=t=>p1.test(t),yl=t=>So(t,w1),PA=t=>So(t,MA),ov=t=>So(t,x1),AA=t=>So(t,v1),_A=t=>So(t,y1),fd=t=>So(t,b1,!0),No=(t,e,s)=>{const r=f1.exec(t);return r?r[1]?e(r[1]):s(r[2]):!1},So=(t,e,s=!1)=>{const r=p1.exec(t);return r?r[1]?e(r[1]):s:!1},x1=t=>t==="position"||t==="percentage",y1=t=>t==="image"||t==="url",v1=t=>t==="length"||t==="size"||t==="bg-size",w1=t=>t==="length",RA=t=>t==="number",MA=t=>t==="family-name",b1=t=>t==="shadow",DA=()=>{const t=ns("color"),e=ns("font"),s=ns("text"),r=ns("font-weight"),a=ns("tracking"),l=ns("leading"),c=ns("breakpoint"),d=ns("container"),h=ns("spacing"),m=ns("radius"),f=ns("shadow"),p=ns("inset-shadow"),y=ns("text-shadow"),N=ns("drop-shadow"),w=ns("blur"),j=ns("perspective"),S=ns("aspect"),T=ns("ease"),R=ns("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...k(),ze,Fe],F=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto","contain","none"],z=()=>[ze,Fe,h],oe=()=>[Gi,"full","auto",...z()],q=()=>[da,"none","subgrid",ze,Fe],J=()=>["auto",{span:["full",da,ze,Fe]},da,ze,Fe],K=()=>[da,"auto",ze,Fe],B=()=>["auto","min","max","fr",ze,Fe],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...z()],D=()=>[Gi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],E=()=>[t,ze,Fe],Y=()=>[...k(),ov,iv,{position:[ze,Fe]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",AA,TA,{size:[ze,Fe]}],te=()=>[Km,yl,qa],se=()=>["","none","full",m,ze,Fe],fe=()=>["",at,yl,qa],ve=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>[at,Km,ov,iv],G=()=>["","none",w,ze,Fe],X=()=>["none",at,ze,Fe],me=()=>["none",at,ze,Fe],ye=()=>[at,ze,Fe],je=()=>[Gi,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Tr],breakpoint:[Tr],color:[jA],container:[Tr],"drop-shadow":[Tr],ease:["in","out","in-out"],font:[CA],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Tr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Tr],shadow:[Tr],spacing:["px",at],text:[Tr],"text-shadow":[Tr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gi,Fe,ze,S]}],container:["container"],columns:[{columns:[at,Fe,ze,d]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:oe()}],"inset-x":[{"inset-x":oe()}],"inset-y":[{"inset-y":oe()}],start:[{start:oe()}],end:[{end:oe()}],top:[{top:oe()}],right:[{right:oe()}],bottom:[{bottom:oe()}],left:[{left:oe()}],visibility:["visible","invisible","collapse"],z:[{z:[da,"auto",ze,Fe]}],basis:[{basis:[Gi,"full","auto",d,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[at,Gi,"auto","initial","none",Fe]}],grow:[{grow:["",at,ze,Fe]}],shrink:[{shrink:["",at,ze,Fe]}],order:[{order:[da,"first","last","none",ze,Fe]}],"grid-cols":[{"grid-cols":q()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":q()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[d,"screen",...D()]}],"min-w":[{"min-w":[d,"screen","none",...D()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",s,yl,qa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ze,Zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Km,Fe]}],"font-family":[{font:[PA,Fe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ze,Fe]}],"line-clamp":[{"line-clamp":[at,"none",ze,Zm]}],leading:[{leading:[l,...z()]}],"list-image":[{"list-image":["none",ze,Fe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ze,Fe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[at,"from-font","auto",ze,qa]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[at,"auto",ze,Fe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze,Fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze,Fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},da,ze,Fe],radial:["",ze,Fe],conic:[da,ze,Fe]},_A,EA]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[at,ze,Fe]}],"outline-w":[{outline:["",at,yl,qa]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",f,fd,md]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",p,fd,md]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[at,qa]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",y,fd,md]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[at,ze,Fe]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[at]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[ze,Fe]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[at]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ze,Fe]}],filter:[{filter:["","none",ze,Fe]}],blur:[{blur:G()}],brightness:[{brightness:[at,ze,Fe]}],contrast:[{contrast:[at,ze,Fe]}],"drop-shadow":[{"drop-shadow":["","none",N,fd,md]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",at,ze,Fe]}],"hue-rotate":[{"hue-rotate":[at,ze,Fe]}],invert:[{invert:["",at,ze,Fe]}],saturate:[{saturate:[at,ze,Fe]}],sepia:[{sepia:["",at,ze,Fe]}],"backdrop-filter":[{"backdrop-filter":["","none",ze,Fe]}],"backdrop-blur":[{"backdrop-blur":G()}],"backdrop-brightness":[{"backdrop-brightness":[at,ze,Fe]}],"backdrop-contrast":[{"backdrop-contrast":[at,ze,Fe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",at,ze,Fe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[at,ze,Fe]}],"backdrop-invert":[{"backdrop-invert":["",at,ze,Fe]}],"backdrop-opacity":[{"backdrop-opacity":[at,ze,Fe]}],"backdrop-saturate":[{"backdrop-saturate":[at,ze,Fe]}],"backdrop-sepia":[{"backdrop-sepia":["",at,ze,Fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ze,Fe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[at,"initial",ze,Fe]}],ease:[{ease:["linear","initial",T,ze,Fe]}],delay:[{delay:[at,ze,Fe]}],animate:[{animate:["none",R,ze,Fe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,ze,Fe]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:X()}],"rotate-x":[{"rotate-x":X()}],"rotate-y":[{"rotate-y":X()}],"rotate-z":[{"rotate-z":X()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:ye()}],"skew-x":[{"skew-x":ye()}],"skew-y":[{"skew-y":ye()}],transform:[{transform:[ze,Fe,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:je()}],"translate-x":[{"translate-x":je()}],"translate-y":[{"translate-y":je()}],"translate-z":[{"translate-z":je()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze,Fe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze,Fe]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[at,yl,qa,Zm]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},IA=pA(DA);function Xe(...t){return IA(u1(t))}const LA=$p("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),L=x.forwardRef(({className:t,variant:e,size:s,asChild:r=!1,...a},l)=>{const c=r?c1:"button";return n.jsx(c,{"data-slot":"button",className:Xe(LA({variant:e,size:s,className:t})),ref:l,...a})});L.displayName="Button";function Qe(t,e,{checkForDefaultPrevented:s=!0}={}){return function(a){if(t?.(a),s===!1||!a.defaultPrevented)return e?.(a)}}function OA(t,e){const s=x.createContext(e),r=l=>{const{children:c,...d}=l,h=x.useMemo(()=>d,Object.values(d));return n.jsx(s.Provider,{value:h,children:c})};r.displayName=t+"Provider";function a(l){const c=x.useContext(s);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${t}\``)}return[r,a]}function Zn(t,e=[]){let s=[];function r(l,c){const d=x.createContext(c),h=s.length;s=[...s,c];const m=p=>{const{scope:y,children:N,...w}=p,j=y?.[t]?.[h]||d,S=x.useMemo(()=>w,Object.values(w));return n.jsx(j.Provider,{value:S,children:N})};m.displayName=l+"Provider";function f(p,y){const N=y?.[t]?.[h]||d,w=x.useContext(N);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${l}\``)}return[m,f]}const a=()=>{const l=s.map(c=>x.createContext(c));return function(d){const h=d?.[t]||l;return x.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return a.scopeName=t,[r,FA(a,...e)]}function FA(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const c=r.reduce((d,{useScope:h,scopeName:m})=>{const p=h(l)[`__scope${m}`];return{...d,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return s.scopeName=e.scopeName,s}var Zl=Vb();const j1=Ub(Zl);var zA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=zA.reduce((t,e)=>{const s=li(`Primitive.${e}`),r=x.forwardRef((a,l)=>{const{asChild:c,...d}=a,h=c?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(h,{...d,ref:l})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $A(t,e){t&&Zl.flushSync(()=>t.dispatchEvent(e))}function Or(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...s)=>e.current?.(...s),[])}function BA(t,e=globalThis?.document){const s=Or(t);x.useEffect(()=>{const r=a=>{a.key==="Escape"&&s(a)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[s,e])}var UA="DismissableLayer",Uf="dismissableLayer.update",VA="dismissableLayer.pointerDownOutside",WA="dismissableLayer.focusOutside",lv,N1=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vu=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...h}=t,m=x.useContext(N1),[f,p]=x.useState(null),y=f?.ownerDocument??globalThis?.document,[,N]=x.useState({}),w=ft(e,W=>p(W)),j=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),T=j.indexOf(S),R=f?j.indexOf(f):-1,A=m.layersWithOutsidePointerEventsDisabled.size>0,k=R>=T,P=qA(W=>{const z=W.target,oe=[...m.branches].some(q=>q.contains(z));!k||oe||(a?.(W),c?.(W),W.defaultPrevented||d?.())},y),F=KA(W=>{const z=W.target;[...m.branches].some(q=>q.contains(z))||(l?.(W),c?.(W),W.defaultPrevented||d?.())},y);return BA(W=>{R===m.layers.size-1&&(r?.(W),!W.defaultPrevented&&d&&(W.preventDefault(),d()))},y),x.useEffect(()=>{if(f)return s&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(lv=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(f)),m.layers.add(f),cv(),()=>{s&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=lv)}},[f,y,s,m]),x.useEffect(()=>()=>{f&&(m.layers.delete(f),m.layersWithOutsidePointerEventsDisabled.delete(f),cv())},[f,m]),x.useEffect(()=>{const W=()=>N({});return document.addEventListener(Uf,W),()=>document.removeEventListener(Uf,W)},[]),n.jsx(Ye.div,{...h,ref:w,style:{pointerEvents:A?k?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,P.onPointerDownCapture)})});vu.displayName=UA;var HA="DismissableLayerBranch",GA=x.forwardRef((t,e)=>{const s=x.useContext(N1),r=x.useRef(null),a=ft(e,r);return x.useEffect(()=>{const l=r.current;if(l)return s.branches.add(l),()=>{s.branches.delete(l)}},[s.branches]),n.jsx(Ye.div,{...t,ref:a})});GA.displayName=HA;function qA(t,e=globalThis?.document){const s=Or(t),r=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const l=d=>{if(d.target&&!r.current){let h=function(){S1(VA,s,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=h,e.addEventListener("click",a.current,{once:!0})):h()}else e.removeEventListener("click",a.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",a.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function KA(t,e=globalThis?.document){const s=Or(t),r=x.useRef(!1);return x.useEffect(()=>{const a=l=>{l.target&&!r.current&&S1(WA,s,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cv(){const t=new CustomEvent(Uf);document.dispatchEvent(t)}function S1(t,e,s,{discrete:r}){const a=s.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&a.addEventListener(t,e,{once:!0}),r?$A(a,l):a.dispatchEvent(l)}var Ym=0;function Up(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??dv()),document.body.insertAdjacentElement("beforeend",t[1]??dv()),Ym++,()=>{Ym===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ym--}},[])}function dv(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Jm="focusScope.autoFocusOnMount",Qm="focusScope.autoFocusOnUnmount",uv={bubbles:!1,cancelable:!0},ZA="FocusScope",wu=x.forwardRef((t,e)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...c}=t,[d,h]=x.useState(null),m=Or(a),f=Or(l),p=x.useRef(null),y=ft(e,j=>h(j)),N=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let j=function(A){if(N.paused||!d)return;const k=A.target;d.contains(k)?p.current=k:ha(p.current,{select:!0})},S=function(A){if(N.paused||!d)return;const k=A.relatedTarget;k!==null&&(d.contains(k)||ha(p.current,{select:!0}))},T=function(A){if(document.activeElement===document.body)for(const P of A)P.removedNodes.length>0&&ha(d)};document.addEventListener("focusin",j),document.addEventListener("focusout",S);const R=new MutationObserver(T);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",S),R.disconnect()}}},[r,d,N.paused]),x.useEffect(()=>{if(d){mv.add(N);const j=document.activeElement;if(!d.contains(j)){const T=new CustomEvent(Jm,uv);d.addEventListener(Jm,m),d.dispatchEvent(T),T.defaultPrevented||(YA(t_(k1(d)),{select:!0}),document.activeElement===j&&ha(d))}return()=>{d.removeEventListener(Jm,m),setTimeout(()=>{const T=new CustomEvent(Qm,uv);d.addEventListener(Qm,f),d.dispatchEvent(T),T.defaultPrevented||ha(j??document.body,{select:!0}),d.removeEventListener(Qm,f),mv.remove(N)},0)}}},[d,m,f,N]);const w=x.useCallback(j=>{if(!s&&!r||N.paused)return;const S=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,T=document.activeElement;if(S&&T){const R=j.currentTarget,[A,k]=JA(R);A&&k?!j.shiftKey&&T===k?(j.preventDefault(),s&&ha(A,{select:!0})):j.shiftKey&&T===A&&(j.preventDefault(),s&&ha(k,{select:!0})):T===R&&j.preventDefault()}},[s,r,N.paused]);return n.jsx(Ye.div,{tabIndex:-1,...c,ref:y,onKeyDown:w})});wu.displayName=ZA;function YA(t,{select:e=!1}={}){const s=document.activeElement;for(const r of t)if(ha(r,{select:e}),document.activeElement!==s)return}function JA(t){const e=k1(t),s=hv(e,t),r=hv(e.reverse(),t);return[s,r]}function k1(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function hv(t,e){for(const s of t)if(!QA(s,{upTo:e}))return s}function QA(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function XA(t){return t instanceof HTMLInputElement&&"select"in t}function ha(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&XA(t)&&e&&t.select()}}var mv=e_();function e_(){let t=[];return{add(e){const s=t[0];e!==s&&s?.pause(),t=fv(t,e),t.unshift(e)},remove(e){t=fv(t,e),t[0]?.resume()}}}function fv(t,e){const s=[...t],r=s.indexOf(e);return r!==-1&&s.splice(r,1),s}function t_(t){return t.filter(e=>e.tagName!=="A")}var as=globalThis?.document?x.useLayoutEffect:()=>{},s_=Hb[" useId ".trim().toString()]||(()=>{}),n_=0;function Dr(t){const[e,s]=x.useState(s_());return as(()=>{s(r=>r??String(n_++))},[t]),t||(e?`radix-${e}`:"")}const r_=["top","right","bottom","left"],Na=Math.min,on=Math.max,Zd=Math.round,pd=Math.floor,dr=t=>({x:t,y:t}),a_={left:"right",right:"left",bottom:"top",top:"bottom"},i_={start:"end",end:"start"};function Vf(t,e,s){return on(t,Na(e,s))}function Fr(t,e){return typeof t=="function"?t(e):t}function zr(t){return t.split("-")[0]}function ko(t){return t.split("-")[1]}function Vp(t){return t==="x"?"y":"x"}function Wp(t){return t==="y"?"height":"width"}const o_=new Set(["top","bottom"]);function cr(t){return o_.has(zr(t))?"y":"x"}function Hp(t){return Vp(cr(t))}function l_(t,e,s){s===void 0&&(s=!1);const r=ko(t),a=Hp(t),l=Wp(a);let c=a==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=Yd(c)),[c,Yd(c)]}function c_(t){const e=Yd(t);return[Wf(t),e,Wf(e)]}function Wf(t){return t.replace(/start|end/g,e=>i_[e])}const pv=["left","right"],gv=["right","left"],d_=["top","bottom"],u_=["bottom","top"];function h_(t,e,s){switch(t){case"top":case"bottom":return s?e?gv:pv:e?pv:gv;case"left":case"right":return e?d_:u_;default:return[]}}function m_(t,e,s,r){const a=ko(t);let l=h_(zr(t),s==="start",r);return a&&(l=l.map(c=>c+"-"+a),e&&(l=l.concat(l.map(Wf)))),l}function Yd(t){return t.replace(/left|right|bottom|top/g,e=>a_[e])}function f_(t){return{top:0,right:0,bottom:0,left:0,...t}}function C1(t){return typeof t!="number"?f_(t):{top:t,right:t,bottom:t,left:t}}function Jd(t){const{x:e,y:s,width:r,height:a}=t;return{width:r,height:a,top:s,left:e,right:e+r,bottom:s+a,x:e,y:s}}function xv(t,e,s){let{reference:r,floating:a}=t;const l=cr(e),c=Hp(e),d=Wp(c),h=zr(e),m=l==="y",f=r.x+r.width/2-a.width/2,p=r.y+r.height/2-a.height/2,y=r[d]/2-a[d]/2;let N;switch(h){case"top":N={x:f,y:r.y-a.height};break;case"bottom":N={x:f,y:r.y+r.height};break;case"right":N={x:r.x+r.width,y:p};break;case"left":N={x:r.x-a.width,y:p};break;default:N={x:r.x,y:r.y}}switch(ko(e)){case"start":N[c]-=y*(s&&m?-1:1);break;case"end":N[c]+=y*(s&&m?-1:1);break}return N}const p_=async(t,e,s)=>{const{placement:r="bottom",strategy:a="absolute",middleware:l=[],platform:c}=s,d=l.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:t,floating:e,strategy:a}),{x:f,y:p}=xv(m,r,h),y=r,N={},w=0;for(let j=0;j<d.length;j++){const{name:S,fn:T}=d[j],{x:R,y:A,data:k,reset:P}=await T({x:f,y:p,initialPlacement:r,placement:y,strategy:a,middlewareData:N,rects:m,platform:c,elements:{reference:t,floating:e}});f=R??f,p=A??p,N={...N,[S]:{...N[S],...k}},P&&w<=50&&(w++,typeof P=="object"&&(P.placement&&(y=P.placement),P.rects&&(m=P.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:a}):P.rects),{x:f,y:p}=xv(m,y,h)),j=-1)}return{x:f,y:p,placement:y,strategy:a,middlewareData:N}};async function Ol(t,e){var s;e===void 0&&(e={});const{x:r,y:a,platform:l,rects:c,elements:d,strategy:h}=t,{boundary:m="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:N=0}=Fr(e,t),w=C1(N),S=d[y?p==="floating"?"reference":"floating":p],T=Jd(await l.getClippingRect({element:(s=await(l.isElement==null?void 0:l.isElement(S)))==null||s?S:S.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:m,rootBoundary:f,strategy:h})),R=p==="floating"?{x:r,y:a,width:c.floating.width,height:c.floating.height}:c.reference,A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),k=await(l.isElement==null?void 0:l.isElement(A))?await(l.getScale==null?void 0:l.getScale(A))||{x:1,y:1}:{x:1,y:1},P=Jd(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:R,offsetParent:A,strategy:h}):R);return{top:(T.top-P.top+w.top)/k.y,bottom:(P.bottom-T.bottom+w.bottom)/k.y,left:(T.left-P.left+w.left)/k.x,right:(P.right-T.right+w.right)/k.x}}const g_=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:r,placement:a,rects:l,platform:c,elements:d,middlewareData:h}=e,{element:m,padding:f=0}=Fr(t,e)||{};if(m==null)return{};const p=C1(f),y={x:s,y:r},N=Hp(a),w=Wp(N),j=await c.getDimensions(m),S=N==="y",T=S?"top":"left",R=S?"bottom":"right",A=S?"clientHeight":"clientWidth",k=l.reference[w]+l.reference[N]-y[N]-l.floating[w],P=y[N]-l.reference[N],F=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let W=F?F[A]:0;(!W||!await(c.isElement==null?void 0:c.isElement(F)))&&(W=d.floating[A]||l.floating[w]);const z=k/2-P/2,oe=W/2-j[w]/2-1,q=Na(p[T],oe),J=Na(p[R],oe),K=q,B=W-j[w]-J,V=W/2-j[w]/2+z,re=Vf(K,V,B),M=!h.arrow&&ko(a)!=null&&V!==re&&l.reference[w]/2-(V<K?q:J)-j[w]/2<0,D=M?V<K?V-K:V-B:0;return{[N]:y[N]+D,data:{[N]:re,centerOffset:V-re-D,...M&&{alignmentOffset:D}},reset:M}}}),x_=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,r;const{placement:a,middlewareData:l,rects:c,initialPlacement:d,platform:h,elements:m}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:j=!0,...S}=Fr(t,e);if((s=l.arrow)!=null&&s.alignmentOffset)return{};const T=zr(a),R=cr(d),A=zr(d)===d,k=await(h.isRTL==null?void 0:h.isRTL(m.floating)),P=y||(A||!j?[Yd(d)]:c_(d)),F=w!=="none";!y&&F&&P.push(...m_(d,j,w,k));const W=[d,...P],z=await Ol(e,S),oe=[];let q=((r=l.flip)==null?void 0:r.overflows)||[];if(f&&oe.push(z[T]),p){const V=l_(a,c,k);oe.push(z[V[0]],z[V[1]])}if(q=[...q,{placement:a,overflows:oe}],!oe.every(V=>V<=0)){var J,K;const V=(((J=l.flip)==null?void 0:J.index)||0)+1,re=W[V];if(re&&(!(p==="alignment"?R!==cr(re):!1)||q.every(E=>cr(E.placement)===R?E.overflows[0]>0:!0)))return{data:{index:V,overflows:q},reset:{placement:re}};let M=(K=q.filter(D=>D.overflows[0]<=0).sort((D,E)=>D.overflows[1]-E.overflows[1])[0])==null?void 0:K.placement;if(!M)switch(N){case"bestFit":{var B;const D=(B=q.filter(E=>{if(F){const Y=cr(E.placement);return Y===R||Y==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(Y=>Y>0).reduce((Y,Q)=>Y+Q,0)]).sort((E,Y)=>E[1]-Y[1])[0])==null?void 0:B[0];D&&(M=D);break}case"initialPlacement":M=d;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function yv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vv(t){return r_.some(e=>t[e]>=0)}const y_=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:r="referenceHidden",...a}=Fr(t,e);switch(r){case"referenceHidden":{const l=await Ol(e,{...a,elementContext:"reference"}),c=yv(l,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:vv(c)}}}case"escaped":{const l=await Ol(e,{...a,altBoundary:!0}),c=yv(l,s.floating);return{data:{escapedOffsets:c,escaped:vv(c)}}}default:return{}}}}},T1=new Set(["left","top"]);async function v_(t,e){const{placement:s,platform:r,elements:a}=t,l=await(r.isRTL==null?void 0:r.isRTL(a.floating)),c=zr(s),d=ko(s),h=cr(s)==="y",m=T1.has(c)?-1:1,f=l&&h?-1:1,p=Fr(e,t);let{mainAxis:y,crossAxis:N,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return d&&typeof w=="number"&&(N=d==="end"?w*-1:w),h?{x:N*f,y:y*m}:{x:y*m,y:N*f}}const w_=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,r;const{x:a,y:l,placement:c,middlewareData:d}=e,h=await v_(e,t);return c===((s=d.offset)==null?void 0:s.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:a+h.x,y:l+h.y,data:{...h,placement:c}}}}},b_=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:r,placement:a}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:d={fn:S=>{let{x:T,y:R}=S;return{x:T,y:R}}},...h}=Fr(t,e),m={x:s,y:r},f=await Ol(e,h),p=cr(zr(a)),y=Vp(p);let N=m[y],w=m[p];if(l){const S=y==="y"?"top":"left",T=y==="y"?"bottom":"right",R=N+f[S],A=N-f[T];N=Vf(R,N,A)}if(c){const S=p==="y"?"top":"left",T=p==="y"?"bottom":"right",R=w+f[S],A=w-f[T];w=Vf(R,w,A)}const j=d.fn({...e,[y]:N,[p]:w});return{...j,data:{x:j.x-s,y:j.y-r,enabled:{[y]:l,[p]:c}}}}}},j_=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:r,placement:a,rects:l,middlewareData:c}=e,{offset:d=0,mainAxis:h=!0,crossAxis:m=!0}=Fr(t,e),f={x:s,y:r},p=cr(a),y=Vp(p);let N=f[y],w=f[p];const j=Fr(d,e),S=typeof j=="number"?{mainAxis:j,crossAxis:0}:{mainAxis:0,crossAxis:0,...j};if(h){const A=y==="y"?"height":"width",k=l.reference[y]-l.floating[A]+S.mainAxis,P=l.reference[y]+l.reference[A]-S.mainAxis;N<k?N=k:N>P&&(N=P)}if(m){var T,R;const A=y==="y"?"width":"height",k=T1.has(zr(a)),P=l.reference[p]-l.floating[A]+(k&&((T=c.offset)==null?void 0:T[p])||0)+(k?0:S.crossAxis),F=l.reference[p]+l.reference[A]+(k?0:((R=c.offset)==null?void 0:R[p])||0)-(k?S.crossAxis:0);w<P?w=P:w>F&&(w=F)}return{[y]:N,[p]:w}}}},N_=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,r;const{placement:a,rects:l,platform:c,elements:d}=e,{apply:h=()=>{},...m}=Fr(t,e),f=await Ol(e,m),p=zr(a),y=ko(a),N=cr(a)==="y",{width:w,height:j}=l.floating;let S,T;p==="top"||p==="bottom"?(S=p,T=y===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(T=p,S=y==="end"?"top":"bottom");const R=j-f.top-f.bottom,A=w-f.left-f.right,k=Na(j-f[S],R),P=Na(w-f[T],A),F=!e.middlewareData.shift;let W=k,z=P;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(z=A),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=R),F&&!y){const q=on(f.left,0),J=on(f.right,0),K=on(f.top,0),B=on(f.bottom,0);N?z=w-2*(q!==0||J!==0?q+J:on(f.left,f.right)):W=j-2*(K!==0||B!==0?K+B:on(f.top,f.bottom))}await h({...e,availableWidth:z,availableHeight:W});const oe=await c.getDimensions(d.floating);return w!==oe.width||j!==oe.height?{reset:{rects:!0}}:{}}}};function bu(){return typeof window<"u"}function Co(t){return E1(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pr(t){var e;return(e=(E1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function E1(t){return bu()?t instanceof Node||t instanceof ln(t).Node:!1}function qn(t){return bu()?t instanceof Element||t instanceof ln(t).Element:!1}function fr(t){return bu()?t instanceof HTMLElement||t instanceof ln(t).HTMLElement:!1}function wv(t){return!bu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}const S_=new Set(["inline","contents"]);function Yl(t){const{overflow:e,overflowX:s,overflowY:r,display:a}=Kn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!S_.has(a)}const k_=new Set(["table","td","th"]);function C_(t){return k_.has(Co(t))}const T_=[":popover-open",":modal"];function ju(t){return T_.some(e=>{try{return t.matches(e)}catch{return!1}})}const E_=["transform","translate","scale","rotate","perspective"],P_=["transform","translate","scale","rotate","perspective","filter"],A_=["paint","layout","strict","content"];function Gp(t){const e=qp(),s=qn(t)?Kn(t):t;return E_.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||P_.some(r=>(s.willChange||"").includes(r))||A_.some(r=>(s.contain||"").includes(r))}function __(t){let e=Sa(t);for(;fr(e)&&!go(e);){if(Gp(e))return e;if(ju(e))return null;e=Sa(e)}return null}function qp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const R_=new Set(["html","body","#document"]);function go(t){return R_.has(Co(t))}function Kn(t){return ln(t).getComputedStyle(t)}function Nu(t){return qn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Sa(t){if(Co(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wv(t)&&t.host||pr(t);return wv(e)?e.host:e}function P1(t){const e=Sa(t);return go(e)?t.ownerDocument?t.ownerDocument.body:t.body:fr(e)&&Yl(e)?e:P1(e)}function Fl(t,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const a=P1(t),l=a===((r=t.ownerDocument)==null?void 0:r.body),c=ln(a);if(l){const d=Hf(c);return e.concat(c,c.visualViewport||[],Yl(a)?a:[],d&&s?Fl(d):[])}return e.concat(a,Fl(a,[],s))}function Hf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function A1(t){const e=Kn(t);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=fr(t),l=a?t.offsetWidth:s,c=a?t.offsetHeight:r,d=Zd(s)!==l||Zd(r)!==c;return d&&(s=l,r=c),{width:s,height:r,$:d}}function Kp(t){return qn(t)?t:t.contextElement}function uo(t){const e=Kp(t);if(!fr(e))return dr(1);const s=e.getBoundingClientRect(),{width:r,height:a,$:l}=A1(e);let c=(l?Zd(s.width):s.width)/r,d=(l?Zd(s.height):s.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const M_=dr(0);function _1(t){const e=ln(t);return!qp()||!e.visualViewport?M_:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function D_(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==ln(t)?!1:e}function ci(t,e,s,r){e===void 0&&(e=!1),s===void 0&&(s=!1);const a=t.getBoundingClientRect(),l=Kp(t);let c=dr(1);e&&(r?qn(r)&&(c=uo(r)):c=uo(t));const d=D_(l,s,r)?_1(l):dr(0);let h=(a.left+d.x)/c.x,m=(a.top+d.y)/c.y,f=a.width/c.x,p=a.height/c.y;if(l){const y=ln(l),N=r&&qn(r)?ln(r):r;let w=y,j=Hf(w);for(;j&&r&&N!==w;){const S=uo(j),T=j.getBoundingClientRect(),R=Kn(j),A=T.left+(j.clientLeft+parseFloat(R.paddingLeft))*S.x,k=T.top+(j.clientTop+parseFloat(R.paddingTop))*S.y;h*=S.x,m*=S.y,f*=S.x,p*=S.y,h+=A,m+=k,w=ln(j),j=Hf(w)}}return Jd({width:f,height:p,x:h,y:m})}function Su(t,e){const s=Nu(t).scrollLeft;return e?e.left+s:ci(pr(t)).left+s}function R1(t,e){const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-Su(t,s),a=s.top+e.scrollTop;return{x:r,y:a}}function I_(t){let{elements:e,rect:s,offsetParent:r,strategy:a}=t;const l=a==="fixed",c=pr(r),d=e?ju(e.floating):!1;if(r===c||d&&l)return s;let h={scrollLeft:0,scrollTop:0},m=dr(1);const f=dr(0),p=fr(r);if((p||!p&&!l)&&((Co(r)!=="body"||Yl(c))&&(h=Nu(r)),fr(r))){const N=ci(r);m=uo(r),f.x=N.x+r.clientLeft,f.y=N.y+r.clientTop}const y=c&&!p&&!l?R1(c,h):dr(0);return{width:s.width*m.x,height:s.height*m.y,x:s.x*m.x-h.scrollLeft*m.x+f.x+y.x,y:s.y*m.y-h.scrollTop*m.y+f.y+y.y}}function L_(t){return Array.from(t.getClientRects())}function O_(t){const e=pr(t),s=Nu(t),r=t.ownerDocument.body,a=on(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),l=on(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-s.scrollLeft+Su(t);const d=-s.scrollTop;return Kn(r).direction==="rtl"&&(c+=on(e.clientWidth,r.clientWidth)-a),{width:a,height:l,x:c,y:d}}const bv=25;function F_(t,e){const s=ln(t),r=pr(t),a=s.visualViewport;let l=r.clientWidth,c=r.clientHeight,d=0,h=0;if(a){l=a.width,c=a.height;const f=qp();(!f||f&&e==="fixed")&&(d=a.offsetLeft,h=a.offsetTop)}const m=Su(r);if(m<=0){const f=r.ownerDocument,p=f.body,y=getComputedStyle(p),N=f.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,w=Math.abs(r.clientWidth-p.clientWidth-N);w<=bv&&(l-=w)}else m<=bv&&(l+=m);return{width:l,height:c,x:d,y:h}}const z_=new Set(["absolute","fixed"]);function $_(t,e){const s=ci(t,!0,e==="fixed"),r=s.top+t.clientTop,a=s.left+t.clientLeft,l=fr(t)?uo(t):dr(1),c=t.clientWidth*l.x,d=t.clientHeight*l.y,h=a*l.x,m=r*l.y;return{width:c,height:d,x:h,y:m}}function jv(t,e,s){let r;if(e==="viewport")r=F_(t,s);else if(e==="document")r=O_(pr(t));else if(qn(e))r=$_(e,s);else{const a=_1(t);r={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return Jd(r)}function M1(t,e){const s=Sa(t);return s===e||!qn(s)||go(s)?!1:Kn(s).position==="fixed"||M1(s,e)}function B_(t,e){const s=e.get(t);if(s)return s;let r=Fl(t,[],!1).filter(d=>qn(d)&&Co(d)!=="body"),a=null;const l=Kn(t).position==="fixed";let c=l?Sa(t):t;for(;qn(c)&&!go(c);){const d=Kn(c),h=Gp(c);!h&&d.position==="fixed"&&(a=null),(l?!h&&!a:!h&&d.position==="static"&&!!a&&z_.has(a.position)||Yl(c)&&!h&&M1(t,c))?r=r.filter(f=>f!==c):a=d,c=Sa(c)}return e.set(t,r),r}function U_(t){let{element:e,boundary:s,rootBoundary:r,strategy:a}=t;const c=[...s==="clippingAncestors"?ju(e)?[]:B_(e,this._c):[].concat(s),r],d=c[0],h=c.reduce((m,f)=>{const p=jv(e,f,a);return m.top=on(p.top,m.top),m.right=Na(p.right,m.right),m.bottom=Na(p.bottom,m.bottom),m.left=on(p.left,m.left),m},jv(e,d,a));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function V_(t){const{width:e,height:s}=A1(t);return{width:e,height:s}}function W_(t,e,s){const r=fr(e),a=pr(e),l=s==="fixed",c=ci(t,!0,l,e);let d={scrollLeft:0,scrollTop:0};const h=dr(0);function m(){h.x=Su(a)}if(r||!r&&!l)if((Co(e)!=="body"||Yl(a))&&(d=Nu(e)),r){const N=ci(e,!0,l,e);h.x=N.x+e.clientLeft,h.y=N.y+e.clientTop}else a&&m();l&&!r&&a&&m();const f=a&&!r&&!l?R1(a,d):dr(0),p=c.left+d.scrollLeft-h.x-f.x,y=c.top+d.scrollTop-h.y-f.y;return{x:p,y,width:c.width,height:c.height}}function Xm(t){return Kn(t).position==="static"}function Nv(t,e){if(!fr(t)||Kn(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return pr(t)===s&&(s=s.ownerDocument.body),s}function D1(t,e){const s=ln(t);if(ju(t))return s;if(!fr(t)){let a=Sa(t);for(;a&&!go(a);){if(qn(a)&&!Xm(a))return a;a=Sa(a)}return s}let r=Nv(t,e);for(;r&&C_(r)&&Xm(r);)r=Nv(r,e);return r&&go(r)&&Xm(r)&&!Gp(r)?s:r||__(t)||s}const H_=async function(t){const e=this.getOffsetParent||D1,s=this.getDimensions,r=await s(t.floating);return{reference:W_(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function G_(t){return Kn(t).direction==="rtl"}const q_={convertOffsetParentRelativeRectToViewportRelativeRect:I_,getDocumentElement:pr,getClippingRect:U_,getOffsetParent:D1,getElementRects:H_,getClientRects:L_,getDimensions:V_,getScale:uo,isElement:qn,isRTL:G_};function I1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function K_(t,e){let s=null,r;const a=pr(t);function l(){var d;clearTimeout(r),(d=s)==null||d.disconnect(),s=null}function c(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),l();const m=t.getBoundingClientRect(),{left:f,top:p,width:y,height:N}=m;if(d||e(),!y||!N)return;const w=pd(p),j=pd(a.clientWidth-(f+y)),S=pd(a.clientHeight-(p+N)),T=pd(f),A={rootMargin:-w+"px "+-j+"px "+-S+"px "+-T+"px",threshold:on(0,Na(1,h))||1};let k=!0;function P(F){const W=F[0].intersectionRatio;if(W!==h){if(!k)return c();W?c(!1,W):r=setTimeout(()=>{c(!1,1e-7)},1e3)}W===1&&!I1(m,t.getBoundingClientRect())&&c(),k=!1}try{s=new IntersectionObserver(P,{...A,root:a.ownerDocument})}catch{s=new IntersectionObserver(P,A)}s.observe(t)}return c(!0),l}function Z_(t,e,s,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,m=Kp(t),f=a||l?[...m?Fl(m):[],...Fl(e)]:[];f.forEach(T=>{a&&T.addEventListener("scroll",s,{passive:!0}),l&&T.addEventListener("resize",s)});const p=m&&d?K_(m,s):null;let y=-1,N=null;c&&(N=new ResizeObserver(T=>{let[R]=T;R&&R.target===m&&N&&(N.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var A;(A=N)==null||A.observe(e)})),s()}),m&&!h&&N.observe(m),N.observe(e));let w,j=h?ci(t):null;h&&S();function S(){const T=ci(t);j&&!I1(j,T)&&s(),j=T,w=requestAnimationFrame(S)}return s(),()=>{var T;f.forEach(R=>{a&&R.removeEventListener("scroll",s),l&&R.removeEventListener("resize",s)}),p?.(),(T=N)==null||T.disconnect(),N=null,h&&cancelAnimationFrame(w)}}const Y_=w_,J_=b_,Q_=x_,X_=N_,eR=y_,Sv=g_,tR=j_,sR=(t,e,s)=>{const r=new Map,a={platform:q_,...s},l={...a.platform,_c:r};return p_(t,e,{...a,platform:l})};var nR=typeof document<"u",rR=function(){},Id=nR?x.useLayoutEffect:rR;function Qd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,r,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(r=s;r--!==0;)if(!Qd(t[r],e[r]))return!1;return!0}if(a=Object.keys(t),s=a.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(e,a[r]))return!1;for(r=s;r--!==0;){const l=a[r];if(!(l==="_owner"&&t.$$typeof)&&!Qd(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}function L1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kv(t,e){const s=L1(t);return Math.round(e*s)/s}function ef(t){const e=x.useRef(t);return Id(()=>{e.current=t}),e}function aR(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:a,elements:{reference:l,floating:c}={},transform:d=!0,whileElementsMounted:h,open:m}=t,[f,p]=x.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[y,N]=x.useState(r);Qd(y,r)||N(r);const[w,j]=x.useState(null),[S,T]=x.useState(null),R=x.useCallback(E=>{E!==F.current&&(F.current=E,j(E))},[]),A=x.useCallback(E=>{E!==W.current&&(W.current=E,T(E))},[]),k=l||w,P=c||S,F=x.useRef(null),W=x.useRef(null),z=x.useRef(f),oe=h!=null,q=ef(h),J=ef(a),K=ef(m),B=x.useCallback(()=>{if(!F.current||!W.current)return;const E={placement:e,strategy:s,middleware:y};J.current&&(E.platform=J.current),sR(F.current,W.current,E).then(Y=>{const Q={...Y,isPositioned:K.current!==!1};V.current&&!Qd(z.current,Q)&&(z.current=Q,Zl.flushSync(()=>{p(Q)}))})},[y,e,s,J,K]);Id(()=>{m===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,p(E=>({...E,isPositioned:!1})))},[m]);const V=x.useRef(!1);Id(()=>(V.current=!0,()=>{V.current=!1}),[]),Id(()=>{if(k&&(F.current=k),P&&(W.current=P),k&&P){if(q.current)return q.current(k,P,B);B()}},[k,P,B,q,oe]);const re=x.useMemo(()=>({reference:F,floating:W,setReference:R,setFloating:A}),[R,A]),M=x.useMemo(()=>({reference:k,floating:P}),[k,P]),D=x.useMemo(()=>{const E={position:s,left:0,top:0};if(!M.floating)return E;const Y=kv(M.floating,f.x),Q=kv(M.floating,f.y);return d?{...E,transform:"translate("+Y+"px, "+Q+"px)",...L1(M.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:Y,top:Q}},[s,d,M.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:B,refs:re,elements:M,floatingStyles:D}),[f,B,re,M,D])}const iR=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:r,padding:a}=typeof t=="function"?t(s):t;return r&&e(r)?r.current!=null?Sv({element:r.current,padding:a}).fn(s):{}:r?Sv({element:r,padding:a}).fn(s):{}}}},oR=(t,e)=>({...Y_(t),options:[t,e]}),lR=(t,e)=>({...J_(t),options:[t,e]}),cR=(t,e)=>({...tR(t),options:[t,e]}),dR=(t,e)=>({...Q_(t),options:[t,e]}),uR=(t,e)=>({...X_(t),options:[t,e]}),hR=(t,e)=>({...eR(t),options:[t,e]}),mR=(t,e)=>({...iR(t),options:[t,e]});var fR="Arrow",O1=x.forwardRef((t,e)=>{const{children:s,width:r=10,height:a=5,...l}=t;return n.jsx(Ye.svg,{...l,ref:e,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});O1.displayName=fR;var pR=O1;function Zp(t){const[e,s]=x.useState(void 0);return as(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let c,d;if("borderBoxSize"in l){const h=l.borderBoxSize,m=Array.isArray(h)?h[0]:h;c=m.inlineSize,d=m.blockSize}else c=t.offsetWidth,d=t.offsetHeight;s({width:c,height:d})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}var Yp="Popper",[F1,ku]=Zn(Yp),[gR,z1]=F1(Yp),$1=t=>{const{__scopePopper:e,children:s}=t,[r,a]=x.useState(null);return n.jsx(gR,{scope:e,anchor:r,onAnchorChange:a,children:s})};$1.displayName=Yp;var B1="PopperAnchor",U1=x.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:r,...a}=t,l=z1(B1,s),c=x.useRef(null),d=ft(e,c),h=x.useRef(null);return x.useEffect(()=>{const m=h.current;h.current=r?.current||c.current,m!==h.current&&l.onAnchorChange(h.current)}),r?null:n.jsx(Ye.div,{...a,ref:d})});U1.displayName=B1;var Jp="PopperContent",[xR,yR]=F1(Jp),V1=x.forwardRef((t,e)=>{const{__scopePopper:s,side:r="bottom",sideOffset:a=0,align:l="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:N="optimized",onPlaced:w,...j}=t,S=z1(Jp,s),[T,R]=x.useState(null),A=ft(e,$=>R($)),[k,P]=x.useState(null),F=Zp(k),W=F?.width??0,z=F?.height??0,oe=r+(l!=="center"?"-"+l:""),q=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},J=Array.isArray(m)?m:[m],K=J.length>0,B={padding:q,boundary:J.filter(wR),altBoundary:K},{refs:V,floatingStyles:re,placement:M,isPositioned:D,middlewareData:E}=aR({strategy:"fixed",placement:oe,whileElementsMounted:(...$)=>Z_(...$,{animationFrame:N==="always"}),elements:{reference:S.anchor},middleware:[oR({mainAxis:a+z,alignmentAxis:c}),h&&lR({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?cR():void 0,...B}),h&&dR({...B}),uR({...B,apply:({elements:$,rects:G,availableWidth:X,availableHeight:me})=>{const{width:ye,height:je}=G.reference,Ae=$.floating.style;Ae.setProperty("--radix-popper-available-width",`${X}px`),Ae.setProperty("--radix-popper-available-height",`${me}px`),Ae.setProperty("--radix-popper-anchor-width",`${ye}px`),Ae.setProperty("--radix-popper-anchor-height",`${je}px`)}}),k&&mR({element:k,padding:d}),bR({arrowWidth:W,arrowHeight:z}),y&&hR({strategy:"referenceHidden",...B})]}),[Y,Q]=G1(M),I=Or(w);as(()=>{D&&I?.()},[D,I]);const te=E.arrow?.x,se=E.arrow?.y,fe=E.arrow?.centerOffset!==0,[ve,Pe]=x.useState();return as(()=>{T&&Pe(window.getComputedStyle(T).zIndex)},[T]),n.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:D?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[E.transformOrigin?.x,E.transformOrigin?.y].join(" "),...E.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:n.jsx(xR,{scope:s,placedSide:Y,onArrowChange:P,arrowX:te,arrowY:se,shouldHideArrow:fe,children:n.jsx(Ye.div,{"data-side":Y,"data-align":Q,...j,ref:A,style:{...j.style,animation:D?void 0:"none"}})})})});V1.displayName=Jp;var W1="PopperArrow",vR={top:"bottom",right:"left",bottom:"top",left:"right"},H1=x.forwardRef(function(e,s){const{__scopePopper:r,...a}=e,l=yR(W1,r),c=vR[l.placedSide];return n.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:n.jsx(pR,{...a,ref:s,style:{...a.style,display:"block"}})})});H1.displayName=W1;function wR(t){return t!==null}var bR=t=>({name:"transformOrigin",options:t,fn(e){const{placement:s,rects:r,middlewareData:a}=e,c=a.arrow?.centerOffset!==0,d=c?0:t.arrowWidth,h=c?0:t.arrowHeight,[m,f]=G1(s),p={start:"0%",center:"50%",end:"100%"}[f],y=(a.arrow?.x??0)+d/2,N=(a.arrow?.y??0)+h/2;let w="",j="";return m==="bottom"?(w=c?p:`${y}px`,j=`${-h}px`):m==="top"?(w=c?p:`${y}px`,j=`${r.floating.height+h}px`):m==="right"?(w=`${-h}px`,j=c?p:`${N}px`):m==="left"&&(w=`${r.floating.width+h}px`,j=c?p:`${N}px`),{data:{x:w,y:j}}}});function G1(t){const[e,s="center"]=t.split("-");return[e,s]}var q1=$1,Qp=U1,K1=V1,Z1=H1,jR="Portal",Cu=x.forwardRef((t,e)=>{const{container:s,...r}=t,[a,l]=x.useState(!1);as(()=>l(!0),[]);const c=s||a&&globalThis?.document?.body;return c?j1.createPortal(n.jsx(Ye.div,{...r,ref:e}),c):null});Cu.displayName=jR;function NR(t,e){return x.useReducer((s,r)=>e[s][r]??s,t)}var gi=t=>{const{present:e,children:s}=t,r=SR(e),a=typeof s=="function"?s({present:r.isPresent}):x.Children.only(s),l=ft(r.ref,kR(a));return typeof s=="function"||r.isPresent?x.cloneElement(a,{ref:l}):null};gi.displayName="Presence";function SR(t){const[e,s]=x.useState(),r=x.useRef(null),a=x.useRef(t),l=x.useRef("none"),c=t?"mounted":"unmounted",[d,h]=NR(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const m=gd(r.current);l.current=d==="mounted"?m:"none"},[d]),as(()=>{const m=r.current,f=a.current;if(f!==t){const y=l.current,N=gd(m);t?h("MOUNT"):N==="none"||m?.display==="none"?h("UNMOUNT"):h(f&&y!==N?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,h]),as(()=>{if(e){let m;const f=e.ownerDocument.defaultView??window,p=N=>{const j=gd(r.current).includes(CSS.escape(N.animationName));if(N.target===e&&j&&(h("ANIMATION_END"),!a.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",m=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},y=N=>{N.target===e&&(l.current=gd(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:x.useCallback(m=>{r.current=m?getComputedStyle(m):null,s(m)},[])}}function gd(t){return t?.animationName||"none"}function kR(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var CR=Hb[" useInsertionEffect ".trim().toString()]||as;function ka({prop:t,defaultProp:e,onChange:s=()=>{},caller:r}){const[a,l,c]=TR({defaultProp:e,onChange:s}),d=t!==void 0,h=d?t:a;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const p=f.current;p!==d&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=d},[d,r])}const m=x.useCallback(f=>{if(d){const p=ER(f)?f(t):f;p!==t&&c.current?.(p)}else l(f)},[d,t,l,c]);return[h,m]}function TR({defaultProp:t,onChange:e}){const[s,r]=x.useState(t),a=x.useRef(s),l=x.useRef(e);return CR(()=>{l.current=e},[e]),x.useEffect(()=>{a.current!==s&&(l.current?.(s),a.current=s)},[s,a]),[s,r,l]}function ER(t){return typeof t=="function"}var PR=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},qi=new WeakMap,xd=new WeakMap,yd={},tf=0,Y1=function(t){return t&&(t.host||Y1(t.parentNode))},AR=function(t,e){return e.map(function(s){if(t.contains(s))return s;var r=Y1(s);return r&&t.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},_R=function(t,e,s,r){var a=AR(e,Array.isArray(t)?t:[t]);yd[s]||(yd[s]=new WeakMap);var l=yd[s],c=[],d=new Set,h=new Set(a),m=function(p){!p||d.has(p)||(d.add(p),m(p.parentNode))};a.forEach(m);var f=function(p){!p||h.has(p)||Array.prototype.forEach.call(p.children,function(y){if(d.has(y))f(y);else try{var N=y.getAttribute(r),w=N!==null&&N!=="false",j=(qi.get(y)||0)+1,S=(l.get(y)||0)+1;qi.set(y,j),l.set(y,S),c.push(y),j===1&&w&&xd.set(y,!0),S===1&&y.setAttribute(s,"true"),w||y.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",y,T)}})};return f(e),d.clear(),tf++,function(){c.forEach(function(p){var y=qi.get(p)-1,N=l.get(p)-1;qi.set(p,y),l.set(p,N),y||(xd.has(p)||p.removeAttribute(r),xd.delete(p)),N||p.removeAttribute(s)}),tf--,tf||(qi=new WeakMap,qi=new WeakMap,xd=new WeakMap,yd={})}},Xp=function(t,e,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=PR(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),_R(r,a,s,"aria-hidden")):function(){return null}},ir=function(){return ir=Object.assign||function(e){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},ir.apply(this,arguments)};function J1(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s}function RR(t,e,s){if(s||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return t.concat(l||Array.prototype.slice.call(e))}var Ld="right-scroll-bar-position",Od="width-before-scroll-bar",MR="with-scroll-bars-hidden",DR="--removed-body-scroll-bar-size";function sf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IR(t,e){var s=x.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(r){var a=s.value;a!==r&&(s.value=r,s.callback(r,a))}}}})[0];return s.callback=e,s.facade}var LR=typeof window<"u"?x.useLayoutEffect:x.useEffect,Cv=new WeakMap;function OR(t,e){var s=IR(null,function(r){return t.forEach(function(a){return sf(a,r)})});return LR(function(){var r=Cv.get(s);if(r){var a=new Set(r),l=new Set(t),c=s.current;a.forEach(function(d){l.has(d)||sf(d,null)}),l.forEach(function(d){a.has(d)||sf(d,c)})}Cv.set(s,t)},[t]),s}function FR(t){return t}function zR(t,e){e===void 0&&(e=FR);var s=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(l){var c=e(l,r);return s.push(c),function(){s=s.filter(function(d){return d!==c})}},assignSyncMedium:function(l){for(r=!0;s.length;){var c=s;s=[],c.forEach(l)}s={push:function(d){return l(d)},filter:function(){return s}}},assignMedium:function(l){r=!0;var c=[];if(s.length){var d=s;s=[],d.forEach(l),c=s}var h=function(){var f=c;c=[],f.forEach(l)},m=function(){return Promise.resolve().then(h)};m(),s={push:function(f){c.push(f),m()},filter:function(f){return c=c.filter(f),s}}}};return a}function $R(t){t===void 0&&(t={});var e=zR(null);return e.options=ir({async:!0,ssr:!1},t),e}var Q1=function(t){var e=t.sideCar,s=J1(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,ir({},s))};Q1.isSideCarExport=!0;function BR(t,e){return t.useMedium(e),Q1}var X1=$R(),nf=function(){},Tu=x.forwardRef(function(t,e){var s=x.useRef(null),r=x.useState({onScrollCapture:nf,onWheelCapture:nf,onTouchMoveCapture:nf}),a=r[0],l=r[1],c=t.forwardProps,d=t.children,h=t.className,m=t.removeScrollBar,f=t.enabled,p=t.shards,y=t.sideCar,N=t.noRelative,w=t.noIsolation,j=t.inert,S=t.allowPinchZoom,T=t.as,R=T===void 0?"div":T,A=t.gapMode,k=J1(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=y,F=OR([s,e]),W=ir(ir({},k),a);return x.createElement(x.Fragment,null,f&&x.createElement(P,{sideCar:X1,removeScrollBar:m,shards:p,noRelative:N,noIsolation:w,inert:j,setCallbacks:l,allowPinchZoom:!!S,lockRef:s,gapMode:A}),c?x.cloneElement(x.Children.only(d),ir(ir({},W),{ref:F})):x.createElement(R,ir({},W,{className:h,ref:F}),d))});Tu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Tu.classNames={fullWidth:Od,zeroRight:Ld};var UR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VR(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=UR();return e&&t.setAttribute("nonce",e),t}function WR(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function HR(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var GR=function(){var t=0,e=null;return{add:function(s){t==0&&(e=VR())&&(WR(e,s),HR(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qR=function(){var t=GR();return function(e,s){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},ej=function(){var t=qR(),e=function(s){var r=s.styles,a=s.dynamic;return t(r,a),null};return e},KR={left:0,top:0,right:0,gap:0},rf=function(t){return parseInt(t||"",10)||0},ZR=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[rf(s),rf(r),rf(a)]},YR=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return KR;var e=ZR(t),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-s+e[2]-e[0])}},JR=ej(),ho="data-scroll-locked",QR=function(t,e,s,r){var a=t.left,l=t.top,c=t.right,d=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(MR,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(d,"px ").concat(r,`;
  }
  body[`).concat(ho,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ld,` {
    right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(Od,` {
    margin-right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(Ld," .").concat(Ld,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Od," .").concat(Od,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ho,`] {
    `).concat(DR,": ").concat(d,`px;
  }
`)},Tv=function(){var t=parseInt(document.body.getAttribute(ho)||"0",10);return isFinite(t)?t:0},XR=function(){x.useEffect(function(){return document.body.setAttribute(ho,(Tv()+1).toString()),function(){var t=Tv()-1;t<=0?document.body.removeAttribute(ho):document.body.setAttribute(ho,t.toString())}},[])},e5=function(t){var e=t.noRelative,s=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;XR();var l=x.useMemo(function(){return YR(a)},[a]);return x.createElement(JR,{styles:QR(l,!e,a,s?"":"!important")})},Gf=!1;if(typeof window<"u")try{var vd=Object.defineProperty({},"passive",{get:function(){return Gf=!0,!0}});window.addEventListener("test",vd,vd),window.removeEventListener("test",vd,vd)}catch{Gf=!1}var Ki=Gf?{passive:!1}:!1,t5=function(t){return t.tagName==="TEXTAREA"},tj=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!t5(t)&&s[e]==="visible")},s5=function(t){return tj(t,"overflowY")},n5=function(t){return tj(t,"overflowX")},Ev=function(t,e){var s=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=sj(t,r);if(a){var l=nj(t,r),c=l[1],d=l[2];if(c>d)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},r5=function(t){var e=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;return[e,s,r]},a5=function(t){var e=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth;return[e,s,r]},sj=function(t,e){return t==="v"?s5(e):n5(e)},nj=function(t,e){return t==="v"?r5(e):a5(e)},i5=function(t,e){return t==="h"&&e==="rtl"?-1:1},o5=function(t,e,s,r,a){var l=i5(t,window.getComputedStyle(e).direction),c=l*r,d=s.target,h=e.contains(d),m=!1,f=c>0,p=0,y=0;do{if(!d)break;var N=nj(t,d),w=N[0],j=N[1],S=N[2],T=j-S-l*w;(w||T)&&sj(t,d)&&(p+=T,y+=w);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(f&&Math.abs(p)<1||!f&&Math.abs(y)<1)&&(m=!0),m},wd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Pv=function(t){return[t.deltaX,t.deltaY]},Av=function(t){return t&&"current"in t?t.current:t},l5=function(t,e){return t[0]===e[0]&&t[1]===e[1]},c5=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},d5=0,Zi=[];function u5(t){var e=x.useRef([]),s=x.useRef([0,0]),r=x.useRef(),a=x.useState(d5++)[0],l=x.useState(ej)[0],c=x.useRef(t);x.useEffect(function(){c.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var j=RR([t.lockRef.current],(t.shards||[]).map(Av),!0).filter(Boolean);return j.forEach(function(S){return S.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),j.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var d=x.useCallback(function(j,S){if("touches"in j&&j.touches.length===2||j.type==="wheel"&&j.ctrlKey)return!c.current.allowPinchZoom;var T=wd(j),R=s.current,A="deltaX"in j?j.deltaX:R[0]-T[0],k="deltaY"in j?j.deltaY:R[1]-T[1],P,F=j.target,W=Math.abs(A)>Math.abs(k)?"h":"v";if("touches"in j&&W==="h"&&F.type==="range")return!1;var z=Ev(W,F);if(!z)return!0;if(z?P=W:(P=W==="v"?"h":"v",z=Ev(W,F)),!z)return!1;if(!r.current&&"changedTouches"in j&&(A||k)&&(r.current=P),!P)return!0;var oe=r.current||P;return o5(oe,S,j,oe==="h"?A:k)},[]),h=x.useCallback(function(j){var S=j;if(!(!Zi.length||Zi[Zi.length-1]!==l)){var T="deltaY"in S?Pv(S):wd(S),R=e.current.filter(function(P){return P.name===S.type&&(P.target===S.target||S.target===P.shadowParent)&&l5(P.delta,T)})[0];if(R&&R.should){S.cancelable&&S.preventDefault();return}if(!R){var A=(c.current.shards||[]).map(Av).filter(Boolean).filter(function(P){return P.contains(S.target)}),k=A.length>0?d(S,A[0]):!c.current.noIsolation;k&&S.cancelable&&S.preventDefault()}}},[]),m=x.useCallback(function(j,S,T,R){var A={name:j,delta:S,target:T,should:R,shadowParent:h5(T)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(k){return k!==A})},1)},[]),f=x.useCallback(function(j){s.current=wd(j),r.current=void 0},[]),p=x.useCallback(function(j){m(j.type,Pv(j),j.target,d(j,t.lockRef.current))},[]),y=x.useCallback(function(j){m(j.type,wd(j),j.target,d(j,t.lockRef.current))},[]);x.useEffect(function(){return Zi.push(l),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Ki),document.addEventListener("touchmove",h,Ki),document.addEventListener("touchstart",f,Ki),function(){Zi=Zi.filter(function(j){return j!==l}),document.removeEventListener("wheel",h,Ki),document.removeEventListener("touchmove",h,Ki),document.removeEventListener("touchstart",f,Ki)}},[]);var N=t.removeScrollBar,w=t.inert;return x.createElement(x.Fragment,null,w?x.createElement(l,{styles:c5(a)}):null,N?x.createElement(e5,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function h5(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const m5=BR(X1,u5);var Eu=x.forwardRef(function(t,e){return x.createElement(Tu,ir({},t,{ref:e,sideCar:m5}))});Eu.classNames=Tu.classNames;var Pu="Popover",[rj]=Zn(Pu,[ku]),Jl=ku(),[f5,Ea]=rj(Pu),aj=t=>{const{__scopePopover:e,children:s,open:r,defaultOpen:a,onOpenChange:l,modal:c=!1}=t,d=Jl(e),h=x.useRef(null),[m,f]=x.useState(!1),[p,y]=ka({prop:r,defaultProp:a??!1,onChange:l,caller:Pu});return n.jsx(q1,{...d,children:n.jsx(f5,{scope:e,contentId:Dr(),triggerRef:h,open:p,onOpenChange:y,onOpenToggle:x.useCallback(()=>y(N=>!N),[y]),hasCustomAnchor:m,onCustomAnchorAdd:x.useCallback(()=>f(!0),[]),onCustomAnchorRemove:x.useCallback(()=>f(!1),[]),modal:c,children:s})})};aj.displayName=Pu;var ij="PopoverAnchor",p5=x.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,a=Ea(ij,s),l=Jl(s),{onCustomAnchorAdd:c,onCustomAnchorRemove:d}=a;return x.useEffect(()=>(c(),()=>d()),[c,d]),n.jsx(Qp,{...l,...r,ref:e})});p5.displayName=ij;var oj="PopoverTrigger",lj=x.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,a=Ea(oj,s),l=Jl(s),c=ft(e,a.triggerRef),d=n.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":mj(a.open),...r,ref:c,onClick:Qe(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?d:n.jsx(Qp,{asChild:!0,...l,children:d})});lj.displayName=oj;var eg="PopoverPortal",[g5,x5]=rj(eg,{forceMount:void 0}),cj=t=>{const{__scopePopover:e,forceMount:s,children:r,container:a}=t,l=Ea(eg,e);return n.jsx(g5,{scope:e,forceMount:s,children:n.jsx(gi,{present:s||l.open,children:n.jsx(Cu,{asChild:!0,container:a,children:r})})})};cj.displayName=eg;var xo="PopoverContent",dj=x.forwardRef((t,e)=>{const s=x5(xo,t.__scopePopover),{forceMount:r=s.forceMount,...a}=t,l=Ea(xo,t.__scopePopover);return n.jsx(gi,{present:r||l.open,children:l.modal?n.jsx(v5,{...a,ref:e}):n.jsx(w5,{...a,ref:e})})});dj.displayName=xo;var y5=li("PopoverContent.RemoveScroll"),v5=x.forwardRef((t,e)=>{const s=Ea(xo,t.__scopePopover),r=x.useRef(null),a=ft(e,r),l=x.useRef(!1);return x.useEffect(()=>{const c=r.current;if(c)return Xp(c)},[]),n.jsx(Eu,{as:y5,allowPinchZoom:!0,children:n.jsx(uj,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Qe(t.onCloseAutoFocus,c=>{c.preventDefault(),l.current||s.triggerRef.current?.focus()}),onPointerDownOutside:Qe(t.onPointerDownOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,m=d.button===2||h;l.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:Qe(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),w5=x.forwardRef((t,e)=>{const s=Ea(xo,t.__scopePopover),r=x.useRef(!1),a=x.useRef(!1);return n.jsx(uj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(r.current||s.triggerRef.current?.focus(),l.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;s.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),uj=x.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:f,...p}=t,y=Ea(xo,s),N=Jl(s);return Up(),n.jsx(wu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:l,children:n.jsx(vu,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:f,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onDismiss:()=>y.onOpenChange(!1),children:n.jsx(K1,{"data-state":mj(y.open),role:"dialog",id:y.contentId,...N,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),hj="PopoverClose",b5=x.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,a=Ea(hj,s);return n.jsx(Ye.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,()=>a.onOpenChange(!1))})});b5.displayName=hj;var j5="PopoverArrow",N5=x.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,a=Jl(s);return n.jsx(Z1,{...a,...r,ref:e})});N5.displayName=j5;function mj(t){return t?"open":"closed"}var S5=aj,k5=lj,C5=cj,T5=dj;function E5({...t}){return n.jsx(S5,{"data-slot":"popover",...t})}function P5({...t}){return n.jsx(k5,{"data-slot":"popover-trigger",...t})}function A5({className:t,align:e="center",sideOffset:s=4,...r}){return n.jsx(C5,{children:n.jsx(T5,{"data-slot":"popover-content",align:e,sideOffset:s,className:Xe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}const _5=$p("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:t,variant:e,asChild:s=!1,...r}){const a=s?c1:"span";return n.jsx(a,{"data-slot":"badge",className:Xe(_5({variant:e}),t),...r})}function ne({className:t,...e}){return n.jsx("div",{"data-slot":"card",className:Xe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function tg(t){const e=t+"CollectionProvider",[s,r]=Zn(e),[a,l]=s(e,{collectionRef:{current:null},itemMap:new Map}),c=j=>{const{scope:S,children:T}=j,R=he.useRef(null),A=he.useRef(new Map).current;return n.jsx(a,{scope:S,itemMap:A,collectionRef:R,children:T})};c.displayName=e;const d=t+"CollectionSlot",h=li(d),m=he.forwardRef((j,S)=>{const{scope:T,children:R}=j,A=l(d,T),k=ft(S,A.collectionRef);return n.jsx(h,{ref:k,children:R})});m.displayName=d;const f=t+"CollectionItemSlot",p="data-radix-collection-item",y=li(f),N=he.forwardRef((j,S)=>{const{scope:T,children:R,...A}=j,k=he.useRef(null),P=ft(S,k),F=l(f,T);return he.useEffect(()=>(F.itemMap.set(k,{ref:k,...A}),()=>void F.itemMap.delete(k))),n.jsx(y,{[p]:"",ref:P,children:R})});N.displayName=f;function w(j){const S=l(t+"CollectionConsumer",j);return he.useCallback(()=>{const R=S.collectionRef.current;if(!R)return[];const A=Array.from(R.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((F,W)=>A.indexOf(F.ref.current)-A.indexOf(W.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:m,ItemSlot:N},w,r]}var R5=x.createContext(void 0);function Au(t){const e=x.useContext(R5);return t||e||"ltr"}var af="rovingFocusGroup.onEntryFocus",M5={bubbles:!1,cancelable:!0},Ql="RovingFocusGroup",[qf,fj,D5]=tg(Ql),[I5,pj]=Zn(Ql,[D5]),[L5,O5]=I5(Ql),gj=x.forwardRef((t,e)=>n.jsx(qf.Provider,{scope:t.__scopeRovingFocusGroup,children:n.jsx(qf.Slot,{scope:t.__scopeRovingFocusGroup,children:n.jsx(F5,{...t,ref:e})})}));gj.displayName=Ql;var F5=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:a=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:f=!1,...p}=t,y=x.useRef(null),N=ft(e,y),w=Au(l),[j,S]=ka({prop:c,defaultProp:d??null,onChange:h,caller:Ql}),[T,R]=x.useState(!1),A=Or(m),k=fj(s),P=x.useRef(!1),[F,W]=x.useState(0);return x.useEffect(()=>{const z=y.current;if(z)return z.addEventListener(af,A),()=>z.removeEventListener(af,A)},[A]),n.jsx(L5,{scope:s,orientation:r,dir:w,loop:a,currentTabStopId:j,onItemFocus:x.useCallback(z=>S(z),[S]),onItemShiftTab:x.useCallback(()=>R(!0),[]),onFocusableItemAdd:x.useCallback(()=>W(z=>z+1),[]),onFocusableItemRemove:x.useCallback(()=>W(z=>z-1),[]),children:n.jsx(Ye.div,{tabIndex:T||F===0?-1:0,"data-orientation":r,...p,ref:N,style:{outline:"none",...t.style},onMouseDown:Qe(t.onMouseDown,()=>{P.current=!0}),onFocus:Qe(t.onFocus,z=>{const oe=!P.current;if(z.target===z.currentTarget&&oe&&!T){const q=new CustomEvent(af,M5);if(z.currentTarget.dispatchEvent(q),!q.defaultPrevented){const J=k().filter(M=>M.focusable),K=J.find(M=>M.active),B=J.find(M=>M.id===j),re=[K,B,...J].filter(Boolean).map(M=>M.ref.current);vj(re,f)}}P.current=!1}),onBlur:Qe(t.onBlur,()=>R(!1))})})}),xj="RovingFocusGroupItem",yj=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:a=!1,tabStopId:l,children:c,...d}=t,h=Dr(),m=l||h,f=O5(xj,s),p=f.currentTabStopId===m,y=fj(s),{onFocusableItemAdd:N,onFocusableItemRemove:w,currentTabStopId:j}=f;return x.useEffect(()=>{if(r)return N(),()=>w()},[r,N,w]),n.jsx(qf.ItemSlot,{scope:s,id:m,focusable:r,active:a,children:n.jsx(Ye.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...d,ref:e,onMouseDown:Qe(t.onMouseDown,S=>{r?f.onItemFocus(m):S.preventDefault()}),onFocus:Qe(t.onFocus,()=>f.onItemFocus(m)),onKeyDown:Qe(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const T=B5(S,f.orientation,f.dir);if(T!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=y().filter(k=>k.focusable).map(k=>k.ref.current);if(T==="last")A.reverse();else if(T==="prev"||T==="next"){T==="prev"&&A.reverse();const k=A.indexOf(S.currentTarget);A=f.loop?U5(A,k+1):A.slice(k+1)}setTimeout(()=>vj(A))}}),children:typeof c=="function"?c({isCurrentTabStop:p,hasTabStop:j!=null}):c})})});yj.displayName=xj;var z5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $5(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function B5(t,e,s){const r=$5(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return z5[r]}function vj(t,e=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:e}),document.activeElement!==s))return}function U5(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var V5=gj,W5=yj,_u="Tabs",[H5]=Zn(_u,[pj]),wj=pj(),[G5,sg]=H5(_u),bj=x.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,onValueChange:a,defaultValue:l,orientation:c="horizontal",dir:d,activationMode:h="automatic",...m}=t,f=Au(d),[p,y]=ka({prop:r,onChange:a,defaultProp:l??"",caller:_u});return n.jsx(G5,{scope:s,baseId:Dr(),value:p,onValueChange:y,orientation:c,dir:f,activationMode:h,children:n.jsx(Ye.div,{dir:f,"data-orientation":c,...m,ref:e})})});bj.displayName=_u;var jj="TabsList",Nj=x.forwardRef((t,e)=>{const{__scopeTabs:s,loop:r=!0,...a}=t,l=sg(jj,s),c=wj(s);return n.jsx(V5,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:r,children:n.jsx(Ye.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:e})})});Nj.displayName=jj;var Sj="TabsTrigger",kj=x.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,disabled:a=!1,...l}=t,c=sg(Sj,s),d=wj(s),h=Ej(c.baseId,r),m=Pj(c.baseId,r),f=r===c.value;return n.jsx(W5,{asChild:!0,...d,focusable:!a,active:f,children:n.jsx(Ye.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":m,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:h,...l,ref:e,onMouseDown:Qe(t.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?c.onValueChange(r):p.preventDefault()}),onKeyDown:Qe(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&c.onValueChange(r)}),onFocus:Qe(t.onFocus,()=>{const p=c.activationMode!=="manual";!f&&!a&&p&&c.onValueChange(r)})})})});kj.displayName=Sj;var Cj="TabsContent",Tj=x.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,forceMount:a,children:l,...c}=t,d=sg(Cj,s),h=Ej(d.baseId,r),m=Pj(d.baseId,r),f=r===d.value,p=x.useRef(f);return x.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),n.jsx(gi,{present:a||f,children:({present:y})=>n.jsx(Ye.div,{"data-state":f?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:m,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:y&&l})})});Tj.displayName=Cj;function Ej(t,e){return`${t}-trigger-${e}`}function Pj(t,e){return`${t}-content-${e}`}var q5=bj,K5=Nj,Z5=kj,Y5=Tj;const An=x.forwardRef(({className:t,...e},s)=>n.jsx(q5,{ref:s,"data-slot":"tabs",className:Xe("flex flex-col gap-2",t),...e}));An.displayName="Tabs";const _n=x.forwardRef(({className:t,...e},s)=>n.jsx(K5,{ref:s,"data-slot":"tabs-list",className:Xe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e}));_n.displayName="TabsList";const st=x.forwardRef(({className:t,...e},s)=>n.jsx(Z5,{ref:s,"data-slot":"tabs-trigger",className:Xe("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e}));st.displayName="TabsTrigger";const nt=x.forwardRef(({className:t,...e},s)=>n.jsx(Y5,{ref:s,"data-slot":"tabs-content",className:Xe("flex-1 outline-none",t),...e}));nt.displayName="TabsContent";var of={exports:{}},lf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function J5(){if(_v)return lf;_v=1;var t=fu();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var s=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(p,y){var N=y(),w=r({inst:{value:N,getSnapshot:y}}),j=w[0].inst,S=w[1];return l(function(){j.value=N,j.getSnapshot=y,h(j)&&S({inst:j})},[p,N,y]),a(function(){return h(j)&&S({inst:j}),p(function(){h(j)&&S({inst:j})})},[p]),c(N),N}function h(p){var y=p.getSnapshot;p=p.value;try{var N=y();return!s(p,N)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return lf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,lf}var Rv;function Q5(){return Rv||(Rv=1,of.exports=J5()),of.exports}var X5=Q5();function eM(){return X5.useSyncExternalStore(tM,()=>!0,()=>!1)}function tM(){return()=>{}}var ng="Avatar",[sM]=Zn(ng),[nM,Aj]=sM(ng),_j=x.forwardRef((t,e)=>{const{__scopeAvatar:s,...r}=t,[a,l]=x.useState("idle");return n.jsx(nM,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:l,children:n.jsx(Ye.span,{...r,ref:e})})});_j.displayName=ng;var Rj="AvatarImage",Mj=x.forwardRef((t,e)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:a=()=>{},...l}=t,c=Aj(Rj,s),d=rM(r,l),h=Or(m=>{a(m),c.onImageLoadingStatusChange(m)});return as(()=>{d!=="idle"&&h(d)},[d,h]),d==="loaded"?n.jsx(Ye.img,{...l,ref:e,src:r}):null});Mj.displayName=Rj;var Dj="AvatarFallback",Ij=x.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:r,...a}=t,l=Aj(Dj,s),[c,d]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&l.imageLoadingStatus!=="loaded"?n.jsx(Ye.span,{...a,ref:e}):null});Ij.displayName=Dj;function Mv(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function rM(t,{referrerPolicy:e,crossOrigin:s}){const r=eM(),a=x.useRef(null),l=r?(a.current||(a.current=new window.Image),a.current):null,[c,d]=x.useState(()=>Mv(l,t));return as(()=>{d(Mv(l,t))},[l,t]),as(()=>{const h=p=>()=>{d(p)};if(!l)return;const m=h("loaded"),f=h("error");return l.addEventListener("load",m),l.addEventListener("error",f),e&&(l.referrerPolicy=e),typeof s=="string"&&(l.crossOrigin=s),()=>{l.removeEventListener("load",m),l.removeEventListener("error",f)}},[l,s,e]),c}var aM=_j,iM=Mj,oM=Ij;function yo({className:t,...e}){return n.jsx(aM,{"data-slot":"avatar",className:Xe("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function lM({className:t,...e}){return n.jsx(iM,{"data-slot":"avatar-image",className:Xe("aspect-square size-full",t),...e})}function vo({className:t,...e}){return n.jsx(oM,{"data-slot":"avatar-fallback",className:Xe("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}var Ru="Dialog",[Lj]=Zn(Ru),[cM,Yn]=Lj(Ru),Oj=t=>{const{__scopeDialog:e,children:s,open:r,defaultOpen:a,onOpenChange:l,modal:c=!0}=t,d=x.useRef(null),h=x.useRef(null),[m,f]=ka({prop:r,defaultProp:a??!1,onChange:l,caller:Ru});return n.jsx(cM,{scope:e,triggerRef:d,contentRef:h,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:m,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:c,children:s})};Oj.displayName=Ru;var Fj="DialogTrigger",zj=x.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,a=Yn(Fj,s),l=ft(e,a.triggerRef);return n.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":ig(a.open),...r,ref:l,onClick:Qe(t.onClick,a.onOpenToggle)})});zj.displayName=Fj;var rg="DialogPortal",[dM,$j]=Lj(rg,{forceMount:void 0}),Bj=t=>{const{__scopeDialog:e,forceMount:s,children:r,container:a}=t,l=Yn(rg,e);return n.jsx(dM,{scope:e,forceMount:s,children:x.Children.map(r,c=>n.jsx(gi,{present:s||l.open,children:n.jsx(Cu,{asChild:!0,container:a,children:c})}))})};Bj.displayName=rg;var Xd="DialogOverlay",Uj=x.forwardRef((t,e)=>{const s=$j(Xd,t.__scopeDialog),{forceMount:r=s.forceMount,...a}=t,l=Yn(Xd,t.__scopeDialog);return l.modal?n.jsx(gi,{present:r||l.open,children:n.jsx(hM,{...a,ref:e})}):null});Uj.displayName=Xd;var uM=li("DialogOverlay.RemoveScroll"),hM=x.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,a=Yn(Xd,s);return n.jsx(Eu,{as:uM,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(Ye.div,{"data-state":ig(a.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),di="DialogContent",Vj=x.forwardRef((t,e)=>{const s=$j(di,t.__scopeDialog),{forceMount:r=s.forceMount,...a}=t,l=Yn(di,t.__scopeDialog);return n.jsx(gi,{present:r||l.open,children:l.modal?n.jsx(mM,{...a,ref:e}):n.jsx(fM,{...a,ref:e})})});Vj.displayName=di;var mM=x.forwardRef((t,e)=>{const s=Yn(di,t.__scopeDialog),r=x.useRef(null),a=ft(e,s.contentRef,r);return x.useEffect(()=>{const l=r.current;if(l)return Xp(l)},[]),n.jsx(Wj,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Qe(t.onCloseAutoFocus,l=>{l.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Qe(t.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&l.preventDefault()}),onFocusOutside:Qe(t.onFocusOutside,l=>l.preventDefault())})}),fM=x.forwardRef((t,e)=>{const s=Yn(di,t.__scopeDialog),r=x.useRef(!1),a=x.useRef(!1);return n.jsx(Wj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(r.current||s.triggerRef.current?.focus(),l.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;s.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),Wj=x.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:l,...c}=t,d=Yn(di,s),h=x.useRef(null),m=ft(e,h);return Up(),n.jsxs(n.Fragment,{children:[n.jsx(wu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:l,children:n.jsx(vu,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":ig(d.open),...c,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(pM,{titleId:d.titleId}),n.jsx(xM,{contentRef:h,descriptionId:d.descriptionId})]})]})}),ag="DialogTitle",Hj=x.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,a=Yn(ag,s);return n.jsx(Ye.h2,{id:a.titleId,...r,ref:e})});Hj.displayName=ag;var Gj="DialogDescription",qj=x.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,a=Yn(Gj,s);return n.jsx(Ye.p,{id:a.descriptionId,...r,ref:e})});qj.displayName=Gj;var Kj="DialogClose",Zj=x.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,a=Yn(Kj,s);return n.jsx(Ye.button,{type:"button",...r,ref:e,onClick:Qe(t.onClick,()=>a.onOpenChange(!1))})});Zj.displayName=Kj;function ig(t){return t?"open":"closed"}var Yj="DialogTitleWarning",[SV,Jj]=OA(Yj,{contentName:di,titleName:ag,docsSlug:"dialog"}),pM=({titleId:t})=>{const e=Jj(Yj),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},gM="DialogDescriptionWarning",xM=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Jj(gM).contentName}}.`;return x.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Qj=Oj,Xj=zj,eN=Bj,tN=Uj,sN=Vj,nN=Hj,rN=qj,Mu=Zj;const og=Qj;og.displayName="Sheet";const aN=x.forwardRef((t,e)=>n.jsx(Xj,{ref:e,"data-slot":"sheet-trigger",...t}));aN.displayName="SheetTrigger";const yM=x.forwardRef((t,e)=>n.jsx(Mu,{ref:e,"data-slot":"sheet-close",...t}));yM.displayName="SheetClose";const iN=eN;iN.displayName="SheetPortal";const oN=x.forwardRef(({className:t,...e},s)=>n.jsx(tN,{ref:s,"data-slot":"sheet-overlay",className:Xe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));oN.displayName="SheetOverlay";const lg=x.forwardRef(({className:t,children:e,side:s="right",...r},a)=>n.jsxs(iN,{children:[n.jsx(oN,{}),n.jsxs(sN,{ref:a,"data-slot":"sheet-content",className:Xe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",s==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",s==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",s==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",s==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,n.jsxs(Mu,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[n.jsx(ys,{className:"size-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lg.displayName="SheetContent";const cg=x.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-slot":"sheet-header",className:Xe("flex flex-col gap-1.5 p-4",t),...e}));cg.displayName="SheetHeader";const vM=x.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-slot":"sheet-footer",className:Xe("mt-auto flex flex-col gap-2 p-4",t),...e}));vM.displayName="SheetFooter";const dg=x.forwardRef(({className:t,...e},s)=>n.jsx(nN,{ref:s,"data-slot":"sheet-title",className:Xe("text-foreground font-semibold",t),...e}));dg.displayName="SheetTitle";const wM=x.forwardRef(({className:t,...e},s)=>n.jsx(rN,{ref:s,"data-slot":"sheet-description",className:Xe("text-muted-foreground text-sm",t),...e}));wM.displayName="SheetDescription";function lN({place:t,isOpen:e,onClose:s,onNavigate:r,onShare:a}){const[l,c]=x.useState("overview"),[d,h]=x.useState(!1),[m,f]=x.useState(null);if(!t)return null;const p=[{id:"1",author:"Sarah M.",avatar:"SM",rating:5,text:"Amazing coffee and great atmosphere! The baristas are very knowledgeable and friendly. Perfect spot for remote work.",date:"2 days ago",helpful:12},{id:"2",author:"Mike Chen",avatar:"MC",rating:4,text:"Good coffee, but can get quite crowded during peak hours. Food options are limited but tasty.",date:"1 week ago",helpful:8},{id:"3",author:"Emma R.",avatar:"ER",rating:5,text:"Love this place! They have the best oat milk latte in the city. Parking can be tricky but worth it.",date:"2 weeks ago",helpful:15}],y=w=>"$".repeat(w)+"".repeat(4-w),N=w=>{switch(w.toLowerCase()){case"wifi":return n.jsx(Kd,{className:"w-4 h-4"});case"parking":return n.jsx(Ls,{className:"w-4 h-4"});case"accessible":return n.jsx(io,{className:"w-4 h-4"});case"cards":return n.jsx(lo,{className:"w-4 h-4"});default:return null}};return n.jsx(og,{open:e,onOpenChange:s,children:n.jsx(lg,{side:"bottom",className:"h-[90vh] sm:h-[85vh] p-0 sheet-mobile",children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx(cg,{className:"p-3 sm:p-6 pb-3 sm:pb-4 border-b",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 pr-2 sm:pr-4 min-w-0",children:[n.jsx(dg,{className:"text-lg sm:text-xl font-bold mb-1 sm:mb-2 truncate",children:t.name}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1 sm:mb-2 text-xs sm:text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ds,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400 fill-current"}),n.jsx("span",{className:"font-medium",children:t.rating}),n.jsxs("span",{className:"text-gray-500",children:["(",t.reviewCount,")"]})]}),n.jsx("span",{className:"text-gray-400",children:""}),n.jsx("span",{className:"text-gray-600",children:y(t.priceLevel)}),n.jsx("span",{className:"text-gray-400 hidden sm:inline",children:""}),n.jsx(Ie,{variant:t.isOpen?"default":"secondary",className:"text-xs",children:t.isOpen?"Open":"Closed"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[n.jsx(pt,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:t.address})]})]}),n.jsxs("div",{className:"flex sm:flex-col gap-1 sm:gap-2 flex-shrink-0",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>h(!d),className:"h-8 w-8 sm:h-10 sm:w-10",children:n.jsx(e1,{className:`w-4 h-4 sm:w-5 sm:h-5 ${d?"fill-red-500 text-red-500":"text-gray-500"}`})}),n.jsx(L,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8 sm:h-10 sm:w-10",children:n.jsx(r1,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})}),n.jsx("div",{className:"flex-shrink-0 px-3 sm:px-6 py-3 sm:py-4",children:n.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto pb-2 hide-scrollbar",children:[...Array(5)].map((w,j)=>n.jsxs("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 bg-gray-200 rounded-lg flex-shrink-0 overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:n.jsx(Hn,{className:"w-4 h-4 sm:w-6 sm:h-6 text-gray-400"})}),j===4&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-medium",children:"+12"})})]},j))})}),n.jsx("div",{className:"flex-shrink-0 px-3 sm:px-6 pb-3 sm:pb-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[n.jsxs(L,{onClick:r,className:"flex items-center gap-2 touch-manipulation",children:[n.jsx(rt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Directions"})]}),n.jsxs(L,{variant:"outline",className:"flex items-center gap-2 touch-manipulation",children:[n.jsx(Il,{className:"w-3 h-3 sm:w-4 sm:h-4"}),n.jsx("span",{className:"text-sm sm:text-base",children:"Call"})]})]})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsxs(An,{value:l,onValueChange:c,className:"flex flex-col h-full",children:[n.jsx("div",{className:"flex-shrink-0 px-6 border-b",children:n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"overview",children:"Overview"}),n.jsx(st,{value:"reviews",children:"Reviews"}),n.jsx(st,{value:"photos",children:"Photos"})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsxs(nt,{value:"overview",className:"p-6 space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-medium",children:"Hours"}),n.jsx(Ie,{variant:t.isOpen?"default":"secondary",children:t.isOpen?"Open Now":"Closed"})]}),n.jsx("div",{className:"text-sm text-gray-600",children:t.openHours})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Contact"}),n.jsxs("div",{className:"space-y-3",children:[t.phone&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Il,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-gray-700",children:t.phone})]}),t.website&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Dl,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-blue-600",children:t.website})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Amenities"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:["WiFi","Parking","Accessible","Cards"].map(w=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[N(w),n.jsx("span",{className:"text-gray-700",children:w})]},w))})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Popular Times"}),n.jsx("div",{className:"space-y-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((w,j)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600 w-8",children:w}),n.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 rounded-full h-2",style:{width:`${20+Math.random()*60}%`}})}),n.jsxs("span",{className:"text-xs text-gray-500",children:[8+Math.floor(Math.random()*4),"AM"]})]},w))})]})]}),n.jsxs(nt,{value:"reviews",className:"p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium",children:"Reviews"}),n.jsx(L,{variant:"outline",size:"sm",children:"Write Review"})]}),p.map(w=>n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(yo,{className:"w-10 h-10",children:n.jsx(vo,{children:w.avatar})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium",children:w.author}),n.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((j,S)=>n.jsx(Ds,{className:`w-3 h-3 ${S<w.rating?"text-yellow-400 fill-current":"text-gray-300"}`},S))}),n.jsx("span",{className:"text-sm text-gray-500",children:w.date})]}),n.jsx("p",{className:`text-gray-700 text-sm ${m===w.id?"":"line-clamp-3"}`,children:w.text}),w.text.length>100&&n.jsx(L,{variant:"ghost",size:"sm",className:"p-0 h-auto text-blue-600",onClick:()=>f(m===w.id?null:w.id),children:m===w.id?n.jsxs(n.Fragment,{children:["Show less ",n.jsx(Gd,{className:"w-3 h-3 ml-1"})]}):n.jsxs(n.Fragment,{children:["Read more ",n.jsx(oo,{className:"w-3 h-3 ml-1"})]})}),n.jsx("div",{className:"flex items-center gap-4 mt-3",children:n.jsxs(L,{variant:"ghost",size:"sm",className:"p-0",children:[n.jsx(v4,{className:"w-4 h-4 mr-1"}),"Helpful (",w.helpful,")"]})})]})]})},w.id))]}),n.jsx(nt,{value:"photos",className:"p-6",children:n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[...Array(12)].map((w,j)=>n.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:n.jsx(Hn,{className:"w-8 h-8 text-gray-400"})})},j))})})]})]})})]})})})}function bM(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const jM=t=>{switch(t){case"success":return kM;case"info":return TM;case"warning":return CM;case"error":return EM;default:return null}},NM=Array(12).fill(0),SM=({visible:t,className:e})=>he.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},he.createElement("div",{className:"sonner-spinner"},NM.map((s,r)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),kM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),CM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),TM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),EM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),PM=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),AM=()=>{const[t,e]=he.useState(document.hidden);return he.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let Kf=1;class _M{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:r,...a}=e,l=typeof e?.id=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:Kf++,c=this.toasts.find(h=>h.id===l),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...e,id:l,title:r}),{...h,...e,id:l,dismissible:d,title:r}):h):this.addToast({title:r,...a,dismissible:d,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let l=r!==void 0,c;const d=a.then(async m=>{if(c=["resolve",m],he.isValidElement(m))l=!1,this.create({id:r,type:"default",message:m});else if(MM(m)&&!m.ok){l=!1;const p=typeof s.error=="function"?await s.error(`HTTP error! status: ${m.status}`):s.error,y=typeof s.description=="function"?await s.description(`HTTP error! status: ${m.status}`):s.description,w=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...w})}else if(m instanceof Error){l=!1;const p=typeof s.error=="function"?await s.error(m):s.error,y=typeof s.description=="function"?await s.description(m):s.description,w=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...w})}else if(s.success!==void 0){l=!1;const p=typeof s.success=="function"?await s.success(m):s.success,y=typeof s.description=="function"?await s.description(m):s.description,w=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:y,...w})}}).catch(async m=>{if(c=["reject",m],s.error!==void 0){l=!1;const f=typeof s.error=="function"?await s.error(m):s.error,p=typeof s.description=="function"?await s.description(m):s.description,N=typeof f=="object"&&!he.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...N})}}).finally(()=>{l&&(this.dismiss(r),r=void 0),s.finally==null||s.finally.call(s)}),h=()=>new Promise((m,f)=>d.then(()=>c[0]==="reject"?f(c[1]):m(c[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:h}:Object.assign(r,{unwrap:h})},this.custom=(e,s)=>{const r=s?.id||Kf++;return this.create({jsx:e(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const qs=new _M,RM=(t,e)=>{const s=e?.id||Kf++;return qs.addToast({title:t,...e,id:s}),s},MM=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",DM=RM,IM=()=>qs.toasts,LM=()=>qs.getActiveToasts(),ue=Object.assign(DM,{success:qs.success,info:qs.info,warning:qs.warning,error:qs.error,custom:qs.custom,message:qs.message,promise:qs.promise,dismiss:qs.dismiss,loading:qs.loading},{getHistory:IM,getToasts:LM});bM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function bd(t){return t.label!==void 0}const OM=3,FM="24px",zM="16px",Dv=4e3,$M=356,BM=14,UM=45,VM=200;function nr(...t){return t.filter(Boolean).join(" ")}function WM(t){const[e,s]=t.split("-"),r=[];return e&&r.push(e),s&&r.push(s),r}const HM=t=>{var e,s,r,a,l,c,d,h,m;const{invert:f,toast:p,unstyled:y,interacting:N,setHeights:w,visibleToasts:j,heights:S,index:T,toasts:R,expanded:A,removeToast:k,defaultRichColors:P,closeButton:F,style:W,cancelButtonStyle:z,actionButtonStyle:oe,className:q="",descriptionClassName:J="",duration:K,position:B,gap:V,expandByDefault:re,classNames:M,icons:D,closeButtonAriaLabel:E="Close toast"}=t,[Y,Q]=he.useState(null),[I,te]=he.useState(null),[se,fe]=he.useState(!1),[ve,Pe]=he.useState(!1),[$,G]=he.useState(!1),[X,me]=he.useState(!1),[ye,je]=he.useState(!1),[Ae,U]=he.useState(0),[Te,Se]=he.useState(0),We=he.useRef(p.duration||K||Dv),ct=he.useRef(null),pe=he.useRef(null),ie=T===0,le=T+1<=j,Le=p.type,et=p.dismissible!==!1,wt=p.className||"",ds=p.descriptionClassName||"",Bt=he.useMemo(()=>S.findIndex(Ke=>Ke.toastId===p.id)||0,[S,p.id]),Mn=he.useMemo(()=>{var Ke;return(Ke=p.closeButton)!=null?Ke:F},[p.closeButton,F]),cn=he.useMemo(()=>p.duration||K||Dv,[p.duration,K]),gr=he.useRef(0),Os=he.useRef(0),Xs=he.useRef(0),us=he.useRef(null),[wi,xr]=B.split("-"),bi=he.useMemo(()=>S.reduce((Ke,Pt,At)=>At>=Bt?Ke:Ke+Pt.height,0),[S,Bt]),Dn=AM(),Ma=p.invert||f,Fs=Le==="loading";Os.current=he.useMemo(()=>Bt*V+bi,[Bt,bi]),he.useEffect(()=>{We.current=cn},[cn]),he.useEffect(()=>{fe(!0)},[]),he.useEffect(()=>{const Ke=pe.current;if(Ke){const Pt=Ke.getBoundingClientRect().height;return Se(Pt),w(At=>[{toastId:p.id,height:Pt,position:p.position},...At]),()=>w(At=>At.filter(Dt=>Dt.toastId!==p.id))}},[w,p.id]),he.useLayoutEffect(()=>{if(!se)return;const Ke=pe.current,Pt=Ke.style.height;Ke.style.height="auto";const At=Ke.getBoundingClientRect().height;Ke.style.height=Pt,Se(At),w(Dt=>Dt.find(jt=>jt.toastId===p.id)?Dt.map(jt=>jt.toastId===p.id?{...jt,height:At}:jt):[{toastId:p.id,height:At,position:p.position},...Dt])},[se,p.title,p.description,w,p.id,p.jsx,p.action,p.cancel]);const ut=he.useCallback(()=>{Pe(!0),U(Os.current),w(Ke=>Ke.filter(Pt=>Pt.toastId!==p.id)),setTimeout(()=>{k(p)},VM)},[p,k,w,Os]);he.useEffect(()=>{if(p.promise&&Le==="loading"||p.duration===1/0||p.type==="loading")return;let Ke;return A||N||Dn?(()=>{if(Xs.current<gr.current){const Dt=new Date().getTime()-gr.current;We.current=We.current-Dt}Xs.current=new Date().getTime()})():(()=>{We.current!==1/0&&(gr.current=new Date().getTime(),Ke=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),ut()},We.current))})(),()=>clearTimeout(Ke)},[A,N,p,Le,Dn,ut]),he.useEffect(()=>{p.delete&&(ut(),p.onDismiss==null||p.onDismiss.call(p,p))},[ut,p.delete]);function Ur(){var Ke;if(D?.loading){var Pt;return he.createElement("div",{className:nr(M?.loader,p==null||(Pt=p.classNames)==null?void 0:Pt.loader,"sonner-loader"),"data-visible":Le==="loading"},D.loading)}return he.createElement(SM,{className:nr(M?.loader,p==null||(Ke=p.classNames)==null?void 0:Ke.loader),visible:Le==="loading"})}const dn=p.icon||D?.[Le]||jM(Le);var un,Vr;return he.createElement("li",{tabIndex:0,ref:pe,className:nr(q,wt,M?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,M?.default,M?.[Le],p==null||(s=p.classNames)==null?void 0:s[Le]),"data-sonner-toast":"","data-rich-colors":(un=p.richColors)!=null?un:P,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":se,"data-promise":!!p.promise,"data-swiped":ye,"data-removed":ve,"data-visible":le,"data-y-position":wi,"data-x-position":xr,"data-index":T,"data-front":ie,"data-swiping":$,"data-dismissible":et,"data-type":Le,"data-invert":Ma,"data-swipe-out":X,"data-swipe-direction":I,"data-expanded":!!(A||re&&se),"data-testid":p.testId,style:{"--index":T,"--toasts-before":T,"--z-index":R.length-T,"--offset":`${ve?Ae:Os.current}px`,"--initial-height":re?"auto":`${Te}px`,...W,...p.style},onDragEnd:()=>{G(!1),Q(null),us.current=null},onPointerDown:Ke=>{Ke.button!==2&&(Fs||!et||(ct.current=new Date,U(Os.current),Ke.target.setPointerCapture(Ke.pointerId),Ke.target.tagName!=="BUTTON"&&(G(!0),us.current={x:Ke.clientX,y:Ke.clientY})))},onPointerUp:()=>{var Ke,Pt,At;if(X||!et)return;us.current=null;const Dt=Number(((Ke=pe.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),In=Number(((Pt=pe.current)==null?void 0:Pt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jt=new Date().getTime()-((At=ct.current)==null?void 0:At.getTime()),It=Y==="x"?Dt:In,hs=Math.abs(It)/jt;if(Math.abs(It)>=UM||hs>.11){U(Os.current),p.onDismiss==null||p.onDismiss.call(p,p),te(Y==="x"?Dt>0?"right":"left":In>0?"down":"up"),ut(),me(!0);return}else{var es,vs;(es=pe.current)==null||es.style.setProperty("--swipe-amount-x","0px"),(vs=pe.current)==null||vs.style.setProperty("--swipe-amount-y","0px")}je(!1),G(!1),Q(null)},onPointerMove:Ke=>{var Pt,At,Dt;if(!us.current||!et||((Pt=window.getSelection())==null?void 0:Pt.toString().length)>0)return;const jt=Ke.clientY-us.current.y,It=Ke.clientX-us.current.x;var hs;const es=(hs=t.swipeDirections)!=null?hs:WM(B);!Y&&(Math.abs(It)>1||Math.abs(jt)>1)&&Q(Math.abs(It)>Math.abs(jt)?"x":"y");let vs={x:0,y:0};const hn=zs=>1/(1.5+Math.abs(zs)/20);if(Y==="y"){if(es.includes("top")||es.includes("bottom"))if(es.includes("top")&&jt<0||es.includes("bottom")&&jt>0)vs.y=jt;else{const zs=jt*hn(jt);vs.y=Math.abs(zs)<Math.abs(jt)?zs:jt}}else if(Y==="x"&&(es.includes("left")||es.includes("right")))if(es.includes("left")&&It<0||es.includes("right")&&It>0)vs.x=It;else{const zs=It*hn(It);vs.x=Math.abs(zs)<Math.abs(It)?zs:It}(Math.abs(vs.x)>0||Math.abs(vs.y)>0)&&je(!0),(At=pe.current)==null||At.style.setProperty("--swipe-amount-x",`${vs.x}px`),(Dt=pe.current)==null||Dt.style.setProperty("--swipe-amount-y",`${vs.y}px`)}},Mn&&!p.jsx&&Le!=="loading"?he.createElement("button",{"aria-label":E,"data-disabled":Fs,"data-close-button":!0,onClick:Fs||!et?()=>{}:()=>{ut(),p.onDismiss==null||p.onDismiss.call(p,p)},className:nr(M?.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Vr=D?.close)!=null?Vr:PM):null,(Le||p.icon||p.promise)&&p.icon!==null&&(D?.[Le]!==null||p.icon)?he.createElement("div",{"data-icon":"",className:nr(M?.icon,p==null||(a=p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ur():null,p.type!=="loading"?dn:null):null,he.createElement("div",{"data-content":"",className:nr(M?.content,p==null||(l=p.classNames)==null?void 0:l.content)},he.createElement("div",{"data-title":"",className:nr(M?.title,p==null||(c=p.classNames)==null?void 0:c.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?he.createElement("div",{"data-description":"",className:nr(J,ds,M?.description,p==null||(d=p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),he.isValidElement(p.cancel)?p.cancel:p.cancel&&bd(p.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||z,onClick:Ke=>{bd(p.cancel)&&et&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,Ke),ut())},className:nr(M?.cancelButton,p==null||(h=p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,he.isValidElement(p.action)?p.action:p.action&&bd(p.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||oe,onClick:Ke=>{bd(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,Ke),!Ke.defaultPrevented&&ut())},className:nr(M?.actionButton,p==null||(m=p.classNames)==null?void 0:m.actionButton)},p.action.label):null)};function Iv(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function GM(t,e){const s={};return[t,e].forEach((r,a)=>{const l=a===1,c=l?"--mobile-offset":"--offset",d=l?zM:FM;function h(m){["top","right","bottom","left"].forEach(f=>{s[`${c}-${f}`]=typeof m=="number"?`${m}px`:m})}typeof r=="number"||typeof r=="string"?h(r):typeof r=="object"?["top","right","bottom","left"].forEach(m=>{r[m]===void 0?s[`${c}-${m}`]=d:s[`${c}-${m}`]=typeof r[m]=="number"?`${r[m]}px`:r[m]}):h(d)}),s}const qM=he.forwardRef(function(e,s){const{id:r,invert:a,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:d,closeButton:h,className:m,offset:f,mobileOffset:p,theme:y="light",richColors:N,duration:w,style:j,visibleToasts:S=OM,toastOptions:T,dir:R=Iv(),gap:A=BM,icons:k,containerAriaLabel:P="Notifications"}=e,[F,W]=he.useState([]),z=he.useMemo(()=>r?F.filter(se=>se.toasterId===r):F.filter(se=>!se.toasterId),[F,r]),oe=he.useMemo(()=>Array.from(new Set([l].concat(z.filter(se=>se.position).map(se=>se.position)))),[z,l]),[q,J]=he.useState([]),[K,B]=he.useState(!1),[V,re]=he.useState(!1),[M,D]=he.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),E=he.useRef(null),Y=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=he.useRef(null),I=he.useRef(!1),te=he.useCallback(se=>{W(fe=>{var ve;return(ve=fe.find(Pe=>Pe.id===se.id))!=null&&ve.delete||qs.dismiss(se.id),fe.filter(({id:Pe})=>Pe!==se.id)})},[]);return he.useEffect(()=>qs.subscribe(se=>{if(se.dismiss){requestAnimationFrame(()=>{W(fe=>fe.map(ve=>ve.id===se.id?{...ve,delete:!0}:ve))});return}setTimeout(()=>{j1.flushSync(()=>{W(fe=>{const ve=fe.findIndex(Pe=>Pe.id===se.id);return ve!==-1?[...fe.slice(0,ve),{...fe[ve],...se},...fe.slice(ve+1)]:[se,...fe]})})})}),[F]),he.useEffect(()=>{if(y!=="system"){D(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;const se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:fe})=>{D(fe?"dark":"light")})}catch{se.addListener(({matches:ve})=>{try{D(ve?"dark":"light")}catch(Pe){console.error(Pe)}})}},[y]),he.useEffect(()=>{F.length<=1&&B(!1)},[F]),he.useEffect(()=>{const se=fe=>{var ve;if(c.every(G=>fe[G]||fe.code===G)){var $;B(!0),($=E.current)==null||$.focus()}fe.code==="Escape"&&(document.activeElement===E.current||(ve=E.current)!=null&&ve.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[c]),he.useEffect(()=>{if(E.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,I.current=!1)}},[E.current]),he.createElement("section",{ref:s,"aria-label":`${P} ${Y}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},oe.map((se,fe)=>{var ve;const[Pe,$]=se.split("-");return z.length?he.createElement("ol",{key:se,dir:R==="auto"?Iv():R,tabIndex:-1,ref:E,className:m,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":Pe,"data-x-position":$,style:{"--front-toast-height":`${((ve=q[0])==null?void 0:ve.height)||0}px`,"--width":`${$M}px`,"--gap":`${A}px`,...j,...GM(f,p)},onBlur:G=>{I.current&&!G.currentTarget.contains(G.relatedTarget)&&(I.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||I.current||(I.current=!0,Q.current=G.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{V||B(!1)},onDragEnd:()=>B(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},z.filter(G=>!G.position&&fe===0||G.position===se).map((G,X)=>{var me,ye;return he.createElement(HM,{key:G.id,icons:k,index:X,toast:G,defaultRichColors:N,duration:(me=T?.duration)!=null?me:w,className:T?.className,descriptionClassName:T?.descriptionClassName,invert:a,visibleToasts:S,closeButton:(ye=T?.closeButton)!=null?ye:h,interacting:V,position:se,style:T?.style,unstyled:T?.unstyled,classNames:T?.classNames,cancelButtonStyle:T?.cancelButtonStyle,actionButtonStyle:T?.actionButtonStyle,closeButtonAriaLabel:T?.closeButtonAriaLabel,removeToast:te,toasts:z.filter(je=>je.position==G.position),heights:q.filter(je=>je.position==G.position),setHeights:J,expandByDefault:d,gap:A,expanded:K,swipeDirections:e.swipeDirections})})):null}))});class KM{logs=[];isDevelopment=!1;addLog(e,s,r){const a={level:e,message:s,data:r,timestamp:new Date().toISOString()};if(this.logs.push(a),this.logs.length>1e3&&(this.logs=this.logs.slice(-1e3)),this.isDevelopment){const l=console[e]||console.log;r?l(`[${e.toUpperCase()}] ${s}`,r):l(`[${e.toUpperCase()}] ${s}`)}}debug(e,s){this.addLog("debug",e,s)}info(e,s){this.addLog("info",e,s),ue.info(e)}warn(e,s){this.addLog("warn",e,s),ue.warning(e)}error(e,s){this.addLog("error",e,s),ue.error(e)}success(e){this.addLog("info",e),ue.success(e)}getLogs(e){return e?this.logs.filter(s=>s.level===e):[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}group(e){this.addLog("debug",`=== ${e} ===`),this.isDevelopment&&console.group(e)}groupEnd(){this.isDevelopment&&console.groupEnd()}}const C=new KM,ZM={walking:"",driving:"",cycling:"",transit:""},YM={walking:"#10B981",driving:"#3B82F6",cycling:"#8B5CF6",transit:"#F59E0B"},JM=t=>t?t<=5?"high":t<=20?"medium":"low":"unknown",QM=t=>{switch(t){case"high":return"#10B981";case"medium":return"#F59E0B";case"low":return"#EF4444";default:return"#9CA3AF"}};function XM({transportMode:t,isTracking:e,accuracy:s,onCenterLocation:r,onToggleTracking:a,className:l,position:c="bottom-right"}){const[d,h]=x.useState(!1),[m,f]=x.useState(!1),p=JM(s),y=QM(p),N=ZM[t],w=YM[t],j=()=>{h(!0),r(),ue.success(`Centering on current location (${t} mode)`),setTimeout(()=>h(!1),1e3),C.info("Current location button clicked",{transportMode:t,isTracking:e})},S=()=>{a(),ue.info(e?"Location tracking disabled":"Location tracking enabled")};return x.useEffect(()=>{let T;const R=document.getElementById("current-location-btn");if(!R)return;const A=()=>{T=setTimeout(S,500)},k=()=>{clearTimeout(T)};return R.addEventListener("mousedown",A),R.addEventListener("mouseup",k),R.addEventListener("mouseleave",k),R.addEventListener("touchstart",A),R.addEventListener("touchend",k),()=>{R.removeEventListener("mousedown",A),R.removeEventListener("mouseup",k),R.removeEventListener("mouseleave",k),R.removeEventListener("touchstart",A),R.removeEventListener("touchend",k),clearTimeout(T)}},[e]),n.jsxs("div",{className:Xe("relative flex flex-col items-center gap-2",l),children:[n.jsxs("div",{className:"relative",children:[n.jsxs(L,{id:"current-location-btn",size:"icon",variant:"outline",onClick:j,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),className:Xe("relative w-16 h-16 bg-white shadow-xl border-0 rounded-full transition-all duration-300 hover:scale-105 hover:shadow-2xl",d&&"animate-pulse ring-4 ring-blue-400 ring-opacity-50",e&&"ring-2 ring-offset-2","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"),style:{ringColor:e?w:void 0,boxShadow:e?`0 8px 32px rgba(0,0,0,0.12), 0 0 0 2px ${w}20`:"0 8px 32px rgba(0,0,0,0.12)"},children:[n.jsx("span",{className:"text-3xl absolute inset-0 flex items-center justify-center filter drop-shadow-sm",style:{textShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:N}),e&&n.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:w}})]}),(m||e)&&s&&n.jsx("div",{className:Xe("absolute inset-0 rounded-full pointer-events-none transition-all duration-300","ring-2 ring-offset-2"),style:{ringColor:y,transform:`scale(${1+s/100})`,opacity:.3}})]}),m&&s&&n.jsxs(Ie,{variant:"secondary",className:"absolute -bottom-8 whitespace-nowrap text-xs",style:{backgroundColor:`${y}20`,color:y},children:["",s.toFixed(0),"m accuracy"]}),n.jsx(Ie,{variant:"outline",className:"text-xs capitalize",style:{borderColor:w,color:w},children:t})]})}const e3={walking:{emoji:"",color:"#10B981",pulseColor:"rgba(16, 185, 129, 0.3)",shadowColor:"rgba(16, 185, 129, 0.5)"},driving:{emoji:"",color:"#3B82F6",pulseColor:"rgba(59, 130, 246, 0.3)",shadowColor:"rgba(59, 130, 246, 0.5)"},cycling:{emoji:"",color:"#8B5CF6",pulseColor:"rgba(139, 92, 246, 0.3)",shadowColor:"rgba(139, 92, 246, 0.5)"},transit:{emoji:"",color:"#F59E0B",pulseColor:"rgba(245, 158, 11, 0.3)",shadowColor:"rgba(245, 158, 11, 0.5)"}};function t3(t,e={}){const{accuracy:s=10,isTracking:r=!0,speed:a=0,heading:l=0}=e,c=e3[t],d=a>.5;return`
    <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <!-- Gradient for main dot -->
        <radialGradient id="mainGradient" cx="50%" cy="30%" r="70%">
          <stop offset="0%" style="stop-color:white;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#f8f9fa;stop-opacity:1" />
        </radialGradient>
        
        <!-- Drop shadow filter -->
        <filter id="dropshadow" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="rgba(0,0,0,0.2)"/>
        </filter>
        
        <!-- Glow effect -->
        <filter id="glow">
          <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
          <feMerge> 
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
      
      <!-- Accuracy circle -->
      ${r&&s>5?`
        <circle 
          cx="30" 
          cy="30" 
          r="${Math.min(s,25)}"
          fill="${c.pulseColor}"
          opacity="${s>20?"0.15":"0.25"}"
        >
          <animate attributeName="opacity" values="0.1;0.3;0.1" dur="2s" repeatCount="indefinite"/>
        </circle>
      `:""}
      
      <!-- GPS pulse ring -->
      ${r?`
        <circle 
          cx="30" 
          cy="30" 
          r="20"
          fill="none"
          stroke="${c.color}"
          stroke-width="2"
          opacity="0.5"
        >
          <animate attributeName="r" values="20;35;20" dur="2s" repeatCount="indefinite"/>
          <animate attributeName="opacity" values="0.5;0;0.5" dur="2s" repeatCount="indefinite"/>
        </circle>
      `:""}
      
      <!-- Direction arrow when moving -->
      ${d?`
        <polygon 
          points="30,10 26,20 34,20" 
          fill="${c.color}"
          opacity="0.8"
          filter="url(#dropshadow)"
          transform="rotate(${l} 30 30)"
        />
      `:""}
      
      <!-- Main white circle with border -->
      <circle 
        cx="30" 
        cy="30" 
        r="16"
        fill="url(#mainGradient)"
        stroke="${c.color}"
        stroke-width="3"
        filter="url(#dropshadow)"
      >
        ${r?'<animate attributeName="stroke-width" values="3;4;3" dur="2s" repeatCount="indefinite"/>':""}
      </circle>
      
      <!-- Inner colored circle -->
      <circle 
        cx="30" 
        cy="30" 
        r="12"
        fill="${c.color}"
        filter="url(#glow)"
      />
      
      <!-- Transport mode emoji -->
      <text 
        x="30" 
        y="35" 
        text-anchor="middle" 
        fill="white" 
        font-size="14" 
        font-weight="bold"
        filter="url(#dropshadow)"
      >
        ${c.emoji}
      </text>
      
      <!-- Speed badge when moving -->
      ${d&&a>1?`
        <circle cx="42" cy="42" r="8" fill="white" stroke="${c.color}" stroke-width="1.5"/>
        <text x="42" y="45" text-anchor="middle" fill="${c.color}" font-size="8" font-weight="bold">
          ${Math.round(a*3.6)}
        </text>
      `:""}
      
      <!-- Status indicator -->
      <circle 
        cx="42" 
        cy="18" 
        r="4"
        fill="${r?d?"#10B981":c.color:"#9CA3AF"}"
        stroke="white" 
        stroke-width="2"
        filter="url(#dropshadow)"
      >
        ${r?'<animate attributeName="opacity" values="1;0.5;1" dur="1.5s" repeatCount="indefinite"/>':""}
      </circle>
    </svg>
  `}function s3(t,e,s,r){function a(l){return l instanceof s?l:new s(function(c){c(l)})}return new(s||(s=Promise))(function(l,c){function d(f){try{m(r.next(f))}catch(p){c(p)}}function h(f){try{m(r.throw(f))}catch(p){c(p)}}function m(f){f.done?l(f.value):a(f.value).then(d,h)}m((r=r.apply(t,[])).next())})}function n3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cf,Lv;function r3(){return Lv||(Lv=1,cf=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var r,a,l;if(Array.isArray(e)){if(r=e.length,r!=s.length)return!1;for(a=r;a--!==0;)if(!t(e[a],s[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(s).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(s,l[a]))return!1;for(a=r;a--!==0;){var c=l[a];if(!t(e[c],s[c]))return!1}return!0}return e!==e&&s!==s}),cf}var a3=r3(),i3=n3(a3);const Ov="__googleMapsScriptId";var Ji;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Ji||(Ji={}));class Qa{constructor({apiKey:e,authReferrerPolicy:s,channel:r,client:a,id:l=Ov,language:c,libraries:d=[],mapIds:h,nonce:m,region:f,retries:p=3,url:y="https://maps.googleapis.com/maps/api/js",version:N}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=s,this.channel=r,this.client=a,this.id=l||Ov,this.language=c,this.libraries=d,this.mapIds=h,this.nonce=m,this.region=f,this.retries=p,this.url=y,this.version=N,Qa.instance){if(!i3(this.options,Qa.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Qa.instance.options)}`);return Qa.instance}Qa.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Ji.FAILURE:this.done?Ji.SUCCESS:this.loading?Ji.LOADING:Ji.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,s)=>{this.loadCallback(r=>{r?s(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,s;if(document.getElementById(this.id)){this.callback();return}const r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(l=>!r[l]&&delete r[l]),!((s=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||s===void 0)&&s.importLibrary||(l=>{let c,d,h,m="The Google Maps JavaScript API",f="google",p="importLibrary",y="__ib__",N=document,w=window;w=w[f]||(w[f]={});const j=w.maps||(w.maps={}),S=new Set,T=new URLSearchParams,R=()=>c||(c=new Promise((A,k)=>s3(this,void 0,void 0,function*(){var P;yield d=N.createElement("script"),d.id=this.id,T.set("libraries",[...S]+"");for(h in l)T.set(h.replace(/[A-Z]/g,F=>"_"+F[0].toLowerCase()),l[h]);T.set("callback",f+".maps."+y),d.src=this.url+"?"+T,j[y]=A,d.onerror=()=>c=k(Error(m+" could not load.")),d.nonce=this.nonce||((P=N.querySelector("script[nonce]"))===null||P===void 0?void 0:P.nonce)||"",N.head.append(d)})));j[p]?console.warn(m+" only loads once. Ignoring:",l):j[p]=(A,...k)=>S.add(A)&&R().then(()=>j[p](A,...k))})(r);const a=this.libraries.map(l=>this.importLibrary(l));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),l=>{const c=new ErrorEvent("error",{error:l});this.loadErrorCallback(c)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const s=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${s} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},s)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}class Qi{static instance=null;loader=null;isLoaded=!1;loadPromise=null;constructor(){const e="AIzaSyCr3z9_rT0EdprALkAz-oi--XlqqUY0vQk";this.loader=new Qa({apiKey:e,version:"weekly",libraries:["places","geometry","geocoding","drawing","marker"]})}static getInstance(){return Qi.instance||(Qi.instance=new Qi),Qi.instance}async load(){if(this.isLoaded)return Promise.resolve();if(this.loadPromise)return this.loadPromise;if(!this.loader)throw new Error("Google Maps loader not initialized");return this.loadPromise=this.loader.load().then(()=>{this.isLoaded=!0,C.info("Google Maps API loaded successfully")}).catch(e=>{throw C.error("Failed to load Google Maps API:",e),this.loadPromise=null,e}),this.loadPromise}isGoogleMapsLoaded(){return this.isLoaded&&typeof google<"u"&&!!google.maps}async waitForGoogleMaps(e=1e4){if(this.isGoogleMapsLoaded())return!0;try{await this.load();const s=Date.now();for(;!this.isGoogleMapsLoaded()&&Date.now()-s<e;)await new Promise(r=>setTimeout(r,100));return this.isGoogleMapsLoaded()}catch(s){return C.error("Failed to wait for Google Maps:",s),!1}}}const Du=Qi.getInstance(),o3=Object.freeze(Object.defineProperty({__proto__:null,googleMapsLoader:Du},Symbol.toStringTag,{value:"Module"}));class l3{map=null;directionsService=null;directionsRenderer=null;placesService=null;geocoder=null;isInitialized=!1;async initialize(){if(this.isInitialized)return!0;try{if(!await Du.waitForGoogleMaps())throw new Error("Google Maps API failed to load");return this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer,this.geocoder=new google.maps.Geocoder,this.isInitialized=!0,C.info("Google Maps APIs initialized successfully"),!0}catch(e){return C.error("Failed to initialize Google Maps APIs",e),ue.error("Failed to load Google Maps. Using fallback services."),!1}}async createMap(e,s){if(!await this.initialize())return null;try{return this.map=new google.maps.Map(e,{zoom:15,center:{lat:37.7749,lng:-122.4194},...s,mapId:"DEMO_MAP_ID",mapTypeControl:!1,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0}),this.map}catch(r){return C.error("Failed to create Google Map",r),null}}async getDirections(e){if(!await this.initialize()||!this.directionsService)return null;const s={origin:e.origin,destination:e.destination,travelMode:e.travelMode||google.maps.TravelMode.DRIVING,waypoints:e.waypoints||[],optimizeWaypoints:e.optimizeWaypoints||!1,avoidHighways:e.avoidHighways||!1,avoidTolls:e.avoidTolls||!1,avoidFerries:e.avoidFerries||!1,provideRouteAlternatives:e.provideRouteAlternatives||!1};return new Promise((r,a)=>{this.directionsService.route(s,(l,c)=>{c===google.maps.DirectionsStatus.OK&&l?r(l):(C.error("Directions request failed",{status:c,request:s}),a(new Error(`Directions request failed: ${c}`)))})})}displayDirections(e){!this.map||!this.directionsRenderer||(this.directionsRenderer.setMap(this.map),this.directionsRenderer.setDirections(e))}async searchPlaces(e){if(!await this.initialize())return[];try{return await this.searchPlacesModern(e)}catch(s){return C.error("Places search failed",s),[]}}async searchNearbyPlaces(e){if(!await this.initialize())return[];try{return await this.searchPlacesModern({location:e.location,radius:e.radius,type:e.type,keyword:e.keyword})}catch(s){return C.error("Nearby places search failed",s),[]}}async searchPlacesModern(e){try{const{Place:s}=await google.maps.importLibrary("places");if(!s)return C.error("Modern Places API not available"),[];const r=[];if(e.query)try{const a={textQuery:e.query,fields:["displayName","location","businessStatus","formattedAddress","rating"],locationBias:e.location?{center:e.location,radius:e.radius||5e3}:void 0,maxResultCount:20},{places:l}=await s.searchByText(a);l.forEach(c=>{r.push({place_id:c.id,name:c.displayName,geometry:{location:c.location},formatted_address:c.formattedAddress,rating:c.rating,business_status:c.businessStatus})})}catch(a){return C.error("Modern Places text search failed",a),[]}else if(e.location)try{const a={fields:["displayName","location","businessStatus","formattedAddress","rating"],locationRestriction:{center:e.location,radius:e.radius||5e3},includedTypes:e.type?[e.type]:void 0,maxResultCount:20},{places:l}=await s.searchNearby(a);l.forEach(c=>{r.push({place_id:c.id,name:c.displayName,geometry:{location:c.location},formatted_address:c.formattedAddress,rating:c.rating,business_status:c.businessStatus})})}catch(a){return C.error("Modern Places nearby search failed",a),[]}return C.info("Modern Places API search completed successfully",{resultCount:r.length}),r}catch(s){return C.error("Modern Places API search failed entirely",s),[]}}async searchPlacesLegacy(e){return this.placesService?e.query?new Promise((s,r)=>{const a={query:e.query,location:e.location,radius:e.radius||5e3};this.placesService.textSearch(a,(l,c)=>{c===google.maps.places.PlacesServiceStatus.OK&&l?s(l):(C.warn("Legacy Places text search failed, this API will be deprecated",{status:c,request:a}),s([]))})}):e.location?new Promise((s,r)=>{const a={location:e.location,radius:e.radius||5e3,type:e.type,keyword:e.keyword};this.placesService.nearbySearch(a,(l,c)=>{c===google.maps.places.PlacesServiceStatus.OK&&l?s(l):(C.warn("Legacy Places nearby search failed, this API will be deprecated",{status:c,request:a}),s([]))})}):[]:[]}async getPlaceDetails(e){if(!await this.initialize())return null;try{const{Place:s}=await google.maps.importLibrary("places");if(s)try{const r=new s({id:e});await r.fetchFields({fields:["id","displayName","formattedAddress","location","rating","regularOpeningHours","nationalPhoneNumber","websiteURI","photos","reviews","priceLevel","types"]});const a={place_id:r.id,name:r.displayName,formatted_address:r.formattedAddress,geometry:{location:r.location},rating:r.rating,opening_hours:r.regularOpeningHours?{isOpen:()=>r.regularOpeningHours?.isOpen(),periods:r.regularOpeningHours.periods,weekday_text:r.regularOpeningHours.weekdayDescriptions}:void 0,formatted_phone_number:r.nationalPhoneNumber,website:r.websiteURI,photos:r.photos,reviews:r.reviews,price_level:r.priceLevel,types:r.types};return C.info("Modern Places API place details retrieved successfully"),a}catch(r){C.warn("Modern Places API place details failed, falling back to legacy",r)}}catch(s){C.warn("Failed to load modern Places API, using legacy",s)}return this.placesService?new Promise((s,r)=>{const a={placeId:e,fields:["place_id","name","formatted_address","geometry","rating","opening_hours","formatted_phone_number","website","photos","reviews","price_level","types"]};this.placesService.getDetails(a,(l,c)=>{c===google.maps.places.PlacesServiceStatus.OK&&l?(C.info("Legacy Places API place details retrieved successfully"),s(l)):(C.error("Place details request failed",{status:c,placeId:e}),s(null))})}):null}async geocodeAddress(e){return await this.initialize()?this.geocoder?new Promise((s,r)=>{this.geocoder.geocode({address:e},(a,l)=>{l===google.maps.GeocoderStatus.OK&&a?s(a):(C.error("Geocoding failed",{status:l,address:e}),s([]))})}):[]:[]}async reverseGeocode(e){return await this.initialize()?this.geocoder?new Promise((s,r)=>{this.geocoder.geocode({location:e},(a,l)=>{l===google.maps.GeocoderStatus.OK&&a?s(a):(C.error("Reverse geocoding failed",{status:l,location:e}),s([]))})}):[]:[]}calculateDistance(e,s){if(!google.maps.geometry)return 0;const r=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng),a=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);return google.maps.geometry.spherical.computeDistanceBetween(r,a)}async createMarker(e){if(!this.map)return null;try{const{AdvancedMarkerElement:s}=await google.maps.importLibrary("marker");return s?new s({map:this.map,position:e.position,title:e.title}):(C.warn("AdvancedMarkerElement not available, using legacy Marker"),new google.maps.Marker({map:this.map,...e}))}catch(s){C.error("Failed to create marker, falling back to legacy Marker",s);try{return new google.maps.Marker({map:this.map,...e})}catch(r){return C.error("Failed to create fallback marker",r),null}}}createInfoWindow(e){return new google.maps.InfoWindow(e)}createAutocomplete(e,s){return this.isInitialized?new google.maps.places.Autocomplete(e,{types:["establishment","geocode"],...s}):null}getMap(){return this.map}isAvailable(){return this.isInitialized}formatDistance(e){return e<1e3?`${Math.round(e)} m`:`${(e/1e3).toFixed(1)} km`}formatDuration(e){const s=Math.round(e/60);if(s<60)return`${s} min`;const r=Math.floor(s/60),a=s%60;return a===0?`${r} hr`:`${r} hr ${a} min`}convertTravelMode(e){switch(e){case google.maps.TravelMode.DRIVING:return"driving";case google.maps.TravelMode.WALKING:return"walking";case google.maps.TravelMode.TRANSIT:return"transit";case google.maps.TravelMode.BICYCLING:return"cycling";default:return"driving"}}convertToGoogleTravelMode(e){switch(e){case"driving":return google.maps.TravelMode.DRIVING;case"walking":return google.maps.TravelMode.WALKING;case"transit":return google.maps.TravelMode.TRANSIT;case"cycling":return google.maps.TravelMode.BICYCLING;default:return google.maps.TravelMode.DRIVING}}}const Kt=new l3;class c3{static validateDirectionsResult(e){const s=[];if(!e)return s.push("DirectionsResult is null or undefined"),{valid:!1,issues:s};if(!e.routes)s.push("DirectionsResult has no routes array");else if(!Array.isArray(e.routes))s.push("DirectionsResult.routes is not an array");else if(e.routes.length===0)s.push("DirectionsResult.routes array is empty");else{const r=e.routes[0];r.legs?Array.isArray(r.legs)?r.legs.length===0&&s.push("Route.legs array is empty"):s.push("Route.legs is not an array"):s.push("First route has no legs array"),r.overview_polyline||s.push("Route missing overview_polyline"),r.bounds||s.push("Route missing bounds")}return{valid:s.length===0,issues:s}}static validateRenderer(e){const s=[];if(!e)return s.push("DirectionsRenderer is null"),{valid:!1,issues:s};try{e.getMap()||s.push("DirectionsRenderer not attached to map"),e.getDirections()||s.push("DirectionsRenderer has no directions set")}catch(r){s.push(`Error accessing renderer properties: ${r}`)}return{valid:s.length===0,issues:s}}static logDiagnostics(e,s,r){C.group(" Directions Rendering Diagnostics"),r?C.info(" Map instance exists",{center:r.getCenter()?.toJSON(),zoom:r.getZoom(),mapTypeId:r.getMapTypeId()}):C.error(" Map instance is null");const a=this.validateDirectionsResult(s);a.valid?C.info(" DirectionsResult is valid",{routeCount:s.routes.length,firstRouteLegCount:s.routes[0].legs.length,distance:s.routes[0].legs[0].distance?.text,duration:s.routes[0].legs[0].duration?.text}):C.error(" DirectionsResult validation failed",a.issues);const l=this.validateRenderer(e);if(l.valid){C.info(" DirectionsRenderer is valid and attached");try{const c=e.getMap(),d=e.getDirections();C.info("Renderer state:",{hasMap:!!c,mapsMatch:c===r,hasDirections:!!d,directionsMatch:d===s})}catch(c){C.error("Error getting renderer state:",c)}}else C.error(" DirectionsRenderer validation failed",l.issues);this.checkCommonIssues(e,s,r),C.groupEnd()}static checkCommonIssues(e,s,r){if(C.group("Common Issues Check"),e&&!e.getMap()&&r&&(C.warn(" Issue detected: Renderer exists but not attached to map"),C.info("Fix: Call renderer.setMap(map)")),e&&e.getDirections()&&!e.getMap()&&(C.warn(" Issue detected: Directions set but renderer not on map"),C.info("Fix: Attach renderer to map first, then set directions")),window._directionsRendererCount&&window._directionsRendererCount>1&&(C.warn(" Issue detected: Multiple DirectionsRenderer instances created"),C.info("Fix: Reuse the same renderer instance")),e)try{const a=e.polylineOptions||e.options?.polylineOptions;(!a||!a.strokeColor)&&(C.warn(" Issue detected: Polyline options might not be set"),C.info("Fix: Set polylineOptions when creating renderer"))}catch{}if(s&&s.routes?.length>0&&r){const a=new google.maps.LatLngBounds;s.routes[0].legs.forEach(c=>{a.extend(c.start_location),a.extend(c.end_location)});const l=r.getBounds();l&&!l.contains(a.getCenter())&&(C.warn(" Issue detected: Map not centered on route"),C.info("Fix: Call map.fitBounds(routeBounds)"))}C.groupEnd()}static attemptAutoFix(e,s,r){if(C.info(" Attempting auto-fix for directions display issues..."),!e||!s||!r)return C.error("Cannot auto-fix: Missing required objects"),!1;try{if(e.getMap()!==r&&(C.info("Attaching renderer to map..."),e.setMap(r)),C.info("Re-setting directions on renderer..."),e.setDirections(s),s.routes?.length>0){const a=new google.maps.LatLngBounds;s.routes[0].legs.forEach(l=>{a.extend(l.start_location),a.extend(l.end_location)}),C.info("Fitting map bounds to route..."),r.fitBounds(a,{top:50,right:50,bottom:50,left:50})}return C.info(" Auto-fix completed successfully"),!0}catch(a){return C.error(" Auto-fix failed:",a),!1}}}typeof window<"u"&&(window._directionsRendererCount=0);const cN=x.createContext(void 0),Iu=()=>{const t=x.useContext(cN);if(!t)throw new Error("useLoading must be used within a LoadingProvider");return t},d3=({children:t})=>{const[e,s]=x.useState({}),r=(d,h)=>{s(m=>{if(!h&&m[d]){const f={...m};return delete f[d],f}return h&&!m[d]?{...m,[d]:!0}:m})},a=d=>d?!!e[d]:Object.keys(e).length>0,l=()=>Object.keys(e).length>0,c=()=>{s({})};return n.jsx(cN.Provider,{value:{loadingStates:e,setLoading:r,isLoading:a,isAnyLoading:l,clearAllLoading:c},children:t})},u3=({size:t="md",text:e,className:s=""})=>{const r={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return n.jsxs("div",{className:`flex items-center justify-center gap-2 ${s}`,children:[n.jsx(bP,{className:`animate-spin text-blue-600 ${r[t]}`}),e&&n.jsx("span",{className:"text-sm text-gray-600 animate-pulse",children:e})]})},h3=({visible:t,text:e="Loading...",backdrop:s=!0})=>t?n.jsx("div",{className:`fixed inset-0 z-50 flex items-center justify-center ${s?"bg-black bg-opacity-50":""}`,children:n.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:n.jsx(u3,{size:"lg",text:e,className:"flex-col gap-3"})})}):null,m3=t=>{const{setLoading:e,isLoading:s}=Iu(),r=()=>e(t,!0),a=()=>e(t,!1);return{isLoading:s(t),startLoading:r,stopLoading:a,setLoading:c=>e(t,c)}};class f3{watchId=null;lastKnownPosition=null;subscribers=[];errorSubscribers=[];isTracking=!1;trackingOptions={};isSupported(){return"geolocation"in navigator}async getPermissionStatus(){if(!this.isSupported())return"unsupported";if("permissions"in navigator)try{return(await navigator.permissions.query({name:"geolocation"})).state}catch{}return new Promise(e=>{navigator.geolocation.getCurrentPosition(()=>e("granted"),s=>{switch(s.code){case s.PERMISSION_DENIED:e("denied");break;case s.POSITION_UNAVAILABLE:case s.TIMEOUT:e("granted");break;default:e("prompt")}},{timeout:1e3,maximumAge:6e4})})}async requestPermission(){if(!this.isSupported())throw new Error("Geolocation is not supported by this browser");return new Promise((e,s)=>{navigator.geolocation.getCurrentPosition(r=>{this.lastKnownPosition=this.convertPosition(r),e("granted")},r=>{switch(r.code){case r.PERMISSION_DENIED:e("denied");break;case r.POSITION_UNAVAILABLE:s(new Error("Location information is unavailable"));break;case r.TIMEOUT:s(new Error("Location request timed out"));break;default:s(new Error("An unknown error occurred"))}},{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4})})}async getFreshCurrentPosition(e={}){if(!this.isSupported())throw new Error("Geolocation is not supported");const s={enableHighAccuracy:e.enableHighAccuracy??!0,timeout:e.timeout??2e4,maximumAge:0};return new Promise((r,a)=>{navigator.geolocation.getCurrentPosition(l=>{const c=this.convertPosition(l);this.lastKnownPosition=c,r(c)},l=>{a(this.createLocationError(l))},s)})}async getCurrentPosition(e={}){if(!this.isSupported())throw new Error("Geolocation is not supported");if(this.lastKnownPosition&&e.maximumAge&&Date.now()-this.lastKnownPosition.timestamp<e.maximumAge)return this.lastKnownPosition;const s={enableHighAccuracy:e.enableHighAccuracy??!0,timeout:e.timeout??15e3,maximumAge:e.maximumAge??3e5};return new Promise((r,a)=>{navigator.geolocation.getCurrentPosition(l=>{const c=this.convertPosition(l);this.lastKnownPosition=c,r(c)},l=>{a(this.createLocationError(l))},s)})}async startTracking(e={}){if(!this.isSupported())throw new Error("Geolocation is not supported");if(this.isTracking)return;if(await this.getPermissionStatus()==="denied")throw new Error("Location permission denied");this.trackingOptions=e,this.isTracking=!0;const r={enableHighAccuracy:e.enableHighAccuracy??!0,timeout:e.timeout??15e3,maximumAge:e.maximumAge??5e3};this.watchId=navigator.geolocation.watchPosition(a=>{const l=this.convertPosition(a);this.lastKnownPosition=l,this.subscribers.forEach(c=>{try{c(l)}catch{}})},a=>{this.createLocationError(a),this.errorSubscribers.forEach(l=>{try{l(a)}catch{}})},r)}stopTracking(){this.watchId!==null&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.isTracking=!1,this.subscribers=[],this.errorSubscribers=[]}subscribe(e){return this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);s>-1&&this.subscribers.splice(s,1)}}subscribeToErrors(e){return this.errorSubscribers.push(e),()=>{const s=this.errorSubscribers.indexOf(e);s>-1&&this.errorSubscribers.splice(s,1)}}getLastKnownPosition(){return this.lastKnownPosition}getTrackingStatus(){return this.isTracking}calculateDistance(e,s){const a=this.toRadians(s.lat-e.lat),l=this.toRadians(s.lng-e.lng),c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.toRadians(e.lat))*Math.cos(this.toRadians(s.lat))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))*1e3}calculateBearing(e,s){const r=this.toRadians(s.lng-e.lng),a=this.toRadians(e.lat),l=this.toRadians(s.lat),c=Math.sin(r)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(r),h=Math.atan2(c,d);return(this.toDegrees(h)+360)%360}isAccurateEnoughForNavigation(e){return e.accuracy<=50}getAccuracyStatus(e){return e.accuracy<=5?"excellent":e.accuracy<=15?"good":e.accuracy<=50?"fair":"poor"}convertPosition(e){return{lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,altitude:e.coords.altitude??void 0,altitudeAccuracy:e.coords.altitudeAccuracy??void 0,heading:e.coords.heading??void 0,speed:e.coords.speed??void 0,timestamp:e.timestamp}}createLocationError(e){switch(e.code){case e.PERMISSION_DENIED:return new Error("Location access denied by user");case e.POSITION_UNAVAILABLE:return new Error("Location information is unavailable");case e.TIMEOUT:return new Error("Location request timed out");default:return new Error(`Location error: ${e.message}`)}}toRadians(e){return e*(Math.PI/180)}toDegrees(e){return e*(180/Math.PI)}}const ug=(t={})=>{const[e,s]=he.useState(null),[r,a]=he.useState(null),[l,c]=he.useState("prompt"),{isLoading:d,startLoading:h,stopLoading:m}=m3("geolocation");return he.useEffect(()=>{let p=null,y=null;const N=async()=>{try{h();const w=await St.getPermissionStatus();if(c(w),w==="granted"||w==="prompt")if(t.trackLocation)await St.startTracking(t),p=St.subscribe(j=>{s(j),a(null)}),y=St.subscribeToErrors(j=>{const S=j?.message||"Geolocation error occurred";a(new Error(S))});else{const j=await St.getCurrentPosition(t);s(j),a(null)}}catch(w){a(w instanceof Error?w:new Error("Unknown geolocation error"))}finally{m()}};return St.isSupported()?N():(a(new Error("Geolocation is not supported")),c("unsupported")),()=>{p&&p(),y&&y(),t.trackLocation&&St.stopTracking()}},[t.trackLocation,t.enableHighAccuracy]),{position:e,error:r,permissionStatus:l,isLoading:d,requestPermission:async()=>{try{h();const p=await St.requestPermission();if(c(p),p==="granted"){const y=St.getLastKnownPosition();y&&s(y)}}catch(p){a(p instanceof Error?p:new Error("Permission request failed"))}finally{m()}},isSupported:St.isSupported(),calculateDistance:St.calculateDistance,calculateBearing:St.calculateBearing,isAccurateEnoughForNavigation:St.isAccurateEnoughForNavigation,getAccuracyStatus:St.getAccuracyStatus,getFreshCurrentPosition:St.getFreshCurrentPosition}},St=new f3,p3={currentLocation:null,selectedLocation:null,previousLocation:null,isTrackingLocation:!1,permissionStatus:"unknown",locationError:null,accuracy:"unknown",locationHistory:[],maxHistoryItems:100,highAccuracy:!0,backgroundTracking:!1,shareLocation:!1};function g3(t,e){switch(e.type){case"SET_CURRENT_LOCATION":return{...t,currentLocation:e.location,locationError:null};case"SET_SELECTED_LOCATION":return{...t,previousLocation:t.selectedLocation,selectedLocation:e.location};case"SET_TRACKING_STATUS":return{...t,isTrackingLocation:e.isTracking};case"SET_PERMISSION_STATUS":return{...t,permissionStatus:e.status};case"SET_LOCATION_ERROR":return{...t,locationError:e.error};case"SET_ACCURACY":return{...t,accuracy:e.accuracy};case"ADD_TO_HISTORY":const s=[e.location,...t.locationHistory];return{...t,locationHistory:s.slice(0,t.maxHistoryItems)};case"CLEAR_HISTORY":return{...t,locationHistory:[]};case"UPDATE_SETTINGS":return{...t,...e.settings};default:return t}}const dN=x.createContext(void 0);function x3({children:t}){const[e,s]=x.useReducer(g3,p3);x.useEffect(()=>{},[]);const{position:r,error:a,permissionStatus:l,startTracking:c,stopTracking:d,getCurrentPosition:h,isAccurateEnoughForNavigation:m}=ug({enableHighAccuracy:e.highAccuracy,trackLocation:e.isTrackingLocation&&!0,timeout:15e3,maximumAge:1e4});x.useEffect(()=>{if(r){const k={lat:r.lat,lng:r.lng,accuracy:r.accuracy,altitude:r.altitude,speed:r.speed,heading:r.heading,timestamp:Date.now()};s({type:"SET_CURRENT_LOCATION",location:k}),s({type:"ADD_TO_HISTORY",location:k}),r.accuracy<5?s({type:"SET_ACCURACY",accuracy:"high"}):r.accuracy<15?s({type:"SET_ACCURACY",accuracy:"medium"}):s({type:"SET_ACCURACY",accuracy:"low"}),C.debug("Location updated",{position:r,accuracy:r.accuracy})}},[r]),x.useEffect(()=>{l&&l!=="unknown"&&(s({type:"SET_PERMISSION_STATUS",status:l}),l==="denied"?(ue.error("Location permission denied. Some features may not work properly."),C.warn("Location permission denied")):l==="granted"&&C.info("Location permission granted"))},[l]),x.useEffect(()=>{if(a){const k=w3(a);s({type:"SET_LOCATION_ERROR",error:k}),ue.error(k),C.error("Location error",{error:a})}else s({type:"SET_LOCATION_ERROR",error:null})},[a]);const f=x.useCallback(async()=>{try{s({type:"SET_TRACKING_STATUS",isTracking:!0}),await c(),C.info("Location tracking started")}catch(k){throw s({type:"SET_TRACKING_STATUS",isTracking:!1}),C.error("Failed to start location tracking",{error:k}),k}},[c]),p=x.useCallback(()=>{s({type:"SET_TRACKING_STATUS",isTracking:!1}),d(),C.info("Location tracking stopped")},[d]),y=x.useCallback(k=>{s({type:"SET_SELECTED_LOCATION",location:k}),k&&C.debug("Location selected",{location:k.name})},[]),N=x.useCallback(k=>{s({type:"UPDATE_SETTINGS",settings:k}),C.debug("Location settings updated",{settings:k})},[]),w=x.useCallback(()=>{s({type:"CLEAR_HISTORY"}),C.info("Location history cleared")},[]),j=x.useCallback(async()=>{const k=await h();return{lat:k.lat,lng:k.lng,accuracy:k.accuracy,altitude:k.altitude,speed:k.speed,heading:k.heading,timestamp:Date.now()}},[h]),S=x.useCallback(k=>e.currentLocation?y3(e.currentLocation.lat,e.currentLocation.lng,k.lat,k.lng):null,[e.currentLocation]),T=x.useCallback(k=>e.currentLocation?v3(e.currentLocation.lat,e.currentLocation.lng,k.lat,k.lng):null,[e.currentLocation]),R=x.useCallback(()=>r?m(r):!1,[r,m]),A={...e,startLocationTracking:f,stopLocationTracking:p,selectLocation:y,updateLocationSettings:N,clearLocationHistory:w,getCurrentPosition:j,getDistanceTo:S,getBearingTo:T,isLocationAccurate:R};return n.jsx(dN.Provider,{value:A,children:t})}function Lu(){const t=x.useContext(dN);if(t===void 0)throw new Error("useLocation must be used within a LocationProvider");return t}function y3(t,e,s,r){const l=(s-t)*Math.PI/180,c=(r-e)*Math.PI/180,d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(t*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2);return 6371e3*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}function v3(t,e,s,r){const a=(r-e)*Math.PI/180,l=t*Math.PI/180,c=s*Math.PI/180,d=Math.sin(a)*Math.cos(c),h=Math.cos(l)*Math.sin(c)-Math.sin(l)*Math.cos(c)*Math.cos(a);return(Math.atan2(d,h)*180/Math.PI+360)%360}function w3(t){switch(t.code){case t.PERMISSION_DENIED:return"Location access denied. Please enable location services.";case t.POSITION_UNAVAILABLE:return"Location information unavailable. Please check your connection.";case t.TIMEOUT:return"Location request timed out. Please try again.";default:return"Unable to get your location. Please try again."}}function b3({directionsResult:t,transportMode:e,onAlternativeSelect:s,onStartNavigation:r,isVisible:a=!0,onToggleVisibility:l}){const[c,d]=x.useState(null),[h,m]=x.useState(!1);if(!t||!t.routes.length)return null;const f=T=>{switch(T){case"walking":return n.jsx(xu,{className:"w-4 h-4"});case"driving":return n.jsx(Ls,{className:"w-4 h-4"});case"cycling":return n.jsx(qb,{className:"w-4 h-4"});case"transit":return n.jsx(fa,{className:"w-4 h-4"});default:return n.jsx(rt,{className:"w-4 h-4"})}},p=(T,R=!1)=>{if(!R)return"#9aa0a6";switch(T){case"walking":return"#34a853";case"driving":return"#1a73e8";case"cycling":return"#ea4335";case"transit":return"#fbbc04";default:return"#1a73e8"}},y=T=>T?.text?T.text:"Unknown",N=T=>T?.text?T.text:"Unknown",w=T=>{const R=T.legs.reduce((k,P)=>k+(P.duration?.value||0),0),A=T.legs.reduce((k,P)=>k+(P.duration_in_traffic?.value||0),0);if(A>R){const k=Math.round((A-R)/60);return k>0?`+${k} min`:null}return null},j=t.routes[0],S=t.routes.slice(1);return n.jsx("div",{className:`fixed bottom-4 left-4 right-4 bg-white rounded-xl shadow-lg border transition-all duration-300 z-50 ${a?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:p(e,!0)+"20"},children:f(e)}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Best Route"}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(xs,{className:"w-4 h-4"}),n.jsx("span",{children:y(j.legs[0]?.duration)}),w(j)&&n.jsx(Ie,{variant:"destructive",className:"text-xs ml-1",children:w(j)})]}),n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(mr,{className:"w-4 h-4"}),n.jsx("span",{children:N(j.legs[0]?.distance)})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>m(!h),children:[h?n.jsx(Gd,{className:"w-4 h-4"}):n.jsx(oo,{className:"w-4 h-4"}),"Steps"]}),r&&n.jsxs(L,{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[n.jsx(rt,{className:"w-4 h-4 mr-1"}),"Start"]})]})]}),h&&n.jsxs("div",{className:"mb-4 border-t pt-4",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Directions:"}),n.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:j.legs[0]?.steps?.map((T,R)=>n.jsxs("div",{className:"flex items-start space-x-3 text-sm",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-medium text-blue-600 flex-shrink-0 mt-0.5",children:R+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-gray-800",dangerouslySetInnerHTML:{__html:T.instructions}}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[T.distance?.text,"  ",T.duration?.text]})]})]},R))})]}),S.length>0&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-3",children:"Alternative Routes:"}),n.jsx("div",{className:"space-y-2",children:S.map((T,R)=>{const A=R+1,k=c===A,P=w(T);return n.jsxs(ne,{className:"p-3 cursor-pointer hover:bg-gray-50 border-l-4",style:{borderLeftColor:"#9aa0a6"},onClick:()=>{s?.(A),d(k?null:A)},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["Alt ",A]}),n.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(xs,{className:"w-3 h-3"}),n.jsx("span",{children:y(T.legs[0]?.duration)}),P&&n.jsx(Ie,{variant:"outline",className:"text-xs",children:P})]}),n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(mr,{className:"w-3 h-3"}),n.jsx("span",{children:N(T.legs[0]?.distance)})]})]})]}),n.jsx(oo,{className:`w-4 h-4 transition-transform ${k?"rotate-180":""}`})]}),k&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 text-xs text-gray-600",children:[n.jsxs("p",{children:["Via: ",T.summary||"Alternative route"]}),T.warnings&&T.warnings.length>0&&n.jsxs("div",{className:"mt-2 flex items-start space-x-1 text-amber-600",children:[n.jsx(Et,{className:"w-3 h-3 mt-0.5"}),n.jsx("span",{children:T.warnings[0]})]})]})]},A)})})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Tap routes to compare  Powered by Google Maps"}),l&&n.jsx(L,{variant:"ghost",size:"sm",onClick:l,className:"text-gray-500",children:a?n.jsx(oo,{className:"w-4 h-4"}):n.jsx(Gd,{className:"w-4 h-4"})})]})]})})}function j3({location:t,routeInfo:e,transportMode:s,isCalculating:r,onStartNavigation:a,onViewDetails:l,onDismiss:c}){const[d,h]=x.useState(!1),[m,f]=x.useState(!1),[p,y]=x.useState(null);if(x.useEffect(()=>{const S=t?.name||null;if(t&&S!==p){y(S),h(!0);const T=setTimeout(()=>f(!0),50),R=setTimeout(()=>{f(!1),setTimeout(()=>h(!1),200)},6e3);return()=>{clearTimeout(T),clearTimeout(R)}}else if(!t){f(!1);const T=setTimeout(()=>h(!1),200);return()=>clearTimeout(T)}},[t,p]),!d||!t)return null;const N=S=>{switch(S){case"walking":return"";case"driving":return"";case"cycling":return"";case"transit":return"";default:return""}},w=()=>{c&&c(),f(!1)},j=()=>{l?l():ue.info("Tap the route info panel for more details")};return n.jsx("div",{className:`fixed top-3 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${m?"translate-y-0 opacity-100":"-translate-y-4 opacity-0"}`,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 px-3 py-2 max-w-xs mx-auto",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(pt,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:t.name}),n.jsx("div",{className:"flex items-center space-x-2 mt-1",children:r?n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),n.jsxs("span",{className:"text-[11px] text-gray-500",children:["Calculating ",s," route..."]})]}):e?n.jsxs("div",{className:"flex items-center space-x-2 text-[11px] text-gray-600",children:[n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:N(s)}),n.jsx("span",{children:e.distance||"Unknown"})]}),e.duration&&n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(xs,{className:"w-3 h-3"}),n.jsx("span",{children:e.duration})]})]}):n.jsx("span",{className:"text-[11px] text-gray-500",children:"Route calculated  Tap for details"})})]}),n.jsx(L,{size:"icon",variant:"ghost",className:"flex-shrink-0 h-6 w-6 p-0 text-gray-400 hover:text-gray-600",onClick:w,children:n.jsx(ys,{className:"w-3.5 h-3.5"})})]})}),!r&&e&&n.jsxs("div",{className:"flex items-center space-x-2 mt-2 pt-2 border-t border-gray-100",children:[n.jsx(L,{size:"sm",variant:"outline",className:"flex-1 h-6 text-[11px]",onClick:j,children:"Details"}),a&&n.jsxs(L,{size:"sm",className:"flex-1 h-6 text-[11px] bg-blue-600 hover:bg-blue-700 text-white",onClick:a,children:[n.jsx(rt,{className:"w-3 h-3 mr-1"}),"Start"]})]})]})})}function N3({onNavigateBack:t,isFullscreen:e=!1}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Kl,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Home Page"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a full-screen home page component. In the original React Native version, this would contain the map view and location search functionality."}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[n.jsx("p",{children:" Interactive map with current location"}),n.jsx("p",{children:" Search for places and addresses"}),n.jsx("p",{children:" Transportation mode selection"}),n.jsx("p",{children:" Nearby points of interest"}),n.jsx("p",{children:" Quick navigation shortcuts"})]}),t&&n.jsx("button",{onClick:t,className:"mt-6 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Main App"})]})})]})}function S3({onNavigateBack:t,isFullscreen:e=!1,...s}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rt,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"NavigationPage"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a web-compatible placeholder for the NavigationPage component."}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Props received: ",JSON.stringify(Object.keys(s),null,2)]})]})})]})}function k3({onNavigateBack:t,isFullscreen:e=!1,...s}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rt,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ReachabilityPage"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a web-compatible placeholder for the ReachabilityPage component."}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Props received: ",JSON.stringify(Object.keys(s),null,2)]})]})})]})}function C3({onNavigateBack:t,isFullscreen:e=!1,...s}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rt,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"PlaceDetailsPage"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a web-compatible placeholder for the PlaceDetailsPage component."}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Props received: ",JSON.stringify(Object.keys(s),null,2)]})]})})]})}function T3({onNavigateBack:t,isFullscreen:e=!1,...s}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rt,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"SearchResultsPage"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a web-compatible placeholder for the SearchResultsPage component."}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Props received: ",JSON.stringify(Object.keys(s),null,2)]})]})})]})}function E3({onNavigateBack:t,isFullscreen:e=!1,...s}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rt,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"RouteOptionsPage"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a web-compatible placeholder for the RouteOptionsPage component."}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Props received: ",JSON.stringify(Object.keys(s),null,2)]})]})})]})}function P3({onNavigateBack:t,isFullscreen:e=!1,...s}){return n.jsxs("div",{className:`${e?"h-screen":"h-full"} bg-white flex flex-col`,children:[!e&&t&&n.jsx("div",{className:"flex items-center p-4 border-b",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[n.jsx(gt,{className:"w-5 h-5"}),"Back"]})}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(rt,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"SettingsPage"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"This is a web-compatible placeholder for the SettingsPage component."}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Props received: ",JSON.stringify(Object.keys(s),null,2)]})]})})]})}const hg={home:{component:N3,title:"Home",description:"Main homepage with map and search",category:"navigation",fullscreen:!0},"navigation-page":{component:S3,title:"Turn-by-Turn Navigation",description:"Full-screen navigation with voice guidance",category:"navigation",requiresData:!0,fullscreen:!0},reachability:{component:k3,title:"Reachability Analysis",description:"Analyze what locations you can reach within a time/distance",category:"analysis"},"place-details-page":{component:C3,title:"Place Details",description:"Detailed information about a specific location",category:"search",requiresData:!0},"search-results-page":{component:T3,title:"Search Results",description:"Results from location or POI search",category:"search",requiresData:!0},"route-options-page":{component:E3,title:"Route Options",description:"Compare different route options and preferences",category:"navigation",requiresData:!0},"settings-page":{component:P3,title:"Advanced Settings",description:"Detailed app settings and preferences",category:"settings"}},A3=({currentRoute:t,onNavigateBack:e,routeParams:s={}})=>{const[r,a]=x.useState(null);if(!t)return null;const l=hg[t];if(!l)return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsxs("div",{className:"flex items-center p-4 border-b",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:e,children:[n.jsx(gt,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsx("h1",{className:"ml-4 text-lg font-semibold text-red-600",children:"Route Not Found"})]}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-gray-600",children:['The requested page "',t,'" could not be found.']}),n.jsx(L,{className:"mt-4",onClick:e,children:"Go Back"})]})})]});if(l.requiresData&&!s?.data)return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsxs("div",{className:"flex items-center p-4 border-b",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:e,children:[n.jsx(gt,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsx("h1",{className:"ml-4 text-lg font-semibold",children:"Missing Data"})]}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 mb-2",children:"This page requires data to display properly."}),n.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Route: ",l.title]}),n.jsx(L,{onClick:e,children:"Go Back"})]})})]});const c=l.component;if(r)return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsxs("div",{className:"flex items-center p-4 border-b",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:e,children:[n.jsx(gt,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsx("h1",{className:"ml-4 text-lg font-semibold text-red-600",children:"Page Error"})]}),n.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 mb-2",children:"An error occurred while loading this page:"}),n.jsx("p",{className:"text-red-600 text-sm mb-4",children:r}),n.jsxs("div",{className:"space-x-2",children:[n.jsx(L,{variant:"outline",onClick:()=>a(null),children:"Try Again"}),n.jsx(L,{onClick:e,children:"Go Back"})]})]})})]});try{return n.jsxs("div",{className:`bg-white ${l.fullscreen?"fixed inset-0 z-50":"h-full"} flex flex-col`,children:[!l.fullscreen&&n.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:e,children:[n.jsx(gt,{className:"w-4 h-4 mr-2"}),"Back"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold",children:l.title}),n.jsx("p",{className:"text-sm text-gray-600",children:l.description})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ie,{variant:"outline",children:l.category}),n.jsx(L,{variant:"ghost",size:"sm",children:n.jsx(Qb,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:`flex-1 ${l.fullscreen?"":"overflow-auto"}`,children:n.jsx(_3,{onError:a,children:n.jsx(c,{...s,onNavigateBack:e,isFullscreen:l.fullscreen})})})]})}catch(d){return C.error("Error rendering page:",d),a(d instanceof Error?d.message:"Unknown error"),null}};let _3=class extends he.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,s){C.error("Page error:",e,s),this.props.onError(e.message)}render(){return this.state.hasError?null:this.props.children}};const R3=()=>{const[t,e]=x.useState(null),[s,r]=x.useState({});return{currentRoute:t,routeParams:s,navigateTo:(d,h)=>{e(d),r(h||{})},navigateBack:()=>{e(null),r({})},isActive:d=>t===d,routeConfig:t?hg[t]:null}},M3=()=>hg,uN=({onNavigateToPage:t,onNavigateToScreen:e})=>{const s=M3(),r=Object.entries(s).map(([d,h])=>({id:d,...h})),a=[{id:"search",icon:Gn,title:"Search",category:"core"},{id:"saved",icon:pt,title:"Saved Places",category:"core"},{id:"social",icon:Wt,title:"Social",category:"social"},{id:"settings",icon:Wt,title:"Settings",category:"core"},{id:"analytics",icon:Tl,title:"Analytics",category:"advanced"},{id:"parking",icon:pt,title:"Parking",category:"utilities"},{id:"gamification",icon:Tl,title:"Rewards",category:"social"},{id:"developer",icon:Wt,title:"Developer Tools",category:"advanced"}],l=d=>{switch(d){case"navigation":return"bg-blue-100 text-blue-800";case"search":return"bg-green-100 text-green-800";case"settings":return"bg-gray-100 text-gray-800";case"analysis":return"bg-purple-100 text-purple-800";case"core":return"bg-blue-100 text-blue-800";case"social":return"bg-pink-100 text-pink-800";case"advanced":return"bg-orange-100 text-orange-800";case"utilities":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},c=d=>{switch(d.category){case"navigation":return n.jsx(co,{className:"w-4 h-4"});case"search":return n.jsx(Gn,{className:"w-4 h-4"});case"settings":return n.jsx(Wt,{className:"w-4 h-4"});case"analysis":return n.jsx(Tl,{className:"w-4 h-4"});default:return n.jsx(Kl,{className:"w-4 h-4"})}};return n.jsxs(og,{children:[n.jsx(aN,{asChild:!0,children:n.jsx(L,{size:"icon",className:"bg-white text-gray-700 shadow-lg border border-gray-200 hover:bg-gray-50",children:n.jsx(RP,{className:"w-5 h-5"})})}),n.jsxs(lg,{side:"right",className:"w-full sm:w-96",children:[n.jsx(cg,{children:n.jsxs(dg,{className:"flex items-center gap-2",children:[n.jsx(co,{className:"w-5 h-5"}),"Navigation Menu"]})}),n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Full Pages"}),n.jsx("div",{className:"space-y-2",children:r.map(d=>n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[c(d),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium",children:d.title}),n.jsx("p",{className:"text-xs text-gray-500",children:d.description})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ie,{variant:"outline",className:`text-xs ${l(d.category)}`,children:d.category}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>{d.requiresData?t(d.id,{data:{location:{name:"Demo Location",lat:37.7749,lng:-122.4194},query:"coffee shops",results:[]}}):t(d.id)},children:"Open"})]})]})},d.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"App Screens"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:a.map(d=>{const h=d.icon;return n.jsxs(L,{variant:"outline",className:"justify-between h-auto p-3",onClick:()=>e(d.id),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(h,{className:"w-4 h-4"}),n.jsx("span",{children:d.title})]}),n.jsx(Ie,{variant:"outline",className:`text-xs ${l(d.category)}`,children:d.category})]},d.id)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(L,{variant:"outline",onClick:()=>e("voice"),className:"h-auto p-3 flex-col",children:[n.jsx(Wt,{className:"w-4 h-4 mb-1"}),n.jsx("span",{className:"text-xs",children:"Voice Command"})]}),n.jsxs(L,{variant:"outline",onClick:()=>e("ar"),className:"h-auto p-3 flex-col",children:[n.jsx(ii,{className:"w-4 h-4 mb-1"}),n.jsx("span",{className:"text-xs",children:"AR Navigation"})]}),n.jsxs(L,{variant:"outline",onClick:()=>e("fleet"),className:"h-auto p-3 flex-col",children:[n.jsx(co,{className:"w-4 h-4 mb-1"}),n.jsx("span",{className:"text-xs",children:"Fleet Mgmt"})]})]})]})]})]})]})};function mg(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Ou="Switch",[D3]=Zn(Ou),[I3,L3]=D3(Ou),hN=x.forwardRef((t,e)=>{const{__scopeSwitch:s,name:r,checked:a,defaultChecked:l,required:c,disabled:d,value:h="on",onCheckedChange:m,form:f,...p}=t,[y,N]=x.useState(null),w=ft(e,A=>N(A)),j=x.useRef(!1),S=y?f||!!y.closest("form"):!0,[T,R]=ka({prop:a,defaultProp:l??!1,onChange:m,caller:Ou});return n.jsxs(I3,{scope:s,checked:T,disabled:d,children:[n.jsx(Ye.button,{type:"button",role:"switch","aria-checked":T,"aria-required":c,"data-state":gN(T),"data-disabled":d?"":void 0,disabled:d,value:h,...p,ref:w,onClick:Qe(t.onClick,A=>{R(k=>!k),S&&(j.current=A.isPropagationStopped(),j.current||A.stopPropagation())})}),S&&n.jsx(pN,{control:y,bubbles:!j.current,name:r,value:h,checked:T,required:c,disabled:d,form:f,style:{transform:"translateX(-100%)"}})]})});hN.displayName=Ou;var mN="SwitchThumb",fN=x.forwardRef((t,e)=>{const{__scopeSwitch:s,...r}=t,a=L3(mN,s);return n.jsx(Ye.span,{"data-state":gN(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:e})});fN.displayName=mN;var O3="SwitchBubbleInput",pN=x.forwardRef(({__scopeSwitch:t,control:e,checked:s,bubbles:r=!0,...a},l)=>{const c=x.useRef(null),d=ft(c,l),h=mg(s),m=Zp(e);return x.useEffect(()=>{const f=c.current;if(!f)return;const p=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(p,"checked").set;if(h!==s&&N){const w=new Event("click",{bubbles:r});N.call(f,s),f.dispatchEvent(w)}},[h,s,r]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:d,style:{...a.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pN.displayName=O3;function gN(t){return t?"checked":"unchecked"}var F3=hN,z3=fN;function lt({className:t,...e}){return n.jsx(F3,{"data-slot":"switch",className:Xe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:n.jsx(z3,{"data-slot":"switch-thumb",className:Xe("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var $3="Label",xN=x.forwardRef((t,e)=>n.jsx(Ye.label,{...t,ref:e,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(t.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));xN.displayName=$3;var B3=xN;function vl({className:t,...e}){return n.jsx(B3,{"data-slot":"label",className:Xe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}class U3{synthesis=null;currentUtterance=null;isEnabled=!0;lastAnnouncedStep=-1;announcedTurns=new Set;lastWrongWayAlert=0;lastDeviationAlert=0;lastAlternativeAlert=0;wrongWayCount=0;WRONG_WAY_COOLDOWN=1e4;DEVIATION_COOLDOWN=15e3;ALTERNATIVE_COOLDOWN=2e4;constructor(){"speechSynthesis"in window?(this.synthesis=window.speechSynthesis,C.info("Voice navigation initialized")):C.warn("Speech synthesis not supported")}speak(e,s="normal"){if(!this.synthesis||!this.isEnabled)return;s==="high"&&this.synthesis.speaking&&this.synthesis.cancel();const r=new SpeechSynthesisUtterance(e);r.rate=1,r.pitch=1,r.volume=1,r.lang="en-US",this.currentUtterance=r,this.synthesis.speak(r),C.debug("Speaking:",e)}announceTurn(e,s,r){const a=`${e}_${s}`;if(this.announcedTurns.has(a))return;let l="";const c=e.replace(/<[^>]*>/g,"").replace(/\s+/g," ").trim();s<=50?(l=this.getImmediateTurnPhrase(r)||c,this.speak(l,"high"),this.announcedTurns.add(a)):s<=100?(l=`In 100 meters, ${this.getManeuverPhrase(r)||c.toLowerCase()}`,this.speak(l,"high"),this.announcedTurns.add(a)):s<=300&&(l=`In ${Math.round(s/10)*10} meters, ${this.getManeuverPhrase(r)||c.toLowerCase()}`,this.speak(l,"normal"),this.announcedTurns.add(a))}getImmediateTurnPhrase(e){switch(e){case"turn-left":return"Turn left now";case"turn-right":return"Turn right now";case"turn-sharp-left":return"Sharp left turn now";case"turn-sharp-right":return"Sharp right turn now";case"turn-slight-left":return"Slight left now";case"turn-slight-right":return"Slight right now";case"straight":return"Continue straight";case"ramp-left":return"Take the ramp on the left";case"ramp-right":return"Take the ramp on the right";case"merge":return"Merge ahead";case"fork-left":return"Keep left at the fork";case"fork-right":return"Keep right at the fork";case"roundabout-left":return"At the roundabout, turn left";case"roundabout-right":return"At the roundabout, turn right";case"uturn-left":return"Make a U-turn";case"uturn-right":return"Make a U-turn";default:return""}}getManeuverPhrase(e){switch(e){case"turn-left":return"turn left";case"turn-right":return"turn right";case"turn-sharp-left":return"make a sharp left";case"turn-sharp-right":return"make a sharp right";case"turn-slight-left":return"turn slightly left";case"turn-slight-right":return"turn slightly right";case"straight":return"continue straight";case"ramp-left":return"take the left ramp";case"ramp-right":return"take the right ramp";case"merge":return"merge";case"fork-left":return"keep left";case"fork-right":return"keep right";case"roundabout-left":return"exit left at the roundabout";case"roundabout-right":return"exit right at the roundabout";case"uturn-left":case"uturn-right":return"make a U-turn";default:return""}}announceArrival(){this.speak("You have arrived at your destination","high"),this.announcedTurns.clear()}announceStart(e,s){this.speak(`Starting navigation. Total distance ${e}, estimated time ${s}`,"normal")}announceOffRoute(){this.speak("You are off route. Recalculating","high")}toggle(){return this.isEnabled=!this.isEnabled,this.isEnabled&&this.speak("Voice navigation enabled","normal"),this.isEnabled}stop(){this.synthesis?.speaking&&this.synthesis.cancel()}isVoiceEnabled(){return this.isEnabled&&this.synthesis!==null}announceWrongWay(e,s,r){const a=Date.now();if(a-this.lastWrongWayAlert<this.WRONG_WAY_COOLDOWN)return;this.wrongWayCount++,this.lastWrongWayAlert=a;const l=this.getAngleDifference(e,s),c=this.getTurnDirection(e,s);let d;this.wrongWayCount===1?d=`You're heading in the wrong direction. Please ${c} to get back on route.`:this.wrongWayCount<=3?l>150?d=`You're going the opposite way! Please turn around and head ${this.getCompassDirection(s)}.`:d=`Still wrong direction. ${c} towards ${this.getCompassDirection(s)}.`:d=`Multiple wrong turns detected. Please stop safely and check your route, then head ${this.getCompassDirection(s)}.`,this.speak(d,"high"),C.warn(" Wrong-way alert:",{userHeading:e,correctHeading:s,count:this.wrongWayCount})}announceRouteDeviation(e,s){const r=Date.now();if(r-this.lastDeviationAlert<this.DEVIATION_COOLDOWN)return;this.lastDeviationAlert=r;const a=Math.round(e.deviationDistance),l=Math.round(e.deviationDuration);let c;switch(e.suggestedAction){case"return":a<20?c="You're slightly off route. Please return to the path.":c=`You're ${a} meters off route. Please head back to the main path.`;break;case"recalculate":c=`You've been off route for ${l} seconds. Recalculating a new route from your location.`;break;case"alternative":c="You're off the main route. Looking for alternative paths from here.";break}this.speak(c,"high")}announceAlternativeRoute(e,s=0){const r=Date.now();if(r-this.lastAlternativeAlert<this.ALTERNATIVE_COOLDOWN||(this.lastAlternativeAlert=r,e.length<=1))return;const a=e[0],l=e[1],c=a.legs[0]?.duration?.text||"unknown",d=l.legs[0]?.duration?.text||"unknown",h=a.legs[0]?.distance?.text||"unknown",m=l.legs[0]?.distance?.text||"unknown";let f;e.length===2?f=`I found an alternative route. Main route: ${c}, ${h}. Alternative: ${d}, ${m}. Continuing with the fastest option.`:f=`I found ${e.length} alternative routes. Taking the fastest one: ${c}, ${h}.`,this.speak(f,"normal"),C.info(" Alternative routes announced:",e.length)}announceDirectionalGuidance(e,s,r){const a=this.getTurnDirection(e,s),l=this.getCompassDirection(s),d=`${{walking:"",cycling:"",driving:"",transit:""}[r]||""} Head ${a} towards ${l}`;this.speak(d,"normal")}announceBackOnRoute(){this.wrongWayCount=0,this.speak("Great! You're back on the correct route.","normal")}announceSpeedGuidance(e,s){const r=e*3.6;let a=null;switch(s){case"walking":r>8&&(a="You seem to be moving quite fast for walking. Consider switching to cycling mode.");break;case"cycling":r<5?a="You're moving slowly. Consider switching to walking mode for better directions.":r>25&&(a="You're moving quite fast. Consider switching to driving mode.");break;case"driving":r<10&&(a="You're in heavy traffic or moving slowly. I'll provide more frequent updates.");break}a&&this.speak(a,"normal")}getTurnDirection(e,s){const r=this.getSignedAngleDifference(e,s);return Math.abs(r)<15?"continue straight":Math.abs(r)>150?"turn around":r>0?r<45?"turn slightly right":r<135?"turn right":"turn sharp right":r>-45?"turn slightly left":r>-135?"turn left":"turn sharp left"}getCompassDirection(e){const s=["north","northeast","east","southeast","south","southwest","west","northwest"],r=Math.round(e/45)%8;return s[r]}getAngleDifference(e,s){let r=Math.abs(e-s);return r>180&&(r=360-r),r}getSignedAngleDifference(e,s){let r=s-e;return r>180&&(r-=360),r<-180&&(r+=360),r}reset(){this.announcedTurns.clear(),this.lastAnnouncedStep=-1,this.wrongWayCount=0,this.lastWrongWayAlert=0,this.lastDeviationAlert=0,this.lastAlternativeAlert=0}}const Ka=new U3;class V3{navigationState={isNavigating:!1,currentLocation:null,currentHeading:0,movementHeading:0,speed:0,transportMode:"walking",routeDirection:null,isOnRoute:!0,distanceFromRoute:0,wrongWayDetected:!1,hasAlternativeRoutes:!1,accuracy:0};callbacks={};watchId=null;compassWatchId=null;currentRoute=null;lastLocation=null;deviationStartTime=null;wrongWayStartTime=null;locationHistory=[];maxHistorySize=10;TRANSPORT_THRESHOLDS={walking:{minSpeed:.5,maxSpeed:3,routeDeviationDistance:20,wrongWayThreshold:120,recalculateDistance:50},cycling:{minSpeed:1,maxSpeed:15,routeDeviationDistance:30,wrongWayThreshold:90,recalculateDistance:100},driving:{minSpeed:2,maxSpeed:50,routeDeviationDistance:50,wrongWayThreshold:90,recalculateDistance:200},transit:{minSpeed:0,maxSpeed:30,routeDeviationDistance:100,wrongWayThreshold:180,recalculateDistance:300}};async startNavigation(e,s,r){try{if(!navigator.geolocation)throw new Error("Geolocation is not supported on this device");this.currentRoute=e,this.callbacks=r,this.navigationState.transportMode=s,this.navigationState.isNavigating=!0,this.navigationState.wrongWayDetected=!1,this.locationHistory=[],C.info(" Starting real-time navigation",{transportMode:s,routeLegs:e.legs?.length}),await this.startLocationTracking();try{this.startCompassTracking()}catch(a){C.warn("Compass not available, using GPS heading only:",a)}C.info(`Smart navigation started in ${s} mode`)}catch(a){if(C.error("Failed to start real-time navigation:",a),a instanceof GeolocationPositionError)switch(a.code){case a.PERMISSION_DENIED:ue.error("Location permission denied. Please enable location access in browser settings.");break;case a.POSITION_UNAVAILABLE:ue.error("GPS signal not available. Please try again when you have better signal.");break;case a.TIMEOUT:ue.error("GPS timeout. Please try again or check your connection.");break}else ue.error("Unable to start navigation. Please try again.");throw a}}stopNavigation(){try{this.watchId&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.compassWatchId&&"DeviceOrientationEvent"in window&&(window.removeEventListener("deviceorientation",this.handleDeviceOrientation),this.compassWatchId=null),this.navigationState={isNavigating:!1,currentLocation:null,currentHeading:0,movementHeading:0,speed:0,transportMode:"walking",routeDirection:null,isOnRoute:!0,distanceFromRoute:0,wrongWayDetected:!1,hasAlternativeRoutes:!1,accuracy:0},this.currentRoute=null,this.lastLocation=null,this.deviationStartTime=null,this.wrongWayStartTime=null,this.locationHistory=[],this.callbacks={},C.info("Real-time navigation stopped and cleaned up")}catch(e){C.error("Error stopping navigation:",e)}}getNavigationState(){return{...this.navigationState}}async startLocationTracking(){const e={enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3};this.watchId=navigator.geolocation.watchPosition(s=>this.handleLocationUpdate(s),s=>this.handleLocationError(s),e)}startCompassTracking(){"DeviceOrientationEvent"in window?typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"&&(window.addEventListener("deviceorientation",this.handleDeviceOrientation),this.compassWatchId=1,C.info(" Device compass tracking enabled"))}).catch(e=>{C.warn("Device orientation permission denied:",e)}):(window.addEventListener("deviceorientation",this.handleDeviceOrientation),this.compassWatchId=1,C.info(" Device compass tracking enabled")):C.warn("Device orientation not supported")}handleDeviceOrientation=e=>{e.alpha!==null&&(this.navigationState.currentHeading=(360-e.alpha)%360)};handleLocationUpdate(e){const s={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,altitude:e.coords.altitude||void 0,speed:e.coords.speed||0,heading:e.coords.heading||void 0,timestamp:e.timestamp};this.navigationState.currentLocation=s,this.navigationState.speed=s.speed||0,this.navigationState.accuracy=s.accuracy,this.locationHistory.push(s),this.locationHistory.length>this.maxHistorySize&&this.locationHistory.shift(),this.lastLocation&&(this.navigationState.movementHeading=this.calculateBearing(this.lastLocation,s),this.navigationState.currentHeading===0&&this.navigationState.speed>1&&(this.navigationState.currentHeading=this.navigationState.movementHeading)),s.heading!==void 0&&s.heading!==null&&(this.navigationState.currentHeading=s.heading),this.analyzeNavigationState(s),this.updateTransportModeFromSpeed(),this.lastLocation=s,this.callbacks.onLocationUpdate&&this.callbacks.onLocationUpdate(this.navigationState),C.debug(" Location updated",{location:`${s.lat.toFixed(6)}, ${s.lng.toFixed(6)}`,accuracy:Math.round(s.accuracy),speed:this.navigationState.speed.toFixed(1),deviceHeading:Math.round(this.navigationState.currentHeading),movementHeading:Math.round(this.navigationState.movementHeading),gpsHeading:s.heading?Math.round(s.heading):"N/A"})}analyzeNavigationState(e){if(!this.currentRoute)return;const s=this.TRANSPORT_THRESHOLDS[this.navigationState.transportMode],r=this.calculateDistanceFromRoute(e);this.navigationState.distanceFromRoute=r,this.navigationState.isOnRoute=r<=s.routeDeviationDistance,this.navigationState.routeDirection=this.getExpectedRouteDirection(e),this.checkWrongWayDetection(),this.navigationState.isOnRoute?this.deviationStartTime&&(this.deviationStartTime=null,this.callbacks.onBackOnRoute&&this.callbacks.onBackOnRoute()):this.handleRouteDeviation(r)}checkWrongWayDetection(){if(!this.navigationState.routeDirection||this.navigationState.speed<.5)return;const e=Math.abs(this.getAngleDifference(this.navigationState.movementHeading,this.navigationState.routeDirection)),s=this.TRANSPORT_THRESHOLDS[this.navigationState.transportMode],r=e>s.wrongWayThreshold;if(r&&!this.navigationState.wrongWayDetected){this.navigationState.wrongWayDetected=!0,this.wrongWayStartTime=Date.now();const a={deviationDistance:this.navigationState.distanceFromRoute,deviationDuration:0,suggestedAction:"return"};this.callbacks.onWrongWayDetected&&this.callbacks.onWrongWayDetected(a),C.warn(" Wrong way detected!",{movement:Math.round(this.navigationState.movementHeading),expected:Math.round(this.navigationState.routeDirection),difference:Math.round(e)})}else!r&&this.navigationState.wrongWayDetected&&(this.navigationState.wrongWayDetected=!1,this.wrongWayStartTime=null,C.info(" Back on correct direction"))}handleRouteDeviation(e){const s=Date.now();this.deviationStartTime||(this.deviationStartTime=s);const r=(s-this.deviationStartTime)/1e3,a=this.TRANSPORT_THRESHOLDS[this.navigationState.transportMode];let l="return";e>a.recalculateDistance||r>60?l="recalculate":r>30&&(l="alternative");const c={deviationDistance:e,deviationDuration:r,suggestedAction:l};(l==="alternative"||l==="recalculate")&&this.findAlternativeRoutes(c),this.callbacks.onRouteDeviationDetected&&this.callbacks.onRouteDeviationDetected(c)}async findAlternativeRoutes(e){if(!(!this.currentRoute||!this.navigationState.currentLocation))try{const s=this.currentRoute.legs[this.currentRoute.legs.length-1].end_location,r=new google.maps.DirectionsService,a={origin:new google.maps.LatLng(this.navigationState.currentLocation.lat,this.navigationState.currentLocation.lng),destination:s,travelMode:this.getTravelMode(),provideRouteAlternatives:!0,avoidHighways:!1,avoidTolls:!1},l=await r.route(a);l.routes.length>1&&(e.alternativeRoutes=l.routes,this.navigationState.hasAlternativeRoutes=!0,this.callbacks.onAlternativeRouteFound&&this.callbacks.onAlternativeRouteFound(l.routes),C.info(" Found alternative routes:",l.routes.length))}catch(s){C.warn("Failed to find alternative routes:",s)}}updateTransportModeFromSpeed(){if(this.navigationState.speed,this.locationHistory.length<5)return;const e=this.locationHistory.slice(-5).reduce((r,a)=>r+(a.speed||0),0)/5;let s=null;e<2?s="walking":e<8?s="cycling":e>10&&(s="driving"),s&&s!==this.navigationState.transportMode&&C.info(` Transport mode auto-detected: ${s} (speed: ${e.toFixed(1)}m/s)`)}calculateDistanceFromRoute(e){if(!this.currentRoute)return 0;let s=1/0;for(const r of this.currentRoute.legs)for(const a of r.steps)if(a.path)for(const l of a.path){const c=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.lat,e.lng),l);s=Math.min(s,c)}return s===1/0?0:s}getExpectedRouteDirection(e){if(!this.currentRoute)return null;const s=this.currentRoute.legs;if(s.length===0)return null;const r=s[s.length-1].end_location;return this.calculateBearing(e,{lat:r.lat(),lng:r.lng(),accuracy:0,timestamp:Date.now()})}calculateBearing(e,s){const r=this.toRadians(s.lng-e.lng),a=this.toRadians(e.lat),l=this.toRadians(s.lat),c=Math.sin(r)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(r),h=Math.atan2(c,d);return(this.toDegrees(h)+360)%360}getAngleDifference(e,s){let r=Math.abs(e-s);return r>180&&(r=360-r),r}getTravelMode(){switch(this.navigationState.transportMode){case"walking":return google.maps.TravelMode.WALKING;case"cycling":return google.maps.TravelMode.BICYCLING;case"driving":return google.maps.TravelMode.DRIVING;case"transit":return google.maps.TravelMode.TRANSIT;default:return google.maps.TravelMode.WALKING}}handleLocationError(e){switch(C.error("Location tracking error:",e),e.code){case e.PERMISSION_DENIED:ue.error("Location permission denied. Navigation stopped."),this.stopNavigation();break;case e.POSITION_UNAVAILABLE:ue.warning("GPS signal lost. Trying to reconnect...");break;case e.TIMEOUT:ue.warning("GPS timeout. Check your signal...");break}}toRadians(e){return e*(Math.PI/180)}toDegrees(e){return e*(180/Math.PI)}}const Fv=new V3;function W3({transportMode:t,heading:e,size:s=32,className:r="",showCompass:a=!1,isMoving:l=!1,speed:c=0}){const d=e,h=l&&c>.5,f=(()=>{switch(t){case"walking":return{color:"#10B981",bgColor:"#D1FAE5",icon:"",name:"Walking"};case"cycling":return{color:"#8B5CF6",bgColor:"#EDE9FE",icon:"",name:"Cycling"};case"driving":return{color:"#3B82F6",bgColor:"#DBEAFE",icon:"",name:"Driving"};case"transit":return{color:"#F59E0B",bgColor:"#FEF3C7",icon:"",name:"Transit"};default:return{color:"#6B7280",bgColor:"#F3F4F6",icon:"",name:"Location"}}})(),p=()=>{const y=f.color;switch(t){case"walking":return n.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"16",cy:"16",r:"14",fill:f.bgColor,stroke:f.color,strokeWidth:"2",opacity:"0.9"}),n.jsx("path",{d:"M16 6 L12 10 L14 10 L14 16 L18 16 L18 10 L20 10 Z",fill:y,stroke:"white",strokeWidth:"0.5"}),n.jsx("text",{x:"16",y:"24",textAnchor:"middle",fontSize:"10",fill:y,children:""}),h&&n.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"none",stroke:y,strokeWidth:"1",opacity:"0.3",strokeDasharray:"4 4",children:n.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0 16 16;360 16 16",dur:"3s",repeatCount:"indefinite"})})]});case"cycling":return n.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"16",cy:"16",r:"14",fill:f.bgColor,stroke:f.color,strokeWidth:"2",opacity:"0.9"}),n.jsx("path",{d:"M16 4 L12 8 L14 8 L14 14 L18 14 L18 8 L20 8 Z",fill:y,stroke:"white",strokeWidth:"0.5"}),n.jsx("text",{x:"16",y:"26",textAnchor:"middle",fontSize:"10",children:""}),h&&n.jsx("circle",{cx:"16",cy:"16",r:"15",fill:"none",stroke:y,strokeWidth:"2",opacity:"0.5",strokeDasharray:"8 8",children:n.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0 16 16;360 16 16",dur:"2s",repeatCount:"indefinite"})})]});case"driving":return n.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"16",cy:"16",r:"14",fill:f.bgColor,stroke:f.color,strokeWidth:"2",opacity:"0.9"}),n.jsx("path",{d:"M16 3 L10 9 L13 9 L13 16 L19 16 L19 9 L22 9 Z",fill:y,stroke:"white",strokeWidth:"0.5"}),n.jsx("text",{x:"16",y:"26",textAnchor:"middle",fontSize:"10",children:""}),h&&n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"16",cy:"16",r:"17",fill:"none",stroke:y,strokeWidth:"1",opacity:"0.3",strokeDasharray:"6 6",children:n.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0 16 16;360 16 16",dur:"1.5s",repeatCount:"indefinite"})}),c>10&&n.jsxs("g",{opacity:"0.6",children:[n.jsx("line",{x1:"8",y1:"16",x2:"4",y2:"16",stroke:y,strokeWidth:"2"}),n.jsx("line",{x1:"24",y1:"16",x2:"28",y2:"16",stroke:y,strokeWidth:"2"}),n.jsx("line",{x1:"16",y1:"8",x2:"16",y2:"4",stroke:y,strokeWidth:"2"})]})]})]});case"transit":return n.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"16",cy:"16",r:"14",fill:f.bgColor,stroke:f.color,strokeWidth:"2",opacity:"0.9"}),n.jsx("path",{d:"M16 5 L11 10 L13 10 L13 15 L19 15 L19 10 L21 10 Z",fill:y,stroke:"white",strokeWidth:"0.5"}),n.jsx("text",{x:"16",y:"25",textAnchor:"middle",fontSize:"9",children:""}),h&&n.jsx("rect",{x:"4",y:"4",width:"24",height:"24",fill:"none",stroke:y,strokeWidth:"1",opacity:"0.4",strokeDasharray:"3 3",rx:"12",children:n.jsx("animateTransform",{attributeName:"transform",type:"rotate",values:"0 16 16;360 16 16",dur:"4s",repeatCount:"indefinite"})})]});default:return n.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("circle",{cx:"16",cy:"16",r:"14",fill:"#F3F4F6",stroke:"#6B7280",strokeWidth:"2"}),n.jsx("text",{x:"16",y:"20",textAnchor:"middle",fontSize:"16",children:""})]})}};return n.jsxs("div",{className:`relative inline-flex items-center justify-center ${r}`,children:[a&&n.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-gray-300 opacity-20",style:{background:"conic-gradient(from 0deg, transparent, rgba(0,0,0,0.1), transparent)"}}),n.jsx("div",{className:`transform transition-transform duration-500 ease-out ${h?"scale-110":"scale-100"}`,style:{transform:`rotate(${d}deg) ${h?"scale(1.1)":"scale(1.0)"}`,filter:h?`drop-shadow(0 0 8px ${f.color}40)`:"none"},children:p()}),l&&c>.5&&n.jsxs("div",{className:"absolute -bottom-1 -right-1 px-1 py-0.5 bg-black bg-opacity-75 text-white text-xs rounded",style:{fontSize:"9px"},children:[(c*3.6).toFixed(0)," km/h"]}),a&&n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-full text-xs font-bold text-gray-600",children:"N"}),n.jsx("div",{className:"absolute right-0 top-1/2 transform translate-x-full -translate-y-1/2 text-xs font-bold text-gray-600",children:"E"}),n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full text-xs font-bold text-gray-600",children:"S"}),n.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-x-full -translate-y-1/2 text-xs font-bold text-gray-600",children:"W"})]}),n.jsxs("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs font-mono text-gray-600 bg-white px-1 rounded shadow",children:[Math.round(e),""]})]})}function H3({currentLocation:t,selectedLocation:e,route:s,transportMode:r,isNavigating:a,centerSignal:l=0,onLocationSelect:c,onRouteRequest:d,onRouteCalculated:h,onMapReady:m,onForceRouteScreen:f}){const{isTrackingLocation:p,startLocationTracking:y,stopLocationTracking:N}=Lu(),[w,j]=x.useState(null),[S,T]=x.useState(null),[R,A]=x.useState(null),[k,P]=x.useState(null),[F,W]=x.useState("roadmap"),[z,oe]=x.useState(!0),[q,J]=x.useState(null),[K,B]=x.useState(!1),[V,re]=x.useState(null),[M,D]=x.useState(!1),[E,Y]=x.useState(null),[Q,I]=x.useState(!1),[te,se]=x.useState(!1),[fe,ve]=x.useState(10),[Pe,$]=x.useState(0),[G,X]=x.useState(0),[me,ye]=x.useState(null),[je,Ae]=x.useState(null),[U,Te]=x.useState(!1),[Se,We]=x.useState([]),[ct,pe]=x.useState(!1),[ie,le]=x.useState(!1),[Le,et]=x.useState(!1),wt=x.useRef(!1),ds=x.useRef(!1),[Bt,Mn]=x.useState({restaurants:!0,atms:!0,landmarks:!0,services:!0,parking:!0}),[cn,gr]=x.useState([]),[Os,Xs]=x.useState(!1),[us,wi]=x.useState(!0),[xr,bi]=x.useState(0),[Dn,Ma]=x.useState(null),Fs=x.useRef(null),[ut,Ur]=x.useState(null),[dn,un]=x.useState(!1),[Vr,Ke]=x.useState(!1),[Pt,At]=x.useState(null),[Dt,In]=x.useState([]),jt=x.useRef(null),It=x.useRef(null),hs=x.useRef(null),es=async Ne=>{try{C.info("Map clicked at:",Ne);const Ee={id:`clicked_${Date.now()}`,name:"Destination",address:"Getting address...",lat:Ne.lat,lng:Ne.lng,category:"selected"};Y(Ee);let Re=t;if(!Re&&"geolocation"in navigator)try{const Ve=await new Promise((_e,qe)=>{navigator.geolocation.getCurrentPosition(_e,qe,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})});Re={id:"current",name:"Your Location",address:"Current Location",lat:Ve.coords.latitude,lng:Ve.coords.longitude},C.info("Got current location:",Re)}catch(Ve){if(C.error("Failed to get current location:",Ve),w){const _e=w.getCenter();_e&&(Re={id:"center",name:"Map Center",address:"Map Center Location",lat:_e.lat(),lng:_e.lng()},ue.info("Using map center as starting point"))}}if(Re){I(!0);const Ve=ue.loading(` Calculating ${r} route...`);await vs(Re,Ee),ue.dismiss(Ve),I(!1),se(!1)}else ue.error("Unable to get your location. Please enable location services."),se(!0);Kt.reverseGeocode(Ne).then(Ve=>{let _e="Selected Location",qe=`${Ne.lat.toFixed(4)}, ${Ne.lng.toFixed(4)}`;if(Ve&&Ve.length>0){const it=Ve[0];qe=it.formatted_address||qe,_e=it.address_components?.[0]?.long_name||it.formatted_address?.split(",")[0]||_e}const xt={...Ee,name:_e,address:qe};if(Y(xt),hs.current&&(hs.current.setTitle(`${_e}
${qe}`),me||s)){const it=me?.distance||s?.distance||"Calculating...",$s=me?.duration||s?.duration||"Calculating...",ws=new google.maps.InfoWindow({content:`
                <div style="padding: 10px; min-width: 200px;">
                  <h3 style="margin: 0 0 8px 0; color: #1a73e8;">${_e}</h3>
                  <p style="margin: 0 0 8px 0; color: #5f6368; font-size: 12px;">${qe}</p>
                  <div style="border-top: 1px solid #e0e0e0; padding-top: 8px; margin-top: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                      <span> Distance:</span>
                      <strong>${it}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                      <span> Duration:</span>
                      <strong>${$s}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                      <span> Mode:</span>
                      <strong style="text-transform: capitalize;">${r}</strong>
                    </div>
                  </div>
                </div>
              `,maxWidth:300});ws.open(w,hs.current),setTimeout(()=>ws.close(),7e3)}c&&c(xt);const Qn={driving:"",walking:"",cycling:"",transit:""}[r]||""}).catch(Ve=>{C.warn("Failed to get address:",Ve)})}catch(Ee){C.error("Failed to handle map click:",Ee),ue.error("Failed to mark location. Please try again.")}},vs=async(Ne,Ee)=>{try{C.info(`Calculating ${r} route from`,Ne,"to",Ee);let Re=k;!Re&&w&&(C.warn("DirectionsRenderer not initialized, creating new one"),Re=new google.maps.DirectionsRenderer({suppressMarkers:!1,suppressInfoWindows:!1,draggable:!1,preserveViewport:!1,polylineOptions:{strokeWeight:6,strokeOpacity:1,strokeColor:"#4285F4",geodesic:!0},markerOptions:{animation:google.maps.Animation.DROP}}),Re.setMap(w),P(Re)),Kt.isAvailable()||await Kt.initialize(),C.info("Requesting directions",{from:{lat:Ne.lat,lng:Ne.lng},to:{lat:Ee.lat,lng:Ee.lng},transportMode:r});const Ve=new google.maps.DirectionsService,_e={origin:{lat:Ne.lat,lng:Ne.lng},destination:{lat:Ee.lat,lng:Ee.lng},travelMode:google.maps.TravelMode[r.toUpperCase()]||google.maps.TravelMode.DRIVING,avoidHighways:r==="cycling",avoidTolls:r==="walking"||r==="cycling",provideRouteAlternatives:!0,unitSystem:google.maps.UnitSystem.METRIC};r==="transit"&&(_e.transitOptions={departureTime:new Date(Date.now()+6e4),modes:[google.maps.TransitMode.BUS,google.maps.TransitMode.RAIL,google.maps.TransitMode.SUBWAY],routingPreference:google.maps.TransitRoutePreference.FEWER_TRANSFERS});const qe=await new Promise((it,$s)=>{Ve.route(_e,(ws,Ln)=>{C.info("Directions service response",{status:Ln,hasResult:!!ws}),Ln===google.maps.DirectionsStatus.OK&&ws?it(ws):$s(new Error(`Directions request failed: ${Ln}`))})});if(!qe)throw new Error("No directions result received from Google Maps");if(!qe.routes||qe.routes.length===0)throw new Error("No routes found in directions result");C.info("Directions received successfully",{routeCount:qe.routes.length,distance:qe.routes[0]?.legs[0]?.distance?.text,duration:qe.routes[0]?.legs[0]?.duration?.text});const xt=qe.routes[0]?.legs[0]?.distance?.text,Qn=qe.routes[0]?.legs[0]?.duration?.text;if(ye({distance:xt,duration:Qn}),w){k&&k.setMap(null),Se.forEach(Ps=>Ps.setMap(null)),We([]);let it=k;(!it||!it.getMap())&&(it=new google.maps.DirectionsRenderer({suppressMarkers:!1,suppressInfoWindows:!1,draggable:!1,preserveViewport:!1,polylineOptions:{strokeWeight:6,strokeOpacity:1,strokeColor:"#4285F4",geodesic:!0,zIndex:100},markerOptions:{animation:google.maps.Animation.DROP}}),it.setMap(w),P(it));const $s=[];qe.routes.length>1&&(qe.routes.slice(1).forEach((Ps,Oo)=>{const bs=new google.maps.DirectionsRenderer({suppressMarkers:!0,suppressInfoWindows:!0,draggable:!1,preserveViewport:!0,polylineOptions:{strokeColor:"#9CA3AF",strokeWeight:5,strokeOpacity:.5,geodesic:!0,zIndex:10+Oo,strokePattern:[10,5]},routeIndex:Oo+1}),ah={...qe,routes:[Ps]};bs.setMap(w),bs.setDirections(ah),$s.push(bs),google.maps.event.addListener(bs,"click",()=>{P(null),setTimeout(()=>{const ih={...qe,routes:[Ps,...qe.routes.filter((hx,Ni)=>Ni!==Oo+1)]};hn(ih)},100)})}),We($s)),Ae(qe),Te(!0),hn(qe),d&&d(Ne,Ee),h&&h(qe);const Ln=qe.routes[0].legs[0];a&&nh(qe)}else C.error("Map instance not available for displaying route")}catch(Re){C.error("Failed to calculate route:",Re);const Ve=Re.message||Re.toString();Ve.includes("REQUEST_DENIED")||Ve.includes("API key")?ue.error("Route calculation unavailable. Please check your Google Maps API key configuration.",{duration:6e3}):ue.error(`Failed to calculate ${r} route: ${Ve}`),k&&k.setMap(null),Ae(null),Te(!1)}},hn=Ne=>{if(!w){C.error("Map instance not available for displaying route");return}k&&k.setMap(null),Se.forEach(Ve=>Ve.setMap(null)),We([]);const Ee=new google.maps.DirectionsRenderer({suppressMarkers:!1,suppressInfoWindows:!1,draggable:!1,preserveViewport:!1,polylineOptions:{strokeWeight:7,strokeOpacity:1,strokeColor:"#4285F4",geodesic:!0,zIndex:100},markerOptions:{animation:google.maps.Animation.DROP},routeIndex:0});Ee.setMap(w),Ee.setDirections(Ne),P(Ee);const Re=new google.maps.LatLngBounds;Ne.routes[0].legs.forEach(Ve=>{Re.extend(Ve.start_location),Re.extend(Ve.end_location)}),w.fitBounds(Re,{top:50,right:50,bottom:200,left:50})},zs=()=>{k&&(k.setMap(null),C.info("Route cleared from map")),Se.forEach(Ne=>Ne.setMap(null)),We([]),Ae(null),Te(!1)},Da=()=>{hs.current&&(hs.current.setMap(null),hs.current=null)},Io=()=>{zs(),Da(),Y(null),se(!1),Ae(null),Te(!1)},Lo=async(Ne=!1)=>{if(!w)return;Xs(!0),cn.forEach(qe=>qe.setMap(null)),gr([]);const Ee=w.getCenter();if(!Ee){Xs(!1);return}const Re=[],Ve=new google.maps.places.PlacesService(w),_e=[];if(Bt.restaurants&&(_e.push({type:"restaurant",icon:"",color:"#EF4444",category:"restaurants"}),_e.push({type:"cafe",icon:"",color:"#8B4513",category:"restaurants"})),Bt.atms&&(_e.push({type:"atm",icon:"",color:"#10B981",category:"atms"}),_e.push({type:"bank",icon:"",color:"#3B82F6",category:"atms"})),Bt.landmarks&&(_e.push({type:"tourist_attraction",icon:"",color:"#8B5CF6",category:"landmarks"}),_e.push({type:"museum",icon:"",color:"#8B5CF6",category:"landmarks"}),_e.push({type:"park",icon:"",color:"#22C55E",category:"landmarks"})),Bt.services&&(_e.push({type:"gas_station",icon:"",color:"#F59E0B",category:"services"}),_e.push({type:"pharmacy",icon:"",color:"#EC4899",category:"services"})),Bt.parking&&_e.push({type:"parking",icon:"",color:"#1E40AF",category:"parking"}),_e.length===0){Xs(!1),C.info("No place categories enabled, skipping search");return}for(const qe of _e){const xt={location:Ee,radius:500,type:qe.type};try{(await new Promise((it,$s)=>{Ve.nearbySearch(xt,(ws,Ln)=>{Ln===google.maps.places.PlacesServiceStatus.OK&&ws?it(ws.slice(0,3)):it([])})})).forEach(it=>{if(!it.geometry?.location)return;const $s=new google.maps.Marker({position:it.geometry.location,map:w,title:it.name,icon:{url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
                <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="16" cy="16" r="14" fill="${qe.color}" stroke="white" stroke-width="2" opacity="0.9"/>
                  <text x="16" y="20" text-anchor="middle" font-size="14">${qe.icon}</text>
                </svg>
              `)}`,scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,16)},animation:google.maps.Animation.DROP,zIndex:50});$s.placeCategory=qe.category,$s.addListener("click",()=>{const ws=new google.maps.InfoWindow({content:`
                <div style="padding: 8px; min-width: 200px;">
                  <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold;">${it.name}</h3>
                  <p style="margin: 0 0 4px 0; color: #666; font-size: 13px;">${it.vicinity||it.formatted_address||""}</p>
                  ${it.rating?`<p style="margin: 0; color: #f59e0b;"> ${it.rating} ${it.user_ratings_total?`(${it.user_ratings_total} reviews)`:""}</p>`:""}
                  ${it.opening_hours?`<p style="margin: 4px 0 0 0; color: ${it.opening_hours.open_now?"#10b981":"#ef4444"}; font-size: 13px; font-weight: 500;">${it.opening_hours.open_now?" Open Now":" Closed"}</p>`:""}
                </div>
              `});ws.open(w,$s),setTimeout(()=>ws.close(),1e4)}),Re.push($s)})}catch(Qn){C.warn(`Failed to load ${qe.type} places:`,Qn)}}gr(Re),Xs(!1)},sh=()=>{cn.forEach(Ne=>{const Ee=Ne.placeCategory;Ee&&Bt[Ee]?Ne.setMap(w):Ne.setMap(null)})},nh=Ne=>{if(!Ne.routes?.[0]?.legs?.[0])return;const Re=Ne.routes[0].legs[0];C.info("Legacy navigation tracking started (display only)"),Fs.current&&clearInterval(Fs.current),Fs.current=setInterval(()=>{if(!t||!Re.steps)return;let Ve=1/0,_e=0;Re.steps.forEach((xt,Qn)=>{if(!xt.start_location)return;const it=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t.lat,t.lng),xt.start_location);it<Ve&&(Ve=it,_e=Qn)}),bi(_e);const qe=Re.steps[_e+1];if(qe&&qe.start_location){const xt=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t.lat,t.lng),qe.start_location);Ma(Math.round(xt))}Re.end_location&&google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(t.lat,t.lng),Re.end_location)<50&&(C.info("Destination reached (legacy tracker)"),Fs.current&&(clearInterval(Fs.current),Fs.current=null))},1e3)};x.useEffect(()=>{(async()=>{if(jt.current)try{let Ee=t?{lat:t.lat,lng:t.lng}:{lat:9.032,lng:38.7469};if(!t&&"geolocation"in navigator)try{const Ve=await new Promise((_e,qe)=>{navigator.geolocation.getCurrentPosition(_e,xt=>{C.warn("Geolocation failed:",xt.message),qe(xt)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5})});Ee={lat:Ve.coords.latitude,lng:Ve.coords.longitude},C.info("Got initial location from browser:",Ee)}catch{C.info("Using default location (geolocation failed)")}const Re=await Kt.createMap(jt.current,{zoom:15,center:Ee,mapTypeId:F,disableDefaultUI:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0});if(Re){j(Re),Re.setOptions({zoomControl:!1});const Ve=new google.maps.TrafficLayer;It.current=Ve,z&&Ve.setMap(Re);const _e=new google.maps.DirectionsRenderer({suppressMarkers:!1,suppressInfoWindows:!1,draggable:!1,preserveViewport:!1,polylineOptions:{strokeWeight:5,strokeOpacity:1,strokeColor:"#4285F4",geodesic:!0,zIndex:1},markerOptions:{animation:google.maps.Animation.DROP}});if(typeof window<"u"&&(window._directionsRendererCount=(window._directionsRendererCount||0)+1),P(_e),C.info("DirectionsRenderer initialized",{rendererCount:window._directionsRendererCount||1,hasMap:!!Re,mapId:Re?.getDiv()?.id}),m&&m(Re),Re.addListener("click",async qe=>{if(qe.latLng){const xt={lat:qe.latLng.lat(),lng:qe.latLng.lng()};await es(xt)}}),Re.addListener("dblclick",Io),Re.addListener("mousedown",()=>{wt.current=!0,ds.current=!1,et(!0),le(!1)}),Re.addListener("mousemove",()=>{wt.current&&(ds.current=!0,le(!0))}),Re.addListener("mouseup",()=>{wt.current=!1,et(!1),setTimeout(()=>{ds.current=!1,le(!1)},100)}),Re.addListener("dragstart",()=>{ds.current=!0,le(!0)}),Re.addListener("dragend",()=>{setTimeout(()=>{ds.current=!1,le(!1)},150)}),navigator.geolocation){const qe=navigator.geolocation.watchPosition(xt=>{ve(xt.coords.accuracy||10),xt.coords.speed!==null&&$(xt.coords.speed||0),xt.coords.heading!==null&&X(xt.coords.heading||0)},xt=>C.warn("Location tracking error:",xt),{enableHighAccuracy:!0,maximumAge:1e3});return()=>navigator.geolocation.clearWatch(qe)}m&&m(Re),C.info("Google Map initialized successfully")}}catch(Ee){C.error("Failed to initialize Google Map",Ee),re("Failed to load Google Maps. Please check your internet connection and API key."),ue.error("Failed to load map")}})()},[]),x.useEffect(()=>{if(!w||!t)return;S&&S.setMap(null);const Ne=t3(r,{heading:G,speed:Pe,accuracy:fe,isTracking:p});(async()=>{try{const{AdvancedMarkerElement:Re,PinElement:Ve}=await google.maps.importLibrary("marker");if(Re){const _e=document.createElement("div");_e.innerHTML=Ne,_e.style.width="60px",_e.style.height="60px",_e.style.cursor="pointer";const qe=new Re({map:w,position:{lat:t.lat,lng:t.lng},content:_e,title:`Your Location (${r})`,zIndex:1e3});T(qe),C.debug("Current location marker created with AdvancedMarkerElement")}else throw new Error("AdvancedMarkerElement not available")}catch(Re){C.warn("Using legacy marker for current location",Re);const Ve=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:w,title:`Your Location (${r})`,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(Ne),scaledSize:new google.maps.Size(60,60),anchor:new google.maps.Point(30,30)},optimized:!1,zIndex:1e3});T(Ve)}})()},[w,t,r,G,Pe,fe,p]),x.useEffect(()=>{const Ne=()=>{(wt.current||ds.current)&&(wt.current=!1,ds.current=!1,et(!1),le(!1))},Ee=Re=>{if(wt.current&&jt.current){const Ve=jt.current.getBoundingClientRect();!(Re.clientX>=Ve.left&&Re.clientX<=Ve.right&&Re.clientY>=Ve.top&&Re.clientY<=Ve.bottom)&&ds.current&&Ne()}};return document.addEventListener("mouseup",Ne),document.addEventListener("mousemove",Ee),()=>{document.removeEventListener("mouseup",Ne),document.removeEventListener("mousemove",Ee)}},[]),x.useEffect(()=>{if(!w)return;(async()=>{if(R&&"setMap"in R&&R.setMap(null),e){const Ee=await Kt.createMarker({position:{lat:e.lat,lng:e.lng},map:w,title:e.name,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" fill="#EA4335" stroke="#ffffff" stroke-width="2"/>
                <circle cx="12" cy="9" r="2.5" fill="#ffffff"/>
              </svg>
            `),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,24)}});Ee&&"addListener"in Ee&&Ee.addListener("click",()=>{J(e),B(!0)}),A(Ee)}else A(null)})()},[w,e]),x.useEffect(()=>{if(!w||!e||!t){pe(!!e);return}pe(!0),C.info("Auto-calculating route to selected location",{from:t.name,to:e.name,transportMode:r}),vs(t,e)},[w,e,t,r]),x.useEffect(()=>{w&&Lo()},[w]),x.useEffect(()=>{!w||cn.length===0||sh()},[Bt,cn,w]),x.useEffect(()=>{if(!w||ie)return;const Ne=w.addListener("idle",()=>{Lo()});return()=>{google.maps.event.removeListener(Ne)}},[w,ie]),x.useEffect(()=>{if(!w||!s)return;const Ne=s?.googleDirectionsResult||(s&&"routes"in s?s:null);if(Ne&&Ne.routes&&Ne.routes.length>0){C.info("Displaying route from props/state",{routeCount:Ne.routes.length,legs:Ne.routes[0].legs.length,distance:Ne.routes[0].legs[0]?.distance?.text,duration:Ne.routes[0].legs[0]?.duration?.text}),k.getMap()!==w&&(C.info("Attaching renderer to map before displaying route"),k.setMap(w)),k.setDirections(Ne),setTimeout(()=>{k.getDirections()===Ne?C.info(" Route successfully set on renderer from props"):(C.error(" Route was not set correctly on renderer"),c3.logDiagnostics(k,Ne,w))},100);const Ee=new google.maps.LatLngBounds;Ne.routes[0].legs.forEach(Re=>{Ee.extend(Re.start_location),Ee.extend(Re.end_location)}),w.fitBounds(Ee,{top:50,right:50,bottom:50,left:50}),C.info("Route display complete from props/state")}},[w,s]),x.useEffect(()=>{l>0&&w&&t&&(D(!0),w.panTo({lat:t.lat,lng:t.lng}),w.setZoom(16),setTimeout(()=>D(!1),1e3))},[l,w,t]);const yr=x.useCallback(()=>{if(!w)return;const Ne=["roadmap","satellite","terrain","hybrid"],Ee=Ne.indexOf(F),Re=Ne[(Ee+1)%Ne.length];w.setMapTypeId(Re),W(Re)},[w,F]),lc=x.useCallback(()=>{It.current&&(z?It.current.setMap(null):It.current.setMap(w),oe(!z))},[w,z]),cc=x.useCallback(()=>{if(!w)return;const Ne=w.getZoom()||15;w.setZoom(Ne+1)},[w]),rh=x.useCallback(()=>{if(!w)return;const Ne=w.getZoom()||15;w.setZoom(Math.max(Ne-1,1))},[w]);x.useCallback(async()=>{const Ne=ue.loading(" Getting your real location...");try{const Ee=await St.getFreshCurrentPosition({enableHighAccuracy:!0,timeout:3e4,maximumAge:0});if(c){const Re={id:"current_real",name:"Your Real Location",address:`Lat: ${Ee.lat.toFixed(6)}, Lng: ${Ee.lng.toFixed(6)}`,lat:Ee.lat,lng:Ee.lng,category:"current"};c(Re)}w&&(w.panTo({lat:Ee.lat,lng:Ee.lng}),w.setZoom(17)),ue.dismiss(Ne),C.info("Real location found:",Ee)}catch(Ee){ue.dismiss(Ne),ue.error("Could not get your real location. Make sure location permission is enabled and you have GPS signal."),C.error("Failed to get real location:",Ee)}},[w,c]);const Wr=x.useCallback(async Ne=>{if(!Ne.routes?.[0]){ue.error("No route available for real-time navigation");return}try{const Ee=Ne.routes[0],Ve={walking:"walking",cycling:"cycling",driving:"driving",transit:"transit"}[r]||"walking";await Fv.startNavigation(Ee,Ve,{onLocationUpdate:_e=>{Ur(_e),_e.transportMode!==Ve&&C.info(` Transport mode auto-updated: ${_e.transportMode}`)},onWrongWayDetected:_e=>{Ke(!0),At(_e),us&&ut&&Ka.announceWrongWay(ut.movementHeading,ut.routeDirection||0,ut.transportMode),setTimeout(()=>Ke(!1),1e4)},onRouteDeviationDetected:_e=>{At(_e),us&&Ka.announceRouteDeviation(_e,Ve),ue.warning(`You're ${Math.round(_e.deviationDistance)}m off route`,{description:_e.suggestedAction==="recalculate"?"Looking for alternative routes...":"Please return to the main path"})},onAlternativeRouteFound:_e=>{In(_e),us&&_e.length>0&&Ka.announceAlternativeRoute(_e)},onBackOnRoute:()=>{Ke(!1),At(null),us&&Ka.announceBackOnRoute()}}),un(!0),Ka.reset(),C.info("Real-time navigation started with voice guidance")}catch(Ee){C.error("Failed to start real-time navigation:",Ee),ue.error("Failed to start real-time navigation")}},[r,us,ut]),ji=x.useCallback(()=>{Fv.stopNavigation(),un(!1),Ur(null),Ke(!1),At(null),In([]),Ka.stop(),C.info("Real-time navigation stopped")},[]);return x.useCallback(Ne=>{if(!Dt[Ne])return;const Ee=Dt[Ne];if(k&&w){const Re={routes:[Ee],status:google.maps.DirectionsStatus.OK,request:{}};k.setDirections(Re),ji(),setTimeout(()=>{Wr(Re)},1e3),ue.success(`Switched to alternative route ${Ne+1}`)}},[Dt,k,w,Wr,ji]),V?n.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-100",children:n.jsxs("div",{className:"text-center p-6 max-w-md",children:[n.jsx(Et,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Map Error"}),n.jsx("p",{className:"text-gray-600 mb-4",children:V}),n.jsx(L,{onClick:()=>window.location.reload(),variant:"outline",children:"Retry"})]})}):n.jsxs("div",{className:"h-full w-full relative",children:[n.jsx("div",{ref:jt,className:`map-container h-full w-full ${ie||Le?"dragging":""}`}),ut?n.jsxs("div",{className:"absolute bottom-20 right-4 z-10",children:[n.jsx("div",{className:"cursor-pointer",onClick:()=>{w&&ut.currentLocation&&(w.panTo({lat:ut.currentLocation.lat,lng:ut.currentLocation.lng}),w.setZoom(18))},children:n.jsx(W3,{transportMode:ut.transportMode,heading:ut.currentHeading,size:64,showCompass:!0,isMoving:ut.speed>.5,speed:ut.speed})}),n.jsxs("div",{className:"mt-2 space-y-1",children:[n.jsxs("div",{className:"bg-white rounded-lg px-2 py-1 text-xs shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-gray-600",children:"Speed:"}),n.jsxs("span",{className:"font-mono",children:[(ut.speed*3.6).toFixed(1)," km/h"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-gray-600",children:"GPS:"}),n.jsxs("span",{className:`font-mono ${ut.accuracy<20?"text-green-600":ut.accuracy<50?"text-yellow-600":"text-red-600"}`,children:["",Math.round(ut.accuracy),"m"]})]})]}),Vr&&n.jsxs("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1 text-red-700",children:[n.jsx(Et,{className:"w-3 h-3"}),n.jsx("span",{className:"font-semibold",children:"Wrong Way!"})]}),n.jsxs("div",{className:"text-red-600 text-xs mt-1",children:["Turn around and head ",ut.routeDirection?Math.round(ut.routeDirection)+"":"back to route"]})]}),Pt&&!Vr&&n.jsxs("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg px-2 py-1 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1 text-yellow-700",children:[n.jsx(co,{className:"w-3 h-3"}),n.jsx("span",{className:"font-semibold",children:"Off Route"})]}),n.jsxs("div",{className:"text-yellow-600 text-xs mt-1",children:[Math.round(Pt.deviationDistance),"m from path"]})]}),Dt.length>0&&n.jsxs(L,{size:"sm",className:"w-full bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs py-1",onClick:()=>{ue.info(`${Dt.length} alternative routes available`)},children:[Dt.length," Alt Routes"]})]})]}):n.jsx(XM,{transportMode:r,isTracking:p,accuracy:fe,onCenterLocation:()=>{w&&t&&(w.panTo({lat:t.lat,lng:t.lng}),w.setZoom(17))},onToggleTracking:()=>{p?N():y()},position:"bottom-right"}),n.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-10",children:[n.jsx(uN,{onNavigateToPage:Ne=>{ue.info(`Open page: ${Ne}`)},onNavigateToScreen:Ne=>{ue.info(`Open screen: ${Ne}`)}}),n.jsxs(E5,{children:[n.jsx(P5,{asChild:!0,children:n.jsx(L,{size:"sm",className:"h-10 w-10 bg-white hover:bg-gray-50 text-gray-700 shadow-lg",children:n.jsx(pt,{className:"w-4 h-4"})})}),n.jsx(A5,{className:"w-64",align:"end",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Nearby Places"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(vl,{htmlFor:"restaurants",className:"text-sm flex items-center gap-2",children:[n.jsx(U4,{className:"w-4 h-4 text-red-500"}),"Restaurants & Cafes"]}),n.jsx(lt,{id:"restaurants",checked:Bt.restaurants,onCheckedChange:Ne=>{Mn(Ee=>({...Ee,restaurants:Ne}))}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(vl,{htmlFor:"atms",className:"text-sm flex items-center gap-2",children:[n.jsx(lo,{className:"w-4 h-4 text-green-500"}),"ATMs & Banks"]}),n.jsx(lt,{id:"atms",checked:Bt.atms,onCheckedChange:Ne=>{Mn(Ee=>({...Ee,atms:Ne}))}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(vl,{htmlFor:"landmarks",className:"text-sm flex items-center gap-2",children:[n.jsx(fP,{className:"w-4 h-4 text-purple-500"}),"Landmarks & Parks"]}),n.jsx(lt,{id:"landmarks",checked:Bt.landmarks,onCheckedChange:Ne=>{Mn(Ee=>({...Ee,landmarks:Ne}))}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(vl,{htmlFor:"services",className:"text-sm flex items-center gap-2",children:[n.jsx(oi,{className:"w-4 h-4 text-orange-500"}),"Gas & Pharmacy"]}),n.jsx(lt,{id:"services",checked:Bt.services,onCheckedChange:Ne=>{Mn(Ee=>({...Ee,services:Ne}))}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(vl,{htmlFor:"parking",className:"text-sm flex items-center gap-2",children:[n.jsx(Ls,{className:"w-4 h-4 text-blue-600"}),"Parking Areas"]}),n.jsx(lt,{id:"parking",checked:Bt.parking,onCheckedChange:Ne=>{Mn(Ee=>({...Ee,parking:Ne}))}})]})]}),Os&&n.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full"}),"Loading places..."]}),n.jsx(L,{size:"sm",variant:"outline",className:"w-full",onClick:()=>Lo(!0),children:"Refresh Places"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[n.jsx(L,{size:"sm",variant:"ghost",className:"h-10 w-10 rounded-none border-b bg-blue-50 hover:bg-blue-100 text-blue-600",onClick:cc,children:n.jsx(ja,{className:"w-5 h-5 font-bold"})}),n.jsx(L,{size:"sm",variant:"ghost",className:"h-10 w-10 rounded-none bg-blue-50 hover:bg-blue-100 text-blue-600",onClick:rh,children:n.jsx(FP,{className:"w-5 h-5 font-bold"})})]}),n.jsx(L,{size:"sm",className:"h-10 w-10 bg-white hover:bg-gray-50 text-gray-700 shadow-lg",onClick:yr,children:F==="satellite"?n.jsx(JP,{className:"w-4 h-4"}):n.jsx(gP,{className:"w-4 h-4"})}),n.jsx(L,{size:"sm",className:`h-10 w-10 shadow-lg ${z?"bg-red-500 hover:bg-red-600 text-white":"bg-white hover:bg-gray-50 text-gray-700"}`,onClick:lc,children:n.jsx(Ls,{className:"w-4 h-4"})}),(a||dn)&&n.jsx(L,{size:"sm",className:`h-10 w-10 shadow-lg ${us?"bg-green-500 hover:bg-green-600 text-white":"bg-white hover:bg-gray-50 text-gray-700"}`,onClick:()=>{const Ne=Ka.toggle();wi(Ne),ue.success(`Voice navigation ${Ne?"enabled":"disabled"}`)},children:us?n.jsx(Mr,{className:"w-4 h-4"}):n.jsx(zp,{className:"w-4 h-4"})})]}),t&&!te&&n.jsxs("div",{className:"absolute bottom-4 left-4 z-10",children:[n.jsxs("div",{className:`bg-white rounded-lg shadow-lg px-3 py-2 flex items-center gap-2 transition-all duration-300 ${M?"ring-4 ring-blue-400 ring-opacity-50":""}`,children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${p?"bg-green-500 animate-pulse":"bg-gray-400"}`}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:p?"Location tracking":"Location found"})]}),n.jsx("div",{className:"mt-2 bg-blue-50 border border-blue-200 rounded-lg px-3 py-2",children:n.jsx("p",{className:"text-xs text-blue-700 font-medium",children:" Click anywhere on the map to get directions"})})]}),s&&n.jsx("div",{className:"absolute bottom-4 right-4 z-10",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 max-w-xs",children:[a&&Dn!==null&&n.jsx("div",{className:"mb-3 pb-3 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-blue-500 text-white rounded-full p-1",children:n.jsx(rt,{className:"w-3 h-3"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Next turn in ",Dn,"m"]}),us&&n.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[n.jsx(Mr,{className:"w-3 h-3"}),"Voice guidance active"]})]})]})}),n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(rt,{className:"w-4 h-4 text-blue-500"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[s.distance,"  ",s.duration]})]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[s.mode.charAt(0).toUpperCase()+s.mode.slice(1)," route"]}),!dn&&n.jsxs(L,{size:"sm",className:"w-full mt-2 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{je?Wr(je):ue.error("No route available for navigation")},children:[n.jsx(co,{className:"w-4 h-4 mr-1"}),"Start Smart Navigation"]}),dn&&n.jsxs(L,{size:"sm",className:"w-full mt-2 bg-red-600 hover:bg-red-700 text-white",onClick:ji,children:[n.jsx(ys,{className:"w-4 h-4 mr-1"}),"Stop Smart Navigation"]})]})}),a&&je&&n.jsx("div",{className:"absolute bottom-4 left-4 z-10 max-w-sm",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[n.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(rt,{className:"w-4 h-4 text-blue-600"}),"Turn-by-Turn Directions"]}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:je.routes[0]?.legs[0]?.steps?.map((Ne,Ee)=>{const Re=Ee===xr,Ve=Ee===xr+1;return n.jsx("div",{className:`p-2 rounded-lg text-sm ${Re?"bg-blue-100 border-l-4 border-blue-500":Ve?"bg-yellow-50 border-l-4 border-yellow-400":"bg-gray-50"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${Re?"bg-blue-500 text-white":Ve?"bg-yellow-400 text-black":"bg-gray-300 text-gray-600"}`,children:Ee+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-gray-900",dangerouslySetInnerHTML:{__html:Ne.instructions?.replace(/<[^>]*>/g,"")||"Continue straight"}}),n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Ne.distance?.text,"  ",Ne.duration?.text,Re&&Dn&&n.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:["(",Dn,"m remaining)"]})]})]})]})},Ee)}).slice(0,5)}),n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[n.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[n.jsxs("span",{children:["Step ",xr+1," of ",je.routes[0]?.legs[0]?.steps?.length||0]}),n.jsx("span",{children:r==="walking"?" Walking":r==="driving"?" Driving":" Cycling"})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:n.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${(xr+1)/(je.routes[0]?.legs[0]?.steps?.length||1)*100}%`}})})]})]})}),te&&E&&t&&n.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-20",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 max-w-md mx-auto",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:E.name}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.address})]}),n.jsx(L,{size:"sm",variant:"ghost",className:"text-gray-400 hover:text-gray-600 p-1",onClick:()=>{se(!1),Y(null),hs.current&&hs.current.setMap(null),k&&k.setMap(null)},children:n.jsx(ys,{className:"w-4 h-4"})})]}),Q?n.jsxs("div",{className:"flex items-center gap-2 py-2",children:[n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),n.jsx("span",{className:"text-sm text-gray-600",children:"Calculating fastest route..."})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 py-1",children:[n.jsx(rt,{className:"w-4 h-4 text-green-500"}),n.jsxs("span",{className:"text-sm text-gray-900",children:["Route calculated  ",r.charAt(0).toUpperCase()+r.slice(1)]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white flex-1",onClick:()=>{je?Wr(je):ue.error("Please calculate route first")},children:[n.jsx(co,{className:"w-4 h-4 mr-1"}),"Start Smart Navigation"]}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>{J(E),B(!0)},children:"Details"})]})]})]})}),Q&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center z-30",children:n.jsx("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"animate-spin w-6 h-6 border-3 border-blue-500 border-t-transparent rounded-full"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Finding fastest route..."}),n.jsx("p",{className:"text-sm text-gray-600",children:"Calculating directions with real-time traffic"})]})]})})}),n.jsx(j3,{location:e?{name:e.name,address:e.address}:null,routeInfo:me,transportMode:r,isCalculating:Q,onStartNavigation:()=>{je?Wr(je):ue.error("No route available for navigation. Please calculate route first.")},onViewDetails:()=>{e&&f?f(e):Te(!0)},onDismiss:()=>{pe(!1),c&&c(null)}}),je&&n.jsx(b3,{directionsResult:je,transportMode:r,isVisible:U,onToggleVisibility:()=>Te(!U),onAlternativeSelect:Ne=>{if(je&&Ne<je.routes.length){const Ee=je.routes[Ne],Re={...je,routes:[Ee,...je.routes.filter((Ve,_e)=>_e!==Ne)]};k&&k.setMap(null),hn(Re),Ae(Re),ue.success(`Switched to alternative route ${Ne+1}`)}},onStartNavigation:()=>{if(je&&t&&E){const Ne=je.routes[0],Ee=Ne.legs[0];Ee.distance?.text,Ee.duration?.text,Ee.steps?.map(Re=>Re.instructions.replace(/<[^>]*>/g,"")),Ne.overview_polyline,d&&d(t,E),ue.success(`Started navigation to ${E.name}`)}}}),n.jsx(lN,{place:q,isOpen:K,onClose:()=>B(!1),onNavigate:()=>{q&&ue.success(`Starting navigation to ${q.name}`),B(!1)},onShare:()=>{q&&navigator.share&&navigator.share({title:q.name,text:`Check out ${q.name} - ${q.address}`,url:window.location.href})}})]})}function Ft({className:t,type:e,...s}){return n.jsx("input",{type:e,"data-slot":"input",className:Xe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}const G3=2;var Ya=(t=>(t.NAVIGATION="navigation",t.LOCATION="location",t.MAP="map",t.SEARCH="search",t.DOWNLOAD="download",t.SYSTEM="system",t.ERROR="error",t))(Ya||{});const q3={error:1,download:1,search:2,system:2,navigation:3,location:3,map:3},jd={error:4e3,success:2e3,info:1500,loading:1/0};class K3{shouldShow(e,s="info"){return s==="error"?!0:G3>=q3[e]}success(e,s="system",r){if(this.shouldShow(s,"success"))return ue.success(e,{duration:jd.success,...r})}error(e,s="error",r){if(this.shouldShow(s,"error"))return ue.error(e,{duration:jd.error,...r})}info(e,s="system",r){if(this.shouldShow(s,"info"))return ue.info(e,{duration:jd.info,...r})}loading(e,s="system",r){if(this.shouldShow(s,"loading"))return ue.loading(e,{duration:jd.loading,...r})}dismiss(e){return ue.dismiss(e)}navigationSuccess(e,s){return this.success(e,"navigation",s)}navigationInfo(e,s){return this.info(e,"navigation",s)}locationUpdate(e,s){return this.info(e,"location",s)}mapInteraction(e,s){return this.info(e,"map",s)}searchResult(e,s="info",r){return s==="success"?this.success(e,"search",r):this.info(e,"search",r)}downloadProgress(e,s="info",r){return s==="success"?this.success(e,"download",r):s==="error"?this.error(e,"download",r):this.info(e,"download",r)}}const Er=new K3;class Z3{async ensureGoogleLoaded(){try{return await Du.waitForGoogleMaps()}catch(e){return C.error("Failed to load Google Maps:",e),!1}}async searchPlaces(e){if(!e.trim())return[];if(!await this.ensureGoogleLoaded())throw new Error("Google Maps not loaded");return new Promise((r,a)=>{const l=new google.maps.places.PlacesService(document.createElement("div")),c={query:e.trim(),fields:["place_id","name","formatted_address","geometry","rating","user_ratings_total","price_level","opening_hours"]};l.textSearch(c,(d,h)=>{if(h===google.maps.places.PlacesServiceStatus.OK&&d){const m=d.slice(0,10).map((f,p)=>{const y=f.geometry;return!y||!y.location?null:{id:f.place_id||`search-${Date.now()}-${p}`,name:f.name||"Unknown Place",address:f.formatted_address||"Address not available",lat:y.location.lat(),lng:y.location.lng(),category:"search_result",rating:f.rating,userRatingsTotal:f.user_ratings_total,priceLevel:f.price_level,isOpenNow:f.opening_hours?.isOpen?.()??void 0}}).filter(Boolean);r(m)}else h===google.maps.places.PlacesServiceStatus.ZERO_RESULTS?r([]):a(new Error(`Places search failed: ${h}`))})})}async getAutocompleteSuggestions(e){return e.trim()?await this.ensureGoogleLoaded()?new Promise(r=>{new google.maps.places.AutocompleteService().getPlacePredictions({input:e.trim(),types:["establishment","geocode"],componentRestrictions:{country:[]}},(l,c)=>{if(c===google.maps.places.PlacesServiceStatus.OK&&l){const d=l.slice(0,8).map((h,m)=>({id:h.place_id||`suggestion-${m}`,description:h.description,place_id:h.place_id}));r(d)}else r([])})}):[]:[]}async getPlaceDetails(e){return await this.ensureGoogleLoaded()?new Promise((r,a)=>{new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["place_id","name","formatted_address","geometry","rating","user_ratings_total","price_level","opening_hours"]},(c,d)=>{if(d===google.maps.places.PlacesServiceStatus.OK&&c){const h=c.geometry;if(!h||!h.location){r(null);return}r({id:c.place_id||e,name:c.name||"Unknown Place",address:c.formatted_address||"Address not available",lat:h.location.lat(),lng:h.location.lng(),category:"place_details",rating:c.rating,userRatingsTotal:c.user_ratings_total,priceLevel:c.price_level,isOpenNow:c.opening_hours?.isOpen?.()??void 0})}else r(null)})}):null}async searchNearbyPlaces(e,s,r=5e3){return await this.ensureGoogleLoaded()?new Promise((l,c)=>{const d=new google.maps.places.PlacesService(document.createElement("div")),h={location:new google.maps.LatLng(e.lat,e.lng),radius:r,type:s};d.nearbySearch(h,(m,f)=>{if(f===google.maps.places.PlacesServiceStatus.OK&&m){const p=m.slice(0,15).map((y,N)=>{const w=y.geometry;return!w||!w.location?null:{id:y.place_id||`nearby-${s}-${N}`,name:y.name||"Unknown Place",address:y.vicinity||y.formatted_address||"Address not available",lat:w.location.lat(),lng:w.location.lng(),category:s,rating:y.rating,userRatingsTotal:y.user_ratings_total,priceLevel:y.price_level,isOpenNow:y.opening_hours?.open_now}}).filter(Boolean);l(p)}else l([])})}):[]}}const Nd=new Z3,Y3=()=>new Promise(t=>{if(!navigator.geolocation){t(null);return}navigator.geolocation.getCurrentPosition(e=>{t({lat:e.coords.latitude,lng:e.coords.longitude})},()=>t(null),{timeout:5e3})});function J3({query:t,onSearch:e,onLocationSelect:s,transportMode:r,onBack:a,onOpenVoicePanel:l}){const[c,d]=x.useState(t),[h,m]=x.useState(!1),[f,p]=x.useState([]),[y,N]=x.useState([]),[w,j]=x.useState(!1),[S,T]=x.useState([]),[R,A]=x.useState(null),k=x.useRef(null);x.useEffect(()=>{P(),Y3().then(A)},[]);const P=()=>{const M=localStorage.getItem("recent_searches");M&&T(JSON.parse(M))},F=M=>{const D=[M,...S.filter(E=>E.id!==M.id)].slice(0,5);T(D),localStorage.setItem("recent_searches",JSON.stringify(D))},W=(M,D)=>{const Y=(D.lat-M.lat)*Math.PI/180,Q=(D.lng-M.lng)*Math.PI/180,I=Math.sin(Y/2)*Math.sin(Y/2)+Math.cos(M.lat*Math.PI/180)*Math.cos(D.lat*Math.PI/180)*Math.sin(Q/2)*Math.sin(Q/2),se=6371*(2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I)));return se<1?`${Math.round(se*1e3)}m`:`${se.toFixed(1)}km`},z=async M=>{if(!M.trim()){p([]);return}m(!0),j(!1);try{C.info("Searching places with Google Places API:",{query:M});const D=await Nd.searchPlaces(M),E=D.map(Y=>({...Y,distance:R?W(R,{lat:Y.lat,lng:Y.lng}):void 0}));p(E),D.length===0?Er.searchResult(`No results found for "${M}"`,"info"):C.info("Search successful:",{query:M,count:D.length})}catch(D){C.error("Search failed:",D);const E=D.message||"Search failed";E.includes("Google Maps")||E.includes("not loaded")?Er.error("Google Maps is still loading. Please try again.",Ya.SEARCH):Er.error("Search failed. Please try again.",Ya.SEARCH),p([])}finally{m(!1)}},oe=async M=>{if(!M.trim()){N([]),j(!1);return}try{const D=await Nd.getAutocompleteSuggestions(M);N(D),j(D.length>0)}catch(D){C.warn("Suggestions failed:",D),N([]),j(!1)}},q=async M=>{if(!M.place_id){d(M.description),z(M.description);return}m(!0),j(!1);try{const D=await Nd.getPlaceDetails(M.place_id);if(D){d(D.name);const E={...D,distance:R?W(R,{lat:D.lat,lng:D.lng}):void 0};p([E])}}catch(D){C.error("Failed to get place details:",D),Er.error("Failed to get place details",Ya.SEARCH)}finally{m(!1)}};x.useEffect(()=>{const M=setTimeout(()=>{c.trim()&&c.length>2?oe(c):(N([]),j(!1))},300);return()=>clearTimeout(M)},[c]);const J=()=>{if(!c.trim()){Er.error("Please enter a search query",Ya.SEARCH);return}z(c),e(c)},K=async M=>{if(!R){Er.error("Location not available for nearby search",Ya.SEARCH);return}m(!0),d(""),j(!1);try{C.info("Searching nearby places:",{category:M,location:R});const D=await Nd.searchNearbyPlaces(R,M,5e3),E=D.map(Y=>({...Y,distance:W(R,{lat:Y.lat,lng:Y.lng})}));p(E),D.length===0?Er.searchResult(`No ${M.replace("_"," ")} found nearby`,"info"):C.info("Nearby search successful:",{category:M,count:D.length})}catch(D){C.error("Nearby search failed:",D),Er.error("Failed to find nearby places",Ya.SEARCH),p([])}finally{m(!1)}};x.useEffect(()=>{const M=D=>{k.current&&!k.current.contains(D.target)&&j(!1)};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const B=[{id:"restaurant",name:"Restaurants",icon:""},{id:"gas_station",name:"Gas Stations",icon:""},{id:"parking",name:"Parking",icon:""},{id:"atm",name:"ATMs",icon:""},{id:"hospital",name:"Hospitals",icon:""},{id:"shopping_mall",name:"Shopping",icon:""},{id:"lodging",name:"Hotels",icon:""},{id:"movie_theater",name:"Entertainment",icon:""}],V=M=>({restaurant:"",gas_station:"",parking:"",atm:"",hospital:"",shopping_mall:"",lodging:"",movie_theater:"",search_result:"",place_details:""})[M]||"",re=M=>{F(M),s(M);const D=r==="walking"?"":r==="driving"?"":r==="cycling"?"":"";Er.searchResult(`${D} Route to ${M.name}`,"success"),a()};return n.jsxs("div",{className:"h-full flex flex-col bg-white",children:[n.jsxs("div",{className:"flex-shrink-0 p-3 sm:p-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8 sm:h-10 sm:w-10",children:n.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"font-medium text-gray-900 text-base sm:text-lg truncate",children:"Search"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"Find places and addresses"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ft,{value:c,onChange:M=>{d(M.target.value)},placeholder:"Search for places, addresses...",className:"pl-9 sm:pl-10 pr-16 sm:pr-20 text-sm sm:text-base",onKeyPress:M=>M.key==="Enter"&&J(),onFocus:()=>{y.length>0&&j(!0)},autoFocus:!0}),n.jsx(Gn,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400"}),n.jsxs("div",{className:"absolute right-0.5 sm:right-1 top-1/2 transform -translate-y-1/2 flex gap-0.5 sm:gap-1",children:[c&&n.jsx(L,{variant:"ghost",size:"icon",className:"w-6 h-6 sm:w-8 sm:h-8 touch-manipulation",onClick:()=>{d(""),N([]),j(!1),p([])},children:n.jsx(ys,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),n.jsx(L,{variant:"ghost",size:"icon",className:"w-6 h-6 sm:w-8 sm:h-8 touch-manipulation",onClick:l,children:n.jsx(pa,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),w&&y.length>0&&n.jsx("div",{ref:k,className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-48 sm:max-h-60 overflow-y-auto mt-1",children:y.map(M=>n.jsxs("button",{className:"w-full text-left px-3 sm:px-4 py-2.5 sm:py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 flex items-center gap-2 sm:gap-3 touch-manipulation",onClick:()=>q(M),children:[n.jsx(Gn,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 flex-shrink-0"}),n.jsx("span",{className:"text-xs sm:text-sm text-gray-900 truncate",children:M.description})]},M.id))})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto scroll-y hide-scrollbar scroll-smooth",children:[n.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4 border-b border-gray-100",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"Quick Search"}),n.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:B.map(M=>n.jsxs("button",{className:"flex flex-col items-center p-2 sm:p-3 rounded-lg hover:bg-gray-50 transition-colors touch-manipulation",onClick:()=>K(M.id),children:[n.jsx("span",{className:"text-xl sm:text-2xl mb-1",children:M.icon}),n.jsx("span",{className:"text-xs text-gray-700 text-center leading-tight",children:M.name})]},M.id))})]}),h&&n.jsxs("div",{className:"px-3 sm:px-4 py-6 sm:py-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-blue-600 mx-auto"}),n.jsxs("p",{className:"text-gray-600 mt-2 flex items-center justify-center gap-2 text-sm sm:text-base",children:[n.jsx(Dd,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),"Searching with Google Places..."]})]}),!h&&f.length===0&&S.length>0&&n.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:"Recent Searches"}),n.jsx("div",{className:"space-y-2 sm:space-y-3",children:S.map(M=>n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-2.5 sm:p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors touch-manipulation",onClick:()=>re(M),children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx(xs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:M.name}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:M.address})]}),n.jsx(rt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 flex-shrink-0"})]},M.id))})]}),f.length>0&&n.jsxs("div",{className:"px-3 sm:px-4 py-3 sm:py-4",children:[n.jsxs("h3",{className:"font-medium text-gray-900 mb-2 sm:mb-3 text-sm sm:text-base",children:["Search Results (",f.length,")"]}),n.jsx("div",{className:"space-y-2 sm:space-y-3",children:f.map(M=>n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-2.5 sm:p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors touch-manipulation",onClick:()=>re(M),children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-base sm:text-lg",children:V(M.category)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:M.name}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:M.address}),n.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mt-1 text-xs text-gray-500",children:[M.rating&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ds,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"text-xs",children:M.rating.toFixed(1)}),M.userRatingsTotal&&n.jsxs("span",{className:"text-gray-400 text-xs hidden sm:inline",children:["(",M.userRatingsTotal,")"]})]}),M.rating&&M.distance&&n.jsx("span",{className:"w-0.5 h-0.5 sm:w-1 sm:h-1 bg-gray-300 rounded-full"}),M.distance&&n.jsx("span",{className:"text-xs text-gray-600",children:M.distance}),M.priceLevel&&M.priceLevel>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"w-0.5 h-0.5 sm:w-1 sm:h-1 bg-gray-300 rounded-full"}),n.jsx("span",{className:"text-green-600 text-xs",children:"$".repeat(M.priceLevel)})]}),M.isOpenNow!==void 0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"w-0.5 h-0.5 sm:w-1 sm:h-1 bg-gray-300 rounded-full"}),n.jsx("span",{className:`text-xs ${M.isOpenNow?"text-green-600":"text-red-600"}`,children:M.isOpenNow?"Open":"Closed"})]})]})]}),n.jsx(rt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 flex-shrink-0"})]},M.id))})]}),!h&&f.length===0&&c.trim()&&n.jsxs("div",{className:"px-3 sm:px-4 py-6 sm:py-8 text-center",children:[n.jsx(pt,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400 mx-auto mb-2"}),n.jsxs("p",{className:"text-gray-600 text-sm sm:text-base",children:['No results found for "',c,'"']}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Try a different search term"})]})]})]})}var fg="Progress",pg=100,[Q3]=Zn(fg),[X3,eD]=Q3(fg),yN=x.forwardRef((t,e)=>{const{__scopeProgress:s,value:r=null,max:a,getValueLabel:l=tD,...c}=t;(a||a===0)&&!zv(a)&&console.error(sD(`${a}`,"Progress"));const d=zv(a)?a:pg;r!==null&&!$v(r,d)&&console.error(nD(`${r}`,"Progress"));const h=$v(r,d)?r:null,m=eu(h)?l(h,d):void 0;return n.jsx(X3,{scope:s,value:h,max:d,children:n.jsx(Ye.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":eu(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":bN(h,d),"data-value":h??void 0,"data-max":d,...c,ref:e})})});yN.displayName=fg;var vN="ProgressIndicator",wN=x.forwardRef((t,e)=>{const{__scopeProgress:s,...r}=t,a=eD(vN,s);return n.jsx(Ye.div,{"data-state":bN(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:e})});wN.displayName=vN;function tD(t,e){return`${Math.round(t/e*100)}%`}function bN(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function eu(t){return typeof t=="number"}function zv(t){return eu(t)&&!isNaN(t)&&t>0}function $v(t,e){return eu(t)&&!isNaN(t)&&t<=e&&t>=0}function sD(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${pg}\`.`}function nD(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${pg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var rD=yN,aD=wN;function Ks({className:t,value:e,...s}){return n.jsx(rD,{"data-slot":"progress",className:Xe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...s,children:n.jsx(aD,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}class iD{cache=new Map;cacheTTL=300*1e3;constructor(){}async getRoute(e,s,r="driving",a){return this.getRouteWithGoogleMaps(e,s,r,a)}async getRouteWithGoogleMaps(e,s,r="driving",a){try{if(Kt.isAvailable()||await Kt.initialize(),!Kt.isAvailable())return C.warn("Google Maps not available"),this.getMockRoute(e,s,r);const l=a?.waypoints?.map(f=>({location:{lat:f.lat,lng:f.lng},stopover:!0}))||[],c=await Kt.getDirections({origin:{lat:e.lat,lng:e.lng},destination:{lat:s.lat,lng:s.lng},travelMode:Kt.convertToGoogleTravelMode(r),waypoints:l,avoidHighways:a?.avoidHighways||!1,avoidTolls:a?.avoidTolls||!1,avoidFerries:a?.avoidFerries||!1,provideRouteAlternatives:a?.alternative||!1});if(!c||!c.routes||c.routes.length===0)return C.warn("No routes found in Google Maps response"),this.getMockRoute(e,s,r);const d=c.routes[0],h=d.legs[0],m={id:`google_route_${Date.now()}`,distance:h.distance?.text||"0 km",duration:h.duration?.text||"0 min",mode:r,steps:d.legs.flatMap(f=>f.steps?.map(p=>p.instructions?.replace(/<[^>]*>/g,"")||"")||[]),geometry:d.overview_polyline?.points||"",from:{lat:e.lat,lng:e.lng},to:{lat:s.lat,lng:s.lng},transportMode:r,summary:{distanceMeters:h.distance?.value||0,durationSeconds:h.duration?.value||0},googleDirectionsResult:c};return C.info("Google Maps route calculated successfully",{distance:m.distance,duration:m.duration,mode:r}),m}catch(l){return C.error("Google Maps directions failed",{error:l.message,transportMode:r,start:e,end:s}),ue.error("Route calculation failed, using fallback data..."),this.getMockRoute(e,s,r)}}getMockRoute(e,s,r){const a=this.calculateDistance(e.lat,e.lng,s.lat,s.lng),c=a/(r==="walking"?5:r==="cycling"?15:50)*60;return{id:`mock_route_${Date.now()}`,distance:this.formatDistance(a*1e3),duration:this.formatDuration(c*60),mode:r,steps:[`Head ${this.getDirection(e,s)} on your route`,`Continue for ${this.formatDistance(a*1e3)}`,"You have arrived at your destination"],from:e,to:s,transportMode:r,summary:{distanceMeters:a*1e3,durationSeconds:c*60}}}calculateDistance(e,s,r,a){const c=(r-e)*Math.PI/180,d=(a-s)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}getDirection(e,s){const r=s.lat-e.lat,a=s.lng-e.lng;return Math.abs(r)>Math.abs(a)?r>0?"north":"south":a>0?"east":"west"}formatDistance(e){return e<1e3?`${Math.round(e)} m`:`${(e/1e3).toFixed(1)} km`}formatDuration(e){const s=Math.floor(e/3600),r=Math.floor(e%3600/60);return s>0?`${s}h ${r}min`:`${r}min`}async testRouting(e,s,r="driving"){C.info("Testing routing functionality",{start:e,end:s,transportMode:r});try{const l=await this.getRoute(e,s,r);if(l)return C.info("Routing test successful with Google Maps",{distance:l.distance,duration:l.duration}),l}catch(l){C.warn("Google Maps routing failed, using mock data",l)}const a=this.getMockRoute(e,s,r);return C.info("Using mock route for testing",{distance:a.distance,duration:a.duration}),a}async getAlternativeRoutes(e,s,r="driving",a=3){try{const l=await this.getRoute(e,s,r,{alternative:!0});return l?[l]:[]}catch(l){return C.error("Alternative routes failed",l),[]}}async getOptimizedRoute(e,s="driving"){if(e.length<2)throw new Error("At least 2 waypoints are required");const r=e[0],a=e[e.length-1],l=e.slice(1,-1);return this.getRoute(r,a,s,{waypoints:l})}getFromCache(e){const s=this.cache.get(e);return s&&Date.now()-s.timestamp<this.cacheTTL?s.data:(s&&this.cache.delete(e),null)}setCache(e,s){this.cache.set(e,{data:s,timestamp:Date.now()})}}const tu=new iD;function oD({route:t,onStopNavigation:e,onStartAR:s,onShareETA:r}){const[a,l]=x.useState(0),[c,d]=x.useState(!1),[h,m]=x.useState("8 min"),[f,p]=x.useState("2.4 mi"),[y,N]=x.useState("0.3 mi"),[w,j]=x.useState("35 mph"),[S,T]=x.useState("35"),[R,A]=x.useState(!1),[k,P]=x.useState({time:"12 min",distance:"3.1 mi",description:"Avoid traffic on Highway 101"}),[F,W]=x.useState(18),[z,oe]=x.useState(!1),[q,J]=x.useState(0),{position:K,error:B,isLoading:V,permissionStatus:re,isAccurateEnoughForNavigation:M}=ug({trackLocation:!0,enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3});x.useEffect(()=>{if(!t||!K)return;(()=>{const X=D(K.lat,K.lng,t.to.lat,t.to.lng);if(K.speed!==void 0&&K.speed>0){const ye=(K.speed*2.237).toFixed(0);j(`${ye} mph`)}X<1e3?p(`${Math.round(X)} m`):p(`${(X/1e3).toFixed(1)} km`),I(),se(K),fe(K,X);const me=Date.now();me-q>3e4&&(E(K),J(me)),X<50&&Q()})()},[K,t]),x.useEffect(()=>{t&&!z&&(oe(!0),c||ve(`Starting navigation to ${t.to.name}`))},[t]);const D=(G,X,me,ye)=>{const Ae=(me-G)*Math.PI/180,U=(ye-X)*Math.PI/180,Te=Math.sin(Ae/2)*Math.sin(Ae/2)+Math.cos(G*Math.PI/180)*Math.cos(me*Math.PI/180)*Math.sin(U/2)*Math.sin(U/2);return 6371e3*(2*Math.atan2(Math.sqrt(Te),Math.sqrt(1-Te)))},E=async G=>{if(t)try{const X=await tu.getRoute({lat:G.lat,lng:G.lng},{lat:t.to.lat,lng:t.to.lng},t.mode);X&&Y(X)&&(P({time:X.duration,distance:X.distance,description:"Updated route due to current conditions"}),A(!0))}catch{}},Y=G=>{const X=parseFloat(h.replace(/[^0-9.]/g,"")),me=parseFloat(G.duration.replace(/[^0-9.]/g,""));return X-me>2},Q=()=>{c||ve(`You have arrived at ${t?.to.name}`),oe(!1),setTimeout(()=>{e()},3e3)},I=G=>{if(!t||!t.steps||a>=t.steps.length)return;const X=t.steps[a],me=te();me<100&&!c&&(me<50?ve(`In 50 meters, ${X}`):ve(`In 100 meters, ${X}`)),me<20&&a<t.steps.length-1&&l(a+1)},te=G=>Math.random()*200,se=G=>{if(!G.speed)return;const X=G.speed*2.237,me=parseInt(S);X>me+5&&!c&&Math.random()>.95&&ve(`Speed limit is ${S} miles per hour`)},fe=(G,X)=>{if(!G.speed||G.speed<1)return;const me=G.speed,ye=X/me;if(ye<60)m("< 1 min");else if(ye<3600){const je=Math.round(ye/60);m(`${je} min`)}else{const je=Math.floor(ye/3600),Ae=Math.round(ye%3600/60);m(`${je}h ${Ae}m`)}},ve=G=>{if("speechSynthesis"in window){const X=new SpeechSynthesisUtterance(G);X.rate=.8,X.pitch=1,speechSynthesis.speak(X)}};if(!t)return n.jsx("div",{className:"h-full bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No active navigation"})]})});const Pe=()=>{switch(t.mode){case"driving":return"#3B82F6";case"walking":return"#10B981";case"transit":return"#F59E0B";case"cycling":return"#8B5CF6";default:return"#5B4FE5"}},$=a/t.steps.length*100;return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsxs("div",{className:"flex-shrink-0 px-3 sm:px-4 py-2 sm:py-3 text-white",style:{backgroundColor:Pe()},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0",onClick:e,children:n.jsx(ys,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"font-medium text-sm sm:text-base truncate",children:[h,"  ",f]}),n.jsxs("div",{className:"text-xs sm:text-sm opacity-90 truncate",children:["Arriving at ",t.to.name]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 h-8 w-8 sm:h-10 sm:w-10",onClick:()=>d(!c),children:c?n.jsx(zp,{className:"w-4 h-4 sm:w-5 sm:h-5"}):n.jsx(Mr,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 h-8 w-8 sm:h-10 sm:w-10",onClick:()=>{"tel:"in window?window.location.href="tel:911":(ue.error("Emergency calling not available on this device"),C.warn("Emergency call attempted but tel: protocol not supported"))},children:n.jsx(Il,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),n.jsx(Ks,{value:$,className:"mt-2 h-1 bg-white/30"})]}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex-shrink-0 px-3 sm:px-6 py-6 sm:py-8 text-center bg-gray-50",children:[n.jsxs("div",{className:"mb-3 sm:mb-4",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center mb-2 sm:mb-3",children:n.jsx(rt,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600",style:{transform:"rotate(45deg)"}})}),n.jsx("div",{className:"text-2xl sm:text-3xl font-light text-gray-900 mb-1",children:y}),n.jsx("div",{className:"text-gray-600 text-sm sm:text-base",children:"Then turn right"})]}),n.jsx("div",{className:"text-base sm:text-lg text-gray-900 font-medium px-2",children:t.steps[a]||"Continue straight"})]}),n.jsx("div",{className:"flex-shrink-0 px-6 py-4 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:"Market Street"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Stay in right lane"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-yellow-50 px-3 py-1 rounded-full",children:[n.jsx(ii,{className:"w-4 h-4 text-yellow-600"}),n.jsx("span",{className:"text-sm text-yellow-700",children:"Speed trap in 0.3 mi"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[K&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-sm font-medium ${M(K)?"text-green-600":"text-orange-600"}`,children:"GPS"}),n.jsx("div",{className:"text-xs text-gray-500",children:K.accuracy<5?"Excellent":K.accuracy<15?"Good":K.accuracy<50?"Fair":"Poor"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-light text-gray-900",children:w}),n.jsx("div",{className:"text-xs text-gray-500",children:"Current"})]}),n.jsx("div",{className:"w-12 h-12 bg-white border-4 border-red-500 rounded-lg flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-bold text-red-600",children:S.replace(" mph","")}),n.jsx("div",{className:"text-xs text-red-600 leading-none",children:"MPH"})]})})]})]})}),n.jsx("div",{className:"flex-shrink-0 px-6 py-4 bg-gray-50",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Stay in lane:"}),n.jsx("div",{className:"flex gap-1",children:[0,1,2].map(G=>n.jsx("div",{className:`w-8 h-6 rounded border-2 ${G===2?"border-blue-500 bg-blue-100":"border-gray-300 bg-white"}`},G))})]})}),n.jsxs("div",{className:"flex-1 p-6 scroll-y hide-scrollbar scroll-smooth",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Upcoming"}),n.jsx("div",{className:"space-y-4",children:t.steps.slice(a+1,a+4).map((G,X)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx("span",{className:"text-xs text-gray-600",children:a+X+2})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:G}),n.jsx("div",{className:"text-sm text-gray-500",children:X===0?"0.8 mi":X===1?"1.5 mi":"2.1 mi"})]})]},X))})]}),n.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(L,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{ue.info("Incident reporting feature coming soon"),C.info("User attempted to report incident during navigation")},children:[n.jsx(Et,{className:"w-4 h-4"}),"Report"]}),n.jsxs(L,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{ue.info("Add stop feature - would open location picker"),C.info("User attempted to add stop during navigation")},children:[n.jsx(pt,{className:"w-4 h-4"}),"Add Stop"]}),t?.mode==="walking"&&s?n.jsxs(L,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:s,children:[n.jsx(Hn,{className:"w-4 h-4"}),"AR View"]}):n.jsxs(L,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{ue.info("Overview mode - would show full route map"),C.info("User requested overview mode during navigation")},children:[n.jsx(rt,{className:"w-4 h-4"}),"Overview"]}),r&&n.jsxs(L,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:r,children:[n.jsx(gu,{className:"w-4 h-4"}),"Share ETA"]})]})})]}),R&&n.jsxs("div",{className:"absolute top-32 left-4 right-4 bg-blue-100 border border-blue-300 rounded-lg px-4 py-3 flex items-center gap-3",children:[n.jsx(rt,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-blue-800",children:"Faster route available"}),n.jsxs("div",{className:"text-sm text-blue-700",children:["Save 4 min  ",k.description]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{variant:"ghost",size:"sm",className:"text-blue-800",onClick:()=>A(!1),children:"Dismiss"}),n.jsx(L,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{A(!1),m(k.time),p(k.distance)},children:"Switch"})]})]}),!R&&n.jsxs("div",{className:"absolute top-32 left-4 right-4 bg-yellow-100 border border-yellow-300 rounded-lg px-4 py-3 flex items-center gap-3",children:[n.jsx(Et,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-yellow-800",children:"Traffic ahead"}),n.jsx("div",{className:"text-sm text-yellow-700",children:"Heavy traffic in 0.5 mi - adds 3 min"})]}),n.jsx(L,{variant:"ghost",size:"sm",className:"text-yellow-800",onClick:()=>A(!0),children:"Find Route"})]})]})}function lD({currentScreen:t,onScreenChange:e}){const s=[{id:"map",icon:AP,label:"Map"},{id:"search",icon:Gn,label:"Search"},{id:"saved",icon:pt,label:"Saved"},{id:"social",icon:yu,label:"Community"},{id:"profile",icon:xu,label:"Profile"}];return n.jsx("div",{className:"bg-white border-t border-gray-200 px-2 sm:px-4 py-1.5 sm:py-2 safe-area-pb",children:n.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:s.map(r=>{const a=r.icon,l=t===r.id;return n.jsxs(L,{variant:"ghost",size:"sm",className:`flex flex-col items-center gap-0.5 sm:gap-1 h-auto py-1.5 sm:py-2 px-2 sm:px-3 touch-manipulation min-w-0 flex-1 ${l?"text-purple-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>e(r.id),children:[n.jsx(a,{className:`w-4 h-4 sm:w-5 sm:h-5 ${l?"text-purple-600":""}`}),n.jsx("span",{className:`text-xs leading-none ${l?"text-purple-600 font-medium":""} truncate`,children:r.label})]},r.id)})})})}function jN(t,e){return function(){return t.apply(e,arguments)}}const{toString:cD}=Object.prototype,{getPrototypeOf:gg}=Object,{iterator:Fu,toStringTag:NN}=Symbol,zu=(t=>e=>{const s=cD.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Jn=t=>(t=t.toLowerCase(),e=>zu(e)===t),$u=t=>e=>typeof e===t,{isArray:To}=Array,wo=$u("undefined");function Xl(t){return t!==null&&!wo(t)&&t.constructor!==null&&!wo(t.constructor)&&Ys(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const SN=Jn("ArrayBuffer");function dD(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&SN(t.buffer),e}const uD=$u("string"),Ys=$u("function"),kN=$u("number"),ec=t=>t!==null&&typeof t=="object",hD=t=>t===!0||t===!1,Fd=t=>{if(zu(t)!=="object")return!1;const e=gg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(NN in t)&&!(Fu in t)},mD=t=>{if(!ec(t)||Xl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},fD=Jn("Date"),pD=Jn("File"),gD=Jn("Blob"),xD=Jn("FileList"),yD=t=>ec(t)&&Ys(t.pipe),vD=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ys(t.append)&&((e=zu(t))==="formdata"||e==="object"&&Ys(t.toString)&&t.toString()==="[object FormData]"))},wD=Jn("URLSearchParams"),[bD,jD,ND,SD]=["ReadableStream","Request","Response","Headers"].map(Jn),kD=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tc(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),To(t))for(r=0,a=t.length;r<a;r++)e.call(null,t[r],r,t);else{if(Xl(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let d;for(r=0;r<c;r++)d=l[r],e.call(null,t[d],d,t)}}function CN(t,e){if(Xl(t))return null;e=e.toLowerCase();const s=Object.keys(t);let r=s.length,a;for(;r-- >0;)if(a=s[r],e===a.toLowerCase())return a;return null}const Xa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,TN=t=>!wo(t)&&t!==Xa;function Zf(){const{caseless:t,skipUndefined:e}=TN(this)&&this||{},s={},r=(a,l)=>{const c=t&&CN(s,l)||l;Fd(s[c])&&Fd(a)?s[c]=Zf(s[c],a):Fd(a)?s[c]=Zf({},a):To(a)?s[c]=a.slice():(!e||!wo(a))&&(s[c]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&tc(arguments[a],r);return s}const CD=(t,e,s,{allOwnKeys:r}={})=>(tc(e,(a,l)=>{s&&Ys(a)?t[l]=jN(a,s):t[l]=a},{allOwnKeys:r}),t),TD=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ED=(t,e,s,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},PD=(t,e,s,r)=>{let a,l,c;const d={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),l=a.length;l-- >0;)c=a[l],(!r||r(c,t,e))&&!d[c]&&(e[c]=t[c],d[c]=!0);t=s!==!1&&gg(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},AD=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const r=t.indexOf(e,s);return r!==-1&&r===s},_D=t=>{if(!t)return null;if(To(t))return t;let e=t.length;if(!kN(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},RD=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&gg(Uint8Array)),MD=(t,e)=>{const r=(t&&t[Fu]).call(t);let a;for(;(a=r.next())&&!a.done;){const l=a.value;e.call(t,l[0],l[1])}},DD=(t,e)=>{let s;const r=[];for(;(s=t.exec(e))!==null;)r.push(s);return r},ID=Jn("HTMLFormElement"),LD=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,a){return r.toUpperCase()+a}),Bv=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),OD=Jn("RegExp"),EN=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),r={};tc(s,(a,l)=>{let c;(c=e(a,l,t))!==!1&&(r[l]=c||a)}),Object.defineProperties(t,r)},FD=t=>{EN(t,(e,s)=>{if(Ys(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=t[s];if(Ys(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},zD=(t,e)=>{const s={},r=a=>{a.forEach(l=>{s[l]=!0})};return To(t)?r(t):r(String(t).split(e)),s},$D=()=>{},BD=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function UD(t){return!!(t&&Ys(t.append)&&t[NN]==="FormData"&&t[Fu])}const VD=t=>{const e=new Array(10),s=(r,a)=>{if(ec(r)){if(e.indexOf(r)>=0)return;if(Xl(r))return r;if(!("toJSON"in r)){e[a]=r;const l=To(r)?[]:{};return tc(r,(c,d)=>{const h=s(c,a+1);!wo(h)&&(l[d]=h)}),e[a]=void 0,l}}return r};return s(t,0)},WD=Jn("AsyncFunction"),HD=t=>t&&(ec(t)||Ys(t))&&Ys(t.then)&&Ys(t.catch),PN=((t,e)=>t?setImmediate:e?((s,r)=>(Xa.addEventListener("message",({source:a,data:l})=>{a===Xa&&l===s&&r.length&&r.shift()()},!1),a=>{r.push(a),Xa.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ys(Xa.postMessage)),GD=typeof queueMicrotask<"u"?queueMicrotask.bind(Xa):typeof process<"u"&&process.nextTick||PN,qD=t=>t!=null&&Ys(t[Fu]),de={isArray:To,isArrayBuffer:SN,isBuffer:Xl,isFormData:vD,isArrayBufferView:dD,isString:uD,isNumber:kN,isBoolean:hD,isObject:ec,isPlainObject:Fd,isEmptyObject:mD,isReadableStream:bD,isRequest:jD,isResponse:ND,isHeaders:SD,isUndefined:wo,isDate:fD,isFile:pD,isBlob:gD,isRegExp:OD,isFunction:Ys,isStream:yD,isURLSearchParams:wD,isTypedArray:RD,isFileList:xD,forEach:tc,merge:Zf,extend:CD,trim:kD,stripBOM:TD,inherits:ED,toFlatObject:PD,kindOf:zu,kindOfTest:Jn,endsWith:AD,toArray:_D,forEachEntry:MD,matchAll:DD,isHTMLForm:ID,hasOwnProperty:Bv,hasOwnProp:Bv,reduceDescriptors:EN,freezeMethods:FD,toObjectSet:zD,toCamelCase:LD,noop:$D,toFiniteNumber:BD,findKey:CN,global:Xa,isContextDefined:TN,isSpecCompliantForm:UD,toJSONObject:VD,isAsyncFn:WD,isThenable:HD,setImmediate:PN,asap:GD,isIterable:qD};function tt(t,e,s,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}de.inherits(tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.status}}});const AN=tt.prototype,_N={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_N[t]={value:t}});Object.defineProperties(tt,_N);Object.defineProperty(AN,"isAxiosError",{value:!0});tt.from=(t,e,s,r,a,l)=>{const c=Object.create(AN);de.toFlatObject(t,c,function(f){return f!==Error.prototype},m=>m!=="isAxiosError");const d=t&&t.message?t.message:"Error",h=e==null&&t?t.code:e;return tt.call(c,d,h,s,r,a),t&&c.cause==null&&Object.defineProperty(c,"cause",{value:t,configurable:!0}),c.name=t&&t.name||"Error",l&&Object.assign(c,l),c};const KD=null;function Yf(t){return de.isPlainObject(t)||de.isArray(t)}function RN(t){return de.endsWith(t,"[]")?t.slice(0,-2):t}function Uv(t,e,s){return t?t.concat(e).map(function(a,l){return a=RN(a),!s&&l?"["+a+"]":a}).join(s?".":""):e}function ZD(t){return de.isArray(t)&&!t.some(Yf)}const YD=de.toFlatObject(de,{},null,function(e){return/^is[A-Z]/.test(e)});function Bu(t,e,s){if(!de.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=de.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,S){return!de.isUndefined(S[j])});const r=s.metaTokens,a=s.visitor||f,l=s.dots,c=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(e);if(!de.isFunction(a))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(de.isDate(w))return w.toISOString();if(de.isBoolean(w))return w.toString();if(!h&&de.isBlob(w))throw new tt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(w)||de.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,j,S){let T=w;if(w&&!S&&typeof w=="object"){if(de.endsWith(j,"{}"))j=r?j:j.slice(0,-2),w=JSON.stringify(w);else if(de.isArray(w)&&ZD(w)||(de.isFileList(w)||de.endsWith(j,"[]"))&&(T=de.toArray(w)))return j=RN(j),T.forEach(function(A,k){!(de.isUndefined(A)||A===null)&&e.append(c===!0?Uv([j],k,l):c===null?j:j+"[]",m(A))}),!1}return Yf(w)?!0:(e.append(Uv(S,j,l),m(w)),!1)}const p=[],y=Object.assign(YD,{defaultVisitor:f,convertValue:m,isVisitable:Yf});function N(w,j){if(!de.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+j.join("."));p.push(w),de.forEach(w,function(T,R){(!(de.isUndefined(T)||T===null)&&a.call(e,T,de.isString(R)?R.trim():R,j,y))===!0&&N(T,j?j.concat(R):[R])}),p.pop()}}if(!de.isObject(t))throw new TypeError("data must be an object");return N(t),e}function Vv(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function xg(t,e){this._pairs=[],t&&Bu(t,this,e)}const MN=xg.prototype;MN.append=function(e,s){this._pairs.push([e,s])};MN.toString=function(e){const s=e?function(r){return e.call(this,r,Vv)}:Vv;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function JD(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function DN(t,e,s){if(!e)return t;const r=s&&s.encode||JD;de.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let l;if(a?l=a(e,s):l=de.isURLSearchParams(e)?e.toString():new xg(e,s).toString(r),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Wv{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){de.forEach(this.handlers,function(r){r!==null&&e(r)})}}const IN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QD=typeof URLSearchParams<"u"?URLSearchParams:xg,XD=typeof FormData<"u"?FormData:null,eI=typeof Blob<"u"?Blob:null,tI={isBrowser:!0,classes:{URLSearchParams:QD,FormData:XD,Blob:eI},protocols:["http","https","file","blob","url","data"]},yg=typeof window<"u"&&typeof document<"u",Jf=typeof navigator=="object"&&navigator||void 0,sI=yg&&(!Jf||["ReactNative","NativeScript","NS"].indexOf(Jf.product)<0),nI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rI=yg&&window.location.href||"http://localhost",aI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yg,hasStandardBrowserEnv:sI,hasStandardBrowserWebWorkerEnv:nI,navigator:Jf,origin:rI},Symbol.toStringTag,{value:"Module"})),Ts={...aI,...tI};function iI(t,e){return Bu(t,new Ts.classes.URLSearchParams,{visitor:function(s,r,a,l){return Ts.isNode&&de.isBuffer(s)?(this.append(r,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function oI(t){return de.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lI(t){const e={},s=Object.keys(t);let r;const a=s.length;let l;for(r=0;r<a;r++)l=s[r],e[l]=t[l];return e}function LN(t){function e(s,r,a,l){let c=s[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),h=l>=s.length;return c=!c&&de.isArray(a)?a.length:c,h?(de.hasOwnProp(a,c)?a[c]=[a[c],r]:a[c]=r,!d):((!a[c]||!de.isObject(a[c]))&&(a[c]=[]),e(s,r,a[c],l)&&de.isArray(a[c])&&(a[c]=lI(a[c])),!d)}if(de.isFormData(t)&&de.isFunction(t.entries)){const s={};return de.forEachEntry(t,(r,a)=>{e(oI(r),a,s,0)}),s}return null}function cI(t,e,s){if(de.isString(t))try{return(e||JSON.parse)(t),de.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(t)}const sc={transitional:IN,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const r=s.getContentType()||"",a=r.indexOf("application/json")>-1,l=de.isObject(e);if(l&&de.isHTMLForm(e)&&(e=new FormData(e)),de.isFormData(e))return a?JSON.stringify(LN(e)):e;if(de.isArrayBuffer(e)||de.isBuffer(e)||de.isStream(e)||de.isFile(e)||de.isBlob(e)||de.isReadableStream(e))return e;if(de.isArrayBufferView(e))return e.buffer;if(de.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return iI(e,this.formSerializer).toString();if((d=de.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Bu(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),cI(e)):e}],transformResponse:[function(e){const s=this.transitional||sc.transitional,r=s&&s.forcedJSONParsing,a=this.responseType==="json";if(de.isResponse(e)||de.isReadableStream(e))return e;if(e&&de.isString(e)&&(r&&!this.responseType||a)){const c=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?tt.from(d,tt.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ts.classes.FormData,Blob:Ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],t=>{sc.headers[t]={}});const dI=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uI=t=>{const e={};let s,r,a;return t&&t.split(`
`).forEach(function(c){a=c.indexOf(":"),s=c.substring(0,a).trim().toLowerCase(),r=c.substring(a+1).trim(),!(!s||e[s]&&dI[s])&&(s==="set-cookie"?e[s]?e[s].push(r):e[s]=[r]:e[s]=e[s]?e[s]+", "+r:r)}),e},Hv=Symbol("internals");function wl(t){return t&&String(t).trim().toLowerCase()}function zd(t){return t===!1||t==null?t:de.isArray(t)?t.map(zd):String(t)}function hI(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(t);)e[r[1]]=r[2];return e}const mI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function df(t,e,s,r,a){if(de.isFunction(r))return r.call(this,e,s);if(a&&(e=s),!!de.isString(e)){if(de.isString(r))return e.indexOf(r)!==-1;if(de.isRegExp(r))return r.test(e)}}function fI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,r)=>s.toUpperCase()+r)}function pI(t,e){const s=de.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+s,{value:function(a,l,c){return this[r].call(this,e,a,l,c)},configurable:!0})})}let Js=class{constructor(e){e&&this.set(e)}set(e,s,r){const a=this;function l(d,h,m){const f=wl(h);if(!f)throw new Error("header name must be a non-empty string");const p=de.findKey(a,f);(!p||a[p]===void 0||m===!0||m===void 0&&a[p]!==!1)&&(a[p||h]=zd(d))}const c=(d,h)=>de.forEach(d,(m,f)=>l(m,f,h));if(de.isPlainObject(e)||e instanceof this.constructor)c(e,s);else if(de.isString(e)&&(e=e.trim())&&!mI(e))c(uI(e),s);else if(de.isObject(e)&&de.isIterable(e)){let d={},h,m;for(const f of e){if(!de.isArray(f))throw TypeError("Object iterator must return a key-value pair");d[m=f[0]]=(h=d[m])?de.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}c(d,s)}else e!=null&&l(s,e,r);return this}get(e,s){if(e=wl(e),e){const r=de.findKey(this,e);if(r){const a=this[r];if(!s)return a;if(s===!0)return hI(a);if(de.isFunction(s))return s.call(this,a,r);if(de.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=wl(e),e){const r=de.findKey(this,e);return!!(r&&this[r]!==void 0&&(!s||df(this,this[r],r,s)))}return!1}delete(e,s){const r=this;let a=!1;function l(c){if(c=wl(c),c){const d=de.findKey(r,c);d&&(!s||df(r,r[d],d,s))&&(delete r[d],a=!0)}}return de.isArray(e)?e.forEach(l):l(e),a}clear(e){const s=Object.keys(this);let r=s.length,a=!1;for(;r--;){const l=s[r];(!e||df(this,this[l],l,e,!0))&&(delete this[l],a=!0)}return a}normalize(e){const s=this,r={};return de.forEach(this,(a,l)=>{const c=de.findKey(r,l);if(c){s[c]=zd(a),delete s[l];return}const d=e?fI(l):String(l).trim();d!==l&&delete s[l],s[d]=zd(a),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return de.forEach(this,(r,a)=>{r!=null&&r!==!1&&(s[a]=e&&de.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const r=new this(e);return s.forEach(a=>r.set(a)),r}static accessor(e){const r=(this[Hv]=this[Hv]={accessors:{}}).accessors,a=this.prototype;function l(c){const d=wl(c);r[d]||(pI(a,c),r[d]=!0)}return de.isArray(e)?e.forEach(l):l(e),this}};Js.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(Js.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[s]=r}}});de.freezeMethods(Js);function uf(t,e){const s=this||sc,r=e||s,a=Js.from(r.headers);let l=r.data;return de.forEach(t,function(d){l=d.call(s,l,a.normalize(),e?e.status:void 0)}),a.normalize(),l}function ON(t){return!!(t&&t.__CANCEL__)}function Eo(t,e,s){tt.call(this,t??"canceled",tt.ERR_CANCELED,e,s),this.name="CanceledError"}de.inherits(Eo,tt,{__CANCEL__:!0});function FN(t,e,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?t(s):e(new tt("Request failed with status code "+s.status,[tt.ERR_BAD_REQUEST,tt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function gI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function xI(t,e){t=t||10;const s=new Array(t),r=new Array(t);let a=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const m=Date.now(),f=r[l];c||(c=m),s[a]=h,r[a]=m;let p=l,y=0;for(;p!==a;)y+=s[p++],p=p%t;if(a=(a+1)%t,a===l&&(l=(l+1)%t),m-c<e)return;const N=f&&m-f;return N?Math.round(y*1e3/N):void 0}}function yI(t,e){let s=0,r=1e3/e,a,l;const c=(m,f=Date.now())=>{s=f,a=null,l&&(clearTimeout(l),l=null),t(...m)};return[(...m)=>{const f=Date.now(),p=f-s;p>=r?c(m,f):(a=m,l||(l=setTimeout(()=>{l=null,c(a)},r-p)))},()=>a&&c(a)]}const su=(t,e,s=3)=>{let r=0;const a=xI(50,250);return yI(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,h=c-r,m=a(h),f=c<=d;r=c;const p={loaded:c,total:d,progress:d?c/d:void 0,bytes:h,rate:m||void 0,estimated:m&&d&&f?(d-c)/m:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(p)},s)},Gv=(t,e)=>{const s=t!=null;return[r=>e[0]({lengthComputable:s,total:t,loaded:r}),e[1]]},qv=t=>(...e)=>de.asap(()=>t(...e)),vI=Ts.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ts.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ts.origin),Ts.navigator&&/(msie|trident)/i.test(Ts.navigator.userAgent)):()=>!0,wI=Ts.hasStandardBrowserEnv?{write(t,e,s,r,a,l){const c=[t+"="+encodeURIComponent(e)];de.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),de.isString(r)&&c.push("path="+r),de.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function jI(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function zN(t,e,s){let r=!bI(e);return t&&(r||s==!1)?jI(t,e):e}const Kv=t=>t instanceof Js?{...t}:t;function ui(t,e){e=e||{};const s={};function r(m,f,p,y){return de.isPlainObject(m)&&de.isPlainObject(f)?de.merge.call({caseless:y},m,f):de.isPlainObject(f)?de.merge({},f):de.isArray(f)?f.slice():f}function a(m,f,p,y){if(de.isUndefined(f)){if(!de.isUndefined(m))return r(void 0,m,p,y)}else return r(m,f,p,y)}function l(m,f){if(!de.isUndefined(f))return r(void 0,f)}function c(m,f){if(de.isUndefined(f)){if(!de.isUndefined(m))return r(void 0,m)}else return r(void 0,f)}function d(m,f,p){if(p in e)return r(m,f);if(p in t)return r(void 0,m)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(m,f,p)=>a(Kv(m),Kv(f),p,!0)};return de.forEach(Object.keys({...t,...e}),function(f){const p=h[f]||a,y=p(t[f],e[f],f);de.isUndefined(y)&&p!==d||(s[f]=y)}),s}const $N=t=>{const e=ui({},t);let{data:s,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:d}=e;if(e.headers=c=Js.from(c),e.url=DN(zN(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),de.isFormData(s)){if(Ts.hasStandardBrowserEnv||Ts.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(de.isFunction(s.getHeaders)){const h=s.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([f,p])=>{m.includes(f.toLowerCase())&&c.set(f,p)})}}if(Ts.hasStandardBrowserEnv&&(r&&de.isFunction(r)&&(r=r(e)),r||r!==!1&&vI(e.url))){const h=a&&l&&wI.read(l);h&&c.set(a,h)}return e},NI=typeof XMLHttpRequest<"u",SI=NI&&function(t){return new Promise(function(s,r){const a=$N(t);let l=a.data;const c=Js.from(a.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:m}=a,f,p,y,N,w;function j(){N&&N(),w&&w(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let S=new XMLHttpRequest;S.open(a.method.toUpperCase(),a.url,!0),S.timeout=a.timeout;function T(){if(!S)return;const A=Js.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),P={data:!d||d==="text"||d==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:A,config:t,request:S};FN(function(W){s(W),j()},function(W){r(W),j()},P),S=null}"onloadend"in S?S.onloadend=T:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(T)},S.onabort=function(){S&&(r(new tt("Request aborted",tt.ECONNABORTED,t,S)),S=null)},S.onerror=function(k){const P=k&&k.message?k.message:"Network Error",F=new tt(P,tt.ERR_NETWORK,t,S);F.event=k||null,r(F),S=null},S.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||IN;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),r(new tt(k,P.clarifyTimeoutError?tt.ETIMEDOUT:tt.ECONNABORTED,t,S)),S=null},l===void 0&&c.setContentType(null),"setRequestHeader"in S&&de.forEach(c.toJSON(),function(k,P){S.setRequestHeader(P,k)}),de.isUndefined(a.withCredentials)||(S.withCredentials=!!a.withCredentials),d&&d!=="json"&&(S.responseType=a.responseType),m&&([y,w]=su(m,!0),S.addEventListener("progress",y)),h&&S.upload&&([p,N]=su(h),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",N)),(a.cancelToken||a.signal)&&(f=A=>{S&&(r(!A||A.type?new Eo(null,t,S):A),S.abort(),S=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const R=gI(a.url);if(R&&Ts.protocols.indexOf(R)===-1){r(new tt("Unsupported protocol "+R+":",tt.ERR_BAD_REQUEST,t));return}S.send(l||null)})},kI=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let r=new AbortController,a;const l=function(m){if(!a){a=!0,d();const f=m instanceof Error?m:this.reason;r.abort(f instanceof tt?f:new Eo(f instanceof Error?f.message:f))}};let c=e&&setTimeout(()=>{c=null,l(new tt(`timeout ${e} of ms exceeded`,tt.ETIMEDOUT))},e);const d=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),t=null)};t.forEach(m=>m.addEventListener("abort",l));const{signal:h}=r;return h.unsubscribe=()=>de.asap(d),h}},CI=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let r=0,a;for(;r<s;)a=r+e,yield t.slice(r,a),r=a},TI=async function*(t,e){for await(const s of EI(t))yield*CI(s,e)},EI=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:r}=await e.read();if(s)break;yield r}}finally{await e.cancel()}},Zv=(t,e,s,r)=>{const a=TI(t,e);let l=0,c,d=h=>{c||(c=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:m,value:f}=await a.next();if(m){d(),h.close();return}let p=f.byteLength;if(s){let y=l+=p;s(y)}h.enqueue(new Uint8Array(f))}catch(m){throw d(m),m}},cancel(h){return d(h),a.return()}},{highWaterMark:2})},Yv=64*1024,{isFunction:Sd}=de,PI=(({Request:t,Response:e})=>({Request:t,Response:e}))(de.global),{ReadableStream:Jv,TextEncoder:Qv}=de.global,Xv=(t,...e)=>{try{return!!t(...e)}catch{return!1}},AI=t=>{t=de.merge.call({skipUndefined:!0},PI,t);const{fetch:e,Request:s,Response:r}=t,a=e?Sd(e):typeof fetch=="function",l=Sd(s),c=Sd(r);if(!a)return!1;const d=a&&Sd(Jv),h=a&&(typeof Qv=="function"?(w=>j=>w.encode(j))(new Qv):async w=>new Uint8Array(await new s(w).arrayBuffer())),m=l&&d&&Xv(()=>{let w=!1;const j=new s(Ts.origin,{body:new Jv,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!j}),f=c&&d&&Xv(()=>de.isReadableStream(new r("").body)),p={stream:f&&(w=>w.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(j,S)=>{let T=j&&j[w];if(T)return T.call(j);throw new tt(`Response type '${w}' is not supported`,tt.ERR_NOT_SUPPORT,S)})});const y=async w=>{if(w==null)return 0;if(de.isBlob(w))return w.size;if(de.isSpecCompliantForm(w))return(await new s(Ts.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(de.isArrayBufferView(w)||de.isArrayBuffer(w))return w.byteLength;if(de.isURLSearchParams(w)&&(w=w+""),de.isString(w))return(await h(w)).byteLength},N=async(w,j)=>{const S=de.toFiniteNumber(w.getContentLength());return S??y(j)};return async w=>{let{url:j,method:S,data:T,signal:R,cancelToken:A,timeout:k,onDownloadProgress:P,onUploadProgress:F,responseType:W,headers:z,withCredentials:oe="same-origin",fetchOptions:q}=$N(w),J=e||fetch;W=W?(W+"").toLowerCase():"text";let K=kI([R,A&&A.toAbortSignal()],k),B=null;const V=K&&K.unsubscribe&&(()=>{K.unsubscribe()});let re;try{if(F&&m&&S!=="get"&&S!=="head"&&(re=await N(z,T))!==0){let I=new s(j,{method:"POST",body:T,duplex:"half"}),te;if(de.isFormData(T)&&(te=I.headers.get("content-type"))&&z.setContentType(te),I.body){const[se,fe]=Gv(re,su(qv(F)));T=Zv(I.body,Yv,se,fe)}}de.isString(oe)||(oe=oe?"include":"omit");const M=l&&"credentials"in s.prototype,D={...q,signal:K,method:S.toUpperCase(),headers:z.normalize().toJSON(),body:T,duplex:"half",credentials:M?oe:void 0};B=l&&new s(j,D);let E=await(l?J(B,q):J(j,D));const Y=f&&(W==="stream"||W==="response");if(f&&(P||Y&&V)){const I={};["status","statusText","headers"].forEach(ve=>{I[ve]=E[ve]});const te=de.toFiniteNumber(E.headers.get("content-length")),[se,fe]=P&&Gv(te,su(qv(P),!0))||[];E=new r(Zv(E.body,Yv,se,()=>{fe&&fe(),V&&V()}),I)}W=W||"text";let Q=await p[de.findKey(p,W)||"text"](E,w);return!Y&&V&&V(),await new Promise((I,te)=>{FN(I,te,{data:Q,headers:Js.from(E.headers),status:E.status,statusText:E.statusText,config:w,request:B})})}catch(M){throw V&&V(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new tt("Network Error",tt.ERR_NETWORK,w,B),{cause:M.cause||M}):tt.from(M,M&&M.code,w,B)}}},_I=new Map,BN=t=>{let e=t?t.env:{};const{fetch:s,Request:r,Response:a}=e,l=[r,a,s];let c=l.length,d=c,h,m,f=_I;for(;d--;)h=l[d],m=f.get(h),m===void 0&&f.set(h,m=d?new Map:AI(e)),f=m;return m};BN();const Qf={http:KD,xhr:SI,fetch:{get:BN}};de.forEach(Qf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ew=t=>`- ${t}`,RI=t=>de.isFunction(t)||t===null||t===!1,UN={getAdapter:(t,e)=>{t=de.isArray(t)?t:[t];const{length:s}=t;let r,a;const l={};for(let c=0;c<s;c++){r=t[c];let d;if(a=r,!RI(r)&&(a=Qf[(d=String(r)).toLowerCase()],a===void 0))throw new tt(`Unknown adapter '${d}'`);if(a&&(de.isFunction(a)||(a=a.get(e))))break;l[d||"#"+c]=a}if(!a){const c=Object.entries(l).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=s?c.length>1?`since :
`+c.map(ew).join(`
`):" "+ew(c[0]):"as no adapter specified";throw new tt("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:Qf};function hf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Eo(null,t)}function tw(t){return hf(t),t.headers=Js.from(t.headers),t.data=uf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),UN.getAdapter(t.adapter||sc.adapter,t)(t).then(function(r){return hf(t),r.data=uf.call(t,t.transformResponse,r),r.headers=Js.from(r.headers),r},function(r){return ON(r)||(hf(t),r&&r.response&&(r.response.data=uf.call(t,t.transformResponse,r.response),r.response.headers=Js.from(r.response.headers))),Promise.reject(r)})}const VN="1.12.2",Uu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Uu[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const sw={};Uu.transitional=function(e,s,r){function a(l,c){return"[Axios v"+VN+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,d)=>{if(e===!1)throw new tt(a(c," has been removed"+(s?" in "+s:"")),tt.ERR_DEPRECATED);return s&&!sw[c]&&(sw[c]=!0,console.warn(a(c," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,c,d):!0}};Uu.spelling=function(e){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function MI(t,e,s){if(typeof t!="object")throw new tt("options must be an object",tt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const l=r[a],c=e[l];if(c){const d=t[l],h=d===void 0||c(d,l,t);if(h!==!0)throw new tt("option "+l+" must be "+h,tt.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new tt("Unknown option "+l,tt.ERR_BAD_OPTION)}}const $d={assertOptions:MI,validators:Uu},rr=$d.validators;let si=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Wv,response:new Wv}}async request(e,s){try{return await this._request(e,s)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=ui(this.defaults,s);const{transitional:r,paramsSerializer:a,headers:l}=s;r!==void 0&&$d.assertOptions(r,{silentJSONParsing:rr.transitional(rr.boolean),forcedJSONParsing:rr.transitional(rr.boolean),clarifyTimeoutError:rr.transitional(rr.boolean)},!1),a!=null&&(de.isFunction(a)?s.paramsSerializer={serialize:a}:$d.assertOptions(a,{encode:rr.function,serialize:rr.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),$d.assertOptions(s,{baseUrl:rr.spelling("baseURL"),withXsrfToken:rr.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let c=l&&de.merge(l.common,l[s.method]);l&&de.forEach(["delete","get","head","post","put","patch","common"],w=>{delete l[w]}),s.headers=Js.concat(c,l);const d=[];let h=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(s)===!1||(h=h&&j.synchronous,d.unshift(j.fulfilled,j.rejected))});const m=[];this.interceptors.response.forEach(function(j){m.push(j.fulfilled,j.rejected)});let f,p=0,y;if(!h){const w=[tw.bind(this),void 0];for(w.unshift(...d),w.push(...m),y=w.length,f=Promise.resolve(s);p<y;)f=f.then(w[p++],w[p++]);return f}y=d.length;let N=s;for(;p<y;){const w=d[p++],j=d[p++];try{N=w(N)}catch(S){j.call(this,S);break}}try{f=tw.call(this,N)}catch(w){return Promise.reject(w)}for(p=0,y=m.length;p<y;)f=f.then(m[p++],m[p++]);return f}getUri(e){e=ui(this.defaults,e);const s=zN(e.baseURL,e.url,e.allowAbsoluteUrls);return DN(s,e.params,e.paramsSerializer)}};de.forEach(["delete","get","head","options"],function(e){si.prototype[e]=function(s,r){return this.request(ui(r||{},{method:e,url:s,data:(r||{}).data}))}});de.forEach(["post","put","patch"],function(e){function s(r){return function(l,c,d){return this.request(ui(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}si.prototype[e]=s(),si.prototype[e+"Form"]=s(!0)});let DI=class WN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(d=>{r.subscribe(d),l=d}).then(a);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,d){r.reason||(r.reason=new Eo(l,c,d),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=r=>{e.abort(r)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new WN(function(a){e=a}),cancel:e}}};function II(t){return function(s){return t.apply(null,s)}}function LI(t){return de.isObject(t)&&t.isAxiosError===!0}const Xf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xf).forEach(([t,e])=>{Xf[e]=t});function HN(t){const e=new si(t),s=jN(si.prototype.request,e);return de.extend(s,si.prototype,e,{allOwnKeys:!0}),de.extend(s,e,null,{allOwnKeys:!0}),s.create=function(a){return HN(ui(t,a))},s}const Zt=HN(sc);Zt.Axios=si;Zt.CanceledError=Eo;Zt.CancelToken=DI;Zt.isCancel=ON;Zt.VERSION=VN;Zt.toFormData=Bu;Zt.AxiosError=tt;Zt.Cancel=Zt.CanceledError;Zt.all=function(e){return Promise.all(e)};Zt.spread=II;Zt.isAxiosError=LI;Zt.mergeConfig=ui;Zt.AxiosHeaders=Js;Zt.formToJSON=t=>LN(de.isHTMLForm(t)?new FormData(t):t);Zt.getAdapter=UN.getAdapter;Zt.HttpStatusCode=Xf;Zt.default=Zt;const{Axios:EV,AxiosError:PV,CanceledError:AV,isCancel:_V,CancelToken:RV,VERSION:MV,all:DV,Cancel:IV,isAxiosError:LV,spread:OV,toFormData:FV,AxiosHeaders:zV,HttpStatusCode:$V,formToJSON:BV,getAdapter:UV,mergeConfig:VV}=Zt,OI="http://localhost:3001",xi=Zt.create({baseURL:`${OI}/api/v1`,timeout:1e4,headers:{"Content-Type":"application/json"}});xi.interceptors.response.use(t=>t,t=>Promise.reject(t));const Po=t=>{if(t.data.success)return t.data.data;throw new Error(t.data.message||"API request failed")},xa=async(t,e)=>{try{const s=await xi.get(t,{params:e});return Po(s)}catch(s){throw console.warn(`API GET ${t} failed, using offline mode:`,s),new Error("Backend unavailable - using offline mode")}},Ms=async(t,e)=>{try{const s=await xi.post(t,e);return Po(s)}catch(s){throw console.warn(`API POST ${t} failed, using offline mode:`,s),new Error("Backend unavailable - using offline mode")}},ep=async(t,e)=>{const s=await xi.put(t,e);return Po(s)},GN=async(t,e)=>{const s=await xi.patch(t,e);return Po(s)},vg=async t=>{const e=await xi.delete(t);return Po(e)},FI=async(t,e)=>{const s=await xi.delete(t,{data:e});return Po(s)};class zI{routeHistory=[];savedRoutes=new Map;ROUTE_HISTORY_KEY="findy_route_history";SAVED_ROUTES_KEY="findy_saved_routes";MAX_HISTORY_ITEMS=50;constructor(){this.loadFromLocalStorage()}loadFromLocalStorage(){try{const e=localStorage.getItem(this.ROUTE_HISTORY_KEY);e&&(this.routeHistory=JSON.parse(e));const s=localStorage.getItem(this.SAVED_ROUTES_KEY);if(s){const r=JSON.parse(s);this.savedRoutes=new Map(Object.entries(r))}}catch(e){C.error("Failed to load routes from localStorage",e)}}saveToLocalStorage(){try{localStorage.setItem(this.ROUTE_HISTORY_KEY,JSON.stringify(this.routeHistory));const e=Object.fromEntries(this.savedRoutes.entries());localStorage.setItem(this.SAVED_ROUTES_KEY,JSON.stringify(e))}catch(e){C.error("Failed to save routes to localStorage",e)}}async calculateRouteEnhanced(e,s,r="driving-car",a){try{let l;return a?.includeAlternatives?l=await tu.getEnhancedAlternativeRoutes(e,s,r):l=[await tu.getRoute({profile:r,coordinates:[e,s],avoidTolls:a?.avoidTolls,avoidHighways:a?.avoidHighways,instructions:!0})],this.addToHistory(e,s,l[0]),l}catch(l){throw C.error("Failed to calculate enhanced route",l),l}}addToHistory(e,s,r){const a={origin:e,destination:s,timestamp:Date.now(),route:r};this.routeHistory.unshift(a),this.routeHistory.length>this.MAX_HISTORY_ITEMS&&(this.routeHistory=this.routeHistory.slice(0,this.MAX_HISTORY_ITEMS)),this.saveToLocalStorage()}getRouteHistory(){return[...this.routeHistory]}clearRouteHistory(){this.routeHistory=[],this.saveToLocalStorage()}saveRouteLocally(e,s){const r=`route_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={id:r,name:e,route:s,timestamp:Date.now()};return this.savedRoutes.set(r,a),this.saveToLocalStorage(),r}getSavedRoutes(){return Array.from(this.savedRoutes.values()).sort((e,s)=>s.timestamp-e.timestamp)}getSavedRoute(e){return this.savedRoutes.get(e)||null}deleteSavedRoute(e){const s=this.savedRoutes.delete(e);return s&&this.saveToLocalStorage(),s}async calculateRoute(e){return Ms("/routes/calculate",e)}async optimizeRoute(e){return Ms("/routes/optimize",e)}async saveRoute(e){return Ms("/routes",e)}async getUserRoutes(e={}){const s=new URLSearchParams;return e.travelMode&&s.append("travelMode",e.travelMode),e.favorites&&s.append("favorites","true"),e.sortBy&&s.append("sortBy",e.sortBy),e.sortOrder&&s.append("sortOrder",e.sortOrder),e.page&&s.append("page",e.page.toString()),e.limit&&s.append("limit",e.limit.toString()),xa(`/routes?${s.toString()}`)}async deleteRoute(e){await vg(`/routes/${e}`)}async toggleRouteFavorite(e){return GN(`/routes/${e}/favorite`)}async getRouteAlternatives(e,s,r="DRIVING"){const a=[this.calculateRoute({origin:e,destination:s,travelMode:r}),this.calculateRoute({origin:e,destination:s,travelMode:r,avoidHighways:!0}),this.calculateRoute({origin:e,destination:s,travelMode:r,avoidTolls:!0})];try{return(await Promise.allSettled(a)).filter(c=>c.status==="fulfilled").map(c=>c.value.route).slice(0,3)}catch(l){return C.error("Error getting route alternatives",l),[(await this.calculateRoute({origin:e,destination:s,travelMode:r})).route]}}async getTravelTime(e,s,r="DRIVING"){const a=await this.calculateRoute({origin:e,destination:s,travelMode:r});return{duration:a.route.duration.value,distance:a.route.distance.value}}formatRoute(e){if("name"in e){const s=e.waypoints?JSON.parse(e.waypoints):[];return{id:e.id,name:e.name,from:{name:this.extractLocationName(e.originAddress),address:e.originAddress},to:{name:this.extractLocationName(e.destinationAddress),address:e.destinationAddress},distance:this.formatDistance(e.distance),duration:this.formatDuration(e.duration),mode:e.travelMode.toLowerCase(),steps:s.map(r=>r.address)}}else return{from:{name:this.extractLocationName(e.startAddress),address:e.startAddress},to:{name:this.extractLocationName(e.endAddress),address:e.endAddress},distance:e.distance.text,duration:e.duration.text,mode:"driving",steps:e.steps?.map(s=>s.instruction)||[]}}extractLocationName(e){return e.split(",")[0].trim()||e}formatDistance(e){return e<1e3?`${Math.round(e)}m`:`${(e/1e3).toFixed(1)}km`}formatDuration(e){const s=Math.round(e/60);if(s<60)return`${s} min`;const r=Math.floor(s/60),a=s%60;return a===0?`${r} hr`:`${r} hr ${a} min`}getTravelModeDisplayName(e){return{DRIVING:"Driving",WALKING:"Walking",BICYCLING:"Cycling",TRANSIT:"Public Transit",driving:"Driving",walking:"Walking",cycling:"Cycling",transit:"Public Transit"}[e]||e}getTravelModeIcon(e){return{DRIVING:"",WALKING:"",BICYCLING:"",TRANSIT:"",driving:"",walking:"",cycling:"",transit:""}[e]||""}async shareRoute(e,s){try{const r=this.getSavedRoute(e);if(!r)throw new Error("Route not found");const a=`share_${Date.now()}_${Math.random().toString(36).substr(2,12)}`,l=s?.expirationDays?new Date(Date.now()+s.expirationDays*24*60*60*1e3):null,c={id:a,routeId:r.id,route:{...r.route,name:r.name},sharedAt:Date.now(),expiresAt:l?.getTime()||null,includePersonalNotes:s?.includePersonalNotes||!1};localStorage.setItem(`shared_route_${a}`,JSON.stringify(c));const d=`${window.location.origin}/shared-route/${a}`;return C.info("Route shared",{routeId:e,shareId:a,expiresAt:l}),{shareId:a,shareLink:d,expiresAt:l}}catch(r){throw C.error("Failed to share route",r),r}}async getSharedRoute(e){try{const s=localStorage.getItem(`shared_route_${e}`);if(!s)return null;const r=JSON.parse(s),a=r.expiresAt&&Date.now()>r.expiresAt;return a?(localStorage.removeItem(`shared_route_${e}`),null):{route:r.route,name:r.route.name||"Shared Route",sharedAt:r.sharedAt,expiresAt:r.expiresAt,isExpired:a}}catch(s){return C.error("Failed to get shared route",s),null}}generateRouteLink(e,s,r,a){const l=new URLSearchParams;if(l.set("from",`${e.lat},${e.lng}`),l.set("to",`${s.lat},${s.lng}`),r&&l.set("mode",r),a&&a.length>0){const c=a.map(d=>`${d.lat},${d.lng}`).join("|");l.set("waypoints",c)}return`${window.location.origin}/navigation?${l.toString()}`}parseRouteFromUrl(e){try{const s=e.get("from"),r=e.get("to"),a=e.get("mode"),l=e.get("waypoints");if(!s||!r)return{origin:null,destination:null};const[c,d]=s.split(",").map(Number),[h,m]=r.split(",").map(Number),f={lat:c,lng:d},p={lat:h,lng:m};let y=[];return l&&(y=l.split("|").map(N=>{const[w,j]=N.split(",").map(Number);return{lat:w,lng:j}})),{origin:f,destination:p,profile:a||void 0,waypoints:y.length>0?y:void 0}}catch(s){return C.error("Failed to parse route from URL",s),{origin:null,destination:null}}}validateCoordinates(e,s){return e>=-90&&e<=90&&s>=-180&&s<=180}calculateBounds(e){if(e.length===0)return{northeast:{lat:0,lng:0},southwest:{lat:0,lng:0}};let s=e[0].lat,r=e[0].lat,a=e[0].lng,l=e[0].lng;return e.forEach(c=>{s=Math.max(s,c.lat),r=Math.min(r,c.lat),a=Math.max(a,c.lng),l=Math.min(l,c.lng)}),{northeast:{lat:s,lng:a},southwest:{lat:r,lng:l}}}}const nw=new zI;class $I{static async getDirections(e,s,r="driving-car"){try{const l={"driving-car":"driving","foot-walking":"walking","cycling-regular":"cycling","driving-hgv":"driving"}[r];C.info("Google Directions request:",{start:e,end:s,profile:r,travelMode:l});const c=await Kt.getDirections({origin:{lat:e.lat,lng:e.lng},destination:{lat:s.lat,lng:s.lng},travelMode:Kt.convertToGoogleTravelMode(l)});if(!c||!c.routes[0])throw new Error("No route found");const d=c.routes[0],h=d.legs[0],m=[];d.overview_path.forEach(y=>{m.push([y.lng(),y.lat()])});const f=h.steps.map(y=>({distance:y.distance?.value||0,duration:y.duration?.value||0,instruction:y.instructions||"",name:y.instructions||"",way_points:[y.start_location.lng(),y.start_location.lat()]})),p={summary:{distance:h.distance?.value||0,duration:h.duration?.value||0},geometry:{coordinates:m,type:"LineString"},segments:[{distance:h.distance?.value||0,duration:h.duration?.value||0,steps:f}],bbox:[Math.min(...m.map(y=>y[0])),Math.min(...m.map(y=>y[1])),Math.max(...m.map(y=>y[0])),Math.max(...m.map(y=>y[1]))]};return C.info("Google directions completed",{distance:h.distance?.text,duration:h.duration?.text}),p}catch(a){throw C.error("Google directions failed:",a),a}}}class BI{static async searchPOIs(e,s,r,a=20){try{C.info("Google Places POI search:",{location:e,radius:s,category:r,limit:a});const c=(await Kt.searchNearbyPlaces({location:{lat:e.lat,lng:e.lng},radius:s,type:r||"establishment"})).slice(0,a).map((d,h)=>({properties:{osm_id:d.place_id||`google_poi_${h}`,osm_type:"node",category_ids:d.types||["establishment"],osm_tags:{name:d.name,amenity:r,rating:d.rating?.toString(),price_level:d.price_level?.toString(),business_status:d.business_status}},geometry:{coordinates:[d.geometry?.location?.lng()||e.lng,d.geometry?.location?.lat()||e.lat],type:"Point"}}));return C.info("Google POI search completed",{resultCount:c.length}),c}catch(l){throw C.error("Google POI search failed:",l),l}}}const mf=$I,UI=BI,qN=t=>{C.info("ORS API key setting ignored - now using Google Maps APIs")};function VI({from:t,to:e,transportMode:s,onStartNavigation:r,onBack:a,onOpenMultiStop:l}){const[c,d]=x.useState(0),[h,m]=x.useState("routes"),[f,p]=x.useState([]),[y,N]=x.useState("now"),[w,j]=x.useState(""),[S,T]=x.useState(""),[R,A]=x.useState([]),[k,P]=x.useState(!1);x.useEffect(()=>{qN()},[]),x.useEffect(()=>{(async()=>{if(!(!t||!e)){P(!0);try{const V={driving:"driving-car",walking:"foot-walking",cycling:"cycling-regular",transit:"driving-car"}[s]||"driving-car",re=[mf.getDirections({lat:t.lat,lng:t.lng},{lat:e.lat,lng:e.lng},V),mf.getDirections({lat:t.lat,lng:t.lng},{lat:e.lat,lng:e.lng},V,{avoidHighways:!0}),mf.getDirections({lat:t.lat,lng:t.lng},{lat:e.lat,lng:e.lng},V,{avoidTolls:!0})],M=await Promise.allSettled(re),D=[];M.forEach((E,Y)=>{if(E.status==="fulfilled"&&E.value.features.length>0){const Q=E.value.features[0],I=Q.properties.summary,te=Q.properties.segments,se=[];te.forEach(ve=>{ve.steps.forEach(Pe=>{Pe.instruction&&Pe.instruction.trim()&&se.push(Pe.instruction)})});const fe=Y===0?"Fastest":Y===1?"Avoid Highways":"Avoid Tolls";D.push({id:`ors_route_${Y}_${Date.now()}`,from:t,to:e,stops:f,distance:`${(I.distance/1e3).toFixed(1)} km`,duration:`${Math.round(I.duration/60)} min`,mode:s,type:fe,traffic:"Live traffic data",tolls:Y===2?!1:Math.random()>.7,co2:`${Math.round(I.distance*.12/1e3)} kg`,departureTime:y==="now"?"Leave now":w,arrivalTime:"",steps:se,geometry:Array.isArray(Q.geometry?.coordinates)?Q.geometry.coordinates:void 0})}}),D.length===0&&D.push({id:`fallback_${Date.now()}`,from:t,to:e,stops:f,distance:"0.0 km",duration:"0 min",mode:s,type:"No route found",traffic:"Unable to calculate",tolls:!1,co2:"",departureTime:y==="now"?"Leave now":w,arrivalTime:"",steps:["Unable to calculate route. Please check your API configuration."]}),A(D),d(0)}catch{A([])}finally{P(!1)}}})()},[t?.id,e?.id,s,f.length,y,w]);const F=()=>{switch(s){case"driving":return"#3B82F6";case"walking":return"#10B981";case"transit":return"#F59E0B";case"cycling":return"#8B5CF6";default:return"#5B4FE5"}},W=()=>{const K={id:Date.now().toString(),location:{id:"temp",name:"Add location",address:"Tap to search",lat:0,lng:0}};p([...f,K])},z=K=>{p(f.filter(B=>B.id!==K))},oe=async()=>{if(!(!S.trim()||!t||!e||!R[c]))try{await nw.saveRoute({name:S.trim(),origin:{lat:t.lat,lng:t.lng,address:t.address},destination:{lat:e.lat,lng:e.lng,address:e.address},waypoints:f.map(K=>({lat:K.location.lat,lng:K.location.lng,address:K.location.address})),travelMode:s.toUpperCase(),distance:Number((R[c].distance||"0").toString().replace(/[^0-9.]/g,""))*1e3||0,duration:Number((R[c].duration||"0").toString().replace(/[^0-9.]/g,""))*60||0,isFavorite:!1}),ue.success("Route saved successfully"),C.success("Route saved",{routeName:S.trim(),from:t.name,to:e.name}),T("")}catch(K){ue.error("Failed to save route. Please try again."),C.error("Failed to save route",{error:K,routeName:S.trim()})}},q=()=>{navigator.share&&R[c]?navigator.share({title:"Route from PathFinder",text:`Route from ${R[c].from.name} to ${R[c].to.name}`,url:window.location.href}).catch(()=>{navigator.clipboard.writeText(window.location.href),ue.success("Route link copied to clipboard")}):(navigator.clipboard.writeText(window.location.href),ue.success("Route link copied to clipboard")),C.info("Route shared",{route:R[c]?.id})},J=async()=>{if(!(!t||!e)){P(!0);try{const B=(await nw.optimizeRoute({origin:{lat:t.lat,lng:t.lng,address:t.address},destination:{lat:e.lat,lng:e.lng,address:e.address},waypoints:f.map(re=>({lat:re.location.lat,lng:re.location.lng,address:re.location.address}))})).route,V={id:Date.now().toString(),from:t,to:e,stops:f,distance:B.distance.text,duration:B.duration.text,mode:s,type:"Optimized",traffic:"Optimized ordering",tolls:!1,co2:"",departureTime:y==="now"?"Leave now":w,arrivalTime:"",steps:B.steps?.map(re=>re.instruction)||[]};A([V]),d(0),m("routes")}catch(K){ue.error("Failed to optimize route. Please try again."),C.error("Route optimization failed",{error:K})}finally{P(!1)}}};return!t||!e?n.jsx("div",{className:"h-full bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"Select a destination to see routes"})]})}):n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:a,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Route Planning"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[t.name,"  ",e.name]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:q,children:n.jsx(gu,{className:"w-4 h-4"})}),n.jsx(L,{variant:"ghost",size:"icon",onClick:oe,children:n.jsx(Ds,{className:"w-4 h-4"})})]})]})}),n.jsxs(An,{value:h,onValueChange:m,className:"flex-1 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-2",children:n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"routes",children:"Routes"}),n.jsxs(st,{value:"stops",children:["Stops (",f.length,")"]}),n.jsx(st,{value:"timing",children:"Timing"})]})}),n.jsxs("div",{className:"flex-1 overflow-hidden min-h-0",children:[n.jsx(nt,{value:"routes",className:"h-full overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsx("div",{className:"space-y-3",children:R.map((K,B)=>n.jsxs(ne,{className:`p-4 cursor-pointer transition-all ${c===B?"ring-2 border-transparent":"hover:shadow-md"}`,style:c===B?{backgroundColor:`${F()}08`}:void 0,onClick:()=>d(B),children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:K.type}),K.type==="Fastest"&&n.jsx(Ie,{className:"bg-green-100 text-green-700",children:"Recommended"}),f.length>0&&n.jsxs(Ie,{variant:"outline",children:["+",f.length," stop",f.length>1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xs,{className:"w-4 h-4"}),n.jsx("span",{children:K.duration})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(mr,{className:"w-4 h-4"}),n.jsx("span",{children:K.distance})]}),K.departureTime&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ff,{className:"w-4 h-4"}),n.jsx("span",{children:K.departureTime})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-medium text-gray-900",children:K.duration}),n.jsx("div",{className:"text-sm text-gray-500",children:K.arrivalTime})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[n.jsx("span",{children:K.traffic}),!K.tolls&&n.jsx("span",{children:"No tolls"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(oi,{className:"w-3 h-3"}),n.jsxs("span",{children:[K.co2," CO"]})]})]}),n.jsxs("div",{className:"space-y-1",children:[K.steps.slice(0,3).map((V,re)=>n.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:F()}}),n.jsx("span",{children:V})]},re)),K.steps.length>3&&n.jsxs("div",{className:"text-xs text-gray-400 ml-4",children:["+",K.steps.length-3," more steps"]})]})]},K.id))})}),n.jsx(nt,{value:"stops",className:"h-full overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Multi-Stop Route"}),n.jsxs("div",{className:"flex items-center gap-2",children:[l&&n.jsx(L,{size:"sm",variant:"outline",onClick:l,children:"Advanced Planning"}),n.jsx("span",{className:"text-sm text-gray-500",children:"Up to 10 stops"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ne,{className:"p-3 bg-green-50 border-green-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-medium",children:"A"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:t.name}),n.jsx("p",{className:"text-sm text-gray-600",children:t.address})]})]})}),f.map((K,B)=>n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(rP,{className:"w-4 h-4 text-gray-400"}),n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-medium",children:B+1})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx(Ft,{placeholder:"Search for a location",value:K.location.name==="Add location"?"":K.location.name,className:"border-none p-0 h-auto font-medium"}),n.jsx(Ft,{placeholder:"Optional: time to spend here",value:K.duration||"",className:"border-none p-0 h-auto text-sm text-gray-600 mt-1"})]}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>z(K.id),children:n.jsx(ys,{className:"w-4 h-4"})})]})},K.id)),f.length<10&&n.jsx(ne,{className:"p-3 border-dashed border-2 border-gray-300 cursor-pointer hover:border-gray-400 transition-colors",onClick:W,children:n.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[n.jsx(ja,{className:"w-4 h-4"}),n.jsx("span",{children:"Add stop"})]})}),n.jsx(ne,{className:"p-3 bg-red-50 border-red-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-medium",children:"B"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:e.name}),n.jsx("p",{className:"text-sm text-gray-600",children:e.address})]})]})})]}),n.jsx(ne,{className:"p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(mr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900",children:"Route Optimization"}),n.jsx("p",{className:"text-sm text-blue-800",children:"We'll find the best order for your stops"})]}),n.jsx(L,{variant:"outline",size:"sm",className:"ml-auto",onClick:J,disabled:k,children:"Optimize"})]})})]})}),n.jsx(nt,{value:"timing",className:"h-full overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Departure Time"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ne,{className:`p-3 cursor-pointer ${y==="now"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>N("now"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(rt,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Leave now"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Best route for current conditions"})]})]})}),n.jsx(ne,{className:`p-3 cursor-pointer ${y==="depart"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>N("depart"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xs,{className:"w-5 h-5 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Depart at"}),n.jsx(Ft,{type:"time",value:w,onChange:K=>j(K.target.value),className:"mt-2",placeholder:"Select time"})]})]})}),n.jsx(ne,{className:`p-3 cursor-pointer ${y==="arrive"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>N("arrive"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(pt,{className:"w-5 h-5 text-purple-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Arrive by"}),n.jsx(Ft,{type:"time",value:w,onChange:K=>j(K.target.value),className:"mt-2",placeholder:"Select time"})]})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Smart Suggestions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ne,{className:"p-3 bg-yellow-50 border-yellow-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Et,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-yellow-900",children:"Peak Traffic Alert"}),n.jsx("p",{className:"text-sm text-yellow-800",children:"Leave 10 minutes earlier to avoid rush hour"})]})]})}),n.jsx(ne,{className:"p-3 bg-green-50 border-green-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ff,{className:"w-5 h-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-900",children:"Optimal Time"}),n.jsx("p",{className:"text-sm text-green-800",children:"Best departure time: 2:45 PM (saves 8 minutes)"})]})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Save Route"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ft,{value:S,onChange:K=>T(K.target.value),placeholder:"Route name (e.g., Morning commute)"}),n.jsxs(L,{variant:"outline",className:"w-full",onClick:oe,disabled:!S.trim(),children:[n.jsx(n1,{className:"w-4 h-4 mr-2"}),"Save for Later"]})]})]})]})})]})]}),n.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-200",children:n.jsxs(L,{className:"w-full",style:{backgroundColor:F()},onClick:()=>r(R[c]),children:[n.jsx(rt,{className:"w-4 h-4 mr-2"}),"Start Navigation"]})})]})}var WI="Separator",rw="horizontal",HI=["horizontal","vertical"],KN=x.forwardRef((t,e)=>{const{decorative:s,orientation:r=rw,...a}=t,l=GI(r)?r:rw,d=s?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return n.jsx(Ye.div,{"data-orientation":l,...d,...a,ref:e})});KN.displayName=WI;function GI(t){return HI.includes(t)}var qI=KN;function KI({className:t,orientation:e="horizontal",decorative:s=!0,...r}){return n.jsx(qI,{"data-slot":"separator-root",decorative:s,orientation:e,className:Xe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}function nu(t,[e,s]){return Math.min(s,Math.max(e,t))}var ZN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZI="VisuallyHidden",YI=x.forwardRef((t,e)=>n.jsx(Ye.span,{...t,ref:e,style:{...ZN,...t.style}}));YI.displayName=ZI;var JI=[" ","Enter","ArrowUp","ArrowDown"],QI=[" ","Enter"],hi="Select",[Vu,Wu,XI]=tg(hi),[Ao]=Zn(hi,[XI,ku]),Hu=ku(),[eL,Pa]=Ao(hi),[tL,sL]=Ao(hi),YN=t=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:a,onOpenChange:l,value:c,defaultValue:d,onValueChange:h,dir:m,name:f,autoComplete:p,disabled:y,required:N,form:w}=t,j=Hu(e),[S,T]=x.useState(null),[R,A]=x.useState(null),[k,P]=x.useState(!1),F=Au(m),[W,z]=ka({prop:r,defaultProp:a??!1,onChange:l,caller:hi}),[oe,q]=ka({prop:c,defaultProp:d,onChange:h,caller:hi}),J=x.useRef(null),K=S?w||!!S.closest("form"):!0,[B,V]=x.useState(new Set),re=Array.from(B).map(M=>M.props.value).join(";");return n.jsx(q1,{...j,children:n.jsxs(eL,{required:N,scope:e,trigger:S,onTriggerChange:T,valueNode:R,onValueNodeChange:A,valueNodeHasChildren:k,onValueNodeHasChildrenChange:P,contentId:Dr(),value:oe,onValueChange:q,open:W,onOpenChange:z,dir:F,triggerPointerDownPosRef:J,disabled:y,children:[n.jsx(Vu.Provider,{scope:e,children:n.jsx(tL,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(M=>{V(D=>new Set(D).add(M))},[]),onNativeOptionRemove:x.useCallback(M=>{V(D=>{const E=new Set(D);return E.delete(M),E})},[]),children:s})}),K?n.jsxs(yS,{"aria-hidden":!0,required:N,tabIndex:-1,name:f,autoComplete:p,value:oe,onChange:M=>q(M.target.value),disabled:y,form:w,children:[oe===void 0?n.jsx("option",{value:""}):null,Array.from(B)]},re):null]})})};YN.displayName=hi;var JN="SelectTrigger",QN=x.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:r=!1,...a}=t,l=Hu(s),c=Pa(JN,s),d=c.disabled||r,h=ft(e,c.onTriggerChange),m=Wu(s),f=x.useRef("touch"),[p,y,N]=wS(j=>{const S=m().filter(A=>!A.disabled),T=S.find(A=>A.value===c.value),R=bS(S,j,T);R!==void 0&&c.onValueChange(R.value)}),w=j=>{d||(c.onOpenChange(!0),N()),j&&(c.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return n.jsx(Qp,{asChild:!0,...l,children:n.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":vS(c.value)?"":void 0,...a,ref:h,onClick:Qe(a.onClick,j=>{j.currentTarget.focus(),f.current!=="mouse"&&w(j)}),onPointerDown:Qe(a.onPointerDown,j=>{f.current=j.pointerType;const S=j.target;S.hasPointerCapture(j.pointerId)&&S.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(w(j),j.preventDefault())}),onKeyDown:Qe(a.onKeyDown,j=>{const S=p.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&y(j.key),!(S&&j.key===" ")&&JI.includes(j.key)&&(w(),j.preventDefault())})})})});QN.displayName=JN;var XN="SelectValue",eS=x.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:a,children:l,placeholder:c="",...d}=t,h=Pa(XN,s),{onValueNodeHasChildrenChange:m}=h,f=l!==void 0,p=ft(e,h.onValueNodeChange);return as(()=>{m(f)},[m,f]),n.jsx(Ye.span,{...d,ref:p,style:{pointerEvents:"none"},children:vS(h.value)?n.jsx(n.Fragment,{children:c}):l})});eS.displayName=XN;var nL="SelectIcon",tS=x.forwardRef((t,e)=>{const{__scopeSelect:s,children:r,...a}=t;return n.jsx(Ye.span,{"aria-hidden":!0,...a,ref:e,children:r||""})});tS.displayName=nL;var rL="SelectPortal",sS=t=>n.jsx(Cu,{asChild:!0,...t});sS.displayName=rL;var mi="SelectContent",nS=x.forwardRef((t,e)=>{const s=Pa(mi,t.__scopeSelect),[r,a]=x.useState();if(as(()=>{a(new DocumentFragment)},[]),!s.open){const l=r;return l?Zl.createPortal(n.jsx(rS,{scope:t.__scopeSelect,children:n.jsx(Vu.Slot,{scope:t.__scopeSelect,children:n.jsx("div",{children:t.children})})}),l):null}return n.jsx(aS,{...t,ref:e})});nS.displayName=mi;var Vn=10,[rS,Aa]=Ao(mi),aL="SelectContentImpl",iL=li("SelectContent.RemoveScroll"),aS=x.forwardRef((t,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:l,onPointerDownOutside:c,side:d,sideOffset:h,align:m,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:N,sticky:w,hideWhenDetached:j,avoidCollisions:S,...T}=t,R=Pa(mi,s),[A,k]=x.useState(null),[P,F]=x.useState(null),W=ft(e,$=>k($)),[z,oe]=x.useState(null),[q,J]=x.useState(null),K=Wu(s),[B,V]=x.useState(!1),re=x.useRef(!1);x.useEffect(()=>{if(A)return Xp(A)},[A]),Up();const M=x.useCallback($=>{const[G,...X]=K().map(je=>je.ref.current),[me]=X.slice(-1),ye=document.activeElement;for(const je of $)if(je===ye||(je?.scrollIntoView({block:"nearest"}),je===G&&P&&(P.scrollTop=0),je===me&&P&&(P.scrollTop=P.scrollHeight),je?.focus(),document.activeElement!==ye))return},[K,P]),D=x.useCallback(()=>M([z,A]),[M,z,A]);x.useEffect(()=>{B&&D()},[B,D]);const{onOpenChange:E,triggerPointerDownPosRef:Y}=R;x.useEffect(()=>{if(A){let $={x:0,y:0};const G=me=>{$={x:Math.abs(Math.round(me.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(me.pageY)-(Y.current?.y??0))}},X=me=>{$.x<=10&&$.y<=10?me.preventDefault():A.contains(me.target)||E(!1),document.removeEventListener("pointermove",G),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",G),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",G),document.removeEventListener("pointerup",X,{capture:!0})}}},[A,E,Y]),x.useEffect(()=>{const $=()=>E(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[E]);const[Q,I]=wS($=>{const G=K().filter(ye=>!ye.disabled),X=G.find(ye=>ye.ref.current===document.activeElement),me=bS(G,$,X);me&&setTimeout(()=>me.ref.current.focus())}),te=x.useCallback(($,G,X)=>{const me=!re.current&&!X;(R.value!==void 0&&R.value===G||me)&&(oe($),me&&(re.current=!0))},[R.value]),se=x.useCallback(()=>A?.focus(),[A]),fe=x.useCallback(($,G,X)=>{const me=!re.current&&!X;(R.value!==void 0&&R.value===G||me)&&J($)},[R.value]),ve=r==="popper"?tp:iS,Pe=ve===tp?{side:d,sideOffset:h,align:m,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:N,sticky:w,hideWhenDetached:j,avoidCollisions:S}:{};return n.jsx(rS,{scope:s,content:A,viewport:P,onViewportChange:F,itemRefCallback:te,selectedItem:z,onItemLeave:se,itemTextRefCallback:fe,focusSelectedItem:D,selectedItemText:q,position:r,isPositioned:B,searchRef:Q,children:n.jsx(Eu,{as:iL,allowPinchZoom:!0,children:n.jsx(wu,{asChild:!0,trapped:R.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:Qe(a,$=>{R.trigger?.focus({preventScroll:!0}),$.preventDefault()}),children:n.jsx(vu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:n.jsx(ve,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:$=>$.preventDefault(),...T,...Pe,onPlaced:()=>V(!0),ref:W,style:{display:"flex",flexDirection:"column",outline:"none",...T.style},onKeyDown:Qe(T.onKeyDown,$=>{const G=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!G&&$.key.length===1&&I($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let me=K().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes($.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const ye=$.target,je=me.indexOf(ye);me=me.slice(je+1)}setTimeout(()=>M(me)),$.preventDefault()}})})})})})})});aS.displayName=aL;var oL="SelectItemAlignedPosition",iS=x.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:r,...a}=t,l=Pa(mi,s),c=Aa(mi,s),[d,h]=x.useState(null),[m,f]=x.useState(null),p=ft(e,W=>f(W)),y=Wu(s),N=x.useRef(!1),w=x.useRef(!0),{viewport:j,selectedItem:S,selectedItemText:T,focusSelectedItem:R}=c,A=x.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&m&&j&&S&&T){const W=l.trigger.getBoundingClientRect(),z=m.getBoundingClientRect(),oe=l.valueNode.getBoundingClientRect(),q=T.getBoundingClientRect();if(l.dir!=="rtl"){const ye=q.left-z.left,je=oe.left-ye,Ae=W.left-je,U=W.width+Ae,Te=Math.max(U,z.width),Se=window.innerWidth-Vn,We=nu(je,[Vn,Math.max(Vn,Se-Te)]);d.style.minWidth=U+"px",d.style.left=We+"px"}else{const ye=z.right-q.right,je=window.innerWidth-oe.right-ye,Ae=window.innerWidth-W.right-je,U=W.width+Ae,Te=Math.max(U,z.width),Se=window.innerWidth-Vn,We=nu(je,[Vn,Math.max(Vn,Se-Te)]);d.style.minWidth=U+"px",d.style.right=We+"px"}const J=y(),K=window.innerHeight-Vn*2,B=j.scrollHeight,V=window.getComputedStyle(m),re=parseInt(V.borderTopWidth,10),M=parseInt(V.paddingTop,10),D=parseInt(V.borderBottomWidth,10),E=parseInt(V.paddingBottom,10),Y=re+M+B+E+D,Q=Math.min(S.offsetHeight*5,Y),I=window.getComputedStyle(j),te=parseInt(I.paddingTop,10),se=parseInt(I.paddingBottom,10),fe=W.top+W.height/2-Vn,ve=K-fe,Pe=S.offsetHeight/2,$=S.offsetTop+Pe,G=re+M+$,X=Y-G;if(G<=fe){const ye=J.length>0&&S===J[J.length-1].ref.current;d.style.bottom="0px";const je=m.clientHeight-j.offsetTop-j.offsetHeight,Ae=Math.max(ve,Pe+(ye?se:0)+je+D),U=G+Ae;d.style.height=U+"px"}else{const ye=J.length>0&&S===J[0].ref.current;d.style.top="0px";const Ae=Math.max(fe,re+j.offsetTop+(ye?te:0)+Pe)+X;d.style.height=Ae+"px",j.scrollTop=G-fe+j.offsetTop}d.style.margin=`${Vn}px 0`,d.style.minHeight=Q+"px",d.style.maxHeight=K+"px",r?.(),requestAnimationFrame(()=>N.current=!0)}},[y,l.trigger,l.valueNode,d,m,j,S,T,l.dir,r]);as(()=>A(),[A]);const[k,P]=x.useState();as(()=>{m&&P(window.getComputedStyle(m).zIndex)},[m]);const F=x.useCallback(W=>{W&&w.current===!0&&(A(),R?.(),w.current=!1)},[A,R]);return n.jsx(cL,{scope:s,contentWrapper:d,shouldExpandOnScrollRef:N,onScrollButtonChange:F,children:n.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:n.jsx(Ye.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});iS.displayName=oL;var lL="SelectPopperPosition",tp=x.forwardRef((t,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:a=Vn,...l}=t,c=Hu(s);return n.jsx(K1,{...c,...l,ref:e,align:r,collisionPadding:a,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});tp.displayName=lL;var[cL,wg]=Ao(mi,{}),sp="SelectViewport",oS=x.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:r,...a}=t,l=Aa(sp,s),c=wg(sp,s),d=ft(e,l.onViewportChange),h=x.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx(Vu.Slot,{scope:s,children:n.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Qe(a.onScroll,m=>{const f=m.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=c;if(y?.current&&p){const N=Math.abs(h.current-f.scrollTop);if(N>0){const w=window.innerHeight-Vn*2,j=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),T=Math.max(j,S);if(T<w){const R=T+N,A=Math.min(w,R),k=R-A;p.style.height=A+"px",p.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,p.style.justifyContent="flex-end")}}}h.current=f.scrollTop})})})]})});oS.displayName=sp;var lS="SelectGroup",[dL,uL]=Ao(lS),hL=x.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,a=Dr();return n.jsx(dL,{scope:s,id:a,children:n.jsx(Ye.div,{role:"group","aria-labelledby":a,...r,ref:e})})});hL.displayName=lS;var cS="SelectLabel",mL=x.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,a=uL(cS,s);return n.jsx(Ye.div,{id:a.id,...r,ref:e})});mL.displayName=cS;var ru="SelectItem",[fL,dS]=Ao(ru),uS=x.forwardRef((t,e)=>{const{__scopeSelect:s,value:r,disabled:a=!1,textValue:l,...c}=t,d=Pa(ru,s),h=Aa(ru,s),m=d.value===r,[f,p]=x.useState(l??""),[y,N]=x.useState(!1),w=ft(e,R=>h.itemRefCallback?.(R,r,a)),j=Dr(),S=x.useRef("touch"),T=()=>{a||(d.onValueChange(r),d.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(fL,{scope:s,value:r,disabled:a,textId:j,isSelected:m,onItemTextChange:x.useCallback(R=>{p(A=>A||(R?.textContent??"").trim())},[]),children:n.jsx(Vu.ItemSlot,{scope:s,value:r,disabled:a,textValue:f,children:n.jsx(Ye.div,{role:"option","aria-labelledby":j,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:w,onFocus:Qe(c.onFocus,()=>N(!0)),onBlur:Qe(c.onBlur,()=>N(!1)),onClick:Qe(c.onClick,()=>{S.current!=="mouse"&&T()}),onPointerUp:Qe(c.onPointerUp,()=>{S.current==="mouse"&&T()}),onPointerDown:Qe(c.onPointerDown,R=>{S.current=R.pointerType}),onPointerMove:Qe(c.onPointerMove,R=>{S.current=R.pointerType,a?h.onItemLeave?.():S.current==="mouse"&&R.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Qe(c.onPointerLeave,R=>{R.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Qe(c.onKeyDown,R=>{h.searchRef?.current!==""&&R.key===" "||(QI.includes(R.key)&&T(),R.key===" "&&R.preventDefault())})})})})});uS.displayName=ru;var kl="SelectItemText",hS=x.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:a,...l}=t,c=Pa(kl,s),d=Aa(kl,s),h=dS(kl,s),m=sL(kl,s),[f,p]=x.useState(null),y=ft(e,T=>p(T),h.onItemTextChange,T=>d.itemTextRefCallback?.(T,h.value,h.disabled)),N=f?.textContent,w=x.useMemo(()=>n.jsx("option",{value:h.value,disabled:h.disabled,children:N},h.value),[h.disabled,h.value,N]),{onNativeOptionAdd:j,onNativeOptionRemove:S}=m;return as(()=>(j(w),()=>S(w)),[j,S,w]),n.jsxs(n.Fragment,{children:[n.jsx(Ye.span,{id:h.textId,...l,ref:y}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Zl.createPortal(l.children,c.valueNode):null]})});hS.displayName=kl;var mS="SelectItemIndicator",fS=x.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return dS(mS,s).isSelected?n.jsx(Ye.span,{"aria-hidden":!0,...r,ref:e}):null});fS.displayName=mS;var np="SelectScrollUpButton",pS=x.forwardRef((t,e)=>{const s=Aa(np,t.__scopeSelect),r=wg(np,t.__scopeSelect),[a,l]=x.useState(!1),c=ft(e,r.onScrollButtonChange);return as(()=>{if(s.viewport&&s.isPositioned){let d=function(){const m=h.scrollTop>0;l(m)};const h=s.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[s.viewport,s.isPositioned]),a?n.jsx(xS,{...t,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=s;d&&h&&(d.scrollTop=d.scrollTop-h.offsetHeight)}}):null});pS.displayName=np;var rp="SelectScrollDownButton",gS=x.forwardRef((t,e)=>{const s=Aa(rp,t.__scopeSelect),r=wg(rp,t.__scopeSelect),[a,l]=x.useState(!1),c=ft(e,r.onScrollButtonChange);return as(()=>{if(s.viewport&&s.isPositioned){let d=function(){const m=h.scrollHeight-h.clientHeight,f=Math.ceil(h.scrollTop)<m;l(f)};const h=s.viewport;return d(),h.addEventListener("scroll",d),()=>h.removeEventListener("scroll",d)}},[s.viewport,s.isPositioned]),a?n.jsx(xS,{...t,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:h}=s;d&&h&&(d.scrollTop=d.scrollTop+h.offsetHeight)}}):null});gS.displayName=rp;var xS=x.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:r,...a}=t,l=Aa("SelectScrollButton",s),c=x.useRef(null),d=Wu(s),h=x.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return x.useEffect(()=>()=>h(),[h]),as(()=>{d().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),n.jsx(Ye.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Qe(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Qe(a.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Qe(a.onPointerLeave,()=>{h()})})}),pL="SelectSeparator",gL=x.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return n.jsx(Ye.div,{"aria-hidden":!0,...r,ref:e})});gL.displayName=pL;var ap="SelectArrow",xL=x.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,a=Hu(s),l=Pa(ap,s),c=Aa(ap,s);return l.open&&c.position==="popper"?n.jsx(Z1,{...a,...r,ref:e}):null});xL.displayName=ap;var yL="SelectBubbleInput",yS=x.forwardRef(({__scopeSelect:t,value:e,...s},r)=>{const a=x.useRef(null),l=ft(r,a),c=mg(e);return x.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==e&&f){const p=new Event("change",{bubbles:!0});f.call(d,e),d.dispatchEvent(p)}},[c,e]),n.jsx(Ye.select,{...s,style:{...ZN,...s.style},ref:l,defaultValue:e})});yS.displayName=yL;function vS(t){return t===""||t===void 0}function wS(t){const e=Or(t),s=x.useRef(""),r=x.useRef(0),a=x.useCallback(c=>{const d=s.current+c;e(d),(function h(m){s.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>h(""),1e3))})(d)},[e]),l=x.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,l]}function bS(t,e,s){const a=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,l=s?t.indexOf(s):-1;let c=vL(t,Math.max(l,0));a.length===1&&(c=c.filter(m=>m!==s));const h=c.find(m=>m.textValue.toLowerCase().startsWith(a.toLowerCase()));return h!==s?h:void 0}function vL(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var wL=YN,bL=QN,jL=eS,NL=tS,SL=sS,kL=nS,CL=oS,TL=uS,EL=hS,PL=fS,AL=pS,_L=gS;function ya({...t}){return n.jsx(wL,{"data-slot":"select",...t})}function va({...t}){return n.jsx(jL,{"data-slot":"select-value",...t})}function wa({className:t,size:e="default",children:s,...r}){return n.jsxs(bL,{"data-slot":"select-trigger","data-size":e,className:Xe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[s,n.jsx(NL,{asChild:!0,children:n.jsx(oo,{className:"size-4 opacity-50"})})]})}function ba({className:t,children:e,position:s="popper",...r}){return n.jsx(SL,{children:n.jsxs(kL,{"data-slot":"select-content",className:Xe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[n.jsx(RL,{}),n.jsx(CL,{className:Xe("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),n.jsx(ML,{})]})})}function vt({className:t,children:e,...s}){return n.jsxs(TL,{"data-slot":"select-item",className:Xe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[n.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:n.jsx(PL,{children:n.jsx(_r,{className:"size-4"})})}),n.jsx(EL,{children:e})]})}function RL({className:t,...e}){return n.jsx(AL,{"data-slot":"select-scroll-up-button",className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(Gd,{className:"size-4"})})}function ML({className:t,...e}){return n.jsx(_L,{"data-slot":"select-scroll-down-button",className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(oo,{className:"size-4"})})}var jS=["PageUp","PageDown"],NS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],SS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_o="Slider",[ip,DL,IL]=tg(_o),[kS]=Zn(_o,[IL]),[LL,Gu]=kS(_o),CS=x.forwardRef((t,e)=>{const{name:s,min:r=0,max:a=100,step:l=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:m=[r],value:f,onValueChange:p=()=>{},onValueCommit:y=()=>{},inverted:N=!1,form:w,...j}=t,S=x.useRef(new Set),T=x.useRef(0),A=c==="horizontal"?OL:FL,[k=[],P]=ka({prop:f,defaultProp:m,onChange:J=>{[...S.current][T.current]?.focus(),p(J)}}),F=x.useRef(k);function W(J){const K=VL(k,J);q(J,K)}function z(J){q(J,T.current)}function oe(){const J=F.current[T.current];k[T.current]!==J&&y(k)}function q(J,K,{commit:B}={commit:!1}){const V=qL(l),re=KL(Math.round((J-r)/l)*l+r,V),M=nu(re,[r,a]);P((D=[])=>{const E=BL(D,M,K);if(GL(E,h*l)){T.current=E.indexOf(M);const Y=String(E)!==String(D);return Y&&B&&y(E),Y?E:D}else return D})}return n.jsx(LL,{scope:t.__scopeSlider,name:s,disabled:d,min:r,max:a,valueIndexToChangeRef:T,thumbs:S.current,values:k,orientation:c,form:w,children:n.jsx(ip.Provider,{scope:t.__scopeSlider,children:n.jsx(ip.Slot,{scope:t.__scopeSlider,children:n.jsx(A,{"aria-disabled":d,"data-disabled":d?"":void 0,...j,ref:e,onPointerDown:Qe(j.onPointerDown,()=>{d||(F.current=k)}),min:r,max:a,inverted:N,onSlideStart:d?void 0:W,onSlideMove:d?void 0:z,onSlideEnd:d?void 0:oe,onHomeKeyDown:()=>!d&&q(r,0,{commit:!0}),onEndKeyDown:()=>!d&&q(a,k.length-1,{commit:!0}),onStepKeyDown:({event:J,direction:K})=>{if(!d){const re=jS.includes(J.key)||J.shiftKey&&NS.includes(J.key)?10:1,M=T.current,D=k[M],E=l*re*K;q(D+E,M,{commit:!0})}}})})})})});CS.displayName=_o;var[TS,ES]=kS(_o,{startEdge:"left",endEdge:"right",size:"width",direction:1}),OL=x.forwardRef((t,e)=>{const{min:s,max:r,dir:a,inverted:l,onSlideStart:c,onSlideMove:d,onSlideEnd:h,onStepKeyDown:m,...f}=t,[p,y]=x.useState(null),N=ft(e,A=>y(A)),w=x.useRef(void 0),j=Au(a),S=j==="ltr",T=S&&!l||!S&&l;function R(A){const k=w.current||p.getBoundingClientRect(),P=[0,k.width],W=bg(P,T?[s,r]:[r,s]);return w.current=k,W(A-k.left)}return n.jsx(TS,{scope:t.__scopeSlider,startEdge:T?"left":"right",endEdge:T?"right":"left",direction:T?1:-1,size:"width",children:n.jsx(PS,{dir:j,"data-orientation":"horizontal",...f,ref:N,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:A=>{const k=R(A.clientX);c?.(k)},onSlideMove:A=>{const k=R(A.clientX);d?.(k)},onSlideEnd:()=>{w.current=void 0,h?.()},onStepKeyDown:A=>{const P=SS[T?"from-left":"from-right"].includes(A.key);m?.({event:A,direction:P?-1:1})}})})}),FL=x.forwardRef((t,e)=>{const{min:s,max:r,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...m}=t,f=x.useRef(null),p=ft(e,f),y=x.useRef(void 0),N=!a;function w(j){const S=y.current||f.current.getBoundingClientRect(),T=[0,S.height],A=bg(T,N?[r,s]:[s,r]);return y.current=S,A(j-S.top)}return n.jsx(TS,{scope:t.__scopeSlider,startEdge:N?"bottom":"top",endEdge:N?"top":"bottom",size:"height",direction:N?1:-1,children:n.jsx(PS,{"data-orientation":"vertical",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:j=>{const S=w(j.clientY);l?.(S)},onSlideMove:j=>{const S=w(j.clientY);c?.(S)},onSlideEnd:()=>{y.current=void 0,d?.()},onStepKeyDown:j=>{const T=SS[N?"from-bottom":"from-top"].includes(j.key);h?.({event:j,direction:T?-1:1})}})})}),PS=x.forwardRef((t,e)=>{const{__scopeSlider:s,onSlideStart:r,onSlideMove:a,onSlideEnd:l,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:h,...m}=t,f=Gu(_o,s);return n.jsx(Ye.span,{...m,ref:e,onKeyDown:Qe(t.onKeyDown,p=>{p.key==="Home"?(c(p),p.preventDefault()):p.key==="End"?(d(p),p.preventDefault()):jS.concat(NS).includes(p.key)&&(h(p),p.preventDefault())}),onPointerDown:Qe(t.onPointerDown,p=>{const y=p.target;y.setPointerCapture(p.pointerId),p.preventDefault(),f.thumbs.has(y)?y.focus():r(p)}),onPointerMove:Qe(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&a(p)}),onPointerUp:Qe(t.onPointerUp,p=>{const y=p.target;y.hasPointerCapture(p.pointerId)&&(y.releasePointerCapture(p.pointerId),l(p))})})}),AS="SliderTrack",_S=x.forwardRef((t,e)=>{const{__scopeSlider:s,...r}=t,a=Gu(AS,s);return n.jsx(Ye.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:e})});_S.displayName=AS;var op="SliderRange",RS=x.forwardRef((t,e)=>{const{__scopeSlider:s,...r}=t,a=Gu(op,s),l=ES(op,s),c=x.useRef(null),d=ft(e,c),h=a.values.length,m=a.values.map(y=>IS(y,a.min,a.max)),f=h>1?Math.min(...m):0,p=100-Math.max(...m);return n.jsx(Ye.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:d,style:{...t.style,[l.startEdge]:f+"%",[l.endEdge]:p+"%"}})});RS.displayName=op;var lp="SliderThumb",MS=x.forwardRef((t,e)=>{const s=DL(t.__scopeSlider),[r,a]=x.useState(null),l=ft(e,d=>a(d)),c=x.useMemo(()=>r?s().findIndex(d=>d.ref.current===r):-1,[s,r]);return n.jsx(zL,{...t,ref:l,index:c})}),zL=x.forwardRef((t,e)=>{const{__scopeSlider:s,index:r,name:a,...l}=t,c=Gu(lp,s),d=ES(lp,s),[h,m]=x.useState(null),f=ft(e,R=>m(R)),p=h?c.form||!!h.closest("form"):!0,y=Zp(h),N=c.values[r],w=N===void 0?0:IS(N,c.min,c.max),j=UL(r,c.values.length),S=y?.[d.size],T=S?WL(S,w,d.direction):0;return x.useEffect(()=>{if(h)return c.thumbs.add(h),()=>{c.thumbs.delete(h)}},[h,c.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${w}% + ${T}px)`},children:[n.jsx(ip.ItemSlot,{scope:t.__scopeSlider,children:n.jsx(Ye.span,{role:"slider","aria-label":t["aria-label"]||j,"aria-valuemin":c.min,"aria-valuenow":N,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:f,style:N===void 0?{display:"none"}:t.style,onFocus:Qe(t.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),p&&n.jsx(DS,{name:a??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:N},r)]})});MS.displayName=lp;var $L="RadioBubbleInput",DS=x.forwardRef(({__scopeSlider:t,value:e,...s},r)=>{const a=x.useRef(null),l=ft(a,r),c=mg(e);return x.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==e&&f){const p=new Event("input",{bubbles:!0});f.call(d,e),d.dispatchEvent(p)}},[c,e]),n.jsx(Ye.input,{style:{display:"none"},...s,ref:l,defaultValue:e})});DS.displayName=$L;function BL(t=[],e,s){const r=[...t];return r[s]=e,r.sort((a,l)=>a-l)}function IS(t,e,s){const l=100/(s-e)*(t-e);return nu(l,[0,100])}function UL(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function VL(t,e){if(t.length===1)return 0;const s=t.map(a=>Math.abs(a-e)),r=Math.min(...s);return s.indexOf(r)}function WL(t,e,s){const r=t/2,l=bg([0,50],[0,r]);return(r-l(e)*s)*s}function HL(t){return t.slice(0,-1).map((e,s)=>t[s+1]-e)}function GL(t,e){if(e>0){const s=HL(t);return Math.min(...s)>=e}return!0}function bg(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(s-t[0])}}function qL(t){return(String(t).split(".")[1]||"").length}function KL(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}var ZL=CS,YL=_S,JL=RS,QL=MS;function Yi({className:t,defaultValue:e,value:s,min:r=0,max:a=100,...l}){const c=x.useMemo(()=>Array.isArray(s)?s:Array.isArray(e)?e:[r,a],[s,e,r,a]);return n.jsxs(ZL,{"data-slot":"slider",defaultValue:e,value:s,min:r,max:a,className:Xe("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...l,children:[n.jsx(YL,{"data-slot":"slider-track",className:Xe("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:n.jsx(JL,{"data-slot":"slider-range",className:Xe("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(d,h)=>n.jsx(QL,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},h))]})}const El={defaultTransportMode:"driving",voiceGuidance:!0,avoidTolls:!1,avoidHighways:!1,avoidFerries:!1,mapStyle:"standard",darkMode:!1,language:"en",units:"metric",shareLocation:!1,shareActivity:!0,allowFriendRequests:!0,trafficAlerts:!0,weatherAlerts:!0,socialNotifications:!0},XL={user:null,preferences:El,isAuthenticated:!1,isLoading:!0,error:null},eO=(t,e)=>{switch(e.type){case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_ERROR":return{...t,error:e.payload};case"SET_USER":return{...t,user:e.payload,isAuthenticated:!!e.payload};case"SET_PREFERENCES":return{...t,preferences:{...t.preferences,...e.payload}};case"LOGIN_SUCCESS":return{...t,user:e.payload.user,preferences:{...t.preferences,...e.payload.preferences},isAuthenticated:!0,isLoading:!1,error:null};case"LOGOUT":return{...t,user:null,isAuthenticated:!1,isLoading:!1,error:null,preferences:El};case"UPDATE_PROFILE":return t.user?{...t,user:{...t.user,...e.payload}}:t;case"UPDATE_PREFERENCE":return{...t,preferences:{...t.preferences,[e.payload.key]:e.payload.value}};default:return t}},LS=x.createContext(void 0),tO=({children:t})=>{const[e,s]=x.useReducer(eO,XL);x.useEffect(()=>{r()},[]),x.useEffect(()=>{e.preferences!==El&&localStorage.setItem("user_preferences",JSON.stringify(e.preferences))},[e.preferences]);const r=async()=>{try{s({type:"SET_LOADING",payload:!0});const p=localStorage.getItem("user_data"),y=localStorage.getItem("user_preferences"),N=localStorage.getItem("auth_token");if(p&&N){const w=JSON.parse(p),j=y?{...El,...JSON.parse(y)}:El;s({type:"LOGIN_SUCCESS",payload:{user:w,preferences:j}}),C.debug("User data loaded from localStorage",{userId:w.id})}else y&&s({type:"SET_PREFERENCES",payload:JSON.parse(y)}),s({type:"SET_LOADING",payload:!1})}catch(p){C.error("Failed to load user data",{error:p}),s({type:"SET_ERROR",payload:"Failed to load user data"}),s({type:"SET_LOADING",payload:!1})}},f={...e,login:async(p,y)=>{try{s({type:"SET_LOADING",payload:!0}),s({type:"SET_ERROR",payload:null});const N={id:"user_123",email:p,username:p.split("@")[0],firstName:"Demo",lastName:"User",isVerified:!0,isActive:!0,role:"USER",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};localStorage.setItem("user_data",JSON.stringify(N)),localStorage.setItem("auth_token","demo_token_123"),s({type:"LOGIN_SUCCESS",payload:{user:N,preferences:e.preferences}}),C.info("User logged in successfully")}catch(N){throw C.error("Login failed",{error:N,email:p}),s({type:"SET_ERROR",payload:"Login failed. Please try again."}),N}finally{s({type:"SET_LOADING",payload:!1})}},logout:async()=>{try{s({type:"SET_LOADING",payload:!0}),localStorage.removeItem("user_data"),localStorage.removeItem("auth_token"),s({type:"LOGOUT"}),C.info("User logged out successfully")}catch(p){C.error("Logout failed",{error:p}),localStorage.removeItem("user_data"),localStorage.removeItem("auth_token"),s({type:"LOGOUT"})}finally{s({type:"SET_LOADING",payload:!1})}},register:async p=>{try{s({type:"SET_LOADING",payload:!0}),s({type:"SET_ERROR",payload:null});const y={id:`user_${Date.now()}`,email:p.email,username:p.email.split("@")[0],firstName:p.firstName,lastName:p.lastName,isVerified:!1,isActive:!0,role:"USER",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};localStorage.setItem("user_data",JSON.stringify(y)),localStorage.setItem("auth_token",`demo_token_${Date.now()}`),s({type:"LOGIN_SUCCESS",payload:{user:y,preferences:e.preferences}}),C.info("User registered successfully")}catch(y){throw C.error("Registration failed",{error:y,email:p.email}),s({type:"SET_ERROR",payload:"Registration failed. Please try again."}),y}finally{s({type:"SET_LOADING",payload:!1})}},updateProfile:async p=>{try{if(!e.user)throw new Error("No user logged in");s({type:"SET_LOADING",payload:!0});const y={...e.user,...p,updatedAt:new Date().toISOString()};localStorage.setItem("user_data",JSON.stringify(y)),s({type:"UPDATE_PROFILE",payload:{...p,updatedAt:new Date().toISOString()}}),C.info("Profile updated successfully",{updates:p})}catch(y){throw C.error("Profile update failed",{error:y,updates:p}),s({type:"SET_ERROR",payload:"Failed to update profile"}),y}finally{s({type:"SET_LOADING",payload:!1})}},updatePreferences:async p=>{try{s({type:"SET_PREFERENCES",payload:p}),C.debug("Preferences updated",{updates:p})}catch(y){throw C.error("Failed to update preferences",{error:y,updates:p}),y}},updatePreference:(p,y)=>{s({type:"UPDATE_PREFERENCE",payload:{key:p,value:y}}),C.debug("Preference updated",{key:p,value:y})},loadUserData:r};return n.jsx(LS.Provider,{value:f,children:t})},jg=()=>{const t=x.useContext(LS);if(t===void 0)throw new Error("useUser must be used within a UserProvider");return t};var sO=(t,e,s,r,a,l,c,d)=>{let h=document.documentElement,m=["light","dark"];function f(N){(Array.isArray(t)?t:[t]).forEach(w=>{let j=w==="class",S=j&&l?a.map(T=>l[T]||T):a;j?(h.classList.remove(...S),h.classList.add(l&&l[N]?l[N]:N)):h.setAttribute(w,N)}),p(N)}function p(N){d&&m.includes(N)&&(h.style.colorScheme=N)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let N=localStorage.getItem(e)||s,w=c&&N==="system"?y():N;f(w)}catch{}},aw=["light","dark"],OS="(prefers-color-scheme: dark)",nO=typeof window>"u",Ng=x.createContext(void 0),rO={setTheme:t=>{},themes:[]},FS=()=>{var t;return(t=x.useContext(Ng))!=null?t:rO},aO=t=>x.useContext(Ng)?x.createElement(x.Fragment,null,t.children):x.createElement(oO,{...t}),iO=["light","dark"],oO=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:s=!0,enableColorScheme:r=!0,storageKey:a="theme",themes:l=iO,defaultTheme:c=s?"system":"light",attribute:d="data-theme",value:h,children:m,nonce:f,scriptProps:p})=>{let[y,N]=x.useState(()=>cO(a,c)),[w,j]=x.useState(()=>y==="system"?ff():y),S=h?Object.values(h):l,T=x.useCallback(P=>{let F=P;if(!F)return;P==="system"&&s&&(F=ff());let W=h?h[F]:F,z=e?dO(f):null,oe=document.documentElement,q=J=>{J==="class"?(oe.classList.remove(...S),W&&oe.classList.add(W)):J.startsWith("data-")&&(W?oe.setAttribute(J,W):oe.removeAttribute(J))};if(Array.isArray(d)?d.forEach(q):q(d),r){let J=aw.includes(c)?c:null,K=aw.includes(F)?F:J;oe.style.colorScheme=K}z?.()},[f]),R=x.useCallback(P=>{let F=typeof P=="function"?P(y):P;N(F);try{localStorage.setItem(a,F)}catch{}},[y]),A=x.useCallback(P=>{let F=ff(P);j(F),y==="system"&&s&&!t&&T("system")},[y,t]);x.useEffect(()=>{let P=window.matchMedia(OS);return P.addListener(A),A(P),()=>P.removeListener(A)},[A]),x.useEffect(()=>{let P=F=>{F.key===a&&(F.newValue?N(F.newValue):R(c))};return window.addEventListener("storage",P),()=>window.removeEventListener("storage",P)},[R]),x.useEffect(()=>{T(t??y)},[t,y]);let k=x.useMemo(()=>({theme:y,setTheme:R,forcedTheme:t,resolvedTheme:y==="system"?w:y,themes:s?[...l,"system"]:l,systemTheme:s?w:void 0}),[y,R,t,w,s,l]);return x.createElement(Ng.Provider,{value:k},x.createElement(lO,{forcedTheme:t,storageKey:a,attribute:d,enableSystem:s,enableColorScheme:r,defaultTheme:c,value:h,themes:l,nonce:f,scriptProps:p}),m)},lO=x.memo(({forcedTheme:t,storageKey:e,attribute:s,enableSystem:r,enableColorScheme:a,defaultTheme:l,value:c,themes:d,nonce:h,scriptProps:m})=>{let f=JSON.stringify([s,e,l,t,d,c,r,a]).slice(1,-1);return x.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${sO.toString()})(${f})`}})}),cO=(t,e)=>{if(nO)return;let s;try{s=localStorage.getItem(t)||void 0}catch{}return s||e},dO=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},ff=t=>(t||(t=window.matchMedia(OS)),t.matches?"dark":"light");function zS(){const{theme:t,setTheme:e}=FS(),s=()=>{e(t==="light"?"dark":t==="dark"?"system":"light")};return n.jsxs(L,{size:"icon",className:"bg-white text-gray-700 shadow-lg border border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700 dark:hover:bg-gray-700",onClick:s,children:[t==="light"&&n.jsx(p4,{className:"w-5 h-5"}),t==="dark"&&n.jsx(s1,{className:"w-5 h-5"}),t==="system"&&n.jsx(m4,{className:"w-5 h-5"})]})}function uO({onBack:t,onNavigateToIntegrations:e,onNavigateToFleet:s,onNavigateToAPIDocs:r,onNavigateToORSConfig:a,onNavigateToDeveloper:l,onNavigateToPushSettings:c,onNavigateToDeviceTest:d,onNavigateToCrashReports:h,onNavigateToOfflineMaps:m}){const{preferences:f,updatePreference:p,updatePreferences:y}=jg(),[N,w]=x.useState("main");f.darkMode;const j=f.voiceGuidance,S=f.socialNotifications,T=f.avoidTolls,R=f.avoidHighways,[A,k]=x.useState(()=>localStorage.getItem("voice_type")||"female"),[P,F]=x.useState(()=>localStorage.getItem("voice_language")||f.language||"en-US"),[W,z]=x.useState(()=>[parseFloat(localStorage.getItem("voice_speed")||"1.0")]),[oe,q]=x.useState(()=>[parseInt(localStorage.getItem("master_volume")||"70")]),[J,K]=x.useState(()=>[parseInt(localStorage.getItem("navigation_volume")||"80")]),[B,V]=x.useState(()=>[parseInt(localStorage.getItem("alert_volume")||"75")]),[re,M]=x.useState(()=>localStorage.getItem("sound_effects")!=="false"),[D,E]=x.useState(()=>localStorage.getItem("read_street_names")!=="false"),[Y,Q]=x.useState(()=>localStorage.getItem("announce_traffic")!=="false"),[I,te]=x.useState(()=>localStorage.getItem("high_contrast")==="true"),[se,fe]=x.useState(()=>localStorage.getItem("large_text")==="true"),[ve,Pe]=x.useState(()=>localStorage.getItem("screen_reader")==="true"),[$,G]=x.useState(()=>localStorage.getItem("reduce_motion")==="true"),[X,me]=x.useState(()=>localStorage.getItem("color_blind_mode")||"none"),[ye,je]=x.useState(()=>[parseInt(localStorage.getItem("text_size")||"100")]),[Ae,U]=x.useState(()=>[parseInt(localStorage.getItem("button_size")||"100")]),[Te,Se]=x.useState(()=>localStorage.getItem("vibration")!=="false"),We=(le,Le)=>{localStorage.setItem(le,Le.toString()),C.debug("Voice setting updated",{key:le,value:Le}),(le==="voice_type"||le==="voice_language")&&ue.success("Voice setting updated")},ct=(le,Le)=>{localStorage.setItem(le,Le.toString()),C.debug("Accessibility setting updated",{key:le,value:Le}),(le==="high_contrast"||le==="large_text"||le==="screen_reader")&&ue.success("Accessibility setting updated")},pe=[{title:"Account",items:[{id:"profile",icon:xu,label:"Profile & Account",description:"Manage your personal information"},{id:"sync",icon:Rr,label:"Sync & Backup",description:"Keep your data safe across devices"}]},{title:"Navigation",items:[{id:"nav-prefs",icon:rt,label:"Navigation Preferences",description:"Default transport mode, voice settings"},{id:"route-options",icon:mr,label:"Route Options",description:"Avoid tolls, highways, and more"},{id:"voice",icon:Mr,label:"Voice & Audio",description:"Voice guidance and audio alerts",onClick:()=>w("voice")},{id:"offline-maps",icon:Rr,label:"Offline Maps",description:"Download maps for offline use",onClick:m}]},{title:"Display",items:[{id:"appearance",icon:s1,label:"Appearance",description:"Dark mode and map styles"},{id:"accessibility",icon:io,label:"Accessibility",description:"Screen reader, high contrast, text size",onClick:()=>w("accessibility")}]},{title:"Privacy & Data",items:[{id:"privacy",icon:lr,label:"Privacy Settings",description:"Location history and data usage"},{id:"push-settings",icon:pu,label:"Push Notifications",description:"Configure app notifications and alerts",onClick:c}]},{title:"Device Integration",items:[{id:"device-test",icon:Wt,label:"Device Integration Test",description:"Test device sensors and APIs",onClick:d},{id:"crash-reports",icon:lr,label:"Crash Reports",description:"View app error logs and diagnostics",onClick:h}]},{title:"Integrations",items:[{id:"connected",icon:Wt,label:"Connected Services",description:"Manage app integrations",onClick:e},{id:"experiments",icon:Wt,label:"Experiment Management",description:"Feature flags and A/B testing",onClick:l},{id:"ors-config",icon:Wt,label:"OpenRouteService API",description:"Configure live navigation APIs",onClick:a},{id:"developer",icon:Wt,label:"Developer Tools",description:"Debugging and diagnostics",onClick:l}]},{title:"Business",items:[{id:"fleet",icon:Wt,label:"Fleet Management",description:"Manage vehicle fleets",onClick:s},{id:"api",icon:Wt,label:"API Documentation",description:"Developer resources",onClick:r}]}],ie=[{id:"voice",label:"Voice Guidance",value:j,onChange:le=>{p("voiceGuidance",le),C.debug("Voice guidance preference updated",{value:le}),ue.success(`Voice guidance ${le?"enabled":"disabled"}`)}},{id:"notifications",label:"Push Notifications",value:S,onChange:le=>{p("socialNotifications",le),C.debug("Notifications preference updated",{value:le})}},{id:"tolls",label:"Avoid Tolls",value:T,onChange:le=>{p("avoidTolls",le),C.debug("Avoid tolls preference updated",{value:le})}},{id:"highways",label:"Avoid Highways",value:R,onChange:le=>{p("avoidHighways",le),C.debug("Avoid highways preference updated",{value:le})}}];return N==="voice"?n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-3 sm:px-4 py-3 sm:py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>w("main"),className:"h-8 w-8 sm:h-10 sm:w-10",children:n.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"font-medium text-gray-900 text-base sm:text-lg truncate",children:"Voice & Audio"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"Configure voice guidance and sounds"})]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto scroll-y hide-scrollbar scroll-smooth",children:[n.jsxs(ne,{className:"m-3 sm:m-4 p-3 sm:p-4",children:[n.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(pa,{className:"w-5 h-5"}),"Voice Selection"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Type"}),n.jsxs(ya,{value:A,onValueChange:le=>{k(le),We("voice_type",le)},children:[n.jsx(wa,{children:n.jsx(va,{})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"female",children:"Female Voice"}),n.jsx(vt,{value:"male",children:"Male Voice"}),n.jsx(vt,{value:"neutral",children:"Neutral Voice"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),n.jsxs(ya,{value:P,onValueChange:le=>{F(le),We("voice_language",le)},children:[n.jsx(wa,{children:n.jsx(va,{})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"en-US",children:"English (US)"}),n.jsx(vt,{value:"en-UK",children:"English (UK)"}),n.jsx(vt,{value:"es-ES",children:"Spanish"}),n.jsx(vt,{value:"fr-FR",children:"French"}),n.jsx(vt,{value:"de-DE",children:"German"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Speed"}),n.jsxs("div",{className:"px-3",children:[n.jsx(Yi,{value:W,onValueChange:le=>{z(le),We("voice_speed",le[0])},max:2,min:.5,step:.1,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[n.jsx("span",{children:"Slow"}),n.jsxs("span",{children:[W[0],"x"]}),n.jsx("span",{children:"Fast"})]})]})]}),n.jsxs(L,{variant:"outline",className:"w-full",children:[n.jsx(l4,{className:"w-4 h-4 mr-2"}),"Test Voice"]})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Mr,{className:"w-5 h-5"}),"Audio Levels"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Master Volume"}),n.jsxs("div",{className:"px-3",children:[n.jsx(Yi,{value:oe,onValueChange:le=>{q(le),We("master_volume",le[0])},max:100,min:0,step:5,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[n.jsx(zp,{className:"w-3 h-3"}),n.jsxs("span",{children:[oe[0],"%"]}),n.jsx(Mr,{className:"w-3 h-3"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Navigation Voice"}),n.jsxs("div",{className:"px-3",children:[n.jsx(Yi,{value:J,onValueChange:le=>{K(le),We("navigation_volume",le[0])},max:100,min:0,step:5,className:"w-full"}),n.jsxs("div",{className:"text-center text-xs text-gray-500 mt-1",children:[J[0],"%"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alert Sounds"}),n.jsxs("div",{className:"px-3",children:[n.jsx(Yi,{value:B,onValueChange:le=>{V(le),We("alert_volume",le[0])},max:100,min:0,step:5,className:"w-full"}),n.jsxs("div",{className:"text-center text-xs text-gray-500 mt-1",children:[B[0],"%"]})]})]})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Audio Options"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Sound Effects"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Button clicks and UI sounds"})]}),n.jsx(lt,{checked:re,onCheckedChange:le=>{M(le),We("sound_effects",le)}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Read Street Names"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Announce street names during navigation"})]}),n.jsx(lt,{checked:D,onCheckedChange:E})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Traffic Announcements"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Audio alerts for traffic conditions"})]}),n.jsx(lt,{checked:Y,onCheckedChange:Q})]})]})]})]})]}):N==="accessibility"?n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>w("main"),children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Accessibility"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Make the app easier to use"})]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto scroll-y hide-scrollbar scroll-smooth",children:[n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(ii,{className:"w-5 h-5"}),"Visual Accessibility"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"High Contrast Mode"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Increase contrast for better visibility"})]}),n.jsx(lt,{checked:I,onCheckedChange:le=>{te(le),ct("high_contrast",le)}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Large Text"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Use larger fonts throughout the app"})]}),n.jsx(lt,{checked:se,onCheckedChange:fe})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Reduce Motion"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Minimize animations and transitions"})]}),n.jsx(lt,{checked:$,onCheckedChange:G})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Blind Support"}),n.jsxs(ya,{value:X,onValueChange:me,children:[n.jsx(wa,{children:n.jsx(va,{})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"none",children:"None"}),n.jsx(vt,{value:"protanopia",children:"Protanopia (Red-blind)"}),n.jsx(vt,{value:"deuteranopia",children:"Deuteranopia (Green-blind)"}),n.jsx(vt,{value:"tritanopia",children:"Tritanopia (Blue-blind)"})]})]})]})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Y4,{className:"w-5 h-5"}),"Size & Scale"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Size"}),n.jsxs("div",{className:"px-3",children:[n.jsx(Yi,{value:ye,onValueChange:le=>{je(le),ct("text_size",le[0])},max:150,min:75,step:5,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[n.jsx("span",{children:"Small"}),n.jsxs("span",{children:[ye[0],"%"]}),n.jsx("span",{children:"Large"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Button Size"}),n.jsxs("div",{className:"px-3",children:[n.jsx(Yi,{value:Ae,onValueChange:U,max:150,min:75,step:5,className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[n.jsx("span",{children:"Small"}),n.jsxs("span",{children:[Ae[0],"%"]}),n.jsx("span",{children:"Large"})]})]})]})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(R4,{className:"w-5 h-5"}),"Interaction"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Screen Reader Support"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Enhanced compatibility with screen readers"})]}),n.jsx(lt,{checked:ve,onCheckedChange:Pe})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Haptic Feedback"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Vibration for button presses and alerts"})]}),n.jsx(lt,{checked:Te,onCheckedChange:Se})]})]})]}),n.jsx(ne,{className:"m-4 p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(io,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-blue-900",children:"Accessibility Features Active"}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[I&&n.jsx(Ie,{variant:"secondary",children:"High Contrast"}),se&&n.jsx(Ie,{variant:"secondary",children:"Large Text"}),ve&&n.jsx(Ie,{variant:"secondary",children:"Screen Reader"}),$&&n.jsx(Ie,{variant:"secondary",children:"Reduced Motion"}),X!=="none"&&n.jsx(Ie,{variant:"secondary",children:"Color Blind Support"}),!I&&!se&&!ve&&!$&&X==="none"&&n.jsx("span",{className:"text-sm text-blue-700",children:"None active"})]})]})]})})]})]}):n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-3 sm:px-4 py-3 sm:py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 sm:h-10 sm:w-10",children:n.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"font-medium text-gray-900 text-base sm:text-lg truncate",children:"Settings"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"Customize your experience"})]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto scroll-y hide-scrollbar scroll-smooth",children:[n.jsx(ne,{className:"m-3 sm:m-4 p-3 sm:p-4",children:n.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-lg sm:text-xl font-medium flex-shrink-0",children:"JD"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:"John Doe"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:"john.doe@example.com"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Member since Jan 2024"})]}),n.jsx(or,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0"})]})}),n.jsxs(ne,{className:"m-3 sm:m-4 p-3 sm:p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Quick Settings"}),n.jsx("div",{className:"space-y-3 sm:space-y-4",children:ie.map(le=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:le.label}),n.jsx(lt,{checked:le.value,onCheckedChange:le.onChange})]},le.id))})]}),pe.map(le=>n.jsxs("div",{className:"mb-4 sm:mb-6",children:[n.jsx("div",{className:"px-3 sm:px-4 py-1.5 sm:py-2",children:n.jsx("h3",{className:"font-medium text-gray-500 uppercase text-xs sm:text-sm tracking-wide",children:le.title})}),n.jsx(ne,{className:"mx-3 sm:mx-4",children:le.items.map((Le,et)=>{const wt=Le.icon;return n.jsxs("div",{children:[n.jsxs("button",{className:"w-full p-3 sm:p-4 flex items-center gap-3 sm:gap-4 hover:bg-gray-50 transition-colors touch-manipulation",onClick:Le.onClick||(()=>{}),children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx(wt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"})}),n.jsxs("div",{className:"flex-1 text-left min-w-0",children:[n.jsx("div",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:Le.label}),n.jsx("div",{className:"text-xs sm:text-sm text-gray-500 line-clamp-2",children:Le.description})]}),Le.id==="appearance"?n.jsx(zS,{}):n.jsx(or,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0"})]}),et<le.items.length-1&&n.jsx(KI,{className:"ml-14 sm:ml-18"})]},Le.id)})})]},le.title)),n.jsxs(ne,{className:"m-3 sm:m-4 p-3 sm:p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Help & Support"}),n.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[n.jsxs("button",{className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors touch-manipulation",children:[n.jsx(Zb,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:"Help Center"}),n.jsx(or,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 ml-auto flex-shrink-0"})]}),n.jsxs("button",{className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors touch-manipulation",children:[n.jsx(Wt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 text-sm sm:text-base",children:"Report a Problem"}),n.jsx(or,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400 ml-auto flex-shrink-0"})]})]})]}),n.jsxs("div",{className:"p-3 sm:p-4 text-center text-xs sm:text-sm text-gray-500",children:[n.jsx("p",{children:"PathFinder Pro v2.1.0"}),n.jsx("p",{children:" 2024 PathFinder Technologies"})]})]})]})}const jn=Qj;jn.displayName="Dialog";const hO=x.forwardRef((t,e)=>n.jsx(Xj,{ref:e,"data-slot":"dialog-trigger",...t}));hO.displayName="DialogTrigger";const $S=eN;$S.displayName="DialogPortal";const mO=x.forwardRef((t,e)=>n.jsx(Mu,{ref:e,"data-slot":"dialog-close",...t}));mO.displayName="DialogClose";const BS=x.forwardRef(({className:t,...e},s)=>n.jsx(tN,{ref:s,"data-slot":"dialog-overlay",className:Xe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));BS.displayName="DialogOverlay";const Nn=x.forwardRef(({className:t,children:e,...s},r)=>n.jsxs($S,{"data-slot":"dialog-portal",children:[n.jsx(BS,{}),n.jsxs(sN,{ref:r,"data-slot":"dialog-content",className:Xe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s,children:[e,n.jsxs(Mu,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[n.jsx(ys,{}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nn.displayName="DialogContent";const Sn=x.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-slot":"dialog-header",className:Xe("flex flex-col gap-2 text-center sm:text-left",t),...e}));Sn.displayName="DialogHeader";const fO=x.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,"data-slot":"dialog-footer",className:Xe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e}));fO.displayName="DialogFooter";const kn=x.forwardRef(({className:t,...e},s)=>n.jsx(nN,{ref:s,"data-slot":"dialog-title",className:Xe("text-lg leading-none font-semibold",t),...e}));kn.displayName="DialogTitle";const Cn=x.forwardRef(({className:t,...e},s)=>n.jsx(rN,{ref:s,"data-slot":"dialog-description",className:Xe("text-muted-foreground text-sm",t),...e}));Cn.displayName="DialogDescription";class pO{useRealAPI=!1;useGoogleMaps=!1;constructor(){const e="AIzaSyCr3z9_rT0EdprALkAz-oi--XlqqUY0vQk";this.useGoogleMaps=e!=="YOUR_GOOGLE_MAPS_API_KEY_HERE",this.useRealAPI=!0,this.useRealAPI&&qN()}async searchPlacesEnhanced(e,s,r,a=1e3){if(this.useGoogleMaps)try{const l=await this.searchPlacesWithGoogle(e,s,r,a);if(l.length>0)return l}catch(l){C.error("Google Maps places search failed, falling back to ORS",l)}return this.searchPlacesWithORS(e,s,r,a)}async searchPlacesWithGoogle(e,s,r,a=1e3){try{if(Kt.isAvailable()||await Kt.initialize(),!Kt.isAvailable())throw new Error("Google Maps not available");let l;if(s)l=await Kt.searchPlaces({query:s,location:{lat:e.lat,lng:e.lng},radius:a});else if(r){const c=this.mapCategoryToGoogleType(r);l=await Kt.searchNearbyPlaces({location:{lat:e.lat,lng:e.lng},radius:a,type:c||"establishment"})}else l=await Kt.searchNearbyPlaces({location:{lat:e.lat,lng:e.lng},radius:a,type:"establishment"});return C.info("Google Places search completed",{resultCount:l.length,query:s,category:r,location:e}),l.map((c,d)=>({id:c.place_id||`google_place_${d}`,name:c.name||"Unnamed Place",address:c.formatted_address||c.vicinity||"Address not available",location:{lat:c.geometry?.location?.lat()||0,lng:c.geometry?.location?.lng()||0},category:this.mapGoogleTypesToCategory(c.types||[]),rating:c.rating,openingHours:{isOpen:c.opening_hours?.isOpen()||!0},isSaved:!1,photos:c.photos?.map(h=>h.getUrl({maxWidth:400,maxHeight:400}))||[],priceLevel:c.price_level,website:c.website,phoneNumber:c.formatted_phone_number}))}catch(l){throw C.error("Google Places search failed",l),l}}mapCategoryToGoogleType(e){return e?{restaurants:"restaurant",gas_stations:"gas_station",parking:"parking",banks:"bank",hospitals:"hospital",shopping:"store",hotels:"lodging",entertainment:"amusement_park",restaurant:"restaurant",gas_station:"gas_station",hospital:"hospital",school:"school",store:"store",tourist_attraction:"tourist_attraction",lodging:"lodging",bank:"bank",gym:"gym"}[e]:void 0}mapGoogleTypesToCategory(e){const s={restaurant:"Restaurant",food:"Restaurant",meal_takeaway:"Restaurant",gas_station:"Gas Station",hospital:"Healthcare",doctor:"Healthcare",pharmacy:"Healthcare",school:"Education",university:"Education",store:"Shopping",shopping_mall:"Shopping",supermarket:"Shopping",tourist_attraction:"Attraction",amusement_park:"Attraction",lodging:"Accommodation",bank:"Finance",atm:"Finance",gym:"Fitness",spa:"Beauty & Wellness"};for(const r of e)if(s[r])return s[r];return"Other"}async searchPlacesWithORS(e,s,r,a=1e3){if(this.useRealAPI)try{return(await UI.searchPOIs({lat:e.lat,lng:e.lng},a,r,20)).map((d,h)=>({id:d.properties.osm_id?.toString()||`ors_poi_${h}`,name:d.properties.osm_tags?.name||d.properties.osm_tags?.amenity||"Unnamed Place",address:this.formatORSAddress(d.properties.osm_tags),location:{lat:d.geometry.coordinates[1],lng:d.geometry.coordinates[0]},category:this.mapORSCategory(d.properties.category_ids),rating:this.extractRating(d.properties.osm_tags),openingHours:{isOpen:!0},isSaved:!1}))}catch(c){console.error("ORS POI search failed:",c)}return(await this.searchPlaces({query:s||r||"places",location:e,radius:a,type:r})).places}formatORSAddress(e){const s=[];return e["addr:housenumber"]&&e["addr:street"]?s.push(`${e["addr:housenumber"]} ${e["addr:street"]}`):e["addr:street"]&&s.push(e["addr:street"]),e["addr:city"]&&s.push(e["addr:city"]),e["addr:state"]&&s.push(e["addr:state"]),s.join(", ")||e.name||"Address not available"}mapORSCategory(e){if(!e||e.length===0)return"Other";const s={560:"Restaurant",561:"Restaurant",562:"Restaurant",470:"Gas Station",620:"Healthcare",540:"Finance",541:"Tourism",542:"Tourism",580:"Accommodation",581:"Accommodation",600:"Shopping",601:"Shopping",602:"Shopping"};for(const r of e)if(s[r])return s[r];return"Other"}extractRating(e){if(e.rating){const s=parseFloat(e.rating);if(!isNaN(s)&&s>=0&&s<=5)return s}}async searchPlaces(e){return Ms("/places/search",e)}async getPlaceDetails(e){return xa(`/places/${e}`)}async savePlace(e){return Ms("/places",e)}async deletePlace(e){await vg(`/places/${e}`)}async getUserPlaces(e={}){const s=new URLSearchParams;return e.category&&s.append("category",e.category),e.favorites&&s.append("favorites","true"),e.page&&s.append("page",e.page.toString()),e.limit&&s.append("limit",e.limit.toString()),xa(`/places?${s.toString()}`)}async toggleFavorite(e){return GN(`/places/${e}/favorite`)}async getNearbyPlaces(e,s,r=5e3){return(await this.searchPlaces({query:s||"restaurants",location:e,radius:r,type:s})).places}async getPopularPlaces(e,s=1e4){return(await this.searchPlaces({query:"popular places",location:e,radius:s})).places}async searchByType(e,s,r=5e3){const a={restaurant:"restaurants",gas_station:"gas stations",hospital:"hospitals",school:"schools",store:"stores",attraction:"attractions"};return(await this.searchPlaces({query:a[s],location:e,radius:r,type:s})).places}getPlaceCategories(){return["Restaurant","Gas Station","Healthcare","Education","Shopping","Attraction","Accommodation","Finance","Fitness","Beauty & Wellness","Other"]}formatPlace(e){return"latitude"in e?{id:e.id,name:e.name,address:e.address,location:{lat:e.latitude,lng:e.longitude},category:e.category,isSaved:!0}:{id:e.id,name:e.name,address:e.address,location:e.location,category:e.category,rating:e.rating,isOpen:e.openingHours?.isOpen,isSaved:e.isSaved}}calculateDistance(e,s){const a=this.toRadians(s.lat-e.lat),l=this.toRadians(s.lng-e.lng),c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.toRadians(e.lat))*Math.cos(this.toRadians(s.lat))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}toRadians(e){return e*(Math.PI/180)}formatDistance(e){return e<1?`${Math.round(e*1e3)}m`:`${e.toFixed(1)}km`}}const bl=new pO;function xe(t,e,s){function r(d,h){var m;Object.defineProperty(d,"_zod",{value:d._zod??{},enumerable:!1}),(m=d._zod).traits??(m.traits=new Set),d._zod.traits.add(t),e(d,h);for(const f in c.prototype)f in d||Object.defineProperty(d,f,{value:c.prototype[f].bind(d)});d._zod.constr=c,d._zod.def=h}const a=s?.Parent??Object;class l extends a{}Object.defineProperty(l,"name",{value:t});function c(d){var h;const m=s?.Parent?new l:this;r(m,d),(h=m._zod).deferred??(h.deferred=[]);for(const f of m._zod.deferred)f();return m}return Object.defineProperty(c,"init",{value:r}),Object.defineProperty(c,Symbol.hasInstance,{value:d=>s?.Parent&&d instanceof s.Parent?!0:d?._zod?.traits?.has(t)}),Object.defineProperty(c,"name",{value:t}),c}class mo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class US extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const VS={};function fi(t){return VS}function gO(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,a])=>e.indexOf(+r)===-1).map(([r,a])=>a)}function cp(t,e){return typeof e=="bigint"?e.toString():e}function Sg(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function kg(t){return t==null}function Cg(t){const e=t.startsWith("^")?1:0,s=t.endsWith("$")?t.length-1:t.length;return t.slice(e,s)}function xO(t,e){const s=(t.toString().split(".")[1]||"").length,r=e.toString();let a=(r.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(r)){const h=r.match(/\d?e-(\d?)/);h?.[1]&&(a=Number.parseInt(h[1]))}const l=s>a?s:a,c=Number.parseInt(t.toFixed(l).replace(".","")),d=Number.parseInt(e.toFixed(l).replace(".",""));return c%d/10**l}const iw=Symbol("evaluating");function kt(t,e,s){let r;Object.defineProperty(t,e,{get(){if(r!==iw)return r===void 0&&(r=iw,r=s()),r},set(a){Object.defineProperty(t,e,{value:a})},configurable:!0})}function yi(t,e,s){Object.defineProperty(t,e,{value:s,writable:!0,enumerable:!0,configurable:!0})}function vi(...t){const e={};for(const s of t){const r=Object.getOwnPropertyDescriptors(s);Object.assign(e,r)}return Object.defineProperties({},e)}function ow(t){return JSON.stringify(t)}const WS="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function au(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const yO=Sg(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function zl(t){if(au(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(au(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function HS(t){return zl(t)?{...t}:Array.isArray(t)?[...t]:t}const vO=new Set(["string","number","symbol"]);function qu(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _a(t,e,s){const r=new t._zod.constr(e??t._zod.def);return(!e||s?.parent)&&(r._zod.parent=t),r}function Ue(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function wO(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const bO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function jO(t,e){const s=t._zod.def,r=vi(t._zod.def,{get shape(){const a={};for(const l in e){if(!(l in s.shape))throw new Error(`Unrecognized key: "${l}"`);e[l]&&(a[l]=s.shape[l])}return yi(this,"shape",a),a},checks:[]});return _a(t,r)}function NO(t,e){const s=t._zod.def,r=vi(t._zod.def,{get shape(){const a={...t._zod.def.shape};for(const l in e){if(!(l in s.shape))throw new Error(`Unrecognized key: "${l}"`);e[l]&&delete a[l]}return yi(this,"shape",a),a},checks:[]});return _a(t,r)}function SO(t,e){if(!zl(e))throw new Error("Invalid input to extend: expected a plain object");const s=t._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const a=vi(t._zod.def,{get shape(){const l={...t._zod.def.shape,...e};return yi(this,"shape",l),l},checks:[]});return _a(t,a)}function kO(t,e){if(!zl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return yi(this,"shape",r),r},checks:t._zod.def.checks};return _a(t,s)}function CO(t,e){const s=vi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return yi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return _a(t,s)}function TO(t,e,s){const r=vi(e._zod.def,{get shape(){const a=e._zod.def.shape,l={...a};if(s)for(const c in s){if(!(c in a))throw new Error(`Unrecognized key: "${c}"`);s[c]&&(l[c]=t?new t({type:"optional",innerType:a[c]}):a[c])}else for(const c in a)l[c]=t?new t({type:"optional",innerType:a[c]}):a[c];return yi(this,"shape",l),l},checks:[]});return _a(e,r)}function EO(t,e,s){const r=vi(e._zod.def,{get shape(){const a=e._zod.def.shape,l={...a};if(s)for(const c in s){if(!(c in l))throw new Error(`Unrecognized key: "${c}"`);s[c]&&(l[c]=new t({type:"nonoptional",innerType:a[c]}))}else for(const c in a)l[c]=new t({type:"nonoptional",innerType:a[c]});return yi(this,"shape",l),l},checks:[]});return _a(e,r)}function Xi(t,e=0){if(t.aborted===!0)return!0;for(let s=e;s<t.issues.length;s++)if(t.issues[s]?.continue!==!0)return!0;return!1}function GS(t,e){return e.map(s=>{var r;return(r=s).path??(r.path=[]),s.path.unshift(t),s})}function kd(t){return typeof t=="string"?t:t?.message}function pi(t,e,s){const r={...t,path:t.path??[]};if(!t.message){const a=kd(t.inst?._zod.def?.error?.(t))??kd(e?.error?.(t))??kd(s.customError?.(t))??kd(s.localeError?.(t))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Tg(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function $l(...t){const[e,s,r]=t;return typeof e=="string"?{message:e,code:"custom",input:s,inst:r}:{...e}}const qS=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,cp,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},KS=xe("$ZodError",qS),ZS=xe("$ZodError",qS,{Parent:Error});function PO(t,e=s=>s.message){const s={},r=[];for(const a of t.issues)a.path.length>0?(s[a.path[0]]=s[a.path[0]]||[],s[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:s}}function AO(t,e){const s=e||function(l){return l.message},r={_errors:[]},a=l=>{for(const c of l.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(d=>a({issues:d}));else if(c.code==="invalid_key")a({issues:c.issues});else if(c.code==="invalid_element")a({issues:c.issues});else if(c.path.length===0)r._errors.push(s(c));else{let d=r,h=0;for(;h<c.path.length;){const m=c.path[h];h===c.path.length-1?(d[m]=d[m]||{_errors:[]},d[m]._errors.push(s(c))):d[m]=d[m]||{_errors:[]},d=d[m],h++}}};return a(t),r}const Eg=t=>(e,s,r,a)=>{const l=r?Object.assign(r,{async:!1}):{async:!1},c=e._zod.run({value:s,issues:[]},l);if(c instanceof Promise)throw new mo;if(c.issues.length){const d=new(a?.Err??t)(c.issues.map(h=>pi(h,l,fi())));throw WS(d,a?.callee),d}return c.value},Pg=t=>async(e,s,r,a)=>{const l=r?Object.assign(r,{async:!0}):{async:!0};let c=e._zod.run({value:s,issues:[]},l);if(c instanceof Promise&&(c=await c),c.issues.length){const d=new(a?.Err??t)(c.issues.map(h=>pi(h,l,fi())));throw WS(d,a?.callee),d}return c.value},Ku=t=>(e,s,r)=>{const a=r?{...r,async:!1}:{async:!1},l=e._zod.run({value:s,issues:[]},a);if(l instanceof Promise)throw new mo;return l.issues.length?{success:!1,error:new(t??KS)(l.issues.map(c=>pi(c,a,fi())))}:{success:!0,data:l.value}},_O=Ku(ZS),Zu=t=>async(e,s,r)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:s,issues:[]},a);return l instanceof Promise&&(l=await l),l.issues.length?{success:!1,error:new t(l.issues.map(c=>pi(c,a,fi())))}:{success:!0,data:l.value}},RO=Zu(ZS),MO=t=>(e,s,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Eg(t)(e,s,a)},DO=t=>(e,s,r)=>Eg(t)(e,s,r),IO=t=>async(e,s,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Pg(t)(e,s,a)},LO=t=>async(e,s,r)=>Pg(t)(e,s,r),OO=t=>(e,s,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ku(t)(e,s,a)},FO=t=>(e,s,r)=>Ku(t)(e,s,r),zO=t=>async(e,s,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Zu(t)(e,s,a)},$O=t=>async(e,s,r)=>Zu(t)(e,s,r),BO=/^[cC][^\s-]{8,}$/,UO=/^[0-9a-z]+$/,VO=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,WO=/^[0-9a-vA-V]{20}$/,HO=/^[A-Za-z0-9]{27}$/,GO=/^[a-zA-Z0-9_-]{21}$/,qO=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,KO=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,lw=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,ZO=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,YO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function JO(){return new RegExp(YO,"u")}const QO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XO=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,e6=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,t6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,s6=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,YS=/^[A-Za-z0-9_-]*$/,n6=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,r6=/^\+(?:[0-9]){6,14}[0-9]$/,JS="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",a6=new RegExp(`^${JS}$`);function QS(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function i6(t){return new RegExp(`^${QS(t)}$`)}function o6(t){const e=QS({precision:t.precision}),s=["Z"];t.local&&s.push(""),t.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${s.join("|")})`;return new RegExp(`^${JS}T(?:${r})$`)}const l6=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},c6=/^-?\d+$/,d6=/^-?\d+(?:\.\d+)?/,u6=/^(?:true|false)$/i,h6=/^[^A-Z]*$/,m6=/^[^a-z]*$/,Qs=xe("$ZodCheck",(t,e)=>{var s;t._zod??(t._zod={}),t._zod.def=e,(s=t._zod).onattach??(s.onattach=[])}),XS={number:"number",bigint:"bigint",object:"date"},ek=xe("$ZodCheckLessThan",(t,e)=>{Qs.init(t,e);const s=XS[typeof e.value];t._zod.onattach.push(r=>{const a=r._zod.bag,l=(e.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<l&&(e.inclusive?a.maximum=e.value:a.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:s,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),tk=xe("$ZodCheckGreaterThan",(t,e)=>{Qs.init(t,e);const s=XS[typeof e.value];t._zod.onattach.push(r=>{const a=r._zod.bag,l=(e.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>l&&(e.inclusive?a.minimum=e.value:a.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:s,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),f6=xe("$ZodCheckMultipleOf",(t,e)=>{Qs.init(t,e),t._zod.onattach.push(s=>{var r;(r=s._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=s=>{if(typeof s.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%e.value===BigInt(0):xO(s.value,e.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:e.value,input:s.value,inst:t,continue:!e.abort})}}),p6=xe("$ZodCheckNumberFormat",(t,e)=>{Qs.init(t,e),e.format=e.format||"float64";const s=e.format?.includes("int"),r=s?"int":"number",[a,l]=bO[e.format];t._zod.onattach.push(c=>{const d=c._zod.bag;d.format=e.format,d.minimum=a,d.maximum=l,s&&(d.pattern=c6)}),t._zod.check=c=>{const d=c.value;if(s){if(!Number.isInteger(d)){c.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:d,inst:t});return}if(!Number.isSafeInteger(d)){d>0?c.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):c.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}d<a&&c.issues.push({origin:"number",input:d,code:"too_small",minimum:a,inclusive:!0,inst:t,continue:!e.abort}),d>l&&c.issues.push({origin:"number",input:d,code:"too_big",maximum:l,inst:t})}}),g6=xe("$ZodCheckMaxLength",(t,e)=>{var s;Qs.init(t,e),(s=t._zod.def).when??(s.when=r=>{const a=r.value;return!kg(a)&&a.length!==void 0}),t._zod.onattach.push(r=>{const a=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<a&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const a=r.value;if(a.length<=e.maximum)return;const c=Tg(a);r.issues.push({origin:c,code:"too_big",maximum:e.maximum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),x6=xe("$ZodCheckMinLength",(t,e)=>{var s;Qs.init(t,e),(s=t._zod.def).when??(s.when=r=>{const a=r.value;return!kg(a)&&a.length!==void 0}),t._zod.onattach.push(r=>{const a=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>a&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const a=r.value;if(a.length>=e.minimum)return;const c=Tg(a);r.issues.push({origin:c,code:"too_small",minimum:e.minimum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),y6=xe("$ZodCheckLengthEquals",(t,e)=>{var s;Qs.init(t,e),(s=t._zod.def).when??(s.when=r=>{const a=r.value;return!kg(a)&&a.length!==void 0}),t._zod.onattach.push(r=>{const a=r._zod.bag;a.minimum=e.length,a.maximum=e.length,a.length=e.length}),t._zod.check=r=>{const a=r.value,l=a.length;if(l===e.length)return;const c=Tg(a),d=l>e.length;r.issues.push({origin:c,...d?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),Yu=xe("$ZodCheckStringFormat",(t,e)=>{var s,r;Qs.init(t,e),t._zod.onattach.push(a=>{const l=a._zod.bag;l.format=e.format,e.pattern&&(l.patterns??(l.patterns=new Set),l.patterns.add(e.pattern))}),e.pattern?(s=t._zod).check??(s.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),v6=xe("$ZodCheckRegex",(t,e)=>{Yu.init(t,e),t._zod.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),w6=xe("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=h6),Yu.init(t,e)}),b6=xe("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=m6),Yu.init(t,e)}),j6=xe("$ZodCheckIncludes",(t,e)=>{Qs.init(t,e);const s=qu(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${s}`:s);e.pattern=r,t._zod.onattach.push(a=>{const l=a._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(r)}),t._zod.check=a=>{a.value.includes(e.includes,e.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:a.value,inst:t,continue:!e.abort})}}),N6=xe("$ZodCheckStartsWith",(t,e)=>{Qs.init(t,e);const s=new RegExp(`^${qu(e.prefix)}.*`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),S6=xe("$ZodCheckEndsWith",(t,e)=>{Qs.init(t,e);const s=new RegExp(`.*${qu(e.suffix)}$`);e.pattern??(e.pattern=s),t._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(s)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),k6=xe("$ZodCheckOverwrite",(t,e)=>{Qs.init(t,e),t._zod.check=s=>{s.value=e.tx(s.value)}});class C6{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(c=>c),a=Math.min(...r.map(c=>c.length-c.trimStart().length)),l=r.map(c=>c.slice(a)).map(c=>" ".repeat(this.indent*2)+c);for(const c of l)this.content.push(c)}compile(){const e=Function,s=this?.args,a=[...(this?.content??[""]).map(l=>`  ${l}`)];return new e(...s,a.join(`
`))}}const T6={major:4,minor:1,patch:11},Yt=xe("$ZodType",(t,e)=>{var s;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=T6;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const l of a._zod.onattach)l(t);if(r.length===0)(s=t._zod).deferred??(s.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const a=(c,d,h)=>{let m=Xi(c),f;for(const p of d){if(p._zod.def.when){if(!p._zod.def.when(c))continue}else if(m)continue;const y=c.issues.length,N=p._zod.check(c);if(N instanceof Promise&&h?.async===!1)throw new mo;if(f||N instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await N,c.issues.length!==y&&(m||(m=Xi(c,y)))});else{if(c.issues.length===y)continue;m||(m=Xi(c,y))}}return f?f.then(()=>c):c},l=(c,d,h)=>{if(Xi(c))return c.aborted=!0,c;const m=a(d,r,h);if(m instanceof Promise){if(h.async===!1)throw new mo;return m.then(f=>t._zod.parse(f,h))}return t._zod.parse(m,h)};t._zod.run=(c,d)=>{if(d.skipChecks)return t._zod.parse(c,d);if(d.direction==="backward"){const m=t._zod.parse({value:c.value,issues:[]},{...d,skipChecks:!0});return m instanceof Promise?m.then(f=>l(f,c,d)):l(m,c,d)}const h=t._zod.parse(c,d);if(h instanceof Promise){if(d.async===!1)throw new mo;return h.then(m=>a(m,r,d))}return a(h,r,d)}}t["~standard"]={validate:a=>{try{const l=_O(t,a);return l.success?{value:l.data}:{issues:l.error?.issues}}catch{return RO(t,a).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),Ag=xe("$ZodString",(t,e)=>{Yt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??l6(t._zod.bag),t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:t}),s}}),Mt=xe("$ZodStringFormat",(t,e)=>{Yu.init(t,e),Ag.init(t,e)}),E6=xe("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=KO),Mt.init(t,e)}),P6=xe("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=lw(r))}else e.pattern??(e.pattern=lw());Mt.init(t,e)}),A6=xe("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=ZO),Mt.init(t,e)}),_6=xe("$ZodURL",(t,e)=>{Mt.init(t,e),t._zod.check=s=>{try{const r=s.value.trim(),a=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(a.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n6.source,input:s.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:s.value,inst:t,continue:!e.abort})),e.normalize?s.value=a.href:s.value=r;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:t,continue:!e.abort})}}}),R6=xe("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=JO()),Mt.init(t,e)}),M6=xe("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=GO),Mt.init(t,e)}),D6=xe("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=BO),Mt.init(t,e)}),I6=xe("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=UO),Mt.init(t,e)}),L6=xe("$ZodULID",(t,e)=>{e.pattern??(e.pattern=VO),Mt.init(t,e)}),O6=xe("$ZodXID",(t,e)=>{e.pattern??(e.pattern=WO),Mt.init(t,e)}),F6=xe("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=HO),Mt.init(t,e)}),z6=xe("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=o6(e)),Mt.init(t,e)}),$6=xe("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=a6),Mt.init(t,e)}),B6=xe("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=i6(e)),Mt.init(t,e)}),U6=xe("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=qO),Mt.init(t,e)}),V6=xe("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=QO),Mt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv4"})}),W6=xe("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=XO),Mt.init(t,e),t._zod.onattach.push(s=>{const r=s._zod.bag;r.format="ipv6"}),t._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:t,continue:!e.abort})}}}),H6=xe("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=e6),Mt.init(t,e)}),G6=xe("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=t6),Mt.init(t,e),t._zod.check=s=>{const r=s.value.split("/");try{if(r.length!==2)throw new Error;const[a,l]=r;if(!l)throw new Error;const c=Number(l);if(`${c}`!==l)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${a}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:t,continue:!e.abort})}}});function sk(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const q6=xe("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=s6),Mt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64"}),t._zod.check=s=>{sk(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:t,continue:!e.abort})}});function K6(t){if(!YS.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),s=e.padEnd(Math.ceil(e.length/4)*4,"=");return sk(s)}const Z6=xe("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=YS),Mt.init(t,e),t._zod.onattach.push(s=>{s._zod.bag.contentEncoding="base64url"}),t._zod.check=s=>{K6(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:t,continue:!e.abort})}}),Y6=xe("$ZodE164",(t,e)=>{e.pattern??(e.pattern=r6),Mt.init(t,e)});function J6(t,e=null){try{const s=t.split(".");if(s.length!==3)return!1;const[r]=s;if(!r)return!1;const a=JSON.parse(atob(r));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||e&&(!("alg"in a)||a.alg!==e))}catch{return!1}}const Q6=xe("$ZodJWT",(t,e)=>{Mt.init(t,e),t._zod.check=s=>{J6(s.value,e.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:t,continue:!e.abort})}}),nk=xe("$ZodNumber",(t,e)=>{Yt.init(t,e),t._zod.pattern=t._zod.bag.pattern??d6,t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=Number(s.value)}catch{}const a=s.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return s;const l=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:a,inst:t,...l?{received:l}:{}}),s}}),X6=xe("$ZodNumber",(t,e)=>{p6.init(t,e),nk.init(t,e)}),eF=xe("$ZodBoolean",(t,e)=>{Yt.init(t,e),t._zod.pattern=u6,t._zod.parse=(s,r)=>{if(e.coerce)try{s.value=!!s.value}catch{}const a=s.value;return typeof a=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:t}),s}}),tF=xe("$ZodUnknown",(t,e)=>{Yt.init(t,e),t._zod.parse=s=>s}),sF=xe("$ZodNever",(t,e)=>{Yt.init(t,e),t._zod.parse=(s,r)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:t}),s)});function cw(t,e,s){t.issues.length&&e.issues.push(...GS(s,t.issues)),e.value[s]=t.value}const nF=xe("$ZodArray",(t,e)=>{Yt.init(t,e),t._zod.parse=(s,r)=>{const a=s.value;if(!Array.isArray(a))return s.issues.push({expected:"array",code:"invalid_type",input:a,inst:t}),s;s.value=Array(a.length);const l=[];for(let c=0;c<a.length;c++){const d=a[c],h=e.element._zod.run({value:d,issues:[]},r);h instanceof Promise?l.push(h.then(m=>cw(m,s,c))):cw(h,s,c)}return l.length?Promise.all(l).then(()=>s):s}});function iu(t,e,s,r){t.issues.length&&e.issues.push(...GS(s,t.issues)),t.value===void 0?s in r&&(e.value[s]=void 0):e.value[s]=t.value}function rk(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const s=wO(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(s)}}function ak(t,e,s,r,a,l){const c=[],d=a.keySet,h=a.catchall._zod,m=h.def.type;for(const f of Object.keys(e)){if(d.has(f))continue;if(m==="never"){c.push(f);continue}const p=h.run({value:e[f],issues:[]},r);p instanceof Promise?t.push(p.then(y=>iu(y,s,f,e))):iu(p,s,f,e)}return c.length&&s.issues.push({code:"unrecognized_keys",keys:c,input:e,inst:l}),t.length?Promise.all(t).then(()=>s):s}const rF=xe("$ZodObject",(t,e)=>{if(Yt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const d=e.shape;Object.defineProperty(e,"shape",{get:()=>{const h={...d};return Object.defineProperty(e,"shape",{value:h}),h}})}const r=Sg(()=>rk(e));kt(t._zod,"propValues",()=>{const d=e.shape,h={};for(const m in d){const f=d[m]._zod;if(f.values){h[m]??(h[m]=new Set);for(const p of f.values)h[m].add(p)}}return h});const a=au,l=e.catchall;let c;t._zod.parse=(d,h)=>{c??(c=r.value);const m=d.value;if(!a(m))return d.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),d;d.value={};const f=[],p=c.shape;for(const y of c.keys){const w=p[y]._zod.run({value:m[y],issues:[]},h);w instanceof Promise?f.push(w.then(j=>iu(j,d,y,m))):iu(w,d,y,m)}return l?ak(f,m,d,h,r.value,t):f.length?Promise.all(f).then(()=>d):d}}),aF=xe("$ZodObjectJIT",(t,e)=>{rF.init(t,e);const s=t._zod.parse,r=Sg(()=>rk(e)),a=y=>{const N=new C6(["shape","payload","ctx"]),w=r.value,j=A=>{const k=ow(A);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};N.write("const input = payload.value;");const S=Object.create(null);let T=0;for(const A of w.keys)S[A]=`key_${T++}`;N.write("const newResult = {};");for(const A of w.keys){const k=S[A],P=ow(A);N.write(`const ${k} = ${j(A)};`),N.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        
        if (${k}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${k}.value;
        }
        
      `)}N.write("payload.value = newResult;"),N.write("return payload;");const R=N.compile();return(A,k)=>R(y,A,k)};let l;const c=au,d=!VS.jitless,m=d&&yO.value,f=e.catchall;let p;t._zod.parse=(y,N)=>{p??(p=r.value);const w=y.value;return c(w)?d&&m&&N?.async===!1&&N.jitless!==!0?(l||(l=a(e.shape)),y=l(y,N),f?ak([],w,y,N,p,t):y):s(y,N):(y.issues.push({expected:"object",code:"invalid_type",input:w,inst:t}),y)}});function dw(t,e,s,r){for(const l of t)if(l.issues.length===0)return e.value=l.value,e;const a=t.filter(l=>!Xi(l));return a.length===1?(e.value=a[0].value,a[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:s,errors:t.map(l=>l.issues.map(c=>pi(c,r,fi())))}),e)}const iF=xe("$ZodUnion",(t,e)=>{Yt.init(t,e),kt(t._zod,"optin",()=>e.options.some(a=>a._zod.optin==="optional")?"optional":void 0),kt(t._zod,"optout",()=>e.options.some(a=>a._zod.optout==="optional")?"optional":void 0),kt(t._zod,"values",()=>{if(e.options.every(a=>a._zod.values))return new Set(e.options.flatMap(a=>Array.from(a._zod.values)))}),kt(t._zod,"pattern",()=>{if(e.options.every(a=>a._zod.pattern)){const a=e.options.map(l=>l._zod.pattern);return new RegExp(`^(${a.map(l=>Cg(l.source)).join("|")})$`)}});const s=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(a,l)=>{if(s)return r(a,l);let c=!1;const d=[];for(const h of e.options){const m=h._zod.run({value:a.value,issues:[]},l);if(m instanceof Promise)d.push(m),c=!0;else{if(m.issues.length===0)return m;d.push(m)}}return c?Promise.all(d).then(h=>dw(h,a,t,l)):dw(d,a,t,l)}}),oF=xe("$ZodIntersection",(t,e)=>{Yt.init(t,e),t._zod.parse=(s,r)=>{const a=s.value,l=e.left._zod.run({value:a,issues:[]},r),c=e.right._zod.run({value:a,issues:[]},r);return l instanceof Promise||c instanceof Promise?Promise.all([l,c]).then(([h,m])=>uw(s,h,m)):uw(s,l,c)}});function dp(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(zl(t)&&zl(e)){const s=Object.keys(e),r=Object.keys(t).filter(l=>s.indexOf(l)!==-1),a={...t,...e};for(const l of r){const c=dp(t[l],e[l]);if(!c.valid)return{valid:!1,mergeErrorPath:[l,...c.mergeErrorPath]};a[l]=c.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let r=0;r<t.length;r++){const a=t[r],l=e[r],c=dp(a,l);if(!c.valid)return{valid:!1,mergeErrorPath:[r,...c.mergeErrorPath]};s.push(c.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function uw(t,e,s){if(e.issues.length&&t.issues.push(...e.issues),s.issues.length&&t.issues.push(...s.issues),Xi(t))return t;const r=dp(e.value,s.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const lF=xe("$ZodEnum",(t,e)=>{Yt.init(t,e);const s=gO(e.entries),r=new Set(s);t._zod.values=r,t._zod.pattern=new RegExp(`^(${s.filter(a=>vO.has(typeof a)).map(a=>typeof a=="string"?qu(a):a.toString()).join("|")})$`),t._zod.parse=(a,l)=>{const c=a.value;return r.has(c)||a.issues.push({code:"invalid_value",values:s,input:c,inst:t}),a}}),cF=xe("$ZodTransform",(t,e)=>{Yt.init(t,e),t._zod.parse=(s,r)=>{if(r.direction==="backward")throw new US(t.constructor.name);const a=e.transform(s.value,s);if(r.async)return(a instanceof Promise?a:Promise.resolve(a)).then(c=>(s.value=c,s));if(a instanceof Promise)throw new mo;return s.value=a,s}});function hw(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const dF=xe("$ZodOptional",(t,e)=>{Yt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",kt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),kt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Cg(s.source)})?$`):void 0}),t._zod.parse=(s,r)=>{if(e.innerType._zod.optin==="optional"){const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(l=>hw(l,s.value)):hw(a,s.value)}return s.value===void 0?s:e.innerType._zod.run(s,r)}}),uF=xe("$ZodNullable",(t,e)=>{Yt.init(t,e),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),kt(t._zod,"pattern",()=>{const s=e.innerType._zod.pattern;return s?new RegExp(`^(${Cg(s.source)}|null)$`):void 0}),kt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(s,r)=>s.value===null?s:e.innerType._zod.run(s,r)}),hF=xe("$ZodDefault",(t,e)=>{Yt.init(t,e),t._zod.optin="optional",kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{if(r.direction==="backward")return e.innerType._zod.run(s,r);if(s.value===void 0)return s.value=e.defaultValue,s;const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(l=>mw(l,e)):mw(a,e)}});function mw(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const mF=xe("$ZodPrefault",(t,e)=>{Yt.init(t,e),t._zod.optin="optional",kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>(r.direction==="backward"||s.value===void 0&&(s.value=e.defaultValue),e.innerType._zod.run(s,r))}),fF=xe("$ZodNonOptional",(t,e)=>{Yt.init(t,e),kt(t._zod,"values",()=>{const s=e.innerType._zod.values;return s?new Set([...s].filter(r=>r!==void 0)):void 0}),t._zod.parse=(s,r)=>{const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(l=>fw(l,t)):fw(a,t)}});function fw(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const pF=xe("$ZodCatch",(t,e)=>{Yt.init(t,e),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(s,r)=>{if(r.direction==="backward")return e.innerType._zod.run(s,r);const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(l=>(s.value=l.value,l.issues.length&&(s.value=e.catchValue({...s,error:{issues:l.issues.map(c=>pi(c,r,fi()))},input:s.value}),s.issues=[]),s)):(s.value=a.value,a.issues.length&&(s.value=e.catchValue({...s,error:{issues:a.issues.map(l=>pi(l,r,fi()))},input:s.value}),s.issues=[]),s)}}),gF=xe("$ZodPipe",(t,e)=>{Yt.init(t,e),kt(t._zod,"values",()=>e.in._zod.values),kt(t._zod,"optin",()=>e.in._zod.optin),kt(t._zod,"optout",()=>e.out._zod.optout),kt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(s,r)=>{if(r.direction==="backward"){const l=e.out._zod.run(s,r);return l instanceof Promise?l.then(c=>Cd(c,e.in,r)):Cd(l,e.in,r)}const a=e.in._zod.run(s,r);return a instanceof Promise?a.then(l=>Cd(l,e.out,r)):Cd(a,e.out,r)}});function Cd(t,e,s){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},s)}const xF=xe("$ZodReadonly",(t,e)=>{Yt.init(t,e),kt(t._zod,"propValues",()=>e.innerType._zod.propValues),kt(t._zod,"values",()=>e.innerType._zod.values),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(s,r)=>{if(r.direction==="backward")return e.innerType._zod.run(s,r);const a=e.innerType._zod.run(s,r);return a instanceof Promise?a.then(pw):pw(a)}});function pw(t){return t.value=Object.freeze(t.value),t}const yF=xe("$ZodCustom",(t,e)=>{Qs.init(t,e),Yt.init(t,e),t._zod.parse=(s,r)=>s,t._zod.check=s=>{const r=s.value,a=e.fn(r);if(a instanceof Promise)return a.then(l=>gw(l,s,r,t));gw(a,s,r,t)}});function gw(t,e,s,r){if(!t){const a={code:"custom",input:s,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(a.params=r._zod.def.params),e.issues.push($l(a))}}class vF{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...s){const r=s[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const s=this._map.get(e);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(e),this}get(e){const s=e._zod.parent;if(s){const r={...this.get(s)??{}};delete r.id;const a={...r,...this._map.get(e)};return Object.keys(a).length?a:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function wF(){return new vF}const Td=wF();function bF(t,e){return new t({type:"string",...Ue(e)})}function jF(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Ue(e)})}function xw(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Ue(e)})}function NF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Ue(e)})}function SF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ue(e)})}function kF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ue(e)})}function CF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ue(e)})}function TF(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Ue(e)})}function EF(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Ue(e)})}function PF(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ue(e)})}function AF(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Ue(e)})}function _F(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ue(e)})}function RF(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Ue(e)})}function MF(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Ue(e)})}function DF(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ue(e)})}function IF(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ue(e)})}function LF(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ue(e)})}function OF(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ue(e)})}function FF(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ue(e)})}function zF(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Ue(e)})}function $F(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Ue(e)})}function BF(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Ue(e)})}function UF(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Ue(e)})}function VF(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ue(e)})}function WF(t,e){return new t({type:"string",format:"date",check:"string_format",...Ue(e)})}function HF(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Ue(e)})}function GF(t,e){return new t({type:"string",format:"duration",check:"string_format",...Ue(e)})}function qF(t,e){return new t({type:"number",checks:[],...Ue(e)})}function KF(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Ue(e)})}function ZF(t,e){return new t({type:"boolean",...Ue(e)})}function YF(t){return new t({type:"unknown"})}function JF(t,e){return new t({type:"never",...Ue(e)})}function yw(t,e){return new ek({check:"less_than",...Ue(e),value:t,inclusive:!1})}function pf(t,e){return new ek({check:"less_than",...Ue(e),value:t,inclusive:!0})}function vw(t,e){return new tk({check:"greater_than",...Ue(e),value:t,inclusive:!1})}function gf(t,e){return new tk({check:"greater_than",...Ue(e),value:t,inclusive:!0})}function ww(t,e){return new f6({check:"multiple_of",...Ue(e),value:t})}function ik(t,e){return new g6({check:"max_length",...Ue(e),maximum:t})}function ou(t,e){return new x6({check:"min_length",...Ue(e),minimum:t})}function ok(t,e){return new y6({check:"length_equals",...Ue(e),length:t})}function QF(t,e){return new v6({check:"string_format",format:"regex",...Ue(e),pattern:t})}function XF(t){return new w6({check:"string_format",format:"lowercase",...Ue(t)})}function ez(t){return new b6({check:"string_format",format:"uppercase",...Ue(t)})}function tz(t,e){return new j6({check:"string_format",format:"includes",...Ue(e),includes:t})}function sz(t,e){return new N6({check:"string_format",format:"starts_with",...Ue(e),prefix:t})}function nz(t,e){return new S6({check:"string_format",format:"ends_with",...Ue(e),suffix:t})}function nc(t){return new k6({check:"overwrite",tx:t})}function rz(t){return nc(e=>e.normalize(t))}function az(){return nc(t=>t.trim())}function iz(){return nc(t=>t.toLowerCase())}function oz(){return nc(t=>t.toUpperCase())}function lz(t,e,s){return new t({type:"array",element:e,...Ue(s)})}function cz(t,e,s){return new t({type:"custom",check:"custom",fn:e,...Ue(s)})}function dz(t){const e=uz(s=>(s.addIssue=r=>{if(typeof r=="string")s.issues.push($l(r,s.value,e._zod.def));else{const a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=s.value),a.inst??(a.inst=e),a.continue??(a.continue=!e._zod.def.abort),s.issues.push($l(a))}},t(s.value,s)));return e}function uz(t,e){const s=new Qs({check:"custom",...Ue(e)});return s._zod.check=t,s}const hz=xe("ZodISODateTime",(t,e)=>{z6.init(t,e),$t.init(t,e)});function mz(t){return VF(hz,t)}const fz=xe("ZodISODate",(t,e)=>{$6.init(t,e),$t.init(t,e)});function pz(t){return WF(fz,t)}const gz=xe("ZodISOTime",(t,e)=>{B6.init(t,e),$t.init(t,e)});function xz(t){return HF(gz,t)}const yz=xe("ZodISODuration",(t,e)=>{U6.init(t,e),$t.init(t,e)});function vz(t){return GF(yz,t)}const lk=(t,e)=>{KS.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:s=>AO(t,s)},flatten:{value:s=>PO(t,s)},addIssue:{value:s=>{t.issues.push(s),t.message=JSON.stringify(t.issues,cp,2)}},addIssues:{value:s=>{t.issues.push(...s),t.message=JSON.stringify(t.issues,cp,2)}},isEmpty:{get(){return t.issues.length===0}}})},wz=xe("ZodError",lk),Rn=xe("ZodError",lk,{Parent:Error}),bz=Eg(Rn),jz=Pg(Rn),Nz=Ku(Rn),Sz=Zu(Rn),kz=MO(Rn),Cz=DO(Rn),Tz=IO(Rn),Ez=LO(Rn),Pz=OO(Rn),Az=FO(Rn),_z=zO(Rn),Rz=$O(Rn),Xt=xe("ZodType",(t,e)=>(Yt.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...s)=>t.clone(vi(e,{checks:[...e.checks??[],...s.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(s,r)=>_a(t,s,r),t.brand=()=>t,t.register=((s,r)=>(s.add(t,r),t)),t.parse=(s,r)=>bz(t,s,r,{callee:t.parse}),t.safeParse=(s,r)=>Nz(t,s,r),t.parseAsync=async(s,r)=>jz(t,s,r,{callee:t.parseAsync}),t.safeParseAsync=async(s,r)=>Sz(t,s,r),t.spa=t.safeParseAsync,t.encode=(s,r)=>kz(t,s,r),t.decode=(s,r)=>Cz(t,s,r),t.encodeAsync=async(s,r)=>Tz(t,s,r),t.decodeAsync=async(s,r)=>Ez(t,s,r),t.safeEncode=(s,r)=>Pz(t,s,r),t.safeDecode=(s,r)=>Az(t,s,r),t.safeEncodeAsync=async(s,r)=>_z(t,s,r),t.safeDecodeAsync=async(s,r)=>Rz(t,s,r),t.refine=(s,r)=>t.check(j$(s,r)),t.superRefine=s=>t.check(N$(s)),t.overwrite=s=>t.check(nc(s)),t.optional=()=>Sw(t),t.nullable=()=>kw(t),t.nullish=()=>Sw(kw(t)),t.nonoptional=s=>p$(t,s),t.array=()=>uk(t),t.or=s=>a$([t,s]),t.and=s=>o$(t,s),t.transform=s=>Cw(t,c$(s)),t.default=s=>h$(t,s),t.prefault=s=>f$(t,s),t.catch=s=>x$(t,s),t.pipe=s=>Cw(t,s),t.readonly=()=>w$(t),t.describe=s=>{const r=t.clone();return Td.add(r,{description:s}),r},Object.defineProperty(t,"description",{get(){return Td.get(t)?.description},configurable:!0}),t.meta=(...s)=>{if(s.length===0)return Td.get(t);const r=t.clone();return Td.add(r,s[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),ck=xe("_ZodString",(t,e)=>{Ag.init(t,e),Xt.init(t,e);const s=t._zod.bag;t.format=s.format??null,t.minLength=s.minimum??null,t.maxLength=s.maximum??null,t.regex=(...r)=>t.check(QF(...r)),t.includes=(...r)=>t.check(tz(...r)),t.startsWith=(...r)=>t.check(sz(...r)),t.endsWith=(...r)=>t.check(nz(...r)),t.min=(...r)=>t.check(ou(...r)),t.max=(...r)=>t.check(ik(...r)),t.length=(...r)=>t.check(ok(...r)),t.nonempty=(...r)=>t.check(ou(1,...r)),t.lowercase=r=>t.check(XF(r)),t.uppercase=r=>t.check(ez(r)),t.trim=()=>t.check(az()),t.normalize=(...r)=>t.check(rz(...r)),t.toLowerCase=()=>t.check(iz()),t.toUpperCase=()=>t.check(oz())}),Mz=xe("ZodString",(t,e)=>{Ag.init(t,e),ck.init(t,e),t.email=s=>t.check(jF(Dz,s)),t.url=s=>t.check(TF(Iz,s)),t.jwt=s=>t.check(UF(Yz,s)),t.emoji=s=>t.check(EF(Lz,s)),t.guid=s=>t.check(xw(bw,s)),t.uuid=s=>t.check(NF(Ed,s)),t.uuidv4=s=>t.check(SF(Ed,s)),t.uuidv6=s=>t.check(kF(Ed,s)),t.uuidv7=s=>t.check(CF(Ed,s)),t.nanoid=s=>t.check(PF(Oz,s)),t.guid=s=>t.check(xw(bw,s)),t.cuid=s=>t.check(AF(Fz,s)),t.cuid2=s=>t.check(_F(zz,s)),t.ulid=s=>t.check(RF($z,s)),t.base64=s=>t.check(zF(qz,s)),t.base64url=s=>t.check($F(Kz,s)),t.xid=s=>t.check(MF(Bz,s)),t.ksuid=s=>t.check(DF(Uz,s)),t.ipv4=s=>t.check(IF(Vz,s)),t.ipv6=s=>t.check(LF(Wz,s)),t.cidrv4=s=>t.check(OF(Hz,s)),t.cidrv6=s=>t.check(FF(Gz,s)),t.e164=s=>t.check(BF(Zz,s)),t.datetime=s=>t.check(mz(s)),t.date=s=>t.check(pz(s)),t.time=s=>t.check(xz(s)),t.duration=s=>t.check(vz(s))});function mt(t){return bF(Mz,t)}const $t=xe("ZodStringFormat",(t,e)=>{Mt.init(t,e),ck.init(t,e)}),Dz=xe("ZodEmail",(t,e)=>{A6.init(t,e),$t.init(t,e)}),bw=xe("ZodGUID",(t,e)=>{E6.init(t,e),$t.init(t,e)}),Ed=xe("ZodUUID",(t,e)=>{P6.init(t,e),$t.init(t,e)}),Iz=xe("ZodURL",(t,e)=>{_6.init(t,e),$t.init(t,e)}),Lz=xe("ZodEmoji",(t,e)=>{R6.init(t,e),$t.init(t,e)}),Oz=xe("ZodNanoID",(t,e)=>{M6.init(t,e),$t.init(t,e)}),Fz=xe("ZodCUID",(t,e)=>{D6.init(t,e),$t.init(t,e)}),zz=xe("ZodCUID2",(t,e)=>{I6.init(t,e),$t.init(t,e)}),$z=xe("ZodULID",(t,e)=>{L6.init(t,e),$t.init(t,e)}),Bz=xe("ZodXID",(t,e)=>{O6.init(t,e),$t.init(t,e)}),Uz=xe("ZodKSUID",(t,e)=>{F6.init(t,e),$t.init(t,e)}),Vz=xe("ZodIPv4",(t,e)=>{V6.init(t,e),$t.init(t,e)}),Wz=xe("ZodIPv6",(t,e)=>{W6.init(t,e),$t.init(t,e)}),Hz=xe("ZodCIDRv4",(t,e)=>{H6.init(t,e),$t.init(t,e)}),Gz=xe("ZodCIDRv6",(t,e)=>{G6.init(t,e),$t.init(t,e)}),qz=xe("ZodBase64",(t,e)=>{q6.init(t,e),$t.init(t,e)}),Kz=xe("ZodBase64URL",(t,e)=>{Z6.init(t,e),$t.init(t,e)}),Zz=xe("ZodE164",(t,e)=>{Y6.init(t,e),$t.init(t,e)}),Yz=xe("ZodJWT",(t,e)=>{Q6.init(t,e),$t.init(t,e)}),dk=xe("ZodNumber",(t,e)=>{nk.init(t,e),Xt.init(t,e),t.gt=(r,a)=>t.check(vw(r,a)),t.gte=(r,a)=>t.check(gf(r,a)),t.min=(r,a)=>t.check(gf(r,a)),t.lt=(r,a)=>t.check(yw(r,a)),t.lte=(r,a)=>t.check(pf(r,a)),t.max=(r,a)=>t.check(pf(r,a)),t.int=r=>t.check(jw(r)),t.safe=r=>t.check(jw(r)),t.positive=r=>t.check(vw(0,r)),t.nonnegative=r=>t.check(gf(0,r)),t.negative=r=>t.check(yw(0,r)),t.nonpositive=r=>t.check(pf(0,r)),t.multipleOf=(r,a)=>t.check(ww(r,a)),t.step=(r,a)=>t.check(ww(r,a)),t.finite=()=>t;const s=t._zod.bag;t.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),t.isFinite=!0,t.format=s.format??null});function Pr(t){return qF(dk,t)}const Jz=xe("ZodNumberFormat",(t,e)=>{X6.init(t,e),dk.init(t,e)});function jw(t){return KF(Jz,t)}const Qz=xe("ZodBoolean",(t,e)=>{eF.init(t,e),Xt.init(t,e)});function jl(t){return ZF(Qz,t)}const Xz=xe("ZodUnknown",(t,e)=>{tF.init(t,e),Xt.init(t,e)});function Nw(){return YF(Xz)}const e$=xe("ZodNever",(t,e)=>{sF.init(t,e),Xt.init(t,e)});function t$(t){return JF(e$,t)}const s$=xe("ZodArray",(t,e)=>{nF.init(t,e),Xt.init(t,e),t.element=e.element,t.min=(s,r)=>t.check(ou(s,r)),t.nonempty=s=>t.check(ou(1,s)),t.max=(s,r)=>t.check(ik(s,r)),t.length=(s,r)=>t.check(ok(s,r)),t.unwrap=()=>t.element});function uk(t,e){return lz(s$,t,e)}const n$=xe("ZodObject",(t,e)=>{aF.init(t,e),Xt.init(t,e),kt(t,"shape",()=>e.shape),t.keyof=()=>Bl(Object.keys(t._zod.def.shape)),t.catchall=s=>t.clone({...t._zod.def,catchall:s}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Nw()}),t.loose=()=>t.clone({...t._zod.def,catchall:Nw()}),t.strict=()=>t.clone({...t._zod.def,catchall:t$()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=s=>SO(t,s),t.safeExtend=s=>kO(t,s),t.merge=s=>CO(t,s),t.pick=s=>jO(t,s),t.omit=s=>NO(t,s),t.partial=(...s)=>TO(hk,t,s[0]),t.required=(...s)=>EO(mk,t,s[0])});function gs(t,e){const s={type:"object",shape:t??{},...Ue(e)};return new n$(s)}const r$=xe("ZodUnion",(t,e)=>{iF.init(t,e),Xt.init(t,e),t.options=e.options});function a$(t,e){return new r$({type:"union",options:t,...Ue(e)})}const i$=xe("ZodIntersection",(t,e)=>{oF.init(t,e),Xt.init(t,e)});function o$(t,e){return new i$({type:"intersection",left:t,right:e})}const up=xe("ZodEnum",(t,e)=>{lF.init(t,e),Xt.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const s=new Set(Object.keys(e.entries));t.extract=(r,a)=>{const l={};for(const c of r)if(s.has(c))l[c]=e.entries[c];else throw new Error(`Key ${c} not found in enum`);return new up({...e,checks:[],...Ue(a),entries:l})},t.exclude=(r,a)=>{const l={...e.entries};for(const c of r)if(s.has(c))delete l[c];else throw new Error(`Key ${c} not found in enum`);return new up({...e,checks:[],...Ue(a),entries:l})}});function Bl(t,e){const s=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new up({type:"enum",entries:s,...Ue(e)})}const l$=xe("ZodTransform",(t,e)=>{cF.init(t,e),Xt.init(t,e),t._zod.parse=(s,r)=>{if(r.direction==="backward")throw new US(t.constructor.name);s.addIssue=l=>{if(typeof l=="string")s.issues.push($l(l,s.value,e));else{const c=l;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=s.value),c.inst??(c.inst=t),s.issues.push($l(c))}};const a=e.transform(s.value,s);return a instanceof Promise?a.then(l=>(s.value=l,s)):(s.value=a,s)}});function c$(t){return new l$({type:"transform",transform:t})}const hk=xe("ZodOptional",(t,e)=>{dF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Sw(t){return new hk({type:"optional",innerType:t})}const d$=xe("ZodNullable",(t,e)=>{uF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function kw(t){return new d$({type:"nullable",innerType:t})}const u$=xe("ZodDefault",(t,e)=>{hF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function h$(t,e){return new u$({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():HS(e)}})}const m$=xe("ZodPrefault",(t,e)=>{mF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function f$(t,e){return new m$({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():HS(e)}})}const mk=xe("ZodNonOptional",(t,e)=>{fF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function p$(t,e){return new mk({type:"nonoptional",innerType:t,...Ue(e)})}const g$=xe("ZodCatch",(t,e)=>{pF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function x$(t,e){return new g$({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const y$=xe("ZodPipe",(t,e)=>{gF.init(t,e),Xt.init(t,e),t.in=e.in,t.out=e.out});function Cw(t,e){return new y$({type:"pipe",in:t,out:e})}const v$=xe("ZodReadonly",(t,e)=>{xF.init(t,e),Xt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function w$(t){return new v$({type:"readonly",innerType:t})}const b$=xe("ZodCustom",(t,e)=>{yF.init(t,e),Xt.init(t,e)});function j$(t,e={}){return cz(b$,t,e)}function N$(t){return dz(t)}gs({email:mt().min(1,"Email is required").email("Please enter a valid email address"),password:mt().min(6,"Password must be at least 6 characters").max(100,"Password is too long")});gs({email:mt().min(1,"Email is required").email("Please enter a valid email address"),password:mt().min(8,"Password must be at least 8 characters").max(100,"Password is too long").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:mt(),firstName:mt().min(1,"First name is required").max(50,"First name is too long").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters and spaces"),lastName:mt().min(1,"Last name is required").max(50,"Last name is too long").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters and spaces")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});gs({email:mt().min(1,"Email is required").email("Please enter a valid email address")});gs({token:mt().min(1,"Reset token is required"),password:mt().min(8,"Password must be at least 8 characters").max(100,"Password is too long").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:mt()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});gs({firstName:mt().min(1,"First name is required").max(50,"First name is too long").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters and spaces"),lastName:mt().min(1,"Last name is required").max(50,"Last name is too long").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters and spaces"),email:mt().min(1,"Email is required").email("Please enter a valid email address"),phoneNumber:mt().optional().refine(t=>!t||/^\+?[\d\s\-\(\)]+$/.test(t),"Please enter a valid phone number")});const S$=gs({name:mt().min(1,"Name is required").max(100,"Name is too long").regex(/^[a-zA-Z\s]+$/,"Name can only contain letters and spaces"),email:mt().min(1,"Email is required").email("Please enter a valid email address")});gs({query:mt().min(2,"Search query must be at least 2 characters").max(100,"Search query is too long").regex(/^[a-zA-Z0-9\s\-\.,#]+$/,"Search query contains invalid characters")});gs({lat:Pr().min(-90,"Invalid latitude").max(90,"Invalid latitude"),lng:Pr().min(-180,"Invalid longitude").max(180,"Invalid longitude")});const k$=gs({name:mt().min(1,"Place name is required").max(100,"Place name is too long"),address:mt().min(1,"Address is required").max(200,"Address is too long"),category:Bl(["home","work","gym","restaurant","shopping","entertainment","health","education","other"]).optional(),notes:mt().max(500,"Notes are too long").optional()});gs({defaultTransportMode:Bl(["driving","walking","transit","cycling"]).optional(),voiceGuidance:jl().optional(),avoidTolls:jl().optional(),avoidHighways:jl().optional(),avoidFerries:jl().optional(),mapStyle:mt().optional(),darkMode:jl().optional(),language:mt().min(2).max(5).optional(),units:Bl(["metric","imperial"]).optional()});gs({key:mt().min(10,"API key is too short").max(200,"API key is too long").regex(/^[a-zA-Z0-9\-_]+$/,"API key contains invalid characters")});gs({name:mt().min(1,"Name is required").max(100,"Name is too long"),email:mt().min(1,"Email is required").email("Please enter a valid email address"),subject:mt().min(1,"Subject is required").max(200,"Subject is too long"),message:mt().min(10,"Message must be at least 10 characters").max(2e3,"Message is too long")});gs({rating:Pr().min(1,"Rating must be between 1 and 5").max(5,"Rating must be between 1 and 5"),comment:mt().min(1,"Review comment is required").max(1e3,"Review is too long")});gs({from:gs({name:mt().min(1,"Starting location is required"),lat:Pr(),lng:Pr()}),to:gs({name:mt().min(1,"Destination is required"),lat:Pr(),lng:Pr()}),mode:Bl(["driving","walking","transit","cycling"]),waypoints:uk(gs({name:mt().min(1),lat:Pr(),lng:Pr()})).optional()});const fk=(t,e)=>{try{return{isValid:!0,data:e.parse(t),errors:{}}}catch(s){if(s instanceof wz){const r={};return s.errors.forEach(a=>{a.path.length>0&&(r[a.path.join(".")]=a.message)}),{isValid:!1,errors:r}}return{isValid:!1,errors:{general:"Validation failed"}}}};function C$({places:t,onLocationSelect:e,onBack:s,onAddPlace:r}){const[a,l]=x.useState("favorites"),[c,d]=x.useState(!1),[h,m]=x.useState(""),[f,p]=x.useState(""),[y,N]=x.useState("home"),[w,j]=x.useState({}),[S,T]=x.useState(t),R=B=>{switch(B){case"home":return n.jsx(Kl,{className:"w-5 h-5"});case"work":return n.jsx(Kb,{className:"w-5 h-5"});case"gym":return n.jsx(HE,{className:"w-5 h-5"});default:return n.jsx(pt,{className:"w-5 h-5"})}},A=B=>{switch(B){case"home":return"#10B981";case"work":return"#3B82F6";case"gym":return"#8B5CF6";default:return"#6B7280"}};x.useEffect(()=>{(async()=>{try{const re=(await bl.getUserPlaces()).data.map(M=>{const D=bl.formatPlace(M);return{id:D.id,name:D.name,address:D.address,lat:D.location.lat,lng:D.location.lng,category:D.category}});T(re),C.debug("Loaded saved places from backend",{count:re.length})}catch(V){C.warn("Failed to load saved places from backend, using local data",{error:V,fallbackCount:t.length}),T(t)}})()},[t]);const k=[{id:"4",name:"Starbucks Coffee",address:"123 Market St, SF",lat:37.7749,lng:-122.4194,category:"coffee"},{id:"5",name:"Golden Gate Park",address:"San Francisco, CA",lat:37.7694,lng:-122.4862,category:"park"},{id:"6",name:"Pier 39",address:"Pier 39, San Francisco, CA",lat:37.8085,lng:-122.4096,category:"tourist"}],[P,F]=x.useState([{id:"restaurants",name:"Favorite Restaurants",count:12,places:[{id:"7",name:"The French Laundry",address:"Yountville, CA",lat:38.4024,lng:-122.3618},{id:"8",name:"Atelier Crenn",address:"San Francisco, CA",lat:37.7849,lng:-122.4194}]},{id:"travel",name:"Travel Wishlist",count:8,places:[{id:"9",name:"Tokyo Tower",address:"Tokyo, Japan",lat:35.6586,lng:139.7454},{id:"10",name:"Eiffel Tower",address:"Paris, France",lat:48.8584,lng:2.2945}]}]),[W,z]=x.useState(!1),[oe,q]=x.useState(""),[J,K]=x.useState(null);return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:s,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Saved Places"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your favorite locations"})]})]})}),n.jsxs(An,{value:a,onValueChange:l,className:"flex-1 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-2",children:n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"favorites",children:"Favorites"}),n.jsx(st,{value:"recent",children:"Recent"}),n.jsx(st,{value:"lists",children:"Lists"})]})}),n.jsxs("div",{className:"flex-1 overflow-hidden min-h-0",children:[n.jsx(nt,{value:"favorites",className:"h-full p-4 overflow-y-auto scroll-y hide-scrollbar scroll-smooth mt-0",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx(ne,{className:"p-4 border-dashed border-2 border-gray-200 hover:border-gray-300 cursor-pointer transition-colors",onClick:()=>d(!0),children:n.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500 hover:text-gray-700",children:[n.jsx(ja,{className:"w-5 h-5"}),n.jsx("span",{children:"Add a new place"})]})}),S.map(B=>n.jsx(ne,{className:"p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white",style:{backgroundColor:A(B.category||"")},children:R(B.category||"")}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B.name}),n.jsx("p",{className:"text-sm text-gray-500",children:B.address})]}),n.jsx(L,{size:"icon",variant:"ghost",className:"text-gray-400 hover:text-gray-600",onClick:()=>e(B),children:n.jsx(rt,{className:"w-5 h-5"})}),n.jsx(L,{size:"icon",variant:"ghost",className:"text-gray-400 hover:text-red-600",onClick:async()=>{try{await bl.deletePlace(B.id),T(V=>V.filter(re=>re.id!==B.id)),C.success(`Deleted ${B.name} from saved places`),ue.success(`Deleted ${B.name} from saved places`)}catch(V){C.error("Failed to delete place",{error:V,placeId:B.id,placeName:B.name}),ue.error(`Failed to delete ${B.name}. Please try again.`)}},children:n.jsx(Fp,{className:"w-5 h-5"})})]})},B.id))]})}),n.jsx(nt,{value:"recent",className:"h-full p-4 overflow-y-auto scroll-y hide-scrollbar scroll-smooth mt-0",children:n.jsx("div",{className:"space-y-3",children:k.map(B=>n.jsx(ne,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e(B),children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx(xs,{className:"w-5 h-5 text-gray-500"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B.name}),n.jsx("p",{className:"text-sm text-gray-500",children:B.address}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Visited 2 hours ago"})]}),n.jsx(L,{size:"icon",variant:"ghost",className:"text-gray-400 hover:text-gray-600",onClick:V=>{V.stopPropagation(),e(B)},children:n.jsx(rt,{className:"w-5 h-5"})})]})},B.id))})}),n.jsx(nt,{value:"lists",className:"h-full p-4 overflow-y-auto scroll-y hide-scrollbar scroll-smooth mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(ne,{className:"p-4 border-dashed border-2 border-gray-200 hover:border-gray-300 cursor-pointer transition-colors",onClick:()=>z(!0),children:n.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500 hover:text-gray-700",children:[n.jsx(ja,{className:"w-5 h-5"}),n.jsx("span",{children:"Create a new list"})]})}),P.map(B=>n.jsxs(ne,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>K(B.id),children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(Ds,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:[B.count," places"]})]})]}),n.jsxs("div",{className:"space-y-2 ml-16",children:[B.places.slice(0,2).map(V=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:V.name}),n.jsx("p",{className:"text-xs text-gray-500",children:V.address})]}),n.jsx(L,{size:"icon",variant:"ghost",className:"w-8 h-8 text-gray-400 hover:text-gray-600",onClick:re=>{re.stopPropagation(),e(V)},children:n.jsx(rt,{className:"w-4 h-4"})})]},V.id)),B.count>2&&n.jsxs("p",{className:"text-xs text-gray-400",children:["+",B.count-2," more places"]})]})]},B.id))]})})]})]}),n.jsx(jn,{open:c,onOpenChange:d,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Add a new place"}),n.jsx(Cn,{children:"Save a place for quick access later."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(Ft,{placeholder:"Place name",value:h,onChange:B=>{m(B.target.value),w.name&&j(V=>({...V,name:""}))},className:w.name?"border-red-300 focus:border-red-500":""}),w.name&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.name})]}),n.jsxs("div",{children:[n.jsx(Ft,{placeholder:"Address",value:f,onChange:B=>{p(B.target.value),w.address&&j(V=>({...V,address:""}))},className:w.address?"border-red-300 focus:border-red-500":""}),w.address&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.address})]}),n.jsxs(ya,{value:y,onValueChange:N,children:[n.jsx(wa,{children:n.jsx(va,{placeholder:"Category"})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"home",children:"Home"}),n.jsx(vt,{value:"work",children:"Work"}),n.jsx(vt,{value:"gym",children:"Gym"}),n.jsx(vt,{value:"other",children:"Other"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),n.jsx(L,{onClick:async()=>{const B=fk({name:h,address:f,category:y},k$);if(!B.isValid){j(B.errors);const V=Object.values(B.errors)[0];ue.error(V);return}j({});try{const V=await bl.savePlace({googlePlaceId:`manual_${Date.now()}`,name:h.trim(),address:f.trim(),location:{lat:0,lng:0},category:y}),re=bl.formatPlace(V.place),M={id:re.id,name:re.name,address:re.address,lat:re.location.lat,lng:re.location.lng,category:re.category};T(D=>[M,...D]),C.success(`Saved ${h} to your places`),ue.success(`Saved ${h} to your places`)}catch(V){C.warn("Failed to save place to backend, saving locally",{error:V,placeName:h}),ue.error("Failed to sync with server. Saved locally.");const re={id:Date.now().toString(),name:h.trim(),address:f.trim(),lat:0,lng:0,category:y==="other"?void 0:y};r(re),T(M=>[re,...M]),C.info("Place saved locally - will sync when online"),ue.success(`${h} saved locally`)}m(""),p(""),N("home"),d(!1)},children:"Save Place"})]})]})]})}),n.jsx(jn,{open:W,onOpenChange:z,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Create a new list"}),n.jsx(Cn,{children:"Organize places into custom lists."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ft,{placeholder:"List name",value:oe,onChange:B=>q(B.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>z(!1),children:"Cancel"}),n.jsx(L,{onClick:()=>{if(!oe.trim())return;const B=oe.trim().toLowerCase().replace(/\s+/g,"-");F(V=>[...V,{id:B,name:oe.trim(),count:0,places:[]}]),q(""),z(!1)},children:"Create List"})]})]})]})}),n.jsx(jn,{open:!!J,onOpenChange:B=>!B&&K(null),children:n.jsx(Nn,{children:(()=>{const B=P.find(V=>V.id===J);return B?n.jsxs(n.Fragment,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:B.name}),n.jsxs(Cn,{children:[B.count," places"]})]}),n.jsxs("div",{className:"space-y-3",children:[B.places.map(V=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.name}),n.jsx("p",{className:"text-xs text-gray-500",children:V.address})]}),n.jsxs(L,{size:"sm",variant:"outline",onClick:()=>e(V),children:[n.jsx(rt,{className:"w-4 h-4 mr-2"})," Navigate"]})]},V.id)),B.places.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No places yet."})]})]}):null})()})})]})}class T${gtfsEndpoints=new Map([["NYC-MTA","https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs"],["SF-MUNI","https://gtfs.sfmta.com/transitdata/google_transit.zip"],["LA-METRO","https://gitlab.com/LACMTA/gtfs_bus/-/raw/master/gtfs_bus.zip"],["DC-WMATA","https://opendata.dc.gov/datasets/wmata-gtfs.zip"],["LONDON-TFL","https://tfl.gov.uk/tfl/syndication/feeds/gtfs.zip"],["TORONTO-TTC","https://opendata.toronto.ca/dataset/ttc-routes-and-schedules/resource/e271cdae-8788-4980-96ce-6a5c95bc6618/download/gtfs.zip"],["TRANSIT_LAND","https://api.transitland.org/api/v2"]]);realtimeEndpoints=new Map([["NYC-MTA","https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-si"],["SF-MUNI","https://retro.umoiq.com/service/publicXMLFeed?command=predictions&a=sf-muni"],["LA-METRO","https://api.metro.net/agencies/lametro/routes/"],["DC-WMATA","https://api.wmata.com/StationPrediction.svc/json/GetPrediction/"],["LONDON-TFL","https://api.tfl.gov.uk/Line/Mode/tube,bus/Arrivals"]]);cache=new Map;cacheTTL={stops:1440*60*1e3,routes:1440*60*1e3,schedules:3600*1e3,realtime:30*1e3,alerts:300*1e3,gtfsData:10080*60*1e3};activeAgencies=new Set;gtfsDatabase=null;async initialize(e={}){await this.initializeGTFSDatabase(),e.location&&(await this.detectLocalAgencies(e.location)).forEach(r=>this.activeAgencies.add(r)),e.agencies&&e.agencies.forEach(s=>this.activeAgencies.add(s)),this.activeAgencies.size===0&&this.activeAgencies.add("TRANSIT_LAND"),e.customEndpoints&&e.customEndpoints.forEach((s,r)=>{this.gtfsEndpoints.set(r,s)}),await this.loadGTFSDataForAgencies(),this.startRealtimeUpdates()}async initializeGTFSDatabase(){return new Promise((e,s)=>{const r=indexedDB.open("GTFSDatabase",2);r.onerror=()=>s(r.error),r.onsuccess=()=>{this.gtfsDatabase=r.result,e()},r.onupgradeneeded=a=>{const l=a.target.result;if(!l.objectStoreNames.contains("stops")){const c=l.createObjectStore("stops",{keyPath:"stop_id"});c.createIndex("agency","agency_id",{unique:!1}),c.createIndex("location",["stop_lat","stop_lon"],{unique:!1})}if(!l.objectStoreNames.contains("routes")){const c=l.createObjectStore("routes",{keyPath:"route_id"});c.createIndex("agency","agency_id",{unique:!1}),c.createIndex("type","route_type",{unique:!1})}if(!l.objectStoreNames.contains("trips")){const c=l.createObjectStore("trips",{keyPath:"trip_id"});c.createIndex("route","route_id",{unique:!1}),c.createIndex("service","service_id",{unique:!1})}if(!l.objectStoreNames.contains("stop_times")){const c=l.createObjectStore("stop_times",{keyPath:["trip_id","stop_sequence"]});c.createIndex("trip","trip_id",{unique:!1}),c.createIndex("stop","stop_id",{unique:!1})}if(l.objectStoreNames.contains("calendar")||l.createObjectStore("calendar",{keyPath:"service_id"}),l.objectStoreNames.contains("agencies")||l.createObjectStore("agencies",{keyPath:"agency_id"}),!l.objectStoreNames.contains("realtime_updates")){const c=l.createObjectStore("realtime_updates",{keyPath:"id"});c.createIndex("trip","trip_id",{unique:!1}),c.createIndex("timestamp","timestamp",{unique:!1})}if(!l.objectStoreNames.contains("alerts")){const c=l.createObjectStore("alerts",{keyPath:"id"});c.createIndex("route","route_id",{unique:!1,multiEntry:!0}),c.createIndex("stop","stop_id",{unique:!1,multiEntry:!0})}}})}async loadGTFSDataForAgencies(){const e=Array.from(this.activeAgencies).map(async s=>{try{const r=await this.getAgencyDataTimestamp(s),a=Date.now();(!r||a-r>this.cacheTTL.gtfsData)&&await this.downloadAndStoreGTFSData(s)}catch(r){console.warn(`Failed to load GTFS data for ${s}:`,r)}});await Promise.allSettled(e)}async downloadAndStoreGTFSData(e){const s=this.gtfsEndpoints.get(e);if(!s)throw new Error(`No endpoint configured for agency: ${e}`);try{e==="TRANSIT_LAND"?await this.loadTransitLandData(s):await this.downloadGTFSZip(e,s),await this.updateAgencyDataTimestamp(e,Date.now())}catch(r){throw console.error(`Failed to download GTFS data for ${e}:`,r),r}}async planTrip(e,s,r={}){const a=`trip_${e.lat}_${e.lng}_${s.lat}_${s.lng}_${JSON.stringify(r)}`,l=this.getFromCache(a,this.cacheTTL.schedules);if(l)return l;try{const c=await this.planTripWithORS(e,s,r);if(c.length>0)return this.setCache(a,c),c}catch(c){this.logError("ors_transit_failed","OpenRouteService transit planning failed",{error:c.message})}try{const c=await this.planTripWithGTFS(e,s,r);return this.setCache(a,c),c}catch{return this.generateFallbackItineraries(e,s,r)}}async planTripWithORS(e,s,r){return[]}async planTripWithGTFS(e,s,r){const a=await this.findNearbyStops(e,r.maxWalkDistance||500),l=await this.findNearbyStops(s,r.maxWalkDistance||500);if(a.length===0||l.length===0)throw new Error("No transit stops found nearby");const c=[];for(const d of a.slice(0,3))for(const h of l.slice(0,3)){const m=await this.findRoutesBetweenStops(d,h,r);c.push(...m)}return c.sort((d,h)=>d.duration-h.duration).slice(0,3)}async findNearbyStops(e,s=500){const r=`stops_${e.lat}_${e.lng}_${s}`,a=this.getFromCache(r,this.cacheTTL.stops);if(a)return a;try{const l=await this.findNearbyStopsFromGTFS(e,s);if(l.length>0)return this.setCache(r,l),l;const c=await this.fetchStopsFromTransitLand(e,s);return c.length>0?(this.setCache(r,c),c):await this.fetchStopsFromMultipleSources(e,s)}catch(l){return console.warn("All transit stop sources failed:",l),this.generateMockNearbyStops(e,s)}}async findNearbyStopsFromGTFS(e,s){if(!this.gtfsDatabase)return[];const a=this.gtfsDatabase.transaction(["stops"],"readonly").objectStore("stops");return new Promise((l,c)=>{const d=[],h=a.openCursor();h.onsuccess=m=>{const f=m.target.result;if(f){const p=f.value;this.calculateDistance(e.lat,e.lng,parseFloat(p.stop_lat),parseFloat(p.stop_lon))*1e3<=s&&d.push({id:p.stop_id,name:p.stop_name,lat:parseFloat(p.stop_lat),lng:parseFloat(p.stop_lon),code:p.stop_code,wheelchair_boarding:p.wheelchair_boarding||0}),f.continue()}else d.sort((p,y)=>{const N=this.calculateDistance(e.lat,e.lng,p.lat,p.lng),w=this.calculateDistance(e.lat,e.lng,y.lat,y.lng);return N-w}),l(d.slice(0,10))},h.onerror=()=>c(h.error)})}async fetchStopsFromTransitLand(e,s){try{const r=s/1e3,a=await fetch(`https://api.transitland.org/api/v2/stops?lat=${e.lat}&lon=${e.lng}&radius=${r}&limit=10`);if(!a.ok)throw new Error(`Transit.land API error: ${a.status}`);return(await a.json()).stops?.map(c=>({id:c.onestop_id,name:c.stop_name,lat:c.geometry.coordinates[1],lng:c.geometry.coordinates[0],code:c.stop_code,wheelchair_boarding:c.wheelchair_boarding||0}))||[]}catch(r){return console.warn("Transit.land stops fetch failed:",r),[]}}async fetchStopsFromMultipleSources(e,s){const r=[`https://api.transitland.org/api/v2/stops?lat=${e.lat}&lon=${e.lng}&radius=${s/1e3}`];for(const a of r)try{const l=await fetch(a);if(l.ok){const c=await l.json();if(c.stops&&c.stops.length>0)return this.normalizeStopsData(c.stops)}}catch{continue}return[]}async getDepartures(e,s=10){const r=`departures_${e}_${s}`,a=this.getFromCache(r,this.cacheTTL.realtime);if(a)return a;try{const l=await this.getRealtimeData(e),c=await this.getScheduledDepartures(e,s),d=this.mergeRealtimeData(c,l);return this.setCache(r,d),d}catch{return this.generateMockDepartures(e,s)}}async getAlerts(e,s){const r=`alerts_${e?.join(",")||"all"}_${s?.join(",")||"all"}`,a=this.getFromCache(r,this.cacheTTL.alerts);if(a)return a;try{const l=await fetch(`${this.gtfsEndpoint}/alerts`);if(!l.ok)throw new Error("Alerts API unavailable");const h=((await l.json()).alerts?.map(this.transformAlert)||[]).filter(m=>e&&m.routeIds?m.routeIds.some(f=>e.includes(f)):s&&m.stopIds?m.stopIds.some(f=>s.includes(f)):!0);return this.setCache(r,h),h}catch{return this.generateMockAlerts()}}async getFareInfo(e){try{const s=await fetch(`${this.gtfsEndpoint}/routes/${e}/fares`);if(!s.ok)throw new Error("Fare API unavailable");const r=await s.json();return{regular:r.adult_price||3.25,reduced:r.senior_price||1.6,currency:r.currency||"USD",paymentMethods:r.payment_methods||["cash","card","mobile"]}}catch{return{regular:3.25,reduced:1.6,currency:"USD",paymentMethods:["cash","card","mobile"]}}}async findRoutesBetweenStops(e,s,r){try{const a=await this.findGTFSRoutesBetweenStops(e,s,r);if(a.length>0)return a;const l=await this.planTripWithTransitLand(e,s,r);if(l.length>0)return l}catch(a){console.warn("Route planning failed, using mock data:",a)}return this.generateMockItinerary(e,s,r)}async findGTFSRoutesBetweenStops(e,s,r){if(!this.gtfsDatabase)return[];const a=await this.getTripsServingStop(e.id),l=await this.getTripsServingStop(s.id),c=a.filter(h=>l.some(m=>m.trip_id===h.trip_id)),d=[];for(const h of c.slice(0,3)){const m=await this.buildItineraryFromTrip(h,e,s,r);m&&d.push(m)}if(d.length===0){const h=await this.findRoutesWithTransfer(e,s,r);d.push(...h.slice(0,2))}return d}async getRealtimeData(e){const s={updates:[],alerts:[]};for(const r of this.activeAgencies){const a=this.realtimeEndpoints.get(r);if(a)try{const l=await this.fetchRealtimeForAgency(r,a,e);s.updates.push(...l.updates),s.alerts.push(...l.alerts)}catch(l){console.warn(`Failed to fetch real-time data for ${r}:`,l)}}return s}async fetchRealtimeForAgency(e,s,r){switch(e){case"NYC-MTA":return this.fetchMTARealtimeData(s,r);case"SF-MUNI":return this.fetchMuniRealtimeData(s,r);case"LONDON-TFL":return this.fetchTFLRealtimeData(s,r);default:return this.fetchGenericGTFSRT(s,r)}}async getScheduledDepartures(e,s){if(!this.gtfsDatabase)return[];const r=this.gtfsDatabase.transaction(["stop_times","trips","routes"],"readonly"),a=r.objectStore("stop_times"),l=r.objectStore("trips"),c=r.objectStore("routes");return new Promise((d,h)=>{const m=[],p=a.index("stop").openCursor(IDBKeyRange.only(e));p.onsuccess=async y=>{const N=y.target.result;if(N&&m.length<s){const w=N.value,j=await this.getObjectFromStore(l,w.trip_id);if(j){const S=await this.getObjectFromStore(c,j.route_id);S&&m.push({stopTime:w,trip:j,route:S,scheduledDeparture:w.departure_time,estimatedDeparture:w.departure_time})}N.continue()}else d(m)},p.onerror=()=>h(p.error)})}mergeRealtimeData(e,s){const r=[];for(const a of e){const l=s.updates?.find(d=>d.trip_id===a.trip.trip_id&&d.stop_id===a.stopTime.stop_id),c={route:{id:a.route.route_id,shortName:a.route.route_short_name,longName:a.route.route_long_name,type:a.route.route_type,color:a.route.route_color||"#0078D4",textColor:a.route.route_text_color||"#FFFFFF",agency:a.route.agency_id},trip:{id:a.trip.trip_id,routeId:a.trip.route_id,headsign:a.trip.trip_headsign,direction:a.trip.direction_id||0,wheelchair_accessible:a.trip.wheelchair_accessible||0},stop:{id:a.stopTime.stop_id,name:"Stop",lat:0,lng:0,wheelchair_boarding:0},scheduledDeparture:a.scheduledDeparture,estimatedDeparture:l?.departure_time||a.scheduledDeparture,delay:l?.delay||0,platform:l?.platform,realtime:!!l};r.push(c)}return r.sort((a,l)=>{const c=this.parseTimeToMinutes(a.estimatedDeparture),d=this.parseTimeToMinutes(l.estimatedDeparture);return c-d}),r}transformAlert(e){return{id:e.id,routeIds:e.informed_entity?.map(s=>s.route_id).filter(Boolean),stopIds:e.informed_entity?.map(s=>s.stop_id).filter(Boolean),severity:e.alert?.severity_level||"INFO",cause:e.alert?.cause||"UNKNOWN_CAUSE",effect:e.alert?.effect||"UNKNOWN_EFFECT",headerText:e.alert?.header_text?.translation?.[0]?.text||"Service Alert",descriptionText:e.alert?.description_text?.translation?.[0]?.text||"",url:e.alert?.url?.translation?.[0]?.text,validFrom:new Date(e.alert?.active_period?.[0]?.start*1e3).toISOString(),validTo:e.alert?.active_period?.[0]?.end?new Date(e.alert.active_period[0].end*1e3).toISOString():void 0}}generateFallbackItineraries(e,s,r){const a=this.calculateDistance(e.lat,e.lng,s.lat,s.lng),l=Math.max(1800,a/20*60);return[{duration:l,walkTime:600,transitTime:l-900,waitingTime:300,transfers:1,fare:{total:3.25,currency:"USD",components:[{routeId:"mock_route_1",amount:3.25}]},legs:[{type:"WALK",from:{id:"origin",name:"Origin",lat:e.lat,lng:e.lng,wheelchair_boarding:1},to:{id:"stop_1",name:"Transit Stop",lat:e.lat+.001,lng:e.lng,wheelchair_boarding:1},startTime:new Date().toISOString(),endTime:new Date(Date.now()+3e5).toISOString(),duration:300,distance:400,steps:["Walk north to transit stop"]},{type:"TRANSIT",mode:"BUS",route:{id:"mock_route_1",shortName:"38",longName:"Geary Express",type:3,color:"#FF6B35",textColor:"#FFFFFF",agency:"Metro Transit"},from:{id:"stop_1",name:"Transit Stop",lat:e.lat+.001,lng:e.lng,wheelchair_boarding:1},to:{id:"stop_2",name:"Destination Stop",lat:s.lat-.001,lng:s.lng,wheelchair_boarding:1},startTime:new Date(Date.now()+6e5).toISOString(),endTime:new Date(Date.now()+l-3e5).toISOString(),duration:l-900,distance:a*1e3},{type:"WALK",from:{id:"stop_2",name:"Destination Stop",lat:s.lat-.001,lng:s.lng,wheelchair_boarding:1},to:{id:"destination",name:"Destination",lat:s.lat,lng:s.lng,wheelchair_boarding:1},startTime:new Date(Date.now()+l-3e5).toISOString(),endTime:new Date(Date.now()+l).toISOString(),duration:300,distance:200,steps:["Walk south to destination"]}],startTime:new Date().toISOString(),endTime:new Date(Date.now()+l*1e3).toISOString(),accessibility:{wheelchair:!0,visuallyImpaired:!1,hearingImpaired:!1}}]}generateMockNearbyStops(e,s){return[{id:"stop_1",name:"Main St & 1st Ave",lat:e.lat+.002,lng:e.lng+.001,code:"12345",wheelchair_boarding:1},{id:"stop_2",name:"Transit Center",lat:e.lat-.003,lng:e.lng+.002,code:"12346",wheelchair_boarding:1}]}generateMockDepartures(e,s){const r=new Date,a=[];for(let l=0;l<s;l++){const c=new Date(r.getTime()+(l+1)*3e5),d=Math.random()>.7?Math.floor(Math.random()*300):0;a.push({route:{id:`route_${l%3}`,shortName:`${38+l}`,longName:`Bus Route ${38+l}`,type:3,color:"#FF6B35",textColor:"#FFFFFF",agency:"Metro Transit"},trip:{id:`trip_${l}`,routeId:`route_${l%3}`,headsign:"Downtown",direction:0,wheelchair_accessible:1},stop:{id:e,name:"Transit Stop",lat:0,lng:0,wheelchair_boarding:1},scheduledDeparture:c.toISOString(),estimatedDeparture:new Date(c.getTime()+d*1e3).toISOString(),delay:d,platform:`Platform ${l%3+1}`,realtime:d>0})}return a}generateMockItinerary(e,s,r){const a=1800+Math.random()*900;return[{duration:a,walkTime:600,transitTime:a-900,waitingTime:300,transfers:0,legs:[{type:"WALK",from:e,to:e,startTime:new Date().toISOString(),endTime:new Date(Date.now()+3e5).toISOString(),duration:300,distance:400},{type:"TRANSIT",mode:"BUS",from:e,to:s,startTime:new Date(Date.now()+6e5).toISOString(),endTime:new Date(Date.now()+a-3e5).toISOString(),duration:a-900,distance:5e3}],startTime:new Date().toISOString(),endTime:new Date(Date.now()+a*1e3).toISOString(),accessibility:{wheelchair:!0,visuallyImpaired:!1,hearingImpaired:!1}}]}generateMockAlerts(){return[{id:"alert_1",routeIds:["route_1"],severity:"WARNING",cause:"ACCIDENT",effect:"SIGNIFICANT_DELAYS",headerText:"Service Delays",descriptionText:"Delays of up to 15 minutes due to traffic incident",validFrom:new Date().toISOString(),validTo:new Date(Date.now()+36e5).toISOString()}]}calculateDistance(e,s,r,a){const c=(r-e)*Math.PI/180,d=(a-s)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}logError(e,s,r){}getFromCache(e,s){const r=this.cache.get(e);return r&&Date.now()-r.timestamp<s?r.data:null}setCache(e,s){if(this.cache.set(e,{data:s,timestamp:Date.now()}),this.cache.size>100){const r=this.cache.keys().next().value;this.cache.delete(r)}}}const Pd=new T$;class E${gtfsDatabase=null;agencies=new Map;cache=new Map;realtimeUpdateInterval=null;CACHE_TTL={static_data:1440*60*1e3,schedules:3600*1e3,realtime:30*1e3,alerts:300*1e3};MAJOR_AGENCIES=new Map([["MTA-NYC",{agency_id:"MTA",agency_name:"Metropolitan Transportation Authority",agency_url:"https://new.mta.info",agency_timezone:"America/New_York",coverage_area:{bounds:{north:41,south:40.4,east:-73.7,west:-74.3},center:{lat:40.7128,lng:-74.006}},feeds:{static:"https://api.mta.info/mta/gtfs",realtime:"https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds",alerts:"https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/camsys%2Fsubway-alerts"}}],["SFMTA",{agency_id:"SFMTA",agency_name:"San Francisco Municipal Transportation Agency",agency_url:"https://www.sfmta.com",agency_timezone:"America/Los_Angeles",coverage_area:{bounds:{north:37.8,south:37.7,east:-122.3,west:-122.5},center:{lat:37.7749,lng:-122.4194}},feeds:{static:"https://gtfs.sfmta.com/transitdata/google_transit.zip",realtime:"https://retro.umoiq.com/service/publicJSONFeed?command=predictions&a=sf-muni"}}],["WMATA",{agency_id:"WMATA",agency_name:"Washington Metropolitan Area Transit Authority",agency_url:"https://www.wmata.com",agency_timezone:"America/New_York",coverage_area:{bounds:{north:39,south:38.8,east:-76.9,west:-77.2},center:{lat:38.9072,lng:-77.0369}},feeds:{static:"https://opendata.dc.gov/datasets/wmata-gtfs.zip",realtime:"https://api.wmata.com/gtfs-rt/gtfs-rt.pb",alerts:"https://api.wmata.com/Incidents.svc/json/Incidents"}}]]);constructor(){this.initializeDatabase()}async initialize(e={}){try{if(await this.initializeDatabase(),e.location){const s=this.detectLocalAgencies(e.location);for(const r of s)this.agencies.set(r.agency_id,r)}if(e.agencies)for(const s of e.agencies){const r=this.MAJOR_AGENCIES.get(s);r&&this.agencies.set(s,r)}e.customFeeds&&await this.loadCustomFeeds(e.customFeeds),await this.loadGTFSData(),this.startRealtimeUpdates(),C.info("Enhanced Transit Service initialized",{agencies:Array.from(this.agencies.keys()),location:e.location})}catch(s){throw C.error("Failed to initialize Enhanced Transit Service:",s),s}}async planTrip(e,s,r={}){try{C.info("Planning multimodal trip",{from:e,to:s,options:r});const a={max_walk_distance:800,max_transfers:3,wheelchair_accessible:!1,bikes_allowed:!1,max_wait_time:15,include_alternatives:!0,real_time_updates:!0,...r.service_options},l=await this.findNearbyStops(e,a.max_walk_distance),c=await this.findNearbyStops(s,a.max_walk_distance);if(l.length===0||c.length===0)return[await this.createWalkingOnlyItinerary(e,s)];const d=await this.generateTripCombinations(e,s,l,c,a,r),h=this.sortItineraries(d,r.optimize_for||"time");return(await this.applyRealtimeUpdates(h)).map(p=>this.enhanceItinerary(p,a)).slice(0,a.include_alternatives?5:1)}catch(a){throw C.error("Trip planning failed:",a),a}}async getRealtimeDepartures(e,s={}){try{const r=`departures_${e}_${JSON.stringify(s)}`,a=this.getFromCache(r);if(a)return a;const l=await this.fetchRealtimeDepartures(e,s);return this.setCache(r,l,this.CACHE_TTL.realtime),l}catch(r){return C.error("Failed to get real-time departures:",r),[]}}async getServiceAlerts(e={}){try{const s=`alerts_${JSON.stringify(e)}`,r=this.getFromCache(s);if(r)return r;const a=await this.fetchServiceAlerts(e);return this.setCache(s,a,this.CACHE_TTL.alerts),a}catch(s){return C.error("Failed to get service alerts:",s),[]}}async findNearbyStops(e,s=500){if(!this.gtfsDatabase)throw new Error("GTFS database not initialized");return new Promise((r,a)=>{const d=this.gtfsDatabase.transaction(["stops"],"readonly").objectStore("stops").getAll();d.onsuccess=()=>{const m=d.result.filter(f=>this.calculateDistance(e.lat,e.lng,f.stop_lat,f.stop_lon)<=s);m.sort((f,p)=>{const y=this.calculateDistance(e.lat,e.lng,f.stop_lat,f.stop_lon),N=this.calculateDistance(e.lat,e.lng,p.stop_lat,p.stop_lon);return y-N}),r(m.slice(0,10))},d.onerror=()=>a(d.error)})}async getRoute(e){return this.gtfsDatabase?new Promise((s,r)=>{const c=this.gtfsDatabase.transaction(["routes"],"readonly").objectStore("routes").get(e);c.onsuccess=()=>s(c.result||null),c.onerror=()=>r(c.error)}):null}async initializeDatabase(){return new Promise((e,s)=>{const r=indexedDB.open("EnhancedGTFS",3);r.onerror=()=>s(r.error),r.onsuccess=()=>{this.gtfsDatabase=r.result,e()},r.onupgradeneeded=a=>{const l=a.target.result;if(l.objectStoreNames.contains("agencies")||l.createObjectStore("agencies",{keyPath:"agency_id"}),!l.objectStoreNames.contains("stops")){const c=l.createObjectStore("stops",{keyPath:"stop_id"});c.createIndex("location",["stop_lat","stop_lon"]),c.createIndex("agency","agency_id")}if(!l.objectStoreNames.contains("routes")){const c=l.createObjectStore("routes",{keyPath:"route_id"});c.createIndex("agency","agency_id"),c.createIndex("type","route_type")}if(!l.objectStoreNames.contains("trips")){const c=l.createObjectStore("trips",{keyPath:"trip_id"});c.createIndex("route","route_id"),c.createIndex("service","service_id")}if(!l.objectStoreNames.contains("stop_times")){const c=l.createObjectStore("stop_times",{keyPath:["trip_id","stop_sequence"]});c.createIndex("trip","trip_id"),c.createIndex("stop","stop_id")}if(l.objectStoreNames.contains("calendar")||l.createObjectStore("calendar",{keyPath:"service_id"}),!l.objectStoreNames.contains("realtime_updates")){const c=l.createObjectStore("realtime_updates",{keyPath:"id"});c.createIndex("trip","trip_id"),c.createIndex("timestamp","timestamp")}if(!l.objectStoreNames.contains("alerts")){const c=l.createObjectStore("alerts",{keyPath:"id"});c.createIndex("agency","agency_id"),c.createIndex("route","route_ids",{multiEntry:!0}),c.createIndex("stop","stop_ids",{multiEntry:!0})}}})}detectLocalAgencies(e){const s=[];for(const[r,a]of this.MAJOR_AGENCIES){const l=a.coverage_area.bounds;e.lat>=l.south&&e.lat<=l.north&&e.lng>=l.west&&e.lng<=l.east&&s.push(a)}return s}async loadCustomFeeds(e){C.info("Loading custom GTFS feeds",{count:e.length})}async loadGTFSData(){for(const[e,s]of this.agencies)try{await this.loadGTFSForAgency(s)}catch(r){C.error(`Failed to load GTFS data for ${e}:`,r)}}async loadGTFSForAgency(e){C.info(`Loading GTFS data for ${e.agency_name}`)}startRealtimeUpdates(){this.realtimeUpdateInterval=window.setInterval(async()=>{await this.updateRealtimeData()},3e4)}async updateRealtimeData(){for(const[e,s]of this.agencies)if(s.feeds.realtime)try{await this.fetchAndStoreRealtimeData(s)}catch(r){C.error(`Failed to update real-time data for ${e}:`,r)}}async fetchAndStoreRealtimeData(e){C.debug(`Updating real-time data for ${e.agency_name}`)}async generateTripCombinations(e,s,r,a,l,c){const d=[];for(const h of r.slice(0,3))for(const m of a.slice(0,3))try{const f=await this.planTransitRoute(e,s,h,m,l,c);f&&d.push(f)}catch(f){C.debug("Failed to generate transit route:",f)}return d}async planTransitRoute(e,s,r,a,l,c){const d=[],h=await this.createWalkingLeg(e,{lat:r.stop_lat,lng:r.stop_lon,name:r.stop_name});d.push(h);const m=await this.createTransitLeg(r,a,l,c);if(m)d.push(m);else return null;const f=await this.createWalkingLeg({lat:a.stop_lat,lng:a.stop_lon,name:a.stop_name},s);d.push(f);const p=this.calculateItinerarySummary(d),y=this.calculateFare(d),N=this.assessAccessibility(d),w=this.calculateCarbonFootprint(d);return{legs:d,summary:p,fare:y,accessibility:N,carbon_footprint:w,confidence:.8}}async createWalkingLeg(e,s){const r=this.calculateDistance(e.lat,e.lng,s.lat,s.lng),a=Math.round(r/1.4);return{type:"WALK",start_location:e,end_location:s,start_time:new Date().toISOString(),end_time:new Date(Date.now()+a*1e3).toISOString(),duration:a,distance:r,wheelchair_accessible:!0,bikes_allowed:!0,instructions:[{text:`Walk to ${s.name||"destination"}`,distance:r,duration:a}]}}async createTransitLeg(e,s,r,a){const l=await this.findBestRoute(e,s,r);if(!l)return null;const c=1200,d=this.calculateDistance(e.stop_lat,e.stop_lon,s.stop_lat,s.stop_lon);return{type:"TRANSIT",mode:this.getTransitMode(l.route_type),route:l,from_stop:e,to_stop:s,start_location:{lat:e.stop_lat,lng:e.stop_lon},end_location:{lat:s.stop_lat,lng:s.stop_lon},start_time:new Date().toISOString(),end_time:new Date(Date.now()+c*1e3).toISOString(),duration:c,distance:d,wheelchair_accessible:!0,bikes_allowed:!1,fare:{amount:2.5,currency:"USD",payment_methods:["cash","card","mobile"]}}}async findBestRoute(e,s,r){return this.gtfsDatabase?new Promise(a=>{const d=this.gtfsDatabase.transaction(["routes"],"readonly").objectStore("routes").getAll();d.onsuccess=()=>{const h=d.result;a(h.length>0?h[0]:null)},d.onerror=()=>a(null)}):null}getTransitMode(e){return{0:"TRAM",1:"SUBWAY",2:"RAIL",3:"BUS",4:"FERRY",5:"CABLE",6:"GONDOLA",7:"FUNICULAR"}[e]||"BUS"}async createWalkingOnlyItinerary(e,s){const r=await this.createWalkingLeg(e,s);return{legs:[r],summary:{total_duration:r.duration,total_distance:r.distance,walking_distance:r.distance,transit_duration:0,waiting_time:0,transfers:0},fare:{total:0,currency:"USD",breakdown:[]},accessibility:{wheelchair_accessible:!0,bikes_allowed:!0,visual_aid_available:!1,audio_aid_available:!1},carbon_footprint:{co2_grams:0,comparison_to_car:100},confidence:1}}calculateItinerarySummary(e){return{total_duration:e.reduce((s,r)=>s+r.duration,0),total_distance:e.reduce((s,r)=>s+r.distance,0),walking_distance:e.filter(s=>s.type==="WALK").reduce((s,r)=>s+r.distance,0),transit_duration:e.filter(s=>s.type==="TRANSIT").reduce((s,r)=>s+r.duration,0),waiting_time:0,transfers:e.filter(s=>s.type==="TRANSIT").length-1}}calculateFare(e){const s=e.filter(a=>a.type==="TRANSIT"&&a.fare);return{total:s.reduce((a,l)=>a+(l.fare?.amount||0),0),currency:"USD",breakdown:s.map(a=>({agency:a.route?.agency_id||"unknown",amount:a.fare?.amount||0,type:"base"}))}}assessAccessibility(e){return{wheelchair_accessible:e.every(s=>s.wheelchair_accessible),bikes_allowed:e.every(s=>s.bikes_allowed),visual_aid_available:!1,audio_aid_available:!1}}calculateCarbonFootprint(e){const s=e.filter(c=>c.type==="TRANSIT").reduce((c,d)=>c+d.distance,0),r=s*.05,a=s*.2,l=Math.round((a-r)/a*100);return{co2_grams:Math.round(r),comparison_to_car:Math.max(0,l)}}sortItineraries(e,s){return e.sort((r,a)=>{switch(s){case"time":return r.summary.total_duration-a.summary.total_duration;case"transfers":return r.summary.transfers-a.summary.transfers;case"walking":return r.summary.walking_distance-a.summary.walking_distance;case"cost":return r.fare.total-a.fare.total;default:return r.summary.total_duration-a.summary.total_duration}})}async applyRealtimeUpdates(e){return e.map(s=>({...s,confidence:s.confidence*.9}))}enhanceItinerary(e,s){return e}async fetchRealtimeDepartures(e,s){return[]}async fetchServiceAlerts(e){return[]}calculateDistance(e,s,r,a){const c=e*Math.PI/180,d=r*Math.PI/180,h=(r-e)*Math.PI/180,m=(a-s)*Math.PI/180,f=Math.sin(h/2)*Math.sin(h/2)+Math.cos(c)*Math.cos(d)*Math.sin(m/2)*Math.sin(m/2);return 6371e3*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}getFromCache(e){const s=this.cache.get(e);return s&&s.expiry>Date.now()?s.data:(this.cache.delete(e),null)}setCache(e,s,r){this.cache.set(e,{data:s,expiry:Date.now()+r})}cleanup(){this.realtimeUpdateInterval&&(clearInterval(this.realtimeUpdateInterval),this.realtimeUpdateInterval=null),this.gtfsDatabase&&(this.gtfsDatabase.close(),this.gtfsDatabase=null),this.cache.clear()}}const xf=new E$;function P$({from:t,to:e,onBack:s,onStartNavigation:r}){const[a,l]=x.useState(0),[c,d]=x.useState("routes"),[h,m]=x.useState(!1),[f,p]=x.useState([]),[y,N]=x.useState([]),[w,j]=x.useState([]),[S,T]=x.useState([]),[R,A]=x.useState(!1),[k,P]=x.useState(null),[F,W]=x.useState(!0);x.useEffect(()=>{F&&xf.initialize({location:t?{lat:t.lat,lng:t.lng}:void 0,agencies:["MTA-NYC","SFMTA","WMATA"]})},[t,F]),x.useEffect(()=>{t&&e&&z()},[t,e]),x.useEffect(()=>{if(c==="nearby"&&!h){const V=setInterval(oe,3e4);return()=>clearInterval(V)}},[c,h]);const z=async()=>{if(!(!t||!e)){A(!0);try{if(F){const V={max_walk_distance:800,max_transfers:3,wheelchair_accessible:!1,bikes_allowed:!1,max_wait_time:15,include_alternatives:!0,real_time_updates:!0},re=await xf.planTrip({lat:t.lat,lng:t.lng,name:t.name},{lat:e.lat,lng:e.lng,name:e.name},{departure_time:new Date().toISOString(),service_options:V,optimize_for:"time"});N(re);const M=await xf.getServiceAlerts();T(M)}else{const V=await Pd.planTrip({lat:t.lat,lng:t.lng},{lat:e.lat,lng:e.lng},{departureTime:new Date().toISOString(),maxWalkDistance:800,optimize:"TIME"});p(V);const re=await Pd.getAlerts();T(re)}P(new Date)}catch(V){console.warn("Enhanced transit service failed, falling back to basic service:",V),W(!1),F&&await z()}finally{A(!1)}}},oe=async()=>{if(t)try{const V=await Pd.findNearbyStops({lat:t.lat,lng:t.lng},500);if(V.length>0){const re=await Pd.getDepartures(V[0].id,8);j(re)}}catch{}},q=async()=>{await Promise.all([z(),oe()])},J={adult:"$3.25",senior:"$1.60",youth:"$2.40",disabled:"$1.60",monthly:"$89.00",weekly:"$25.00"},K=V=>{switch(V){case"bus":return n.jsx(fa,{className:"w-5 h-5"});case"train":return n.jsx(Hm,{className:"w-5 h-5"});case"subway":return n.jsx(Hm,{className:"w-5 h-5"});case"walk":return n.jsx(rt,{className:"w-5 h-5"});default:return n.jsx(pt,{className:"w-5 h-5"})}},B=V=>{switch(V){case"bus":return"#F59E0B";case"train":return"#059669";case"subway":return"#DC2626";case"walk":return"#6B7280";default:return"#6B7280"}};return!t||!e?n.jsx("div",{className:"h-full bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(fa,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"Select a destination for transit directions"})]})}):n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:s,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Public Transit"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[t.name,"  ",e.name]})]})]})}),n.jsxs(An,{value:c,onValueChange:d,className:"flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex-shrink-0 px-4 py-2",children:[n.jsxs(_n,{className:"grid w-full grid-cols-4",children:[n.jsx(st,{value:"routes",children:"Routes"}),n.jsx(st,{value:"nearby",children:"Live"}),n.jsx(st,{value:"alerts",children:"Alerts"}),n.jsx(st,{value:"fares",children:"Fares"})]}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("div",{className:"text-xs text-gray-500",children:k&&`Updated ${k.toLocaleTimeString()}`}),n.jsxs(L,{variant:"ghost",size:"sm",onClick:q,disabled:R,className:"text-xs",children:[n.jsx(Lf,{className:`w-3 h-3 mr-1 ${R?"animate-spin":""}`}),"Refresh"]})]})]}),n.jsxs("div",{className:"flex-1 overflow-hidden min-h-0",children:[n.jsxs(nt,{value:"routes",className:"h-full flex flex-col mt-0",children:[n.jsxs("div",{className:"flex-1 p-4 space-y-3 scroll-y hide-scrollbar scroll-smooth",children:[R&&n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(Lf,{className:"w-6 h-6 animate-spin text-gray-400 mr-2"}),n.jsx("span",{className:"text-gray-500",children:"Finding routes..."})]}),!R&&f.length===0&&n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(fa,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No transit routes found"}),n.jsx(L,{variant:"ghost",size:"sm",onClick:z,className:"mt-2",children:"Try again"})]})}),f.map((V,re)=>n.jsxs(ne,{className:`p-4 cursor-pointer transition-all ${a===re?"ring-2 ring-amber-500 border-transparent bg-amber-50":"hover:shadow-md"}`,onClick:()=>l(re),children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:[Math.round(V.duration/60)," min"]}),n.jsxs(Ie,{variant:"secondary",className:"text-green-700 bg-green-100",children:["$",V.fare?.total.toFixed(2)||"3.25"]}),V.accessibility.wheelchair&&n.jsx(io,{className:"w-4 h-4 text-blue-600"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(fa,{className:"w-4 h-4"}),n.jsxs("span",{children:[Math.round(V.transitTime/60)," min"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(rt,{className:"w-4 h-4"}),n.jsxs("span",{children:[Math.round(V.walkTime/60)," min walking"]})]}),V.transfers>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(mr,{className:"w-4 h-4"}),n.jsxs("span",{children:[V.transfers," transfer",V.transfers>1?"s":""]})]})]})]})}),V.legs.some(M=>M.alerts?.length)&&n.jsx("div",{className:"mb-4",children:V.legs.flatMap(M=>M.alerts||[]).map((M,D)=>n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg mb-2",children:[n.jsx(Ar,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-yellow-800",children:M.headerText})]},D))}),n.jsx("div",{className:"space-y-3",children:V.legs.map((M,D)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:B(M.type.toLowerCase())},children:K(M.type.toLowerCase())}),n.jsx("div",{className:"flex-1 min-w-0",children:M.type==="WALK"?n.jsxs("div",{className:"text-sm text-gray-900",children:["Walk ",Math.round(M.duration/60)," min",M.steps&&M.steps.length>0&&n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:M.steps[0]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-medium text-gray-900",children:[M.route?.shortName," ",M.route?.longName]}),M.realtime_delay&&M.realtime_delay>0&&n.jsxs(Ie,{variant:"outline",className:"text-red-600 border-red-200",children:["+",Math.round(M.realtime_delay/60),"m"]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(M.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(M.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),M.trip?.headsign&&`  ${M.trip.headsign}`]})]})}),n.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(M.duration/60),"m"]})]},D))})]},`itinerary_${re}`))]}),n.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-200",children:n.jsxs(L,{className:"w-full",style:{backgroundColor:"#F59E0B"},onClick:()=>{if(f[a]){const V=f[a],re={id:`transit_${a}`,from:{name:t?.name,address:t?.address},to:{name:e?.name,address:e?.address},duration:`${Math.round(V.duration/60)} min`,totalTime:`${Math.round(V.duration/60)} min`,mode:"transit",steps:V.legs.map(M=>M.type==="WALK"?`Walk ${Math.round(M.duration/60)} minutes`:`${M.route?.shortName||"Transit"}  ${Math.round(M.duration/60)} minutes`)};r(re)}},disabled:!f[a],children:[n.jsx(fa,{className:"w-4 h-4 mr-2"}),"Start Transit Navigation"]})})]}),n.jsx(nt,{value:"nearby",className:"h-full p-4 scroll-y hide-scrollbar scroll-smooth mt-0",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Live Arrivals"}),n.jsxs(L,{variant:"ghost",size:"sm",children:[n.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Favorites"]})]}),w.length===0&&!R&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(xs,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No live departures available"}),n.jsx(L,{variant:"ghost",size:"sm",onClick:oe,className:"mt-2",children:"Refresh"})]}),w.map((V,re)=>{const M=Math.round((new Date(V.estimatedDeparture).getTime()-Date.now())/6e4),D=V.delay>60;return n.jsxs(ne,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white",style:{backgroundColor:V.route.color},children:V.route.type===3?n.jsx(fa,{className:"w-6 h-6"}):n.jsx(Hm,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs("h4",{className:"font-medium text-gray-900",children:[V.route.shortName," ",V.route.longName]}),n.jsx(Ie,{variant:"outline",className:"capitalize",children:V.route.type===3?"Bus":"Train"}),V.realtime&&n.jsx(Ie,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:"Live"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xs,{className:"w-4 h-4"}),n.jsx("span",{children:M<=0?"Now":M===1?"1 min":`${M} min`})]}),V.trip.headsign&&n.jsxs("span",{className:"text-gray-500",children:["to ",V.trip.headsign]}),n.jsx("span",{className:D?"text-red-600":"text-green-600",children:V.delay>60?`+${Math.round(V.delay/60)}m`:"On time"})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx(L,{variant:"ghost",size:"sm",children:n.jsx(Ds,{className:"w-4 h-4"})}),n.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:Math.random()>.5?n.jsx(Kd,{className:"w-4 h-4"}):n.jsx(ga,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(lo,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:"$2.75"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(io,{className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"text-gray-600",children:"Accessible"})]})]}),n.jsxs(L,{variant:"ghost",size:"sm",children:[n.jsx(mr,{className:"w-4 h-4 mr-2"}),"View Route"]})]})})]},`${V.route.id}_${re}`)}),n.jsx(ne,{className:"p-4 bg-yellow-50 border-yellow-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ar,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Service Alert"}),n.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"Weekend service changes on Red Line. Check schedule for updates."}),n.jsxs(L,{variant:"ghost",size:"sm",className:"text-yellow-700 hover:text-yellow-900 p-0",children:["Learn more",n.jsx(or,{className:"w-4 h-4 ml-1"})]})]})]})})]})}),n.jsx(nt,{value:"alerts",className:"h-full p-4 scroll-y hide-scrollbar scroll-smooth mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Service Alerts"}),n.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>m(!h),children:[h?n.jsx(ga,{className:"w-4 h-4 mr-2"}):n.jsx(Kd,{className:"w-4 h-4 mr-2"}),h?"Offline":"Live"]})]}),S.length===0&&!R&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Ar,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No active service alerts"})]}),S.map(V=>{const re=M=>{switch(M.toLowerCase()){case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";case"severe":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}};return n.jsx(ne,{className:`p-4 ${re(V.severity)}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ar,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-medium",children:V.headerText}),n.jsx(Ie,{variant:"outline",className:"capitalize text-xs",children:V.severity.toLowerCase()}),V.routeIds&&V.routeIds.length>0&&n.jsx(Ie,{variant:"outline",className:"text-xs",children:V.routeIds.join(", ")})]}),n.jsx("p",{className:"text-sm mb-3",children:V.descriptionText}),n.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Valid until: ",V.validTo?new Date(V.validTo).toLocaleDateString():"Further notice"]}),n.jsx("div",{className:"flex gap-2",children:V.url&&n.jsx(L,{variant:"ghost",size:"sm",className:"text-xs p-0",children:n.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",children:"View Details"})})})]})]})},V.id)}),h&&n.jsx(ne,{className:"p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ga,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Offline Mode"}),n.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Using cached schedules. Last updated 2 hours ago."}),n.jsx(L,{variant:"ghost",size:"sm",className:"text-blue-700 p-0",children:"Update when online"})]})]})})]})}),n.jsx(nt,{value:"fares",className:"h-full p-4 scroll-y hide-scrollbar scroll-smooth mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Fare Information"}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Single Trip"}),n.jsx("div",{className:"space-y-2",children:Object.entries(J).filter(([V])=>!["monthly","weekly"].includes(V)).map(([V,re])=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"capitalize text-gray-700",children:V}),V==="disabled"&&n.jsx(io,{className:"w-4 h-4 text-blue-600"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:re})]},V))})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Passes & Discounts"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Weekly Pass"}),n.jsx("div",{className:"text-xs text-green-600",children:"Save 20%"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:J.weekly})]}),n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-700",children:"Monthly Pass"}),n.jsx("div",{className:"text-xs text-green-600",children:"Save 35%"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:J.monthly})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Payment Methods"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(lo,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:"Transit Card"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Tap to pay on all vehicles"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(pt,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:"Mobile Wallet"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Apple Pay, Google Pay, Samsung Pay"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(lo,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:"Exact Change"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Cash accepted on buses only"})]})]})]})]})]})})]})]})]})}class A${stream=null;videoElement=null;canvas=null;context=null;isStreamActive=!1;qrCodeScanner=null;isSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}async getPermissionStatus(){if(!this.isSupported())return"unsupported";if("permissions"in navigator)try{return(await navigator.permissions.query({name:"camera"})).state}catch(e){console.warn("Camera permissions API not fully supported:",e)}try{return(await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})).getTracks().forEach(s=>s.stop()),"granted"}catch(e){return e.name==="NotAllowedError"?"denied":e.name==="NotFoundError"?"unsupported":"prompt"}}async requestPermission(e={}){if(!this.isSupported())throw new Error("Camera is not supported by this browser");try{const s={video:{width:e.width||1280,height:e.height||720,facingMode:e.facingMode||"environment"},audio:e.audio||!1};return this.stream=await navigator.mediaDevices.getUserMedia(s),"granted"}catch(s){switch(s.name){case"NotAllowedError":return"denied";case"NotFoundError":case"DevicesNotFoundError":throw new Error("No camera device found");case"NotSupportedError":case"ConstraintNotSatisfiedError":throw new Error("Camera constraints not supported");case"NotReadableError":throw new Error("Camera is already in use");default:throw new Error(`Camera error: ${s.message}`)}}}async startCamera(e,s={}){if(this.isStreamActive){console.warn("Camera is already active");return}if(await this.requestPermission(s)!=="granted"||!this.stream)throw new Error("Camera permission not granted or stream not available");this.videoElement=e,this.videoElement.srcObject=this.stream,this.videoElement.autoplay=!0,this.videoElement.playsInline=!0,this.videoElement.muted=!0,await new Promise((a,l)=>{const c=()=>{this.videoElement.removeEventListener("loadedmetadata",c),this.videoElement.removeEventListener("error",d),this.isStreamActive=!0,a()},d=h=>{this.videoElement.removeEventListener("loadedmetadata",c),this.videoElement.removeEventListener("error",d),l(new Error("Failed to start camera"))};this.videoElement.addEventListener("loadedmetadata",c),this.videoElement.addEventListener("error",d)}),this.initializeCanvas()}stopCamera(){this.stream&&(this.stream.getTracks().forEach(e=>{e.stop()}),this.stream=null),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement=null),this.isStreamActive=!1,this.canvas=null,this.context=null}isActive(){return this.isStreamActive&&this.stream!==null}async capturePhoto(e={}){if(!this.isStreamActive||!this.videoElement||!this.canvas||!this.context)throw new Error("Camera is not active");const s=this.videoElement,r=this.canvas,a=this.context;r.width=e.width||s.videoWidth,r.height=e.height||s.videoHeight,a.drawImage(s,0,0,r.width,r.height);const l=e.format||"image/jpeg",c=e.quality||.9;return r.toDataURL(l,c)}async capturePhotoAsBlob(e={}){if(!this.isStreamActive||!this.videoElement||!this.canvas||!this.context)throw new Error("Camera is not active");const s=this.videoElement,r=this.canvas,a=this.context;return r.width=e.width||s.videoWidth,r.height=e.height||s.videoHeight,a.drawImage(s,0,0,r.width,r.height),new Promise((l,c)=>{r.toBlob(d=>{d?l(d):c(new Error("Failed to capture photo as blob"))},e.format||"image/jpeg",e.quality||.9)})}async switchCamera(e="environment"){if(!this.isStreamActive||!this.videoElement)throw new Error("Camera is not active");this.stream&&this.stream.getTracks().forEach(s=>s.stop());try{const s={video:{facingMode:e},audio:!1};this.stream=await navigator.mediaDevices.getUserMedia(s),this.videoElement.srcObject=this.stream}catch(s){throw new Error(`Failed to switch camera: ${s.message}`)}}async getCameraDevices(){if(!this.isSupported())return[];try{return(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput")}catch(e){return console.error("Failed to enumerate camera devices:",e),[]}}initializeQRScanner(){}async scanQRCode(){if(!this.isStreamActive||!this.videoElement||!this.canvas||!this.context)throw new Error("Camera is not active");return null}async capturePhotoWithLocation(e,s={}){return{photoDataUrl:await this.capturePhoto(s),location:e,timestamp:Date.now()}}initializeCanvas(){this.canvas||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}async getCameraCapabilities(){if(!this.stream)return null;const e=this.stream.getVideoTracks()[0];return e&&e.getCapabilities?e.getCapabilities():null}async applyCameraSettings(e){if(!this.stream)throw new Error("Camera is not active");const s=this.stream.getVideoTracks()[0];if(s&&s.applyConstraints)try{await s.applyConstraints(e)}catch(r){throw new Error(`Failed to apply camera settings: ${r.message}`)}}}const _$=(t={})=>{const[e,s]=he.useState(!1),[r,a]=he.useState("prompt"),[l,c]=he.useState(null),[d,h]=he.useState([]),m=he.useRef(null);he.useEffect(()=>((async()=>{try{const j=await rs.getPermissionStatus();if(a(j),rs.isSupported()){const S=await rs.getCameraDevices();h(S)}}catch(j){c(j instanceof Error?j:new Error("Camera initialization failed"))}})(),()=>{rs.isActive()&&(rs.stopCamera(),s(!1))}),[]);const f=async()=>{if(!m.current)throw new Error("Video element not available");try{await rs.startCamera(m.current,t),s(!0),c(null);const w=await rs.getPermissionStatus();a(w)}catch(w){c(w instanceof Error?w:new Error("Failed to start camera")),s(!1)}},p=()=>{rs.stopCamera(),s(!1)},y=async w=>{try{return await rs.capturePhoto(w)}catch(j){throw c(j instanceof Error?j:new Error("Failed to capture photo")),j}},N=async(w="environment")=>{try{await rs.switchCamera(w),c(null)}catch(j){throw c(j instanceof Error?j:new Error("Failed to switch camera")),j}};return{videoRef:m,isActive:e,permissionStatus:r,error:l,devices:d,isSupported:rs.isSupported(),startCamera:f,stopCamera:p,capturePhoto:y,switchCamera:N,scanQRCode:rs.scanQRCode.bind(rs),capturePhotoWithLocation:rs.capturePhotoWithLocation.bind(rs)}},rs=new A$;class R${orientationSubscribers=[];motionSubscribers=[];compassSubscribers=[];batterySubscribers=[];networkSubscribers=[];isOrientationActive=!1;isMotionActive=!1;lastOrientation=null;lastMotion=null;lastBattery=null;lastNetwork=null;orientationHandler;motionHandler;battery=null;isSupported(){return{orientation:"DeviceOrientationEvent"in window,motion:"DeviceMotionEvent"in window,compass:"DeviceOrientationEvent"in window&&"webkitCompassHeading"in DeviceOrientationEvent.prototype,battery:"getBattery"in navigator||"battery"in navigator,network:"connection"in navigator||"mozConnection"in navigator||"webkitConnection"in navigator,vibration:"vibrate"in navigator}}async requestPermission(){if(typeof DeviceOrientationEvent<"u"&&"requestPermission"in DeviceOrientationEvent)try{return await DeviceOrientationEvent.requestPermission()}catch(s){return C.error("Device orientation permission request failed:",s),"denied"}const e=this.isSupported();return e.orientation||e.motion?"granted":"unsupported"}async startOrientationTracking(){if(this.isOrientationActive){C.warn("Orientation tracking is already active");return}if(!this.isSupported().orientation){C.warn("Device orientation is not supported, providing mock data"),this.provideMockOrientationData();return}try{const s=await this.requestPermission();if(s!=="granted"){C.warn(`Device sensors permission ${s}, providing mock data`),this.provideMockOrientationData();return}}catch(s){C.error("Permission request failed:",s),this.provideMockOrientationData();return}this.orientationHandler=s=>{const r={alpha:s.alpha,beta:s.beta,gamma:s.gamma,absolute:s.absolute||!1,timestamp:Date.now()};if(this.lastOrientation=r,this.orientationSubscribers.forEach(a=>{try{a(r)}catch(l){C.error("Error in orientation subscriber:",l)}}),r.alpha!==null){const a={heading:this.normalizeHeading(r.alpha),accuracy:r.absolute?5:15,timestamp:r.timestamp};this.compassSubscribers.forEach(l=>{try{l(a)}catch(c){C.error("Error in compass subscriber:",c)}})}},window.addEventListener("deviceorientation",this.orientationHandler),this.isOrientationActive=!0}async startMotionTracking(){if(this.isMotionActive){C.warn("Motion tracking is already active");return}const e=await this.requestPermission();if(e!=="granted")throw new Error(`Device sensors permission: ${e}`);if(!this.isSupported().motion)throw new Error("Device motion is not supported");this.motionHandler=s=>{const r={acceleration:{x:s.acceleration?.x||null,y:s.acceleration?.y||null,z:s.acceleration?.z||null},accelerationIncludingGravity:{x:s.accelerationIncludingGravity?.x||null,y:s.accelerationIncludingGravity?.y||null,z:s.accelerationIncludingGravity?.z||null},rotationRate:{alpha:s.rotationRate?.alpha||null,beta:s.rotationRate?.beta||null,gamma:s.rotationRate?.gamma||null},interval:s.interval||0,timestamp:Date.now()};this.lastMotion=r,this.motionSubscribers.forEach(a=>{try{a(r)}catch(l){C.error("Error in motion subscriber:",l)}})},window.addEventListener("devicemotion",this.motionHandler),this.isMotionActive=!0}stopOrientationTracking(){this.orientationHandler&&(window.removeEventListener("deviceorientation",this.orientationHandler),this.orientationHandler=void 0),this.isOrientationActive=!1,this.orientationSubscribers=[],this.compassSubscribers=[]}stopMotionTracking(){this.motionHandler&&(window.removeEventListener("devicemotion",this.motionHandler),this.motionHandler=void 0),this.isMotionActive=!1,this.motionSubscribers=[]}stopAllTracking(){this.stopOrientationTracking(),this.stopMotionTracking()}subscribeToOrientation(e){return this.orientationSubscribers.push(e),()=>{const s=this.orientationSubscribers.indexOf(e);s>-1&&this.orientationSubscribers.splice(s,1)}}subscribeToMotion(e){return this.motionSubscribers.push(e),()=>{const s=this.motionSubscribers.indexOf(e);s>-1&&this.motionSubscribers.splice(s,1)}}subscribeToCompass(e){return this.compassSubscribers.push(e),()=>{const s=this.compassSubscribers.indexOf(e);s>-1&&this.compassSubscribers.splice(s,1)}}getDeviceAttitude(){if(!this.lastOrientation)return null;const{alpha:e,beta:s,gamma:r}=this.lastOrientation;return e===null||s===null||r===null?null:{pitch:s,roll:r,yaw:e,timestamp:this.lastOrientation.timestamp}}getCompassHeading(){return!this.lastOrientation||this.lastOrientation.alpha===null?null:this.normalizeHeading(this.lastOrientation.alpha)}getScreenOrientation(){if(!this.lastOrientation)return"unknown";const{gamma:e}=this.lastOrientation;return e===null?"unknown":Math.abs(e)<45?"portrait":"landscape"}getMagneticDeclination(e,s){const r={north_america_west:15,north_america_east:-15,europe:2,asia:-5,australia:10,africa:-3,south_america:-8};return e>30&&s>-180&&s<-50?r.north_america_west:e>30&&s>-50&&s<20?r.north_america_east:e>35&&s>-10&&s<40?r.europe:e>20&&s>40&&s<180?r.asia:e>-50&&e<-10&&s>110&&s<180?r.australia:e>-40&&e<40&&s>-20&&s<50?r.africa:e>-60&&e<15&&s>-85&&s<-30?r.south_america:0}getTrueNorthHeading(e,s){const r=this.getCompassHeading();if(r===null)return null;if(e!==void 0&&s!==void 0){const a=this.getMagneticDeclination(e,s);return this.normalizeHeading(r+a)}return r}isShaking(){if(!this.lastMotion)return!1;const{acceleration:e}=this.lastMotion;return!e.x||!e.y||!e.z?!1:Math.sqrt(e.x**2+e.y**2+e.z**2)>20}getTiltAngle(){return!this.lastOrientation||this.lastOrientation.beta===null?null:Math.abs(this.lastOrientation.beta)}isDeviceLevel(e=10){const s=this.getTiltAngle();return s!==null&&s<e}getLastKnownData(){return{orientation:this.lastOrientation,motion:this.lastMotion}}normalizeHeading(e){let s=e;for(;s<0;)s+=360;for(;s>=360;)s-=360;return s}getCardinalDirection(e){const s=e||this.getCompassHeading();if(s===null)return"Unknown";const r=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],a=Math.round(s/22.5)%16;return r[a]}async startBatteryMonitoring(){if(!this.isSupported().battery)throw new Error("Battery API is not supported");try{if("getBattery"in navigator?this.battery=await navigator.getBattery():"battery"in navigator&&(this.battery=navigator.battery),this.battery){const e=()=>{const s={level:this.battery.level,charging:this.battery.charging,chargingTime:this.battery.chargingTime,dischargingTime:this.battery.dischargingTime,timestamp:Date.now()};this.lastBattery=s,this.batterySubscribers.forEach(r=>{try{r(s)}catch(a){console.error("Error in battery subscriber:",a)}})};this.battery.addEventListener("chargingchange",e),this.battery.addEventListener("levelchange",e),this.battery.addEventListener("chargingtimechange",e),this.battery.addEventListener("dischargingtimechange",e),e()}}catch(e){throw console.error("Failed to start battery monitoring:",e),e}}startNetworkMonitoring(){if(!this.isSupported().network)throw new Error("Network Information API is not supported");const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e){const s=()=>{const r={online:navigator.onLine,effectiveType:e.effectiveType||"4g",downlink:e.downlink||0,rtt:e.rtt||0,saveData:e.saveData||!1,timestamp:Date.now()};this.lastNetwork=r,this.networkSubscribers.forEach(a=>{try{a(r)}catch(l){console.error("Error in network subscriber:",l)}})};e.addEventListener("change",s),window.addEventListener("online",s),window.addEventListener("offline",s),s()}}vibrate(e){if(!this.isSupported().vibration)return console.warn("Vibration not supported, providing visual feedback"),this.provideVisualFeedback(e),!1;try{const s=navigator.vibrate(e);return s||this.provideVisualFeedback(e),s}catch(s){return console.error("Vibration failed:",s),this.provideVisualFeedback(e),!1}}provideMockOrientationData(){this.isOrientationActive=!0;const e=setInterval(()=>{if(!this.isOrientationActive){clearInterval(e);return}const s={alpha:Math.sin(Date.now()/1e4)*360,beta:Math.sin(Date.now()/5e3)*30,gamma:Math.sin(Date.now()/7e3)*30,absolute:!1,timestamp:Date.now()};this.lastOrientation=s,this.orientationSubscribers.forEach(a=>{try{a(s)}catch(l){console.error("Error in mock orientation subscriber:",l)}});const r={heading:this.normalizeHeading(s.alpha),accuracy:15,timestamp:s.timestamp};this.compassSubscribers.forEach(a=>{try{a(r)}catch(l){console.error("Error in mock compass subscriber:",l)}})},100)}provideMockMotionData(){this.isMotionActive=!0;const e=setInterval(()=>{if(!this.isMotionActive){clearInterval(e);return}const s={acceleration:{x:(Math.random()-.5)*2,y:(Math.random()-.5)*2,z:(Math.random()-.5)*2},accelerationIncludingGravity:{x:(Math.random()-.5)*20,y:(Math.random()-.5)*20,z:9.8+(Math.random()-.5)*2},rotationRate:{alpha:(Math.random()-.5)*10,beta:(Math.random()-.5)*10,gamma:(Math.random()-.5)*10},interval:16,timestamp:Date.now()};this.lastMotion=s,this.motionSubscribers.forEach(r=>{try{r(s)}catch(a){console.error("Error in mock motion subscriber:",a)}})},16)}provideVisualFeedback(e){const s=Array.isArray(e)?e:[e];let r=0;const a=()=>{if(r>=s.length)return;const l=s[r];r%2===0&&this.flashScreen(l),r++,r<s.length&&setTimeout(a,l)};a()}flashScreen(e){const s=document.createElement("div");s.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.3);
      z-index: 10000;
      pointer-events: none;
      animation: flash ${e}ms ease-out;
    `;const r=document.createElement("style");r.textContent=`
      @keyframes flash {
        0% { opacity: 1; }
        100% { opacity: 0; }
      }
    `,document.head.appendChild(r),document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s),document.head.removeChild(r)},e)}subscribeToBattery(e){return this.batterySubscribers.push(e),()=>{const s=this.batterySubscribers.indexOf(e);s>-1&&this.batterySubscribers.splice(s,1)}}subscribeToNetwork(e){return this.networkSubscribers.push(e),()=>{const s=this.networkSubscribers.indexOf(e);s>-1&&this.networkSubscribers.splice(s,1)}}getLastBatteryStatus(){return this.lastBattery}getLastNetworkStatus(){return this.lastNetwork}getTrackingStatus(){return{orientation:this.isOrientationActive,motion:this.isMotionActive}}}const M$=(t={})=>{const[e,s]=he.useState(null),[r,a]=he.useState(null),[l,c]=he.useState(null),[d,h]=he.useState("prompt"),[m,f]=he.useState(null);return he.useEffect(()=>{let p=null,y=null,N=null;const w=async()=>{try{const S=await bt.requestPermission();h(S),S==="granted"&&(t.trackOrientation&&(await bt.startOrientationTracking(),p=bt.subscribeToOrientation(T=>{s(T)}),N=bt.subscribeToCompass(T=>{c(T)})),t.trackMotion&&(await bt.startMotionTracking(),y=bt.subscribeToMotion(T=>{a(T)})))}catch(S){f(S instanceof Error?S:new Error("Sensors initialization failed"))}},j=bt.isSupported();return j.orientation||j.motion?w():h("unsupported"),()=>{p&&p(),y&&y(),N&&N(),t.trackOrientation&&bt.stopOrientationTracking(),t.trackMotion&&bt.stopMotionTracking()}},[t.trackOrientation,t.trackMotion]),{orientation:e,motion:r,compass:l,permissionStatus:d,error:m,isSupported:bt.isSupported(),getCompassHeading:bt.getCompassHeading.bind(bt),getTrueNorthHeading:bt.getTrueNorthHeading.bind(bt),getCardinalDirection:bt.getCardinalDirection.bind(bt),getDeviceAttitude:bt.getDeviceAttitude.bind(bt),isShaking:bt.isShaking.bind(bt),isDeviceLevel:bt.isDeviceLevel.bind(bt),getScreenOrientation:bt.getScreenOrientation.bind(bt)}},bt=new R$;class D${currentLocation=null;deviceHeading=null;devicePitch=0;deviceRoll=0;markers=[];directionArrow=null;isActive=!1;videoElement=null;calibrationOffset=0;stateSubscribers=[];markersSubscribers=[];directionSubscribers=[];constructor(){this.setupSensorListeners()}setupSensorListeners(){bt.subscribeToOrientation(e=>{this.deviceHeading=e.alpha,this.devicePitch=e.beta||0,this.deviceRoll=e.gamma||0,this.isActive&&this.updateARElements()}),St.subscribe(e=>{this.currentLocation=e,this.isActive&&this.updateARElements()})}isSupported(){return{camera:rs.isSupported(),sensors:bt.isSupported().orientation,location:St.isSupported()}}getViewState(){const e=this.isSupported();return{isActive:this.isActive,hasPermissions:e.camera&&e.sensors&&e.location,cameraReady:rs.isActive(),sensorsReady:this.deviceHeading!==null,locationReady:this.currentLocation!==null,calibrationStatus:this.getCalibrationStatus()}}getCalibrationStatus(){return this.deviceHeading===null?"uncalibrated":this.calibrationOffset===0&&this.isActive?"calibrating":"calibrated"}async startAR(e){if(this.isActive){console.warn("AR is already active");return}try{await rs.startCamera(e,{facingMode:"environment",width:1280,height:720}),await bt.startOrientationTracking(),await St.startTracking({enableHighAccuracy:!0,trackLocation:!0}),this.videoElement=e,this.isActive=!0,this.notifyStateChange(),console.log("AR navigation started")}catch(s){throw console.error("Failed to start AR:",s),s}}stopAR(){this.isActive&&(rs.stopCamera(),this.videoElement=null,this.isActive=!1,this.markers=[],this.directionArrow=null,this.notifyStateChange(),this.notifyMarkersChange(),this.notifyDirectionChange(),console.log("AR navigation stopped"))}setDirection(e,s,r,a){this.directionArrow={bearing:e,distance:s,instruction:r,turnAngle:a},this.notifyDirectionChange()}addMarker(e){const s={...e,isVisible:!1,screenPosition:void 0};this.markers.push(s),this.updateARElements()}removeMarker(e){this.markers=this.markers.filter(s=>s.id!==e),this.notifyMarkersChange()}clearMarkers(){this.markers=[],this.notifyMarkersChange()}updateARElements(){!this.isActive||!this.currentLocation||this.deviceHeading===null||(this.markers.forEach(e=>{const s=this.calculateScreenPosition(e.position,this.currentLocation,this.deviceHeading+this.calibrationOffset,this.devicePitch,this.deviceRoll);e.screenPosition=s,e.isVisible=s.distance<1e3}),this.notifyMarkersChange())}calculateScreenPosition(e,s,r,a,l){const c=St.calculateDistance(s,{...s,lat:e.lat,lng:e.lng}),d=St.calculateBearing(s,{...s,lat:e.lat,lng:e.lng});let h=d-r;for(;h>180;)h-=360;for(;h<-180;)h+=360;const m=window.innerWidth,f=window.innerHeight,p=m/2+h/90*(m/2),y=(e.altitude||0)-(s.altitude||0),N=Math.atan2(y,c)*(180/Math.PI),w=a+N,j=f/2-w/45*(f/4);return{x:Math.max(0,Math.min(m,p)),y:Math.max(0,Math.min(f,j)),distance:c,bearing:d}}calibrateCompass(e){this.deviceHeading!==null&&(this.calibrationOffset=e-this.deviceHeading,console.log(`Compass calibrated with offset: ${this.calibrationOffset} degrees`))}getMarkers(){return this.markers}getDirection(){return this.directionArrow}isDeviceStable(){return Math.abs(this.devicePitch)<30&&Math.abs(this.deviceRoll)<30}getDeviceOrientation(){return{heading:this.deviceHeading?this.deviceHeading+this.calibrationOffset:null,pitch:this.devicePitch,roll:this.deviceRoll,isStable:this.isDeviceStable()}}subscribeToState(e){return this.stateSubscribers.push(e),()=>{const s=this.stateSubscribers.indexOf(e);s>-1&&this.stateSubscribers.splice(s,1)}}subscribeToMarkers(e){return this.markersSubscribers.push(e),()=>{const s=this.markersSubscribers.indexOf(e);s>-1&&this.markersSubscribers.splice(s,1)}}subscribeToDirection(e){return this.directionSubscribers.push(e),()=>{const s=this.directionSubscribers.indexOf(e);s>-1&&this.directionSubscribers.splice(s,1)}}notifyStateChange(){const e=this.getViewState();this.stateSubscribers.forEach(s=>{try{s(e)}catch(r){console.error("Error in AR state subscriber:",r)}})}notifyMarkersChange(){this.markersSubscribers.forEach(e=>{try{e([...this.markers])}catch(s){console.error("Error in AR markers subscriber:",s)}})}notifyDirectionChange(){this.directionSubscribers.forEach(e=>{try{e(this.directionArrow)}catch(s){console.error("Error in AR direction subscriber:",s)}})}}const I$=()=>{const[t,e]=he.useState({isActive:!1,hasPermissions:!1,cameraReady:!1,sensorsReady:!1,locationReady:!1,calibrationStatus:"uncalibrated"}),[s,r]=he.useState([]),[a,l]=he.useState(null),[c,d]=he.useState({heading:null,pitch:0,roll:0,isStable:!0});he.useEffect(()=>{const w=rn.subscribeToState(e),j=rn.subscribeToMarkers(r),S=rn.subscribeToDirection(l),T=setInterval(()=>{d(rn.getDeviceOrientation())},100);return()=>{w(),j(),S(),clearInterval(T)}},[]);const h=async w=>{try{await rn.startAR(w)}catch(j){throw console.error("Failed to start AR:",j),j}},m=()=>{rn.stopAR()},f=w=>{rn.addMarker(w)},p=w=>{rn.removeMarker(w)},y=(w,j,S,T)=>{rn.setDirection(w,j,S,T)},N=w=>{rn.calibrateCompass(w)};return{viewState:t,markers:s,direction:a,deviceOrientation:c,isSupported:rn.isSupported(),startAR:h,stopAR:m,addMarker:f,removeMarker:p,clearMarkers:rn.clearMarkers.bind(rn),setNavigationDirection:y,calibrateCompass:N}},rn=new D$;class L${objectRecognitionWorker=null;trackingState={confidence:0,stabilityScore:0,trackingLost:!1,relocalizationProgress:0};recognizedObjects=[];persistentAnchors=new Map;trafficSignModel=null;landmarkModel=null;initialized=!1;async initialize(){if(!this.initialized)try{await this.initializeObjectRecognition(),await this.loadTrafficSignModel(),await this.loadLandmarkModel(),this.setupAdvancedTracking(),this.initialized=!0,C.info("Enhanced AR service initialized")}catch(e){throw C.error("Failed to initialize enhanced AR:",e),e}}async initializeObjectRecognition(){const e=`
      // Object Recognition Worker with TensorFlow.js
      importScripts('https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js');
      
      class ObjectRecognitionEngine {
        constructor() {
          this.models = {
            trafficSigns: null,
            landmarks: null,
            vehicles: null
          };
          this.initialized = false;
        }
        
        async initialize() {
          try {
            // Load pre-trained models (these would be actual model URLs in production)
            this.models.trafficSigns = await tf.loadLayersModel('/models/traffic-signs.json');
            this.models.landmarks = await tf.loadLayersModel('/models/landmarks.json');
            this.models.vehicles = await tf.loadLayersModel('/models/vehicles.json');
            
            this.initialized = true;
            console.log('Object recognition models loaded');
          } catch (error) {
            console.error('Failed to load models:', error);
            // Fallback to basic pattern recognition
            this.setupFallbackRecognition();
          }
        }
        
        setupFallbackRecognition() {
          // Basic pattern recognition without ML models
          this.models.trafficSigns = 'fallback';
          this.initialized = true;
        }
        
        async recognizeObjects(imageData, frameWidth, frameHeight) {
          if (!this.initialized) {
            return [];
          }
          
          const objects = [];
          
          // Traffic sign recognition
          const signs = await this.recognizeTrafficSigns(imageData, frameWidth, frameHeight);
          objects.push(...signs);
          
          // Landmark recognition  
          const landmarks = await this.recognizeLandmarks(imageData, frameWidth, frameHeight);
          objects.push(...landmarks);
          
          // Vehicle detection
          const vehicles = await this.recognizeVehicles(imageData, frameWidth, frameHeight);
          objects.push(...vehicles);
          
          return objects;
        }
        
        async recognizeTrafficSigns(imageData, width, height) {
          // Simulate traffic sign recognition
          const signs = [];
          
          // Basic color/shape detection for common signs
          const redPixels = this.countColorPixels(imageData, width, height, [255, 0, 0], 50);
          const yellowPixels = this.countColorPixels(imageData, width, height, [255, 255, 0], 50);
          
          if (redPixels > 100) {
            signs.push({
              type: 'traffic_sign',
              confidence: 0.8,
              boundingBox: { x: 100, y: 50, width: 60, height: 60 },
              metadata: { signType: 'stop_sign' }
            });
          }
          
          if (yellowPixels > 100) {
            signs.push({
              type: 'traffic_sign',
              confidence: 0.7,
              boundingBox: { x: 200, y: 80, width: 50, height: 50 },
              metadata: { signType: 'warning_sign' }
            });
          }
          
          return signs;
        }
        
        async recognizeLandmarks(imageData, width, height) {
          // Simulate landmark recognition using feature detection
          const landmarks = [];
          
          // Look for building-like structures (simplified)
          const darkPixels = this.countColorPixels(imageData, width, height, [50, 50, 50], 100);
          
          if (darkPixels > 1000) {
            landmarks.push({
              type: 'landmark',
              confidence: 0.6,
              boundingBox: { x: 50, y: 100, width: 200, height: 150 },
              metadata: { text: 'Building detected' }
            });
          }
          
          return landmarks;
        }
        
        async recognizeVehicles(imageData, width, height) {
          // Basic vehicle detection
          return []; // Would implement actual vehicle detection
        }
        
        countColorPixels(imageData, width, height, targetColor, tolerance) {
          let count = 0;
          for (let i = 0; i < imageData.length; i += 4) {
            const r = imageData[i];
            const g = imageData[i + 1];
            const b = imageData[i + 2];
            
            if (Math.abs(r - targetColor[0]) < tolerance &&
                Math.abs(g - targetColor[1]) < tolerance &&
                Math.abs(b - targetColor[2]) < tolerance) {
              count++;
            }
          }
          return count;
        }
      }
      
      const recognitionEngine = new ObjectRecognitionEngine();
      
      self.onmessage = async function(e) {
        const { type, data, id } = e.data;
        
        try {
          switch (type) {
            case 'INITIALIZE':
              await recognitionEngine.initialize();
              self.postMessage({ type: 'INITIALIZED', success: true, id });
              break;
              
            case 'RECOGNIZE_OBJECTS':
              const objects = await recognitionEngine.recognizeObjects(
                data.imageData, 
                data.width, 
                data.height
              );
              self.postMessage({ type: 'OBJECTS_RECOGNIZED', objects, id });
              break;
              
            default:
              self.postMessage({ type: 'ERROR', error: 'Unknown message type', id });
          }
        } catch (error) {
          self.postMessage({ type: 'ERROR', error: error.message, id });
        }
      };
    `,s=new Blob([e],{type:"application/javascript"});this.objectRecognitionWorker=new Worker(URL.createObjectURL(s)),await this.sendWorkerMessage("INITIALIZE",{})}async loadTrafficSignModel(){this.trafficSignModel={loaded:!0,accuracy:.9,supportedSigns:["stop","yield","speed_limit","warning"]}}async loadLandmarkModel(){this.landmarkModel={loaded:!0,accuracy:.8,supportedTypes:["building","monument","bridge","tower"]}}setupAdvancedTracking(){setInterval(()=>{this.updateTrackingState()},100)}async processFrame(e,s){if(!this.initialized||!this.objectRecognitionWorker)return[];try{const r=s.getContext("2d");if(!r)return[];s.width=e.videoWidth,s.height=e.videoHeight,r.drawImage(e,0,0);const a=r.getImageData(0,0,s.width,s.height),l=await this.sendWorkerMessage("RECOGNIZE_OBJECTS",{imageData:a.data,width:s.width,height:s.height});return this.recognizedObjects=l,l}catch(r){return C.error("Frame processing failed:",r),[]}}updateTrackingState(){const e=Date.now(),s=this.recognizedObjects.filter(r=>e-r.timestamp<1e3);this.trackingState={confidence:Math.min(1,s.length/5),stabilityScore:this.calculateStabilityScore(),trackingLost:s.length===0,relocalizationProgress:this.trackingState.trackingLost?Math.min(1,this.trackingState.relocalizationProgress+.1):0}}calculateStabilityScore(){return Math.random()*.3+.7}async createPersistentAnchor(e,s){const r=`anchor_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={id:r,worldPosition:s,lastSeen:Date.now(),confidence:1,type:e};return this.persistentAnchors.set(r,a),C.debug("Created persistent anchor",{anchorId:r,type:e}),r}updatePersistentAnchor(e,s,r){const a=this.persistentAnchors.get(e);a&&(a.worldPosition=s,a.confidence=r,a.lastSeen=Date.now())}getTrackingState(){return{...this.trackingState}}getRecognizedObjects(){return[...this.recognizedObjects]}getPersistentAnchors(){return Array.from(this.persistentAnchors.values())}placeEnhancedMarker(e,s){return{...e,occlusion:s,renderPriority:this.calculateRenderPriority(e,s),adaptiveSize:this.calculateAdaptiveSize(e),visibilityScore:this.calculateVisibilityScore(e,s)}}calculateRenderPriority(e,s){let r=1;return e.screenPosition?.distance&&(r+=1/(e.screenPosition.distance/100)),s?.occluded&&(r*=1-s.occlusionPercentage),(e.type==="direction"||e.type==="waypoint")&&(r+=2),r}calculateAdaptiveSize(e){const r=e.screenPosition?.distance||100,a=Math.max(.5,100/r),l=e.type==="direction"?1.5:1;return 1*a*l}calculateVisibilityScore(e,s){let r=1;return s?.occluded&&(r*=1-s.occlusionPercentage),e.screenPosition?.distance&&e.screenPosition.distance>1e3&&(r*=Math.max(.2,1e3/e.screenPosition.distance)),r}async sendWorkerMessage(e,s){if(!this.objectRecognitionWorker)throw new Error("Object recognition worker not initialized");return new Promise((r,a)=>{const l=Date.now().toString(),c=d=>{d.data.id===l&&(this.objectRecognitionWorker?.removeEventListener("message",c),d.data.type==="ERROR"?a(new Error(d.data.error)):r(d.data.objects||d.data))};this.objectRecognitionWorker.addEventListener("message",c),this.objectRecognitionWorker.postMessage({type:e,data:s,id:l}),setTimeout(()=>{this.objectRecognitionWorker?.removeEventListener("message",c),a(new Error("Worker message timeout"))},5e3)})}cleanup(){this.objectRecognitionWorker&&(this.objectRecognitionWorker.terminate(),this.objectRecognitionWorker=null),this.recognizedObjects=[],this.persistentAnchors.clear(),this.initialized=!1}}const Nl=new L$;function O$({route:t,onClose:e}){const{viewState:s,markers:r,direction:a,deviceOrientation:l,isSupported:c,startAR:d,stopAR:h,addMarker:m,setNavigationDirection:f,calibrateCompass:p}=I$(),{startLoading:y,stopLoading:N}=Iu(),w=x.useRef(null),j=x.useRef(null),[S,T]=x.useState(78),[R,A]=x.useState(!1),[k,P]=x.useState(!1),[F,W]=x.useState({confidence:0,stabilityScore:0,trackingLost:!1,relocalizationProgress:0}),[z,oe]=x.useState([]);return x.useEffect(()=>{const q=async()=>{if(t&&w.current&&!s.isActive){y("Starting AR camera...");try{await d(w.current);try{await Nl.initialize(),P(!0),ue.success("Enhanced AR features enabled"),C.info("Enhanced AR features initialized")}catch(J){C.warn("Enhanced AR features unavailable, using basic AR:",J)}f(45,150,"Turn right on Market St",90),m({id:"poi-1",name:"Starbucks",type:"poi",position:{lat:37.7849,lng:-122.4194},color:"#10B981",description:"Coffee shop"}),m({id:"poi-2",name:"ATM",type:"poi",position:{lat:37.7849,lng:-122.4184},color:"#3B82F6",description:"ATM machine"})}catch(J){C.error("Failed to initialize AR:",J),ue.error("Failed to initialize AR camera. Please check permissions.")}finally{N()}}};return c.camera&&c.sensors&&c.location&&q(),()=>{s.isActive&&h(),k&&Nl.cleanup()}},[t,c]),x.useEffect(()=>{if(k&&s.isActive&&w.current&&j.current){const J=setInterval(async()=>{try{const K=await Nl.processFrame(w.current,j.current);oe(K);const B=Nl.getTrackingState();W(B)}catch(K){C.error("Enhanced AR processing error:",K)}},100);return()=>clearInterval(J)}},[k,s.isActive]),x.useEffect(()=>{const q=setInterval(()=>{T(J=>Math.max(J-.1,0))},1e3);return()=>clearInterval(q)},[]),x.useEffect(()=>{s.calibrationStatus==="calibrating"&&!R&&A(!0)},[s.calibrationStatus,R]),t?!c.camera||!c.sensors||!c.location?n.jsx("div",{className:"h-full bg-black flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[n.jsx(Et,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"AR Not Supported"}),n.jsx("p",{className:"opacity-75 mb-4",children:"AR navigation requires camera, device sensors, and location access."}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{className:`flex items-center justify-between ${c.camera?"text-green-400":"text-red-400"}`,children:[n.jsx("span",{children:"Camera"}),n.jsx("span",{children:c.camera?"":""})]}),n.jsxs("div",{className:`flex items-center justify-between ${c.sensors?"text-green-400":"text-red-400"}`,children:[n.jsx("span",{children:"Device Sensors"}),n.jsx("span",{children:c.sensors?"":""})]}),n.jsxs("div",{className:`flex items-center justify-between ${c.location?"text-green-400":"text-red-400"}`,children:[n.jsx("span",{children:"Location"}),n.jsx("span",{children:c.location?"":""})]})]}),n.jsx(L,{className:"mt-4",onClick:e,variant:"outline",children:"Back to Map"})]})}):n.jsxs("div",{className:"h-full bg-black relative overflow-hidden",children:[n.jsx("video",{ref:w,className:"absolute inset-0 w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),n.jsx("canvas",{ref:j,className:"hidden",width:640,height:480}),!s.cameraReady&&n.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-white",children:[n.jsx(Hn,{className:"w-12 h-12 mx-auto mb-4 animate-pulse"}),n.jsx("p",{children:"Starting camera..."})]})}),R&&n.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-40",children:n.jsx(ne,{className:"p-6 bg-white text-black max-w-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx(OE,{className:"w-12 h-12 mx-auto mb-4 text-blue-600"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Compass Calibration"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Move your device in a figure-8 pattern to calibrate the compass for accurate AR navigation."}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-sm",children:n.jsxs("span",{children:["Heading: ",l.heading?.toFixed(0)||"--",""]})}),n.jsx("div",{className:"text-sm",children:n.jsxs("span",{children:["Status: ",s.calibrationStatus]})})]}),n.jsx(L,{className:"mt-4 w-full",onClick:()=>{p(0),A(!1)},children:"Skip Calibration"})]})})}),n.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:e,children:n.jsx(ys,{className:"w-5 h-5"})}),n.jsxs("div",{className:"text-white",children:[n.jsx("div",{className:"text-sm font-medium",children:"AR Walking"}),n.jsx("div",{className:"text-xs opacity-75",children:t.to.name})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[k&&n.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${F.trackingLost?"bg-red-500/80":"bg-green-500/80"}`,children:[n.jsx(Ll,{className:"w-3 h-3"}),n.jsx("span",{children:F.trackingLost?"Lost":Math.round(F.confidence*100)+"%"})]}),n.jsxs("div",{className:`flex items-center gap-1 text-white text-sm ${S<20?"text-red-400":""}`,children:[n.jsx(rE,{className:"w-4 h-4"}),n.jsxs("span",{children:[Math.round(S),"%"]})]}),n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>setIsARActive(!isARActive),children:isARActive?n.jsx(ii,{className:"w-5 h-5"}):n.jsx(KE,{className:"w-5 h-5"})})]})]})}),s.isActive&&a&&n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:n.jsx(rt,{className:"w-10 h-10 text-white",style:{transform:`rotate(${a.turnAngle||0}deg)`}})}),n.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-black/80 rounded-lg px-3 py-1",children:n.jsx("span",{className:"text-white text-sm font-medium",children:a.distance<1e3?`${Math.round(a.distance)}m`:`${(a.distance/1e3).toFixed(1)}km`})})]})}),a&&n.jsx(ne,{className:"absolute top-20 left-4 right-4 bg-black/80 border-gray-600 text-white z-30",children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(rt,{className:"w-6 h-6 text-blue-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:a.instruction}),n.jsxs("div",{className:"text-sm opacity-75",children:["in ",a.distance<1e3?`${Math.round(a.distance)}m`:`${(a.distance/1e3).toFixed(1)}km`]})]})]})})}),k&&s.isActive&&n.jsx("div",{className:"absolute inset-0 z-25",children:z.map(q=>n.jsxs("div",{className:"absolute pointer-events-none",style:{left:q.boundingBox.x,top:q.boundingBox.y,width:q.boundingBox.width,height:q.boundingBox.height},children:[n.jsx("div",{className:`absolute inset-0 border-2 rounded ${q.type==="traffic_sign"?"border-red-400":q.type==="landmark"?"border-blue-400":q.type==="vehicle"?"border-yellow-400":"border-green-400"}`}),n.jsxs("div",{className:`absolute -top-6 left-0 px-2 py-1 text-xs rounded ${q.type==="traffic_sign"?"bg-red-500/80":q.type==="landmark"?"bg-blue-500/80":q.type==="vehicle"?"bg-yellow-500/80":"bg-green-500/80"} text-white`,children:[q.type==="traffic_sign"&&q.metadata?.signType&&n.jsxs("span",{children:[" ",q.metadata.signType.replace("_"," ")]}),q.type==="landmark"&&n.jsxs("span",{children:[" ",q.metadata?.text||"Landmark"]}),q.type==="vehicle"&&n.jsx("span",{children:" Vehicle"}),n.jsxs("span",{className:"ml-1",children:["(",Math.round(q.confidence*100),"%)"]})]})]},q.id))}),s.isActive&&n.jsx("div",{className:"absolute inset-0 z-20",children:r.filter(q=>q.isVisible&&q.screenPosition).map(q=>n.jsxs("div",{className:"absolute pointer-events-none",style:{left:`${q.screenPosition.x}px`,top:`${q.screenPosition.y}px`,transform:"translate(-50%, -50%)"},children:[n.jsx("div",{className:"bg-white/90 rounded-lg px-3 py-2 shadow-lg",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:q.color}}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.name}),n.jsx("div",{className:"text-xs text-gray-600",children:q.screenPosition.distance<1e3?`${Math.round(q.screenPosition.distance)}m`:`${(q.screenPosition.distance/1e3).toFixed(1)}km`})]})]})}),n.jsx("div",{className:"absolute top-full left-1/2 w-px h-8 bg-white/50"})]},q.id))}),s.isActive&&!l.isStable&&n.jsx(ne,{className:"absolute top-1/4 left-4 right-4 bg-yellow-900/90 border-yellow-600 text-white z-40",children:n.jsx("div",{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Et,{className:"w-5 h-5 text-yellow-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Hold Device Steady"}),n.jsx("div",{className:"text-sm opacity-75",children:"Keep your device level for better AR tracking"})]})]})})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30",children:n.jsx(ne,{className:"m-4 bg-black/80 border-gray-600 text-white",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"AR Walking Navigation"}),n.jsx("div",{className:"text-sm opacity-75",children:"3 min remaining  0.2 mi"})]}),n.jsxs("div",{className:"flex gap-2",children:[k&&n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:async()=>{try{const q=await Nl.createPersistentAnchor("waypoint",{x:0,y:0,z:-100});ue.success("Waypoint saved"),C.info("Created waypoint anchor:",q)}catch(q){ue.error("Failed to save waypoint"),C.error("Failed to create anchor:",q)}},title:"Save Waypoint",children:n.jsx(dE,{className:"w-5 h-5"})}),n.jsx(L,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:n.jsx(Wt,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(po,{className:"w-4 h-4 text-yellow-400"}),n.jsx("span",{className:"text-sm",children:"Low Battery Mode"})]}),n.jsx(lt,{checked:S<20,onCheckedChange:()=>{},disabled:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ii,{className:"w-4 h-4 text-blue-400"}),n.jsx("span",{className:"text-sm",children:"AR Overlays"})]}),n.jsx(lt,{checked:s.isActive,onCheckedChange:q=>{q||h()}})]}),k&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ll,{className:"w-4 h-4 text-green-400"}),n.jsx("span",{className:"text-sm",children:"Object Recognition"})]}),n.jsx(lt,{checked:z.length>0,onCheckedChange:()=>{},disabled:!0})]}),n.jsxs("div",{className:"text-xs text-gray-400",children:[n.jsxs("div",{children:["Tracking: ",F.trackingLost?"":""," ",Math.round(F.confidence*100),"%"]}),n.jsxs("div",{children:["Objects: ",z.length," detected"]}),n.jsxs("div",{children:["Stability: ",Math.round(F.stabilityScore*100),"%"]})]})]})]}),n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-600",children:n.jsx(L,{variant:"outline",size:"sm",className:"w-full border-gray-600 text-white hover:bg-white/10",children:"Switch to Map View"})})]})})}),S<15&&n.jsx(ne,{className:"absolute bottom-48 left-4 right-4 bg-red-900/90 border-red-600 text-white z-40",children:n.jsx("div",{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Et,{className:"w-5 h-5 text-red-400"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Low Battery Warning"}),n.jsx("div",{className:"text-sm opacity-75",children:"AR mode will disable soon to save power"})]})]})})})]}):n.jsx("div",{className:"h-full bg-black flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-white",children:[n.jsx(Hn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"opacity-75",children:"No active route for AR navigation"})]})})}function Ju(){const[t,e]=x.useState({user:null,isAuthenticated:!0,isLoading:!1,error:null});x.useEffect(()=>{e({user:null,isAuthenticated:!0,isLoading:!1,error:null})},[]);const s=x.useCallback(async h=>(e({user:null,isAuthenticated:!0,isLoading:!1,error:null}),{user:null}),[]),r=x.useCallback(async h=>(e({user:null,isAuthenticated:!0,isLoading:!1,error:null}),{user:null}),[]),a=x.useCallback(async()=>{e({user:null,isAuthenticated:!0,isLoading:!1,error:null})},[]),l=x.useCallback(async h=>null,[]),c=x.useCallback(async(h,m)=>{},[]),d=x.useCallback(()=>{e(h=>({...h,error:null}))},[]);return{user:t.user,isAuthenticated:t.isAuthenticated,isLoading:t.isLoading,error:t.error,login:s,register:r,logout:a,updateProfile:l,changePassword:c,clearError:d}}let F$=class{async sendFriendRequest(e){return Ms("/social/friends/request",e)}async respondToFriendRequest(e,s){return ep(`/social/friends/request/${e}`,{action:s})}async getFriends(e={}){const s=new URLSearchParams;return e.status&&s.append("status",e.status),e.page&&s.append("page",e.page.toString()),e.limit&&s.append("limit",e.limit.toString()),xa(`/social/friends?${s.toString()}`)}async removeFriend(e){await vg(`/social/friends/${e}`)}async shareRoute(e){return Ms("/social/share/route",e)}async sharePlace(e){return Ms("/social/share/place",e)}async getSharedContent(e={}){const s=new URLSearchParams;return e.type&&s.append("type",e.type),e.page&&s.append("page",e.page.toString()),e.limit&&s.append("limit",e.limit.toString()),xa(`/social/shared?${s.toString()}`)}async getFriendRequests(){return(await this.getFriends({status:"PENDING"})).friends}async getAcceptedFriends(){return(await this.getFriends({status:"ACCEPTED"})).friends}async searchUsers(e){return[]}formatFriend(e,s){const r=e.requesterId===s?e.addressee:e.requester;return{id:r.id,name:`${r.firstName} ${r.lastName}`,email:r.email,avatar:r.avatar,status:e.status,isRequester:e.requesterId===s}}async getFriendStatus(e){try{const r=(await this.getFriends()).friends.find(a=>a.requesterId===e||a.addresseeId===e);return r?r.status:"NONE"}catch(s){return console.error("Error getting friend status:",s),"NONE"}}};const lu=new F$;function z$({onBack:t,onLocationSelect:e}){const{user:s,isAuthenticated:r}=Ju(),[a,l]=x.useState("feed"),[c,d]=x.useState(!1),[h,m]=x.useState([]),[f,p]=x.useState([]),[y,N]=x.useState(!1),[w,j]=x.useState(!1),[S,T]=x.useState(!1),[R,A]=x.useState(!1),[k,P]=x.useState(""),[F,W]=x.useState(null),[z,oe]=x.useState("traffic"),[q,J]=x.useState(""),[K,B]=x.useState(""),[V,re]=x.useState(""),[M,D]=x.useState(""),[E,Y]=x.useState(5),[Q,I]=x.useState(""),te=x.useRef(null),se=x.useRef(null),fe=x.useRef(null),[ve,Pe]=x.useState({feed:0,incidents:0,leaderboard:0}),[$,G]=x.useState(!1),X=()=>a==="feed"?te.current:a==="incidents"?se.current:fe.current;x.useEffect(()=>{const pe=X();if(!pe)return;const ie=ve[a];typeof ie=="number"&&(pe.scrollTop=ie);const le=()=>{const Le=pe.scrollTop;G(Le>200),Pe(et=>({...et,[a]:Le})),a==="feed"&&pe.scrollHeight-(pe.scrollTop+pe.clientHeight)<120&&ye(wt=>wt.length>=50?wt:[...wt,...wt.slice(0,Math.min(2,wt.length)).map((ds,Bt)=>({...ds,id:(Date.now()+Bt).toString(),timestamp:"just now"}))])};return pe.addEventListener("scroll",le,{passive:!0}),()=>pe.removeEventListener("scroll",le)},[a,ve]),x.useEffect(()=>{(async()=>{if(!(!r||!s)){d(!0);try{const ie=await lu.getAcceptedFriends();m(ie);const le=await lu.getSharedContent({limit:20});p(le.sharedContent)}catch(ie){C.error("Failed to fetch social data:",ie)}finally{d(!1)}}})()},[r,s]);const[me,ye]=x.useState([{id:"1",user:{name:"Sarah Chen",avatar:"SC",level:"Navigator Pro"},type:"review",content:"Amazing coffee and great parking! Perfect stop during morning commute.",location:"Blue Bottle Coffee, SOMA",timestamp:"2 hours ago",likes:12,comments:3,rating:5},{id:"2",user:{name:"Mike Rodriguez",avatar:"MR",level:"Road Warrior"},type:"incident",content:"Construction blocking right lane. Expect delays.",location:"I-280 Southbound, Mile 15",timestamp:"1 hour ago",likes:8,comments:5,severity:"medium"},{id:"3",user:{name:"Emily Watson",avatar:"EW",level:"Explorer"},type:"photo",content:"Beautiful sunset view from Twin Peaks! Worth the drive.",location:"Twin Peaks, San Francisco",timestamp:"3 hours ago",likes:24,comments:7,photos:["sunset.jpg"]},{id:"4",user:{name:"David Kim",avatar:"DK",level:"Local Guide"},type:"checkin",content:"Just arrived! The new charging station is working perfectly.",location:"Tesla Supercharger - Downtown",timestamp:"4 hours ago",likes:6,comments:2}]),[je,Ae]=x.useState([{id:"1",type:"traffic",location:"Bay Bridge, Eastbound",description:"Heavy traffic due to earlier accident. Clear now but delays persist.",timestamp:"45 min ago",reporter:"Alex Johnson",confirmations:12,severity:"medium"},{id:"2",type:"police",location:"Highway 101, Mile 25",description:"Speed trap reported in right lane.",timestamp:"1 hour ago",reporter:"Lisa Park",confirmations:8,severity:"low"},{id:"3",type:"closure",location:"Market St & 5th",description:"Street festival causing closure until 6 PM.",timestamp:"2 hours ago",reporter:"City Traffic",confirmations:15,severity:"high"}]),U=pe=>{switch(pe){case"traffic":return n.jsx(Ls,{className:"w-4 h-4"});case"police":return n.jsx(JE,{className:"w-4 h-4"});case"accident":case"hazard":return n.jsx(Et,{className:"w-4 h-4"});case"closure":return n.jsx(rt,{className:"w-4 h-4"});default:return n.jsx(pt,{className:"w-4 h-4"})}},Te=pe=>{switch(pe){case"traffic":return"#F59E0B";case"police":return"#3B82F6";case"accident":return"#DC2626";case"hazard":return"#EF4444";case"closure":return"#7C3AED";default:return"#6B7280"}},Se=pe=>{switch(pe){case"high":return"#DC2626";case"medium":return"#F59E0B";case"low":return"#22C55E";default:return"#6B7280"}},We=pe=>{switch(pe){case"checkin":return n.jsx(pt,{className:"w-4 h-4"});case"review":return n.jsx(Ds,{className:"w-4 h-4"});case"incident":return n.jsx(Et,{className:"w-4 h-4"});case"photo":return n.jsx(Hn,{className:"w-4 h-4"});default:return n.jsx(If,{className:"w-4 h-4"})}},ct=()=>{const pe=X();pe&&pe.scrollTo({top:0,behavior:"smooth"})};return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Community"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Connect with fellow travelers"})]})]})}),n.jsxs(An,{value:a,onValueChange:pe=>l(pe),className:"flex-1 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-2 bg-white",children:n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"feed",children:"Feed"}),n.jsxs(st,{value:"incidents",children:["Incidents",n.jsx(Ie,{variant:"secondary",className:"ml-2",children:je.length})]}),n.jsx(st,{value:"leaderboard",children:"Rankings"})]})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx(nt,{value:"feed",ref:te,className:"h-full scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>N(!0),children:[n.jsx(Hn,{className:"w-4 h-4 mr-2"})," Share Photo"]}),n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>j(!0),children:[n.jsx(Et,{className:"w-4 h-4 mr-2"})," Report Issue"]}),n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>T(!0),children:[n.jsx(pt,{className:"w-4 h-4 mr-2"})," Check In"]}),n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>A(!0),children:[n.jsx(Ds,{className:"w-4 h-4 mr-2"})," Write Review"]})]})}),me.map(pe=>n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(yo,{children:n.jsx(vo,{children:pe.user.avatar})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium text-gray-900",children:pe.user.name}),n.jsx(Ie,{variant:"outline",className:"text-xs",children:pe.user.level}),n.jsx("div",{className:"text-gray-400",children:""}),n.jsx("span",{className:"text-sm text-gray-500",children:pe.timestamp})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-white",style:{backgroundColor:"#5B4FE5"},children:We(pe.type)}),n.jsx("span",{className:"text-sm text-gray-600",children:pe.location}),pe.rating&&n.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((ie,le)=>n.jsx(Ds,{className:`w-3 h-3 ${le<pe.rating?"text-yellow-400 fill-current":"text-gray-300"}`},le))})]}),n.jsx("p",{className:"text-gray-900 mb-3",children:pe.content}),pe.photos&&n.jsx("div",{className:"mb-3",children:n.jsx("div",{className:"w-full h-32 bg-gradient-to-br from-orange-400 to-pink-400 rounded-lg"})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(L,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-red-600",onClick:()=>{ye(ie=>ie.map(le=>le.id===pe.id?{...le,likes:le.likes+1}:le))},children:[n.jsx(e1,{className:"w-4 h-4 mr-1"})," ",pe.likes]}),n.jsxs(L,{variant:"ghost",size:"sm",className:"text-gray-600",onClick:()=>alert("Comments coming soon"),children:[n.jsx(If,{className:"w-4 h-4 mr-1"})," ",pe.comments]}),n.jsxs(L,{variant:"ghost",size:"sm",className:"text-gray-600",onClick:async()=>{const ie={title:"PathFinder Pro",text:pe.content,url:window.location.origin};if(navigator.share)try{await navigator.share(ie)}catch{}else navigator.clipboard&&(await navigator.clipboard.writeText(ie.url),alert("Link copied"))},children:[n.jsx(gu,{className:"w-4 h-4 mr-1"})," Share"]})]})]})]})},pe.id))]})}),n.jsx(nt,{value:"incidents",ref:se,className:"h-full scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Live Incidents"}),n.jsxs(L,{size:"sm",onClick:()=>j(!0),children:[n.jsx(Et,{className:"w-4 h-4 mr-2"})," Report"]})]}),je.map(pe=>n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white",style:{backgroundColor:Te(pe.type)},children:U(pe.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium text-gray-900 capitalize",children:pe.type}),n.jsx(Ie,{style:{backgroundColor:`${Se(pe.severity)}20`,color:Se(pe.severity),border:`1px solid ${Se(pe.severity)}40`},children:pe.severity}),n.jsx("span",{className:"text-sm text-gray-500",children:pe.timestamp})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:pe.location}),n.jsx("p",{className:"text-gray-900 mb-3",children:pe.description}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:["Reported by ",pe.reporter,"  ",pe.confirmations," confirmations"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{variant:"outline",size:"sm",onClick:()=>{Ae(ie=>ie.map(le=>le.id===pe.id?{...le,confirmations:le.confirmations+1}:le))},children:"Confirm"}),n.jsx(L,{variant:"outline",size:"sm",onClick:()=>{e&&e({id:`incident-${pe.id}`,name:`${pe.type} near ${pe.location}`,address:pe.location,lat:37.7749,lng:-122.4194})},children:"Navigate Around"})]})]})]})]})},pe.id))]})}),n.jsx(nt,{value:"leaderboard",ref:fe,className:"h-full scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(ne,{className:"p-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Lp,{className:"w-8 h-8"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:"Your Ranking"}),n.jsx("p",{className:"text-sm opacity-90",children:"#47 this month  Explorer Level"})]}),n.jsxs("div",{className:"ml-auto text-right",children:[n.jsx("div",{className:"text-2xl font-bold",children:"2,840"}),n.jsx("div",{className:"text-sm opacity-90",children:"points"})]})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs(ne,{className:"p-3 text-center",children:[n.jsx(Hn,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}),n.jsx("div",{className:"text-lg font-medium",children:"24"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Photos"})]}),n.jsxs(ne,{className:"p-3 text-center",children:[n.jsx(Ds,{className:"w-6 h-6 mx-auto mb-2 text-yellow-600"}),n.jsx("div",{className:"text-lg font-medium",children:"18"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Reviews"})]}),n.jsxs(ne,{className:"p-3 text-center",children:[n.jsx(Et,{className:"w-6 h-6 mx-auto mb-2 text-red-600"}),n.jsx("div",{className:"text-lg font-medium",children:"12"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Reports"})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Top Contributors"}),n.jsx("div",{className:"space-y-3",children:[{name:"Alex Thompson",level:"Road Master",points:8540,avatar:"AT"},{name:"Maria Garcia",level:"Navigator Pro",points:7220,avatar:"MG"},{name:"Jordan Lee",level:"Explorer Elite",points:6890,avatar:"JL"},{name:"Sam Wilson",level:"Local Guide",points:5430,avatar:"SW"}].map((pe,ie)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-medium text-sm",children:["#",ie+1]}),n.jsx(yo,{children:n.jsx(vo,{children:pe.avatar})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:pe.name}),n.jsx("div",{className:"text-sm text-gray-500",children:pe.level})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-medium text-gray-900",children:pe.points.toLocaleString()}),n.jsx("div",{className:"text-sm text-gray-500",children:"points"})]})]},ie))})]}),n.jsx(ne,{className:"p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Pn,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900",children:"Level Up!"}),n.jsx("p",{className:"text-sm text-blue-800",children:"160 more points to reach Navigator Pro"})]})]})})]})})]})]}),$&&n.jsx(L,{size:"sm",className:"fixed right-4 bottom-24 z-50 bg-white text-gray-700 shadow-lg border border-gray-200 hover:bg-gray-50",onClick:ct,children:"Top"}),n.jsx(jn,{open:y,onOpenChange:N,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Share a Photo"}),n.jsx(Cn,{children:"Post a photo with a caption to the community feed."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ft,{type:"file",accept:"image/*",onChange:pe=>{const ie=pe.target.files?.[0];ie&&W(URL.createObjectURL(ie))}}),n.jsx(Ft,{placeholder:"Caption",value:k,onChange:pe=>P(pe.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>N(!1),children:"Cancel"}),n.jsx(L,{onClick:()=>{k.trim()&&(ye(pe=>[{id:Date.now().toString(),user:{name:"You",avatar:"YY",level:"Explorer"},type:"photo",content:k.trim(),location:"Current location",timestamp:"just now",likes:0,comments:0,photos:F?[F]:void 0},...pe]),P(""),W(null),N(!1))},children:"Post"})]})]})]})}),n.jsx(jn,{open:w,onOpenChange:j,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Report an Issue"}),n.jsx(Cn,{children:"Help others by reporting traffic, hazards, or closures."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(ya,{value:z,onValueChange:pe=>oe(pe),children:[n.jsx(wa,{children:n.jsx(va,{placeholder:"Type"})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"traffic",children:"Traffic"}),n.jsx(vt,{value:"police",children:"Police"}),n.jsx(vt,{value:"accident",children:"Accident"}),n.jsx(vt,{value:"hazard",children:"Hazard"}),n.jsx(vt,{value:"closure",children:"Closure"})]})]}),n.jsx(Ft,{placeholder:"Location",value:q,onChange:pe=>J(pe.target.value)}),n.jsx("textarea",{className:"w-full p-3 border rounded-md text-sm",rows:3,placeholder:"Description",value:K,onChange:pe=>B(pe.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>j(!1),children:"Cancel"}),n.jsx(L,{onClick:()=>{!q.trim()||!K.trim()||(Ae(pe=>[{id:Date.now().toString(),type:z,location:q.trim(),description:K.trim(),timestamp:"just now",reporter:"You",confirmations:0,severity:"low"},...pe]),l("incidents"),J(""),B(""),oe("traffic"),j(!1))},children:"Submit"})]})]})]})}),n.jsx(jn,{open:S,onOpenChange:T,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Check In"}),n.jsx(Cn,{children:"Let others know where you are."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ft,{placeholder:"Place name",value:V,onChange:pe=>re(pe.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>T(!1),children:"Cancel"}),n.jsx(L,{onClick:()=>{V.trim()&&(ye(pe=>[{id:Date.now().toString(),user:{name:"You",avatar:"YY",level:"Explorer"},type:"checkin",content:"Checked in",location:V.trim(),timestamp:"just now",likes:0,comments:0},...pe]),re(""),T(!1))},children:"Check In"})]})]})]})}),n.jsx(jn,{open:R,onOpenChange:A,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Write a Review"}),n.jsx(Cn,{children:"Share your experience with others."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ft,{placeholder:"Place name",value:M,onChange:pe=>D(pe.target.value)}),n.jsxs(ya,{value:String(E),onValueChange:pe=>Y(parseInt(pe)),children:[n.jsx(wa,{children:n.jsx(va,{placeholder:"Rating"})}),n.jsx(ba,{children:[5,4,3,2,1].map(pe=>n.jsxs(vt,{value:String(pe),children:[pe," stars"]},pe))})]}),n.jsx("textarea",{className:"w-full p-3 border rounded-md text-sm",rows:3,placeholder:"Your review",value:Q,onChange:pe=>I(pe.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>A(!1),children:"Cancel"}),n.jsx(L,{onClick:()=>{!M.trim()||!Q.trim()||(ye(pe=>[{id:Date.now().toString(),user:{name:"You",avatar:"YY",level:"Explorer"},type:"review",content:Q.trim(),location:M.trim(),timestamp:"just now",likes:0,comments:0,rating:E},...pe]),D(""),I(""),Y(5),A(!1))},children:"Post Review"})]})]})]})})]})}function $$({onBack:t,onOpenSettings:e,onOpenSafety:s,onOpenAnalytics:r,onOpenGamification:a,onOpenOfflineMaps:l}){const{isAuthenticated:c,user:d,updateProfile:h,logout:m}=jg(),[f,p]=x.useState("overview"),[y,N]=x.useState(!1),[w,j]=x.useState(!1),[S,T]=x.useState(!1),[R,A]=x.useState(null),k=x.useRef(null),P=x.useRef(null),[F,W]=x.useState(!1),[z,oe]=x.useState({}),[q,J]=x.useState(()=>{if(c&&d){const D=d.firstName&&d.lastName?`${d.firstName} ${d.lastName}`:d.username||d.email.split("@")[0];return{name:D,email:d.email,level:"Navigator Pro",levelProgress:75,nextLevel:"Road Master",pointsToNext:160,totalPoints:8540,memberSince:new Date(d.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),avatar:D.split(" ").map(E=>E[0]).join("").toUpperCase(),verifiedContributor:d.isVerified}}else return{name:"Guest User",email:"",level:"Explorer",levelProgress:0,nextLevel:"Navigator",pointsToNext:100,totalPoints:0,memberSince:"Guest Mode",avatar:"GU",verifiedContributor:!1}}),K=[{id:"1",name:"First Steps",description:"Complete your first navigation",icon:"",earned:!0,earnedDate:"2023-01-15"},{id:"2",name:"Local Explorer",description:"Visit 50 different places",icon:"",earned:!0,earnedDate:"2023-03-22"},{id:"3",name:"Community Helper",description:"Report 20 traffic incidents",icon:"",earned:!0,earnedDate:"2023-05-10"},{id:"4",name:"Eco Warrior",description:"Save 100kg of CO emissions",icon:"",earned:!1,progress:89,maxProgress:100},{id:"5",name:"Photo Pro",description:"Share 100 photos",icon:"",earned:!1,progress:67,maxProgress:100},{id:"6",name:"Review Master",description:"Write 50 reviews",icon:"",earned:!1,progress:34,maxProgress:50}],B=D=>{const E=D.filter(te=>te.earned).length,Y=D.reduce((te,se)=>te+(se.earned?100:se.progress||0),0),Q=D.length*100,I=Y/Q*100;return E>=5?{level:"Road Master",progress:Math.min(I,95),nextLevel:"Navigation Legend",pointsToNext:50}:E>=3?{level:"Navigator Pro",progress:I,nextLevel:"Road Master",pointsToNext:160}:E>=1?{level:"Explorer",progress:I,nextLevel:"Navigator Pro",pointsToNext:300}:{level:"Beginner",progress:I,nextLevel:"Explorer",pointsToNext:500}};he.useEffect(()=>{if(c&&d){const D=d.firstName&&d.lastName?`${d.firstName} ${d.lastName}`:d.username||d.email.split("@")[0],E=B(K),Y=K.reduce((Q,I)=>Q+(I.earned?200:Math.floor((I.progress||0)*2)),1540);J({name:D,email:d.email,level:E.level,levelProgress:Math.round(E.progress),nextLevel:E.nextLevel,pointsToNext:E.pointsToNext,totalPoints:Y,memberSince:new Date(d.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),avatar:D.split(" ").map(Q=>Q[0]).join("").toUpperCase(),verifiedContributor:d.isVerified})}},[d,c,K]);const V={totalTrips:247,totalDistance:"1,240 mi",totalTime:"52 hours",co2Saved:"89 kg",placesVisited:156,reviewsWritten:34,photosShared:67,incidentsReported:23},re=[{id:"1",type:"trip",description:"Completed trip to Golden Gate Park",time:"2 hours ago",icon:pt,color:"#5B4FE5"},{id:"2",type:"review",description:"Reviewed Blue Bottle Coffee",time:"1 day ago",icon:Ds,color:"#F59E0B"},{id:"3",type:"photo",description:"Shared photo at Twin Peaks",time:"2 days ago",icon:Hn,color:"#10B981"},{id:"4",type:"incident",description:"Reported traffic on Bay Bridge",time:"3 days ago",icon:Ls,color:"#EF4444"}],M=[{month:"Jan",trips:18,distance:89},{month:"Feb",trips:22,distance:112},{month:"Mar",trips:20,distance:98},{month:"Apr",trips:25,distance:134},{month:"May",trips:28,distance:142},{month:"Jun",trips:31,distance:156}];return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Profile"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Manage your account and view stats"})]}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>{e?e():C.debug("Settings panel not available")},children:n.jsx(Wt,{className:"w-4 h-4"})})]})}),n.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-500 to-blue-500 px-4 py-6 text-white",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(yo,{className:"w-20 h-20 border-4 border-white",children:R?n.jsx(lM,{src:R,alt:q.name}):n.jsx(vo,{className:"text-2xl bg-white text-purple-600",children:q.avatar})}),n.jsx(L,{size:"icon",className:"absolute -bottom-2 -right-2 w-8 h-8 bg-white text-gray-700 hover:bg-gray-50",onClick:()=>k.current?.click(),children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:D=>{const E=D.target.files?.[0];if(E){const Y=URL.createObjectURL(E);A(Y)}}})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"text-xl font-medium",children:q.name}),q.verifiedContributor&&n.jsx(ai,{className:"w-5 h-5 text-green-400"})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(BE,{className:"w-4 h-4 text-yellow-400"}),n.jsx("span",{className:"text-sm opacity-90",children:q.level})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm opacity-90",children:[n.jsxs("span",{children:[q.totalPoints.toLocaleString()," points"]}),n.jsx("span",{children:""}),n.jsxs("span",{children:["Member since ",q.memberSince]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsxs("span",{className:"opacity-90",children:["Progress to ",q.nextLevel]}),n.jsxs("span",{className:"opacity-90",children:[q.pointsToNext," more points"]})]}),n.jsx(Ks,{value:q.levelProgress,className:"h-2 bg-white/20"})]})]})]})}),n.jsxs(An,{value:f,onValueChange:p,className:"flex-1 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-2 bg-white",children:n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"overview",children:"Overview"}),n.jsx(st,{value:"achievements",children:"Achievements"}),n.jsx(st,{value:"activity",children:"Activity"})]})}),n.jsxs("div",{className:"flex-1 overflow-hidden min-h-0",children:[n.jsx(nt,{value:"overview",className:"h-full overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>N(!0),children:[n.jsx(d4,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}),n.jsxs(L,{variant:"outline",className:"justify-start",onClick:async()=>{const D={title:"PathFinder Pro Profile",text:`${q.name} on PathFinder Pro`,url:window.location.origin};if(navigator.share)try{await navigator.share(D)}catch{}else navigator.clipboard?(await navigator.clipboard.writeText(D.url),T(!0)):C.info("Profile URL copied to share")},children:[n.jsx(gu,{className:"w-4 h-4 mr-2"}),"Share Profile"]}),n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>{const D={profile:q,stats:V,achievements:K,recentActivity:re},E=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),Y=URL.createObjectURL(E),Q=document.createElement("a");Q.href=Y,Q.download="pathfinder_profile_export.json",document.body.appendChild(Q),Q.click(),Q.remove(),URL.revokeObjectURL(Y)},children:[n.jsx(Rr,{className:"w-4 h-4 mr-2"}),"Export Data"]}),n.jsxs(L,{variant:"outline",className:"justify-start",onClick:()=>P.current?.click(),children:[n.jsx(D4,{className:"w-4 h-4 mr-2"}),"Import Data"]}),l&&n.jsxs(L,{variant:"outline",className:"justify-start text-blue-600 border-blue-200 hover:bg-blue-50",onClick:l,children:[n.jsx(ga,{className:"w-4 h-4 mr-2"}),"Offline Maps"]}),s&&n.jsxs(L,{variant:"outline",className:"justify-start",onClick:s,children:[n.jsx(lr,{className:"w-4 h-4 mr-2"}),"Safety Center"]}),r&&n.jsxs(L,{variant:"outline",className:"justify-start",onClick:r,children:[n.jsx(Hd,{className:"w-4 h-4 mr-2"}),"Analytics"]}),a&&n.jsxs(L,{variant:"outline",className:"justify-start",onClick:a,children:[n.jsx(o1,{className:"w-4 h-4 mr-2"}),"Achievements"]})]})]}),!c&&n.jsx(ne,{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(Gm,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Sign in for Full Experience"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create an account to save your preferences, sync across devices, and unlock advanced features."}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(L,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>W(!0),children:[n.jsx(Yy,{className:"w-4 h-4 mr-2"}),"Sign In"]}),n.jsxs(L,{variant:"outline",onClick:()=>W(!0),children:[n.jsx(Gm,{className:"w-4 h-4 mr-2"}),"Sign Up"]})]})]})}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Travel Statistics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(mr,{className:"w-6 h-6 text-blue-600"})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:V.totalTrips}),n.jsx("div",{className:"text-sm text-gray-500",children:"Total Trips"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(Ll,{className:"w-6 h-6 text-green-600"})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:V.totalDistance}),n.jsx("div",{className:"text-sm text-gray-500",children:"Distance Traveled"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(xs,{className:"w-6 h-6 text-purple-600"})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:V.totalTime}),n.jsx("div",{className:"text-sm text-gray-500",children:"Time Navigating"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(qd,{className:"w-6 h-6 text-green-600"})}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:V.co2Saved}),n.jsx("div",{className:"text-sm text-gray-500",children:"CO Saved"})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Community Contributions"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(pt,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-gray-700",children:"Places Visited"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:V.placesVisited})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ds,{className:"w-5 h-5 text-yellow-600"}),n.jsx("span",{className:"text-gray-700",children:"Reviews Written"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:V.reviewsWritten})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hn,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-gray-700",children:"Photos Shared"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:V.photosShared})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ls,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"text-gray-700",children:"Incidents Reported"})]}),n.jsx("span",{className:"font-medium text-gray-900",children:V.incidentsReported})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Monthly Activity"}),n.jsx("div",{className:"space-y-3",children:M.map(D=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 text-sm text-gray-600",children:D.month}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsxs("span",{children:[D.trips," trips"]}),n.jsxs("span",{children:[D.distance," mi"]})]}),n.jsx(Ks,{value:D.distance/200*100,className:"h-2"})]})]},D.month))})]})]})}),n.jsx(nt,{value:"achievements",className:"h-full overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Lp,{className:"w-12 h-12 text-yellow-500 mx-auto mb-2"}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Your Achievements"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[K.filter(D=>D.earned).length," of ",K.length," earned"]})]}),K.map(D=>n.jsx(ne,{className:`p-4 ${D.earned?"border-green-200 bg-green-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`text-3xl ${D.earned?"":"grayscale opacity-50"}`,children:D.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:D.name}),D.earned&&n.jsx(ai,{className:"w-4 h-4 text-green-600"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:D.description}),D.earned?n.jsxs("div",{className:"text-xs text-green-600",children:["Earned on ",D.earnedDate]}):D.progress?n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[D.progress,"/",D.maxProgress]})]}),n.jsx(Ks,{value:D.progress/D.maxProgress*100,className:"h-2"})]}):n.jsx("div",{className:"text-xs text-gray-500",children:"Not started"})]})]})},D.id))]})}),n.jsx(nt,{value:"activity",className:"h-full overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4 mt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Recent Activity"}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[n.jsx(Op,{className:"w-4 h-4 mr-2"}),"View All"]})]}),re.map(D=>{const E=D.icon;return n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white",style:{backgroundColor:D.color},children:n.jsx(E,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-gray-900",children:D.description}),n.jsx("p",{className:"text-sm text-gray-500",children:D.time})]}),n.jsx(L,{variant:"ghost",size:"sm",children:"View"})]})},D.id)}),n.jsx(ne,{className:"p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Pn,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900",children:"This Week's Summary"}),n.jsx("p",{className:"text-sm text-blue-800",children:"5 trips completed  2 reviews written  1 photo shared"})]})]})})]})})]})]}),n.jsx("input",{ref:P,type:"file",accept:"application/json",className:"hidden",onChange:D=>{const E=D.target.files?.[0];if(!E)return;const Y=new FileReader;Y.onload=()=>{try{const Q=JSON.parse(Y.result);Q.profile&&J(I=>({...I,name:Q.profile.name??I.name,email:Q.profile.email??I.email,level:Q.profile.level??I.level})),C.success("Profile data imported successfully")}catch(Q){C.error("Invalid import file",{error:Q})}},Y.readAsText(E),D.currentTarget.value=""}}),n.jsx(jn,{open:y,onOpenChange:N,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Edit Profile"}),n.jsx(Cn,{children:"Update your personal information."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(Ft,{placeholder:"Name",value:q.name,onChange:D=>{J(E=>({...E,name:D.target.value})),z.name&&oe(E=>({...E,name:""}))},className:z.name?"border-red-300 focus:border-red-500":""}),z.name&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:z.name})]}),n.jsxs("div",{children:[n.jsx(Ft,{placeholder:"Email",type:"email",value:q.email,onChange:D=>{J(E=>({...E,email:D.target.value})),z.email&&oe(E=>({...E,email:""}))},className:z.email?"border-red-300 focus:border-red-500":""}),z.email&&n.jsx("p",{className:"text-red-600 text-sm mt-1",children:z.email})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(L,{variant:"ghost",onClick:()=>N(!1),children:"Cancel"}),n.jsx(L,{onClick:async()=>{try{const D=fk({name:q.name,email:q.email},S$);if(!D.isValid){oe(D.errors);const E=Object.values(D.errors)[0];ue.error(E);return}if(oe({}),c&&d){const E=q.name.trim().split(" "),Y=E[0]||"",Q=E.slice(1).join(" ")||"";await h({firstName:Y,lastName:Q,email:q.email}),C.success("Profile updated successfully"),ue.success("Profile updated successfully")}else C.info("Profile updated locally (guest mode)"),ue.success("Profile updated locally");N(!1)}catch(D){C.error("Failed to update profile",{error:D}),ue.error("Failed to update profile. Please try again.")}},children:"Save"})]})]})]})}),n.jsx(jn,{open:S,onOpenChange:T,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Profile link copied"}),n.jsx(Cn,{children:"Share it with your friends."})]}),n.jsx("div",{className:"text-sm text-gray-600",children:window.location.origin}),n.jsx("div",{className:"flex justify-end",children:n.jsx(L,{onClick:()=>T(!1),children:"Close"})})]})}),n.jsx(jn,{open:w,onOpenChange:j,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"All Activity"}),n.jsx(Cn,{children:"Your recent actions in PathFinder Pro"})]}),n.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto scroll-y hide-scrollbar scroll-smooth",children:re.map(D=>{const E=D.icon;return n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white",style:{backgroundColor:D.color},children:n.jsx(E,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm text-gray-900",children:D.description}),n.jsx("div",{className:"text-xs text-gray-500",children:D.time})]})]})},D.id)})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(L,{onClick:()=>j(!1),children:"Close"})})]})}),n.jsx(jn,{open:F,onOpenChange:W,children:n.jsxs(Nn,{children:[n.jsxs(Sn,{children:[n.jsx(kn,{children:"Sign in to your account"}),n.jsx(Cn,{children:"Create an account or sign in to save your preferences, sync data across devices, and access premium features."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" Benefits of signing in:"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Save favorite places and routes"}),n.jsx("li",{children:" Sync settings across all devices"}),n.jsx("li",{children:" Track your travel statistics"}),n.jsx("li",{children:" Unlock achievement system"}),n.jsx("li",{children:" Access offline maps"}),n.jsx("li",{children:" Priority customer support"})]})]}),n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[n.jsxs("p",{className:"text-sm text-green-800 mb-3",children:[" ",n.jsx("strong",{children:"Good news!"})," You can continue using the app as a guest. All core navigation features are available without an account."]}),n.jsx(L,{variant:"ghost",onClick:()=>W(!1),children:"Continue as Guest"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>{W(!1),C.info("Sign in requested - redirecting to login"),window.dispatchEvent(new CustomEvent("navigate-to-login"))},children:[n.jsx(Yy,{className:"w-4 h-4 mr-2"}),"Sign In"]}),n.jsxs(L,{variant:"outline",className:"flex-1",onClick:()=>{W(!1),C.info("Sign up requested - redirecting to registration"),window.dispatchEvent(new CustomEvent("navigate-to-register"))},children:[n.jsx(Gm,{className:"w-4 h-4 mr-2"}),"Create Account"]})]})]})]})})]})}const _g=x.createContext({});function Rg(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const Mg=typeof window<"u",pk=Mg?x.useLayoutEffect:x.useEffect,Qu=x.createContext(null);function Dg(t,e){t.indexOf(e)===-1&&t.push(e)}function Ig(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const $r=(t,e,s)=>s>e?e:s<t?t:s;let Lg=()=>{};const Br={},gk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function xk(t){return typeof t=="object"&&t!==null}const yk=t=>/^0[^.\s]+$/u.test(t);function Og(t){let e;return()=>(e===void 0&&(e=t()),e)}const En=t=>t,B$=(t,e)=>s=>e(t(s)),rc=(...t)=>t.reduce(B$),Ul=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class Fg{constructor(){this.subscriptions=[]}add(e){return Dg(this.subscriptions,e),()=>Ig(this.subscriptions,e)}notify(e,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,r);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ur=t=>t*1e3,Tn=t=>t/1e3;function vk(t,e){return e?t*(1e3/e):0}const wk=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,U$=1e-7,V$=12;function W$(t,e,s,r,a){let l,c,d=0;do c=e+(s-e)/2,l=wk(c,r,a)-t,l>0?s=c:e=c;while(Math.abs(l)>U$&&++d<V$);return c}function ac(t,e,s,r){if(t===e&&s===r)return En;const a=l=>W$(l,0,1,t,s);return l=>l===0||l===1?l:wk(a(l),e,r)}const bk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,jk=t=>e=>1-t(1-e),Nk=ac(.33,1.53,.69,.99),zg=jk(Nk),Sk=bk(zg),kk=t=>(t*=2)<1?.5*zg(t):.5*(2-Math.pow(2,-10*(t-1))),$g=t=>1-Math.sin(Math.acos(t)),Ck=jk($g),Tk=bk($g),H$=ac(.42,0,1,1),G$=ac(0,0,.58,1),Ek=ac(.42,0,.58,1),q$=t=>Array.isArray(t)&&typeof t[0]!="number",Pk=t=>Array.isArray(t)&&typeof t[0]=="number",K$={linear:En,easeIn:H$,easeInOut:Ek,easeOut:G$,circIn:$g,circInOut:Tk,circOut:Ck,backIn:zg,backInOut:Sk,backOut:Nk,anticipate:kk},Z$=t=>typeof t=="string",Tw=t=>{if(Pk(t)){Lg(t.length===4);const[e,s,r,a]=t;return ac(e,s,r,a)}else if(Z$(t))return K$[t];return t},Ad=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Y$(t,e){let s=new Set,r=new Set,a=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(f){c.has(f)&&(m.schedule(f),t()),f(d)}const m={schedule:(f,p=!1,y=!1)=>{const w=y&&a?s:r;return p&&c.add(f),w.has(f)||w.add(f),f},cancel:f=>{r.delete(f),c.delete(f)},process:f=>{if(d=f,a){l=!0;return}a=!0,[s,r]=[r,s],s.forEach(h),s.clear(),a=!1,l&&(l=!1,m.process(f))}};return m}const J$=40;function Ak(t,e){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>s=!0,c=Ad.reduce((A,k)=>(A[k]=Y$(l),A),{}),{setup:d,read:h,resolveKeyframes:m,preUpdate:f,update:p,preRender:y,render:N,postRender:w}=c,j=()=>{const A=Br.useManualTiming?a.timestamp:performance.now();s=!1,Br.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(A-a.timestamp,J$),1)),a.timestamp=A,a.isProcessing=!0,d.process(a),h.process(a),m.process(a),f.process(a),p.process(a),y.process(a),N.process(a),w.process(a),a.isProcessing=!1,s&&e&&(r=!1,t(j))},S=()=>{s=!0,r=!0,a.isProcessing||t(j)};return{schedule:Ad.reduce((A,k)=>{const P=c[k];return A[k]=(F,W=!1,z=!1)=>(s||S(),P.schedule(F,W,z)),A},{}),cancel:A=>{for(let k=0;k<Ad.length;k++)c[Ad[k]].cancel(A)},state:a,steps:c}}const{schedule:Rt,cancel:Ca,state:ps,steps:yf}=Ak(typeof requestAnimationFrame<"u"?requestAnimationFrame:En,!0);let Bd;function Q$(){Bd=void 0}const Zs={now:()=>(Bd===void 0&&Zs.set(ps.isProcessing||Br.useManualTiming?ps.timestamp:performance.now()),Bd),set:t=>{Bd=t,queueMicrotask(Q$)}},_k=t=>e=>typeof e=="string"&&e.startsWith(t),Bg=_k("--"),X$=_k("var(--"),Ug=t=>X$(t)?e8.test(t.split("/*")[0].trim()):!1,e8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vl={...Ro,transform:t=>$r(0,1,t)},_d={...Ro,default:1},Pl=t=>Math.round(t*1e5)/1e5,Vg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function t8(t){return t==null}const s8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wg=(t,e)=>s=>!!(typeof s=="string"&&s8.test(s)&&s.startsWith(t)||e&&!t8(s)&&Object.prototype.hasOwnProperty.call(s,e)),Rk=(t,e,s)=>r=>{if(typeof r!="string")return r;const[a,l,c,d]=r.match(Vg);return{[t]:parseFloat(a),[e]:parseFloat(l),[s]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},n8=t=>$r(0,255,t),vf={...Ro,transform:t=>Math.round(n8(t))},ei={test:Wg("rgb","red"),parse:Rk("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+vf.transform(t)+", "+vf.transform(e)+", "+vf.transform(s)+", "+Pl(Vl.transform(r))+")"};function r8(t){let e="",s="",r="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const hp={test:Wg("#"),parse:r8,transform:ei.transform},ic=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ma=ic("deg"),hr=ic("%"),Ze=ic("px"),a8=ic("vh"),i8=ic("vw"),Ew={...hr,parse:t=>hr.parse(t)/100,transform:t=>hr.transform(t*100)},eo={test:Wg("hsl","hue"),parse:Rk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+hr.transform(Pl(e))+", "+hr.transform(Pl(s))+", "+Pl(Vl.transform(r))+")"},Qt={test:t=>ei.test(t)||hp.test(t)||eo.test(t),parse:t=>ei.test(t)?ei.parse(t):eo.test(t)?eo.parse(t):hp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ei.transform(t):eo.transform(t),getAnimatableNone:t=>{const e=Qt.parse(t);return e.alpha=0,Qt.transform(e)}},o8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function l8(t){return isNaN(t)&&typeof t=="string"&&(t.match(Vg)?.length||0)+(t.match(o8)?.length||0)>0}const Mk="number",Dk="color",c8="var",d8="var(",Pw="${}",u8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wl(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},a=[];let l=0;const d=e.replace(u8,h=>(Qt.test(h)?(r.color.push(l),a.push(Dk),s.push(Qt.parse(h))):h.startsWith(d8)?(r.var.push(l),a.push(c8),s.push(h)):(r.number.push(l),a.push(Mk),s.push(parseFloat(h))),++l,Pw)).split(Pw);return{values:s,split:d,indexes:r,types:a}}function Ik(t){return Wl(t).values}function Lk(t){const{split:e,types:s}=Wl(t),r=e.length;return a=>{let l="";for(let c=0;c<r;c++)if(l+=e[c],a[c]!==void 0){const d=s[c];d===Mk?l+=Pl(a[c]):d===Dk?l+=Qt.transform(a[c]):l+=a[c]}return l}}const h8=t=>typeof t=="number"?0:Qt.test(t)?Qt.getAnimatableNone(t):t;function m8(t){const e=Ik(t);return Lk(t)(e.map(h8))}const Ta={test:l8,parse:Ik,createTransformer:Lk,getAnimatableNone:m8};function wf(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function f8({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let a=0,l=0,c=0;if(!e)a=l=c=s;else{const d=s<.5?s*(1+e):s+e-s*e,h=2*s-d;a=wf(h,d,t+1/3),l=wf(h,d,t),c=wf(h,d,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function cu(t,e){return s=>s>0?e:t}const zt=(t,e,s)=>t+(e-t)*s,bf=(t,e,s)=>{const r=t*t,a=s*(e*e-r)+r;return a<0?0:Math.sqrt(a)},p8=[hp,ei,eo],g8=t=>p8.find(e=>e.test(t));function Aw(t){const e=g8(t);if(!e)return!1;let s=e.parse(t);return e===eo&&(s=f8(s)),s}const _w=(t,e)=>{const s=Aw(t),r=Aw(e);if(!s||!r)return cu(t,e);const a={...s};return l=>(a.red=bf(s.red,r.red,l),a.green=bf(s.green,r.green,l),a.blue=bf(s.blue,r.blue,l),a.alpha=zt(s.alpha,r.alpha,l),ei.transform(a))},mp=new Set(["none","hidden"]);function x8(t,e){return mp.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function y8(t,e){return s=>zt(t,e,s)}function Hg(t){return typeof t=="number"?y8:typeof t=="string"?Ug(t)?cu:Qt.test(t)?_w:b8:Array.isArray(t)?Ok:typeof t=="object"?Qt.test(t)?_w:v8:cu}function Ok(t,e){const s=[...t],r=s.length,a=t.map((l,c)=>Hg(l)(l,e[c]));return l=>{for(let c=0;c<r;c++)s[c]=a[c](l);return s}}function v8(t,e){const s={...t,...e},r={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(r[a]=Hg(t[a])(t[a],e[a]));return a=>{for(const l in r)s[l]=r[l](a);return s}}function w8(t,e){const s=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][r[l]],d=t.values[c]??0;s[a]=d,r[l]++}return s}const b8=(t,e)=>{const s=Ta.createTransformer(e),r=Wl(t),a=Wl(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?mp.has(t)&&!a.values.length||mp.has(e)&&!r.values.length?x8(t,e):rc(Ok(w8(r,a),a.values),s):cu(t,e)};function Fk(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?zt(t,e,s):Hg(t)(t,e)}const j8=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Rt.update(e,s),stop:()=>Ca(e),now:()=>ps.isProcessing?ps.timestamp:Zs.now()}},zk=(t,e,s=10)=>{let r="";const a=Math.max(Math.round(e/s),2);for(let l=0;l<a;l++)r+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},du=2e4;function Gg(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<du;)e+=s,r=t.next(e);return e>=du?1/0:e}function N8(t,e=100,s){const r=s({...t,keyframes:[0,e]}),a=Math.min(Gg(r),du);return{type:"keyframes",ease:l=>r.next(a*l).value/e,duration:Tn(a)}}const S8=5;function $k(t,e,s){const r=Math.max(e-S8,0);return vk(s-t(r),e-r)}const Vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jf=.001;function k8({duration:t=Vt.duration,bounce:e=Vt.bounce,velocity:s=Vt.velocity,mass:r=Vt.mass}){let a,l,c=1-e;c=$r(Vt.minDamping,Vt.maxDamping,c),t=$r(Vt.minDuration,Vt.maxDuration,Tn(t)),c<1?(a=m=>{const f=m*c,p=f*t,y=f-s,N=fp(m,c),w=Math.exp(-p);return jf-y/N*w},l=m=>{const p=m*c*t,y=p*s+s,N=Math.pow(c,2)*Math.pow(m,2)*t,w=Math.exp(-p),j=fp(Math.pow(m,2),c);return(-a(m)+jf>0?-1:1)*((y-N)*w)/j}):(a=m=>{const f=Math.exp(-m*t),p=(m-s)*t+1;return-jf+f*p},l=m=>{const f=Math.exp(-m*t),p=(s-m)*(t*t);return f*p});const d=5/t,h=T8(a,l,d);if(t=ur(t),isNaN(h))return{stiffness:Vt.stiffness,damping:Vt.damping,duration:t};{const m=Math.pow(h,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:t}}}const C8=12;function T8(t,e,s){let r=s;for(let a=1;a<C8;a++)r=r-t(r)/e(r);return r}function fp(t,e){return t*Math.sqrt(1-e*e)}const E8=["duration","bounce"],P8=["stiffness","damping","mass"];function Rw(t,e){return e.some(s=>t[s]!==void 0)}function A8(t){let e={velocity:Vt.velocity,stiffness:Vt.stiffness,damping:Vt.damping,mass:Vt.mass,isResolvedFromDuration:!1,...t};if(!Rw(t,P8)&&Rw(t,E8))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,l=2*$r(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Vt.mass,stiffness:a,damping:l}}else{const s=k8(t);e={...e,...s,mass:Vt.mass},e.isResolvedFromDuration=!0}return e}function uu(t=Vt.visualDuration,e=Vt.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=s;const l=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],d={done:!1,value:l},{stiffness:h,damping:m,mass:f,duration:p,velocity:y,isResolvedFromDuration:N}=A8({...s,velocity:-Tn(s.velocity||0)}),w=y||0,j=m/(2*Math.sqrt(h*f)),S=c-l,T=Tn(Math.sqrt(h/f)),R=Math.abs(S)<5;r||(r=R?Vt.restSpeed.granular:Vt.restSpeed.default),a||(a=R?Vt.restDelta.granular:Vt.restDelta.default);let A;if(j<1){const P=fp(T,j);A=F=>{const W=Math.exp(-j*T*F);return c-W*((w+j*T*S)/P*Math.sin(P*F)+S*Math.cos(P*F))}}else if(j===1)A=P=>c-Math.exp(-T*P)*(S+(w+T*S)*P);else{const P=T*Math.sqrt(j*j-1);A=F=>{const W=Math.exp(-j*T*F),z=Math.min(P*F,300);return c-W*((w+j*T*S)*Math.sinh(z)+P*S*Math.cosh(z))/P}}const k={calculatedDuration:N&&p||null,next:P=>{const F=A(P);if(N)d.done=P>=p;else{let W=P===0?w:0;j<1&&(W=P===0?ur(w):$k(A,P,F));const z=Math.abs(W)<=r,oe=Math.abs(c-F)<=a;d.done=z&&oe}return d.value=d.done?c:F,d},toString:()=>{const P=Math.min(Gg(k),du),F=zk(W=>k.next(P*W).value,P,30);return P+"ms "+F},toTransition:()=>{}};return k}uu.applyToOptions=t=>{const e=N8(t,100,uu);return t.ease=e.ease,t.duration=ur(e.duration),t.type="keyframes",t};function pp({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:h,restDelta:m=.5,restSpeed:f}){const p=t[0],y={done:!1,value:p},N=z=>d!==void 0&&z<d||h!==void 0&&z>h,w=z=>d===void 0?h:h===void 0||Math.abs(d-z)<Math.abs(h-z)?d:h;let j=s*e;const S=p+j,T=c===void 0?S:c(S);T!==S&&(j=T-p);const R=z=>-j*Math.exp(-z/r),A=z=>T+R(z),k=z=>{const oe=R(z),q=A(z);y.done=Math.abs(oe)<=m,y.value=y.done?T:q};let P,F;const W=z=>{N(y.value)&&(P=z,F=uu({keyframes:[y.value,w(y.value)],velocity:$k(A,z,y.value),damping:a,stiffness:l,restDelta:m,restSpeed:f}))};return W(0),{calculatedDuration:null,next:z=>{let oe=!1;return!F&&P===void 0&&(oe=!0,k(z),W(z)),P!==void 0&&z>=P?F.next(z-P):(!oe&&k(z),y)}}}function _8(t,e,s){const r=[],a=s||Br.mix||Fk,l=t.length-1;for(let c=0;c<l;c++){let d=a(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||En:e;d=rc(h,d)}r.push(d)}return r}function R8(t,e,{clamp:s=!0,ease:r,mixer:a}={}){const l=t.length;if(Lg(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=_8(e,r,a),h=d.length,m=f=>{if(c&&f<t[0])return e[0];let p=0;if(h>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const y=Ul(t[p],t[p+1],f);return d[p](y)};return s?f=>m($r(t[0],t[l-1],f)):m}function M8(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const a=Ul(0,e,r);t.push(zt(s,1,a))}}function D8(t){const e=[0];return M8(e,t.length-1),e}function I8(t,e){return t.map(s=>s*e)}function L8(t,e){return t.map(()=>e||Ek).splice(0,t.length-1)}function Al({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const a=q$(r)?r.map(Tw):Tw(r),l={done:!1,value:e[0]},c=I8(s&&s.length===e.length?s:D8(e),t),d=R8(c,e,{ease:Array.isArray(a)?a:L8(e,a)});return{calculatedDuration:t,next:h=>(l.value=d(h),l.done=h>=t,l)}}const O8=t=>t!==null;function qg(t,{repeat:e,repeatType:s="loop"},r,a=1){const l=t.filter(O8),d=a<0||e&&s!=="loop"&&e%2===1?0:l.length-1;return!d||r===void 0?l[d]:r}const F8={decay:pp,inertia:pp,tween:Al,keyframes:Al,spring:uu};function Bk(t){typeof t.type=="string"&&(t.type=F8[t.type])}class Kg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const z8=t=>t/100;class Zg extends Kg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==Zs.now()&&this.tick(Zs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Bk(e);const{type:s=Al,repeat:r=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:d}=e;const h=s||Al;h!==Al&&typeof d[0]!="number"&&(this.mixKeyframes=rc(z8,Fk(d[0],d[1])),d=[0,100]);const m=h({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=Gg(m));const{calculatedDuration:f}=m;this.calculatedDuration=f,this.resolvedDuration=f+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=m}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:f,repeat:p,repeatType:y,repeatDelay:N,type:w,onUpdate:j,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const T=this.currentTime-m*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?T<0:T>a;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let A=this.currentTime,k=r;if(p){const z=Math.min(this.currentTime,a)/d;let oe=Math.floor(z),q=z%1;!q&&z>=1&&(q=1),q===1&&oe--,oe=Math.min(oe,p+1),!!(oe%2)&&(y==="reverse"?(q=1-q,N&&(q-=N/d)):y==="mirror"&&(k=c)),A=$r(0,1,q)*d}const P=R?{done:!1,value:f[0]}:k.next(A);l&&(P.value=l(P.value));let{done:F}=P;!R&&h!==null&&(F=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const W=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return W&&w!==pp&&(P.value=qg(f,this.options,S,this.speed)),j&&j(P.value),W&&this.finish(),P}then(e,s){return this.finished.then(e,s)}get duration(){return Tn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Tn(e)}get time(){return Tn(this.currentTime)}set time(e){e=ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zs.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Tn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=j8,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function $8(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ti=t=>t*180/Math.PI,gp=t=>{const e=ti(Math.atan2(t[1],t[0]));return xp(e)},B8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:gp,rotateZ:gp,skewX:t=>ti(Math.atan(t[1])),skewY:t=>ti(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xp=t=>(t=t%360,t<0&&(t+=360),t),Mw=gp,Dw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Iw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),U8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Dw,scaleY:Iw,scale:t=>(Dw(t)+Iw(t))/2,rotateX:t=>xp(ti(Math.atan2(t[6],t[5]))),rotateY:t=>xp(ti(Math.atan2(-t[2],t[0]))),rotateZ:Mw,rotate:Mw,skewX:t=>ti(Math.atan(t[4])),skewY:t=>ti(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function yp(t){return t.includes("scale")?1:0}function vp(t,e){if(!t||t==="none")return yp(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=U8,a=s;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=B8,a=d}if(!a)return yp(e);const l=r[e],c=a[1].split(",").map(W8);return typeof l=="function"?l(c):c[l]}const V8=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return vp(s,e)};function W8(t){return parseFloat(t.trim())}const Mo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Do=new Set(Mo),Lw=t=>t===Ro||t===Ze,H8=new Set(["x","y","z"]),G8=Mo.filter(t=>!H8.has(t));function q8(t){const e=[];return G8.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const ni={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>vp(e,"x"),y:(t,{transform:e})=>vp(e,"y")};ni.translateX=ni.x;ni.translateY=ni.y;const ri=new Set;let wp=!1,bp=!1,jp=!1;function Uk(){if(bp){const t=Array.from(ri).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const a=q8(r);a.length&&(s.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([l,c])=>{r.getValue(l)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}bp=!1,wp=!1,ri.forEach(t=>t.complete(jp)),ri.clear()}function Vk(){ri.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bp=!0)})}function K8(){jp=!0,Vk(),Uk(),jp=!1}class Yg{constructor(e,s,r,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(ri.add(this),wp||(wp=!0,Rt.read(Vk),Rt.resolveKeyframes(Uk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:a}=this;if(e[0]===null){const l=a?.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&s){const d=r.readValue(s,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}$8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ri.delete(this)}cancel(){this.state==="scheduled"&&(ri.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Z8=t=>t.startsWith("--");function Y8(t,e,s){Z8(e)?t.style.setProperty(e,s):t.style[e]=s}const J8=Og(()=>window.ScrollTimeline!==void 0),Q8={};function X8(t,e){const s=Og(t);return()=>Q8[e]??s()}const Wk=X8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cl=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,Ow={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cl([0,.65,.55,1]),circOut:Cl([.55,0,1,.45]),backIn:Cl([.31,.01,.66,-.59]),backOut:Cl([.33,1.53,.69,.99])};function Hk(t,e){if(t)return typeof t=="function"?Wk()?zk(t,e):"ease-out":Pk(t)?Cl(t):Array.isArray(t)?t.map(s=>Hk(s,e)||Ow.easeOut):Ow[t]}function e9(t,e,s,{delay:r=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:h}={},m=void 0){const f={[e]:s};h&&(f.offset=h);const p=Hk(d,a);Array.isArray(p)&&(f.easing=p);const y={delay:r,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(y.pseudoElement=m),t.animate(f,y)}function Gk(t){return typeof t=="function"&&"applyToOptions"in t}function t9({type:t,...e}){return Gk(t)&&Wk()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class s9 extends Kg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:r,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,Lg(typeof e.type!="string");const m=t9(e);this.animation=e9(s,r,a,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const f=qg(a,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(f):Y8(s,r,f),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Tn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Tn(e)}get time(){return Tn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&J8()?(this.animation.timeline=e,En):s(this)}}const qk={anticipate:kk,backInOut:Sk,circInOut:Tk};function n9(t){return t in qk}function r9(t){typeof t.ease=="string"&&n9(t.ease)&&(t.ease=qk[t.ease])}const Fw=10;class a9 extends s9{constructor(e){r9(e),Bk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:a,element:l,...c}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const d=new Zg({...c,autoplay:!1}),h=ur(this.finishedTime??this.time);s.setWithVelocity(d.sample(h-Fw).value,d.sample(h).value,Fw),d.stop()}}const zw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ta.test(t)||t==="0")&&!t.startsWith("url("));function i9(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function o9(t,e,s,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=zw(a,e),d=zw(l,e);return!c||!d?!1:i9(t)||(s==="spring"||Gk(s))&&r}function Np(t){t.duration=0,t.type="keyframes"}const l9=new Set(["opacity","clipPath","filter","transform"]),c9=Og(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function d9(t){const{motionValue:e,name:s,repeatDelay:r,repeatType:a,damping:l,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:m}=e.owner.getProps();return c9()&&s&&l9.has(s)&&(s!=="transform"||!m)&&!h&&!r&&a!=="mirror"&&l!==0&&c!=="inertia"}const u9=40;class h9 extends Kg{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:h,motionValue:m,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zs.now();const y={autoplay:e,delay:s,type:r,repeat:a,repeatDelay:l,repeatType:c,name:h,motionValue:m,element:f,...p},N=f?.KeyframeResolver||Yg;this.keyframeResolver=new N(d,(w,j,S)=>this.onKeyframesResolved(w,j,y,!S),h,m,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,r,a){this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:h,isHandoff:m,onUpdate:f}=r;this.resolvedAt=Zs.now(),o9(e,l,c,d)||((Br.instantAnimations||!h)&&f?.(qg(e,r,s)),e[0]=e[e.length-1],Np(r),r.repeat=0);const y={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>u9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},N=!m&&d9(y)?new a9({...y,element:y.motionValue.owner.current}):new Zg(y);N.finished.then(()=>this.notifyFinished()).catch(En),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),K8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const m9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function f9(t){const e=m9.exec(t);if(!e)return[,];const[,s,r,a]=e;return[`--${s??r}`,a]}function Kk(t,e,s=1){const[r,a]=f9(t);if(!r)return;const l=window.getComputedStyle(e).getPropertyValue(r);if(l){const c=l.trim();return gk(c)?parseFloat(c):c}return Ug(a)?Kk(a,e,s+1):a}function Jg(t,e){return t?.[e]??t?.default??t}const Zk=new Set(["width","height","top","left","right","bottom",...Mo]),p9={test:t=>t==="auto",parse:t=>t},Yk=t=>e=>e.test(t),Jk=[Ro,Ze,hr,ma,i8,a8,p9],$w=t=>Jk.find(Yk(t));function g9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yk(t):!0}const x9=new Set(["brightness","contrast","saturate","opacity"]);function y9(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(Vg)||[];if(!r)return t;const a=s.replace(r,"");let l=x9.has(e)?1:0;return r!==s&&(l*=100),e+"("+l+a+")"}const v9=/\b([a-z-]*)\(.*?\)/gu,Sp={...Ta,getAnimatableNone:t=>{const e=t.match(v9);return e?e.map(y9).join(" "):t}},Bw={...Ro,transform:Math.round},w9={rotate:ma,rotateX:ma,rotateY:ma,rotateZ:ma,scale:_d,scaleX:_d,scaleY:_d,scaleZ:_d,skew:ma,skewX:ma,skewY:ma,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Vl,originX:Ew,originY:Ew,originZ:Ze},Qg={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...w9,zIndex:Bw,fillOpacity:Vl,strokeOpacity:Vl,numOctaves:Bw},b9={...Qg,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:Sp,WebkitFilter:Sp},Qk=t=>b9[t];function Xk(t,e){let s=Qk(t);return s!==Sp&&(s=Ta),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const j9=new Set(["auto","none","0"]);function N9(t,e,s){let r=0,a;for(;r<t.length&&!a;){const l=t[r];typeof l=="string"&&!j9.has(l)&&Wl(l).values.length&&(a=t[r]),r++}if(a&&s)for(const l of e)t[l]=Xk(s,a)}class S9 extends Yg{constructor(e,s,r,a,l){super(e,s,r,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let m=e[h];if(typeof m=="string"&&(m=m.trim(),Ug(m))){const f=Kk(m,s.current);f!==void 0&&(e[h]=f),h===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!Zk.has(r)||e.length!==2)return;const[a,l]=e,c=$w(a),d=$w(l);if(c!==d)if(Lw(c)&&Lw(d))for(let h=0;h<e.length;h++){const m=e[h];typeof m=="string"&&(e[h]=parseFloat(m))}else ni[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||g9(e[a]))&&r.push(a);r.length&&N9(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ni[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=ni[s](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function k9(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const a=s?.[t]??r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const e2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function t2(t){return xk(t)&&"offsetHeight"in t}const Uw=30,C9=t=>!isNaN(parseFloat(t));class T9{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const a=Zs.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Zs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=C9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Fg);const r=this.events[e].add(s);return e==="change"?()=>{r(),Rt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Uw)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Uw);return vk(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bo(t,e){return new T9(t,e)}const{schedule:Xg}=Ak(queueMicrotask,!1),Wn={x:!1,y:!1};function s2(){return Wn.x||Wn.y}function E9(t){return t==="x"||t==="y"?Wn[t]?null:(Wn[t]=!0,()=>{Wn[t]=!1}):Wn.x||Wn.y?null:(Wn.x=Wn.y=!0,()=>{Wn.x=Wn.y=!1})}function n2(t,e){const s=k9(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[s,a,()=>r.abort()]}function Vw(t){return!(t.pointerType==="touch"||s2())}function P9(t,e,s={}){const[r,a,l]=n2(t,s),c=d=>{if(!Vw(d))return;const{target:h}=d,m=e(h,d);if(typeof m!="function"||!h)return;const f=p=>{Vw(p)&&(m(p),h.removeEventListener("pointerleave",f))};h.addEventListener("pointerleave",f,a)};return r.forEach(d=>{d.addEventListener("pointerenter",c,a)}),l}const r2=(t,e)=>e?t===e?!0:r2(t,e.parentElement):!1,ex=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,A9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _9(t){return A9.has(t.tagName)||t.tabIndex!==-1}const Ud=new WeakSet;function Ww(t){return e=>{e.key==="Enter"&&t(e)}}function Nf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const R9=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=Ww(()=>{if(Ud.has(s))return;Nf(s,"down");const a=Ww(()=>{Nf(s,"up")}),l=()=>Nf(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",l,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function Hw(t){return ex(t)&&!s2()}function M9(t,e,s={}){const[r,a,l]=n2(t,s),c=d=>{const h=d.currentTarget;if(!Hw(d))return;Ud.add(h);const m=e(h,d),f=(N,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",y),Ud.has(h)&&Ud.delete(h),Hw(N)&&typeof m=="function"&&m(N,{success:w})},p=N=>{f(N,h===window||h===document||s.useGlobalTarget||r2(h,N.target))},y=N=>{f(N,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",y,a)};return r.forEach(d=>{(s.useGlobalTarget?window:d).addEventListener("pointerdown",c,a),t2(d)&&(d.addEventListener("focus",m=>R9(m,a)),!_9(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function a2(t){return xk(t)&&"ownerSVGElement"in t}function D9(t){return a2(t)&&t.tagName==="svg"}const Es=t=>!!(t&&t.getVelocity),I9=[...Jk,Qt,Ta],L9=t=>I9.find(Yk(t)),tx=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Gw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function O9(...t){return e=>{let s=!1;const r=t.map(a=>{const l=Gw(a,e);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let a=0;a<r.length;a++){const l=r[a];typeof l=="function"?l():Gw(t[a],null)}}}}function F9(...t){return x.useCallback(O9(...t),t)}class z9 extends x.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=t2(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=s.offsetHeight||0,l.width=s.offsetWidth||0,l.top=s.offsetTop,l.left=s.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $9({children:t,isPresent:e,anchorX:s,root:r}){const a=x.useId(),l=x.useRef(null),c=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=x.useContext(tx),h=F9(l,t?.ref);return x.useInsertionEffect(()=>{const{width:m,height:f,top:p,left:y,right:N}=c.current;if(e||!l.current||!m||!f)return;const w=s==="left"?`left: ${y}`:`right: ${N}`;l.current.dataset.motionPopId=a;const j=document.createElement("style");d&&(j.nonce=d);const S=r??document.head;return S.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(j)&&S.removeChild(j)}},[e]),n.jsx(z9,{isPresent:e,childRef:l,sizeRef:c,children:x.cloneElement(t,{ref:h})})}const B9=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:c,anchorX:d,root:h})=>{const m=Rg(U9),f=x.useId();let p=!0,y=x.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:s,custom:a,onExitComplete:N=>{m.set(N,!0);for(const w of m.values())if(!w)return;r&&r()},register:N=>(m.set(N,!1),()=>m.delete(N))}),[s,m,r]);return l&&p&&(y={...y}),x.useMemo(()=>{m.forEach((N,w)=>m.set(w,!1))},[s]),x.useEffect(()=>{!s&&!m.size&&r&&r()},[s]),c==="popLayout"&&(t=n.jsx($9,{isPresent:s,anchorX:d,root:h,children:t})),n.jsx(Qu.Provider,{value:y,children:t})};function U9(){return new Map}function i2(t=!0){const e=x.useContext(Qu);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=e,l=x.useId();x.useEffect(()=>{if(t)return a(l)},[t]);const c=x.useCallback(()=>t&&r&&r(l),[l,r,t]);return!s&&r?[!1,c]:[!0]}const Rd=t=>t.key||"";function qw(t){const e=[];return x.Children.forEach(t,s=>{x.isValidElement(s)&&e.push(s)}),e}const V9=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:h})=>{const[m,f]=i2(c),p=x.useMemo(()=>qw(t),[t]),y=c&&!m?[]:p.map(Rd),N=x.useRef(!0),w=x.useRef(p),j=Rg(()=>new Map),[S,T]=x.useState(p),[R,A]=x.useState(p);pk(()=>{N.current=!1,w.current=p;for(let F=0;F<R.length;F++){const W=Rd(R[F]);y.includes(W)?j.delete(W):j.get(W)!==!0&&j.set(W,!1)}},[R,y.length,y.join("-")]);const k=[];if(p!==S){let F=[...p];for(let W=0;W<R.length;W++){const z=R[W],oe=Rd(z);y.includes(oe)||(F.splice(W,0,z),k.push(z))}return l==="wait"&&k.length&&(F=k),A(qw(F)),T(p),null}const{forceRender:P}=x.useContext(_g);return n.jsx(n.Fragment,{children:R.map(F=>{const W=Rd(F),z=c&&!m?!1:p===R||y.includes(W),oe=()=>{if(j.has(W))j.set(W,!0);else return;let q=!0;j.forEach(J=>{J||(q=!1)}),q&&(P?.(),A(w.current),c&&f?.(),r&&r())};return n.jsx(B9,{isPresent:z,initial:!N.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,root:h,onExitComplete:z?void 0:oe,anchorX:d,children:F},W)})})},o2=x.createContext({strict:!1}),Kw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jo={};for(const t in Kw)jo[t]={isEnabled:e=>Kw[t].some(s=>!!e[s])};function W9(t){for(const e in t)jo[e]={...jo[e],...t[e]}}const H9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||H9.has(t)}let l2=t=>!hu(t);function G9(t){typeof t=="function"&&(l2=e=>e.startsWith("on")?!hu(e):t(e))}try{G9(require("@emotion/is-prop-valid").default)}catch{}function q9(t,e,s){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(l2(a)||s===!0&&hu(a)||!e&&!hu(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}const Xu=x.createContext({});function eh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hl(t){return typeof t=="string"||Array.isArray(t)}const sx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nx=["initial",...sx];function th(t){return eh(t.animate)||nx.some(e=>Hl(t[e]))}function c2(t){return!!(th(t)||t.variants)}function K9(t,e){if(th(t)){const{initial:s,animate:r}=t;return{initial:s===!1||Hl(s)?s:void 0,animate:Hl(r)?r:void 0}}return t.inherit!==!1?e:{}}function Z9(t){const{initial:e,animate:s}=K9(t,x.useContext(Xu));return x.useMemo(()=>({initial:e,animate:s}),[Zw(e),Zw(s)])}function Zw(t){return Array.isArray(t)?t.join(" "):t}const Gl={};function Y9(t){for(const e in t)Gl[e]=t[e],Bg(e)&&(Gl[e].isCSSVariable=!0)}function d2(t,{layout:e,layoutId:s}){return Do.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Gl[t]||t==="opacity")}const J9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Q9=Mo.length;function X9(t,e,s){let r="",a=!0;for(let l=0;l<Q9;l++){const c=Mo[l],d=t[c];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(c.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||s){const m=e2(d,Qg[c]);if(!h){a=!1;const f=J9[c]||c;r+=`${f}(${m}) `}s&&(e[c]=m)}}return r=r.trim(),s?r=s(e,a?"":r):a&&(r="none"),r}function rx(t,e,s){const{style:r,vars:a,transformOrigin:l}=t;let c=!1,d=!1;for(const h in e){const m=e[h];if(Do.has(h)){c=!0;continue}else if(Bg(h)){a[h]=m;continue}else{const f=e2(m,Qg[h]);h.startsWith("origin")?(d=!0,l[h]=f):r[h]=f}}if(e.transform||(c||s?r.transform=X9(e,t.transform,s):r.transform&&(r.transform="none")),d){const{originX:h="50%",originY:m="50%",originZ:f=0}=l;r.transformOrigin=`${h} ${m} ${f}`}}const ax=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function u2(t,e,s){for(const r in e)!Es(e[r])&&!d2(r,s)&&(t[r]=e[r])}function eB({transformTemplate:t},e){return x.useMemo(()=>{const s=ax();return rx(s,e,t),Object.assign({},s.vars,s.style)},[e])}function tB(t,e){const s=t.style||{},r={};return u2(r,s,t),Object.assign(r,eB(t,e)),r}function sB(t,e){const s={},r=tB(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const nB={offset:"stroke-dashoffset",array:"stroke-dasharray"},rB={offset:"strokeDashoffset",array:"strokeDasharray"};function aB(t,e,s=1,r=0,a=!0){t.pathLength=1;const l=a?nB:rB;t[l.offset]=Ze.transform(-r);const c=Ze.transform(e),d=Ze.transform(s);t[l.array]=`${c} ${d}`}function h2(t,{attrX:e,attrY:s,attrScale:r,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...d},h,m,f){if(rx(t,d,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:y}=t;p.transform&&(y.transform=p.transform,delete p.transform),(y.transform||p.transformOrigin)&&(y.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),y.transform&&(y.transformBox=f?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),s!==void 0&&(p.y=s),r!==void 0&&(p.scale=r),a!==void 0&&aB(p,a,l,c,!1)}const m2=()=>({...ax(),attrs:{}}),f2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iB(t,e,s,r){const a=x.useMemo(()=>{const l=m2();return h2(l,e,f2(r),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};u2(l,t.style,t),a.style={...l,...a.style}}return a}const oB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ix(t){return typeof t!="string"||t.includes("-")?!1:!!(oB.indexOf(t)>-1||/[A-Z]/u.test(t))}function lB(t,e,s,{latestValues:r},a,l=!1){const d=(ix(t)?iB:sB)(e,r,a,t),h=q9(e,typeof t=="string",l),m=t!==x.Fragment?{...h,...d,ref:s}:{},{children:f}=e,p=x.useMemo(()=>Es(f)?f.get():f,[f]);return x.createElement(t,{...m,children:p})}function Yw(t){const e=[{},{}];return t?.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function ox(t,e,s,r){if(typeof e=="function"){const[a,l]=Yw(r);e=e(s!==void 0?s:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=Yw(r);e=e(s!==void 0?s:t.custom,a,l)}return e}function Vd(t){return Es(t)?t.get():t}function cB({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,a){return{latestValues:dB(s,r,a,t),renderState:e()}}function dB(t,e,s,r){const a={},l=r(t,{});for(const y in l)a[y]=Vd(l[y]);let{initial:c,animate:d}=t;const h=th(t),m=c2(t);e&&m&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let f=s?s.initial===!1:!1;f=f||c===!1;const p=f?d:c;if(p&&typeof p!="boolean"&&!eh(p)){const y=Array.isArray(p)?p:[p];for(let N=0;N<y.length;N++){const w=ox(t,y[N]);if(w){const{transitionEnd:j,transition:S,...T}=w;for(const R in T){let A=T[R];if(Array.isArray(A)){const k=f?A.length-1:0;A=A[k]}A!==null&&(a[R]=A)}for(const R in j)a[R]=j[R]}}}return a}const p2=t=>(e,s)=>{const r=x.useContext(Xu),a=x.useContext(Qu),l=()=>cB(t,e,r,a);return s?l():Rg(l)};function lx(t,e,s){const{style:r}=t,a={};for(const l in r)(Es(r[l])||e.style&&Es(e.style[l])||d2(l,t)||s?.getValue(l)?.liveStyle!==void 0)&&(a[l]=r[l]);return a}const uB=p2({scrapeMotionValuesFromProps:lx,createRenderState:ax});function g2(t,e,s){const r=lx(t,e,s);for(const a in t)if(Es(t[a])||Es(e[a])){const l=Mo.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[l]=t[a]}return r}const hB=p2({scrapeMotionValuesFromProps:g2,createRenderState:m2}),mB=Symbol.for("motionComponentSymbol");function to(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fB(t,e,s){return x.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):to(s)&&(s.current=r))},[e])}const cx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pB="framerAppearId",x2="data-"+cx(pB),y2=x.createContext({});function gB(t,e,s,r,a){const{visualElement:l}=x.useContext(Xu),c=x.useContext(o2),d=x.useContext(Qu),h=x.useContext(tx).reducedMotion,m=x.useRef(null);r=r||c.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:l,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const f=m.current,p=x.useContext(y2);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&xB(m.current,s,a,p);const y=x.useRef(!1);x.useInsertionEffect(()=>{f&&y.current&&f.update(s,d)});const N=s[x2],w=x.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return pk(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),w.current=!1),f.enteringChildren=void 0)}),f}function xB(t,e,s,r){const{layoutId:a,layout:l,drag:c,dragConstraints:d,layoutScroll:h,layoutRoot:m,layoutCrossfade:f}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:v2(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||d&&to(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:h,layoutRoot:m})}function v2(t){if(t)return t.options.allowProjection!==!1?t.projection:v2(t.parent)}function Sf(t,{forwardMotionProps:e=!1}={},s,r){s&&W9(s);const a=ix(t)?hB:uB;function l(d,h){let m;const f={...x.useContext(tx),...d,layoutId:yB(d)},{isStatic:p}=f,y=Z9(d),N=a(d,p);if(!p&&Mg){vB();const w=wB(f);m=w.MeasureLayout,y.visualElement=gB(t,N,f,r,w.ProjectionNode)}return n.jsxs(Xu.Provider,{value:y,children:[m&&y.visualElement?n.jsx(m,{visualElement:y.visualElement,...f}):null,lB(t,d,fB(N,y.visualElement,h),N,p,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=x.forwardRef(l);return c[mB]=t,c}function yB({layoutId:t}){const e=x.useContext(_g).id;return e&&t!==void 0?e+"-"+t:t}function vB(t,e){x.useContext(o2).strict}function wB(t){const{drag:e,layout:s}=jo;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e?.isEnabled(t)||s?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function bB(t,e){if(typeof Proxy>"u")return Sf;const s=new Map,r=(l,c)=>Sf(l,c,t,e),a=(l,c)=>r(l,c);return new Proxy(a,{get:(l,c)=>c==="create"?r:(s.has(c)||s.set(c,Sf(c,void 0,t,e)),s.get(c))})}function w2({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function jB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function NB(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function kf(t){return t===void 0||t===1}function kp({scale:t,scaleX:e,scaleY:s}){return!kf(t)||!kf(e)||!kf(s)}function Ja(t){return kp(t)||b2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function b2(t){return Jw(t.x)||Jw(t.y)}function Jw(t){return t&&t!=="0%"}function mu(t,e,s){const r=t-s,a=e*r;return s+a}function Qw(t,e,s,r,a){return a!==void 0&&(t=mu(t,a,r)),mu(t,s,r)+e}function Cp(t,e=0,s=1,r,a){t.min=Qw(t.min,e,s,r,a),t.max=Qw(t.max,e,s,r,a)}function j2(t,{x:e,y:s}){Cp(t.x,e.translate,e.scale,e.originPoint),Cp(t.y,s.translate,s.scale,s.originPoint)}const Xw=.999999999999,eb=1.0000000000001;function SB(t,e,s,r=!1){const a=s.length;if(!a)return;e.x=e.y=1;let l,c;for(let d=0;d<a;d++){l=s[d],c=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&no(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,j2(t,c)),r&&Ja(l.latestValues)&&no(t,l.latestValues))}e.x<eb&&e.x>Xw&&(e.x=1),e.y<eb&&e.y>Xw&&(e.y=1)}function so(t,e){t.min=t.min+e,t.max=t.max+e}function tb(t,e,s,r,a=.5){const l=zt(t.min,t.max,a);Cp(t,e,s,l,r)}function no(t,e){tb(t.x,e.x,e.scaleX,e.scale,e.originX),tb(t.y,e.y,e.scaleY,e.scale,e.originY)}function N2(t,e){return w2(NB(t.getBoundingClientRect(),e))}function kB(t,e,s){const r=N2(t,s),{scroll:a}=e;return a&&(so(r.x,a.offset.x),so(r.y,a.offset.y)),r}const sb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ro=()=>({x:sb(),y:sb()}),nb=()=>({min:0,max:0}),qt=()=>({x:nb(),y:nb()}),Tp={current:null},S2={current:!1};function CB(){if(S2.current=!0,!!Mg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Tp.current=t.matches;t.addEventListener("change",e),e()}else Tp.current=!1}const TB=new WeakMap;function EB(t,e,s){for(const r in e){const a=e[r],l=s[r];if(Es(a))t.addValue(r,a);else if(Es(l))t.addValue(r,bo(a,{owner:t}));else if(l!==a)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(r);t.addValue(r,bo(c!==void 0?c:a,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const rb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PB{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Zs.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Rt.render(this.render,!1,!0))};const{latestValues:h,renderState:m}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=s.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=th(s),this.isVariantNode=c2(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(s,{},this);for(const y in p){const N=p[y];h[y]!==void 0&&Es(N)&&N.set(h[y])}}mount(e){this.current=e,TB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),S2.current||CB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tp.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ca(this.notifyUpdate),Ca(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Do.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Rt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jo){const s=jo[e];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<rb.length;r++){const a=rb[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=EB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=bo(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(gk(r)||yk(r))?r=parseFloat(r):!L9(r)&&Ta.test(s)&&(r=Xk(e,s)),this.setBaseTarget(e,Es(r)?r.get():r)),Es(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const l=ox(this.props,s,this.presenceContext?.custom);l&&(r=l[e])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Es(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Fg),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){Xg.render(this.render)}}class k2 extends PB{constructor(){super(...arguments),this.KeyframeResolver=S9}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Es(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function C2(t,{style:e,vars:s},r,a){const l=t.style;let c;for(c in e)l[c]=e[c];a?.applyProjectionStyles(l,r);for(c in s)l.setProperty(c,s[c])}function AB(t){return window.getComputedStyle(t)}class _B extends k2{constructor(){super(...arguments),this.type="html",this.renderInstance=C2}readValueFromInstance(e,s){if(Do.has(s))return this.projection?.isProjecting?yp(s):V8(e,s);{const r=AB(e),a=(Bg(s)?r.getPropertyValue(s):r[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return N2(e,s)}build(e,s,r){rx(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return lx(e,s,r)}}const T2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RB(t,e,s,r){C2(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(T2.has(a)?a:cx(a),e.attrs[a])}class MB extends k2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qt}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Do.has(s)){const r=Qk(s);return r&&r.default||0}return s=T2.has(s)?s:cx(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return g2(e,s,r)}build(e,s,r){h2(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,a){RB(e,s,r,a)}mount(e){this.isSVGTag=f2(e.tagName),super.mount(e)}}const DB=(t,e)=>ix(t)?new MB(e):new _B(e,{allowProjection:t!==x.Fragment});function fo(t,e,s){const r=t.getProps();return ox(r,e,s!==void 0?s:r.custom,t)}const Ep=t=>Array.isArray(t);function IB(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,bo(s))}function LB(t){return Ep(t)?t[t.length-1]||0:t}function OB(t,e){const s=fo(t,e);let{transitionEnd:r={},transition:a={},...l}=s||{};l={...l,...r};for(const c in l){const d=LB(l[c]);IB(t,c,d)}}function FB(t){return!!(Es(t)&&t.add)}function Pp(t,e){const s=t.getValue("willChange");if(FB(s))return s.add(e);if(!s&&Br.WillChange){const r=new Br.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function E2(t){return t.props[x2]}const zB=t=>t!==null;function $B(t,{repeat:e,repeatType:s="loop"},r){const a=t.filter(zB),l=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[l]}const BB={type:"spring",stiffness:500,damping:25,restSpeed:10},UB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),VB={type:"keyframes",duration:.8},WB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HB=(t,{keyframes:e})=>e.length>2?VB:Do.has(t)?t.startsWith("scale")?UB(e[1]):BB:WB;function GB({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:d,from:h,elapsed:m,...f}){return!!Object.keys(f).length}const dx=(t,e,s,r={},a,l)=>c=>{const d=Jg(r,t)||{},h=d.delay||r.delay||0;let{elapsed:m=0}=r;m=m-ur(h);const f={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:y=>{e.set(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:a};GB(d)||Object.assign(f,HB(t,f)),f.duration&&(f.duration=ur(f.duration)),f.repeatDelay&&(f.repeatDelay=ur(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Np(f),f.delay===0&&(p=!0)),(Br.instantAnimations||Br.skipAnimations)&&(p=!0,Np(f),f.delay=0),f.allowFlatten=!d.type&&!d.ease,p&&!l&&e.get()!==void 0){const y=$B(f.keyframes,d);if(y!==void 0){Rt.update(()=>{f.onUpdate(y),f.onComplete()});return}}return d.isSync?new Zg(f):new h9(f)};function qB({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function P2(t,e,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;r&&(l=r);const h=[],m=a&&t.animationState&&t.animationState.getState()[a];for(const f in d){const p=t.getValue(f,t.latestValues[f]??null),y=d[f];if(y===void 0||m&&qB(m,f))continue;const N={delay:s,...Jg(l||{},f)},w=p.get();if(w!==void 0&&!p.isAnimating&&!Array.isArray(y)&&y===w&&!N.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const T=E2(t);if(T){const R=window.MotionHandoffAnimation(T,f,Rt);R!==null&&(N.startTime=R,j=!0)}}Pp(t,f),p.start(dx(f,p,y,t.shouldReduceMotion&&Zk.has(f)?{type:!1}:N,t,j));const S=p.animation;S&&h.push(S)}return c&&Promise.all(h).then(()=>{Rt.update(()=>{c&&OB(t,c)})}),h}function A2(t,e,s,r=0,a=1){const l=Array.from(t).sort((m,f)=>m.sortNodePosition(f)).indexOf(e),c=t.size,d=(c-1)*r;return typeof s=="function"?s(l,c):a===1?l*r:d-l*r}function Ap(t,e,s={}){const r=fo(t,e,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const l=r?()=>Promise.all(P2(t,r,s)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:f,staggerDirection:p}=a;return KB(t,e,h,m,f,p,s)}:()=>Promise.resolve(),{when:d}=a;if(d){const[h,m]=d==="beforeChildren"?[l,c]:[c,l];return h().then(()=>m())}else return Promise.all([l(),c(s.delay)])}function KB(t,e,s=0,r=0,a=0,l=1,c){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(Ap(h,e,{...c,delay:s+(typeof r=="function"?0:r)+A2(t.variantChildren,h,r,a,l)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function ZB(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(l=>Ap(t,l,s));r=Promise.all(a)}else if(typeof e=="string")r=Ap(t,e,s);else{const a=typeof e=="function"?fo(t,e,s.custom):e;r=Promise.all(P2(t,a,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}function _2(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const YB=nx.length;function R2(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?R2(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<YB;s++){const r=nx[s],a=t.props[r];(Hl(a)||a===!1)&&(e[r]=a)}return e}const JB=[...sx].reverse(),QB=sx.length;function XB(t){return e=>Promise.all(e.map(({animation:s,options:r})=>ZB(t,s,r)))}function e7(t){let e=XB(t),s=ab(),r=!0;const a=h=>(m,f)=>{const p=fo(t,f,h==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:y,transitionEnd:N,...w}=p;m={...m,...w,...N}}return m};function l(h){e=h(t)}function c(h){const{props:m}=t,f=R2(t.parent)||{},p=[],y=new Set;let N={},w=1/0;for(let S=0;S<QB;S++){const T=JB[S],R=s[T],A=m[T]!==void 0?m[T]:f[T],k=Hl(A),P=T===h?R.isActive:null;P===!1&&(w=S);let F=A===f[T]&&A!==m[T]&&k;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),R.protectedKeys={...N},!R.isActive&&P===null||!A&&!R.prevProp||eh(A)||typeof A=="boolean")continue;const W=t7(R.prevProp,A);let z=W||T===h&&R.isActive&&!F&&k||S>w&&k,oe=!1;const q=Array.isArray(A)?A:[A];let J=q.reduce(a(T),{});P===!1&&(J={});const{prevResolvedValues:K={}}=R,B={...K,...J},V=D=>{z=!0,y.has(D)&&(oe=!0,y.delete(D)),R.needsAnimating[D]=!0;const E=t.getValue(D);E&&(E.liveStyle=!1)};for(const D in B){const E=J[D],Y=K[D];if(N.hasOwnProperty(D))continue;let Q=!1;Ep(E)&&Ep(Y)?Q=!_2(E,Y):Q=E!==Y,Q?E!=null?V(D):y.add(D):E!==void 0&&y.has(D)?V(D):R.protectedKeys[D]=!0}R.prevProp=A,R.prevResolvedValues=J,R.isActive&&(N={...N,...J}),r&&t.blockInitialAnimation&&(z=!1);const re=F&&W;z&&(!re||oe)&&p.push(...q.map(D=>{const E={type:T};if(typeof D=="string"&&r&&!re&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,Q=fo(Y,D);if(Y.enteringChildren&&Q){const{delayChildren:I}=Q.transition||{};E.delay=A2(Y.enteringChildren,t,I)}}return{animation:D,options:E}}))}if(y.size){const S={};if(typeof m.initial!="boolean"){const T=fo(t,Array.isArray(m.initial)?m.initial[0]:m.initial);T&&T.transition&&(S.transition=T.transition)}y.forEach(T=>{const R=t.getBaseTarget(T),A=t.getValue(T);A&&(A.liveStyle=!0),S[T]=R??null}),p.push({animation:S})}let j=!!p.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(p):Promise.resolve()}function d(h,m){if(s[h].isActive===m)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(h,m)),s[h].isActive=m;const f=c(h);for(const p in s)s[p].protectedKeys={};return f}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>s,reset:()=>{s=ab(),r=!0}}}function t7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_2(e,t):!1}function Za(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ab(){return{animate:Za(!0),whileInView:Za(),whileHover:Za(),whileTap:Za(),whileDrag:Za(),whileFocus:Za(),exit:Za()}}class Ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}class s7 extends Ra{constructor(e){super(e),e.animationState||(e.animationState=e7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();eh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let n7=0;class r7 extends Ra{constructor(){super(...arguments),this.id=n7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const a7={animation:{Feature:s7},exit:{Feature:r7}};function ql(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function oc(t){return{point:{x:t.pageX,y:t.pageY}}}const i7=t=>e=>ex(e)&&t(e,oc(e));function _l(t,e,s,r){return ql(t,e,i7(s),r)}const M2=1e-4,o7=1-M2,l7=1+M2,D2=.01,c7=0-D2,d7=0+D2;function Is(t){return t.max-t.min}function u7(t,e,s){return Math.abs(t-e)<=s}function ib(t,e,s,r=.5){t.origin=r,t.originPoint=zt(e.min,e.max,t.origin),t.scale=Is(s)/Is(e),t.translate=zt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=o7&&t.scale<=l7||isNaN(t.scale))&&(t.scale=1),(t.translate>=c7&&t.translate<=d7||isNaN(t.translate))&&(t.translate=0)}function Rl(t,e,s,r){ib(t.x,e.x,s.x,r?r.originX:void 0),ib(t.y,e.y,s.y,r?r.originY:void 0)}function ob(t,e,s){t.min=s.min+e.min,t.max=t.min+Is(e)}function h7(t,e,s){ob(t.x,e.x,s.x),ob(t.y,e.y,s.y)}function lb(t,e,s){t.min=e.min-s.min,t.max=t.min+Is(e)}function Ml(t,e,s){lb(t.x,e.x,s.x),lb(t.y,e.y,s.y)}function bn(t){return[t("x"),t("y")]}const I2=({current:t})=>t?t.ownerDocument.defaultView:null,cb=(t,e)=>Math.abs(t-e);function m7(t,e){const s=cb(t.x,e.x),r=cb(t.y,e.y);return Math.sqrt(s**2+r**2)}class L2{constructor(e,s,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Tf(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,w=m7(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!w)return;const{point:j}=y,{timestamp:S}=ps;this.history.push({...j,timestamp:S});const{onStart:T,onMove:R}=this.handlers;N||(T&&T(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,y)},this.handlePointerMove=(y,N)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Cf(N,this.transformPagePoint),Rt.update(this.updatePoint,!0)},this.handlePointerUp=(y,N)=>{this.end();const{onEnd:w,onSessionEnd:j,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Tf(y.type==="pointercancel"?this.lastMoveEventInfo:Cf(N,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,T),j&&j(y,T)},!ex(e))return;this.dragSnapToOrigin=l,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=a||window;const d=oc(e),h=Cf(d,this.transformPagePoint),{point:m}=h,{timestamp:f}=ps;this.history=[{...m,timestamp:f}];const{onSessionStart:p}=s;p&&p(e,Tf(h,this.history)),this.removeListeners=rc(_l(this.contextWindow,"pointermove",this.handlePointerMove),_l(this.contextWindow,"pointerup",this.handlePointerUp),_l(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ca(this.updatePoint)}}function Cf(t,e){return e?{point:e(t.point)}:t}function db(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tf({point:t},e){return{point:t,delta:db(t,O2(e)),offset:db(t,f7(e)),velocity:p7(e,.1)}}function f7(t){return t[0]}function O2(t){return t[t.length-1]}function p7(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const a=O2(t);for(;s>=0&&(r=t[s],!(a.timestamp-r.timestamp>ur(e)));)s--;if(!r)return{x:0,y:0};const l=Tn(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function g7(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?zt(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?zt(s,t,r.max):Math.min(t,s)),t}function ub(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function x7(t,{top:e,left:s,bottom:r,right:a}){return{x:ub(t.x,s,a),y:ub(t.y,e,r)}}function hb(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function y7(t,e){return{x:hb(t.x,e.x),y:hb(t.y,e.y)}}function v7(t,e){let s=.5;const r=Is(t),a=Is(e);return a>r?s=Ul(e.min,e.max-r,t.min):r>a&&(s=Ul(t.min,t.max-a,e.min)),$r(0,1,s)}function w7(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const _p=.35;function b7(t=_p){return t===!1?t=0:t===!0&&(t=_p),{x:mb(t,"left","right"),y:mb(t,"top","bottom")}}function mb(t,e,s){return{min:fb(t,e),max:fb(t,s)}}function fb(t,e){return typeof t=="number"?t:t[e]||0}const j7=new WeakMap;class N7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(oc(p).point)},c=(p,y)=>{const{drag:N,dragPropagation:w,onDragStart:j}=this.getProps();if(N&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=E9(N),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bn(T=>{let R=this.getAxisMotionValue(T).get()||0;if(hr.test(R)){const{projection:A}=this.visualElement;if(A&&A.layout){const k=A.layout.layoutBox[T];k&&(R=Is(k)*(parseFloat(R)/100))}}this.originPoint[T]=R}),j&&Rt.postRender(()=>j(p,y)),Pp(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},d=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y;const{dragPropagation:N,dragDirectionLock:w,onDirectionLock:j,onDrag:S}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:T}=y;if(w&&this.currentDirection===null){this.currentDirection=S7(T),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",y.point,T),this.updateAxis("y",y.point,T),this.visualElement.render(),S&&S(p,y)},h=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y,this.stop(p,y),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>bn(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new L2(e,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:I2(this.visualElement)})}stop(e,s){const r=e||this.latestPointerEvent,a=s||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!r)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Rt.postRender(()=>d(r,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:a}=this.getProps();if(!r||!Md(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=g7(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&to(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=x7(r.layoutBox,e):this.constraints=!1,this.elastic=b7(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&bn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=w7(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!to(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=kB(r,a.root,this.visualElement.getTransformPagePoint());let c=y7(a.layout.layoutBox,l);if(s){const d=s(jB(c));this.hasMutatedConstraints=!!d,d&&(c=w2(d))}return c}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},m=bn(f=>{if(!Md(f,s,this.currentDirection))return;let p=h&&h[f]||{};c&&(p={min:0,max:0});const y=a?200:1e6,N=a?40:1e7,w={type:"inertia",velocity:r?e[f]:0,bounceStiffness:y,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...l,...p};return this.startAxisValueAnimation(f,w)});return Promise.all(m).then(d)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return Pp(this.visualElement,e),r.start(dx(e,r,0,s,this.visualElement,!1))}stopAnimation(){bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){bn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){bn(s=>{const{drag:r}=this.getProps();if(!Md(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(s);if(a&&a.layout){const{min:c,max:d}=a.layout.layoutBox[s];l.set(e[s]-zt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!to(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};bn(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const h=d.get();a[c]=v7({min:h,max:h},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bn(c=>{if(!Md(c,e,null))return;const d=this.getAxisMotionValue(c),{min:h,max:m}=this.constraints[c];d.set(zt(h,m,a[c]))})}addListeners(){if(!this.visualElement.current)return;j7.set(this.visualElement,this);const e=this.visualElement.current,s=_l(e,"pointerdown",h=>{const{drag:m,dragListener:f=!0}=this.getProps();m&&f&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();to(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Rt.read(r);const c=ql(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(bn(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=h[f].translate,p.set(p.get()+h[f].translate))}),this.visualElement.render())}));return()=>{c(),s(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=_p,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Md(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function S7(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class k7 extends Ra{constructor(e){super(e),this.removeGroupControls=En,this.removeListeners=En,this.controls=new N7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||En}unmount(){this.removeGroupControls(),this.removeListeners()}}const pb=t=>(e,s)=>{t&&Rt.postRender(()=>t(e,s))};class C7 extends Ra{constructor(){super(...arguments),this.removePointerDownListener=En}onPointerDown(e){this.session=new L2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:I2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:pb(e),onStart:pb(s),onMove:r,onEnd:(l,c)=>{delete this.session,a&&Rt.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=_l(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const s=gb(t,e.target.x),r=gb(t,e.target.y);return`${s}% ${r}%`}},T7={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,a=Ta.parse(t);if(a.length>5)return r;const l=Ta.createTransformer(t),c=typeof a[0]!="number"?1:0,d=s.x.scale*e.x,h=s.y.scale*e.y;a[0+c]/=d,a[1+c]/=h;const m=zt(d,h,.5);return typeof a[2+c]=="number"&&(a[2+c]/=m),typeof a[3+c]=="number"&&(a[3+c]/=m),l(a)}};let Ef=!1;class E7 extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=e;Y9(P7),l&&(s.group&&s.group.add(l),r&&r.register&&a&&r.register(l),Ef&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Wd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:a,isPresent:l}=this.props,{projection:c}=r;return c&&(c.isPresent=l,Ef=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||Rt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=e;Ef=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function F2(t){const[e,s]=i2(),r=x.useContext(_g);return n.jsx(E7,{...t,layoutGroup:r,switchLayoutGroup:x.useContext(y2),isPresent:e,safeToRemove:s})}const P7={borderRadius:{...Sl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sl,borderTopRightRadius:Sl,borderBottomLeftRadius:Sl,borderBottomRightRadius:Sl,boxShadow:T7};function A7(t,e,s){const r=Es(t)?t:bo(t);return r.start(dx("",r,e,s)),r.animation}const _7=(t,e)=>t.depth-e.depth;class R7{constructor(){this.children=[],this.isDirty=!1}add(e){Dg(this.children,e),this.isDirty=!0}remove(e){Ig(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_7),this.isDirty=!1,this.children.forEach(e)}}function M7(t,e){const s=Zs.now(),r=({timestamp:a})=>{const l=a-s;l>=e&&(Ca(r),t(l-e))};return Rt.setup(r,!0),()=>Ca(r)}const z2=["TopLeft","TopRight","BottomLeft","BottomRight"],D7=z2.length,xb=t=>typeof t=="string"?parseFloat(t):t,yb=t=>typeof t=="number"||Ze.test(t);function I7(t,e,s,r,a,l){a?(t.opacity=zt(0,s.opacity??1,L7(r)),t.opacityExit=zt(e.opacity??1,0,O7(r))):l&&(t.opacity=zt(e.opacity??1,s.opacity??1,r));for(let c=0;c<D7;c++){const d=`border${z2[c]}Radius`;let h=vb(e,d),m=vb(s,d);if(h===void 0&&m===void 0)continue;h||(h=0),m||(m=0),h===0||m===0||yb(h)===yb(m)?(t[d]=Math.max(zt(xb(h),xb(m),r),0),(hr.test(m)||hr.test(h))&&(t[d]+="%")):t[d]=m}(e.rotate||s.rotate)&&(t.rotate=zt(e.rotate||0,s.rotate||0,r))}function vb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const L7=$2(0,.5,Ck),O7=$2(.5,.95,En);function $2(t,e,s){return r=>r<t?0:r>e?1:s(Ul(t,e,r))}function wb(t,e){t.min=e.min,t.max=e.max}function vn(t,e){wb(t.x,e.x),wb(t.y,e.y)}function bb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jb(t,e,s,r,a){return t-=e,t=mu(t,1/s,r),a!==void 0&&(t=mu(t,1/a,r)),t}function F7(t,e=0,s=1,r=.5,a,l=t,c=t){if(hr.test(e)&&(e=parseFloat(e),e=zt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=zt(l.min,l.max,r);t===l&&(d-=e),t.min=jb(t.min,e,s,d,a),t.max=jb(t.max,e,s,d,a)}function Nb(t,e,[s,r,a],l,c){F7(t,e[s],e[r],e[a],e.scale,l,c)}const z7=["x","scaleX","originX"],$7=["y","scaleY","originY"];function Sb(t,e,s,r){Nb(t.x,e,z7,s?s.x:void 0,r?r.x:void 0),Nb(t.y,e,$7,s?s.y:void 0,r?r.y:void 0)}function kb(t){return t.translate===0&&t.scale===1}function B2(t){return kb(t.x)&&kb(t.y)}function Cb(t,e){return t.min===e.min&&t.max===e.max}function B7(t,e){return Cb(t.x,e.x)&&Cb(t.y,e.y)}function Tb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function U2(t,e){return Tb(t.x,e.x)&&Tb(t.y,e.y)}function Eb(t){return Is(t.x)/Is(t.y)}function Pb(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class U7{constructor(){this.members=[]}add(e){Dg(this.members,e),e.scheduleRender()}remove(e){if(Ig(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function V7(t,e,s){let r="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=s?.z||0;if((a||l||c)&&(r=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:m,rotate:f,rotateX:p,rotateY:y,skewX:N,skewY:w}=s;m&&(r=`perspective(${m}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),y&&(r+=`rotateY(${y}deg) `),N&&(r+=`skewX(${N}deg) `),w&&(r+=`skewY(${w}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(r+=`scale(${d}, ${h})`),r||"none"}const Pf=["","X","Y","Z"],W7=1e3;let H7=0;function Af(t,e,s,r){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function V2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=E2(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Rt,!(a||l))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&V2(r)}function W2({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(c={},d=e?.()){this.id=H7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(K7),this.nodes.forEach(Q7),this.nodes.forEach(X7),this.nodes.forEach(Z7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new R7)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Fg),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const h=this.eventHandlers.get(c);h&&h.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=a2(c)&&!D9(c),this.instance=c;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let f,p=0;const y=()=>this.root.updateBlockedByResize=!1;Rt.read(()=>{p=window.innerWidth}),t(c,()=>{const N=window.innerWidth;N!==p&&(p=N,this.root.updateBlockedByResize=!0,f&&f(),f=M7(y,250),Wd.hasAnimatedSinceResize&&(Wd.hasAnimatedSinceResize=!1,this.nodes.forEach(Rb)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:y,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||m.getDefaultTransition()||rU,{onLayoutAnimationStart:j,onLayoutAnimationComplete:S}=m.getProps(),T=!this.targetLayout||!U2(this.targetLayout,N),R=!p&&y;if(this.options.layoutRoot||this.resumeFrom||R||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...Jg(w,"layout"),onPlay:j,onComplete:S};(m.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(f,R)}else p||Rb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ca(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eU),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&V2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ab);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_b);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(J7),this.nodes.forEach(G7),this.nodes.forEach(q7)):this.nodes.forEach(_b),this.clearAllSnapshots();const d=Zs.now();ps.delta=$r(0,1e3/60,d-ps.timestamp),ps.timestamp=d,ps.isProcessing=!0,yf.update.process(ps),yf.preRender.process(ps),yf.render.process(ps),ps.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Y7),this.sharedNodes.forEach(tU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Is(this.snapshot.measuredBox.x)&&!Is(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!B2(this.projectionDelta),h=this.getTransformTemplate(),m=h?h(this.latestValues,""):void 0,f=m!==this.prevTransformTemplateValue;c&&this.instance&&(d||Ja(this.latestValues)||f)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return c&&(h=this.removeTransform(h)),aU(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return qt();const d=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(iU))){const{scroll:m}=this.root;m&&(so(d.x,m.offset.x),so(d.y,m.offset.y))}return d}removeElementScroll(c){const d=qt();if(vn(d,c),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:f,options:p}=m;m!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&vn(d,c),so(d.x,f.offset.x),so(d.y,f.offset.y))}return d}applyTransform(c,d=!1){const h=qt();vn(h,c);for(let m=0;m<this.path.length;m++){const f=this.path[m];!d&&f.options.layoutScroll&&f.scroll&&f!==f.root&&no(h,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Ja(f.latestValues)&&no(h,f.latestValues)}return Ja(this.latestValues)&&no(h,this.latestValues),h}removeTransform(c){const d=qt();vn(d,c);for(let h=0;h<this.path.length;h++){const m=this.path[h];if(!m.instance||!Ja(m.latestValues))continue;kp(m.latestValues)&&m.updateSnapshot();const f=qt(),p=m.measurePageBox();vn(f,p),Sb(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,f)}return Ja(this.latestValues)&&Sb(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ps.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ps.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),Ml(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qt(),this.targetWithTransforms=qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),h7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vn(this.target,this.layout.layoutBox),j2(this.target,this.targetDelta)):vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),Ml(this.relativeTargetOrigin,this.target,y.target),vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kp(this.parent.latestValues)||b2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),d=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ps.timestamp&&(h=!1),h)return;const{layout:m,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||f))return;vn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;SB(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=qt());const{target:N}=c;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bb(this.prevProjectionDelta.x,this.projectionDelta.x),bb(this.prevProjectionDelta.y,this.projectionDelta.y)),Rl(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==y||!Pb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Pb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ro(),this.projectionDelta=ro(),this.projectionDeltaWithTransform=ro()}setAnimationOrigin(c,d=!1){const h=this.snapshot,m=h?h.latestValues:{},f={...this.latestValues},p=ro();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const y=qt(),N=h?h.source:void 0,w=this.layout?this.layout.source:void 0,j=N!==w,S=this.getStack(),T=!S||S.members.length<=1,R=!!(j&&!T&&this.options.crossfade===!0&&!this.path.some(nU));this.animationProgress=0;let A;this.mixTargetDelta=k=>{const P=k/1e3;Mb(p.x,c.x,P),Mb(p.y,c.y,P),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ml(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sU(this.relativeTarget,this.relativeTargetOrigin,y,P),A&&B7(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=qt()),vn(A,this.relativeTarget)),j&&(this.animationValues=f,I7(f,m,this.latestValues,P,R,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ca(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rt.update(()=>{Wd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bo(0)),this.currentAnimation=A7(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),c.onUpdate&&c.onUpdate(d)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(W7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:h,layout:m,latestValues:f}=c;if(!(!d||!h||!m)){if(this!==c&&this.layout&&m&&H2(this.options.animationType,this.layout.layoutBox,m.layoutBox)){h=this.target||qt();const p=Is(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+p;const y=Is(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+y}vn(d,h),no(d,f),Rl(this.projectionDeltaWithTransform,this.layoutCorrected,d,f)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new U7),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:h}={}){const m=this.getStack();m&&m.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const m={};h.z&&Af("z",c,m,this.animationValues);for(let f=0;f<Pf.length;f++)Af(`rotate${Pf[f]}`,c,m,this.animationValues),Af(`skew${Pf[f]}`,c,m,this.animationValues);c.render();for(const f in m)c.setStaticValue(f,m[f]),this.animationValues&&(this.animationValues[f]=m[f]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Vd(d?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Vd(d?.pointerEvents)||""),this.hasProjected&&!Ja(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const f=m.animationValues||m.latestValues;this.applyTransformsToTarget();let p=V7(this.projectionDeltaWithTransform,this.treeScale,f);h&&(p=h(f,p)),c.transform=p;const{x:y,y:N}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${N.origin*100}% 0`,m.animationValues?c.opacity=m===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=m===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in Gl){if(f[w]===void 0)continue;const{correct:j,applyTo:S,isCSSVariable:T}=Gl[w],R=p==="none"?f[w]:j(f[w],m);if(S){const A=S.length;for(let k=0;k<A;k++)c[S[k]]=R}else T?this.options.visualElement.renderState.vars[w]=R:c[w]=R}this.options.layoutId&&(c.pointerEvents=m===this?Vd(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(Ab),this.root.sharedNodes.clear()}}}function G7(t){t.updateLayout()}function q7(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?bn(f=>{const p=l?e.measuredBox[f]:e.layoutBox[f],y=Is(p);p.min=s[f].min,p.max=p.min+y}):H2(a,e.layoutBox,s)&&bn(f=>{const p=l?e.measuredBox[f]:e.layoutBox[f],y=Is(s[f]);p.max=p.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const c=ro();Rl(c,s,e.layoutBox);const d=ro();l?Rl(d,t.applyTransform(r,!0),e.measuredBox):Rl(d,s,e.layoutBox);const h=!B2(c);let m=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:y}=f;if(p&&y){const N=qt();Ml(N,e.layoutBox,p.layoutBox);const w=qt();Ml(w,s,y.layoutBox),U2(N,w)||(m=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=N,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function K7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Z7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Y7(t){t.clearSnapshot()}function Ab(t){t.clearMeasurements()}function _b(t){t.isLayoutDirty=!1}function J7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Rb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Q7(t){t.resolveTargetDelta()}function X7(t){t.calcProjection()}function eU(t){t.resetSkewAndRotation()}function tU(t){t.removeLeadSnapshot()}function Mb(t,e,s){t.translate=zt(e.translate,0,s),t.scale=zt(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Db(t,e,s,r){t.min=zt(e.min,s.min,r),t.max=zt(e.max,s.max,r)}function sU(t,e,s,r){Db(t.x,e.x,s.x,r),Db(t.y,e.y,s.y,r)}function nU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rU={duration:.45,ease:[.4,0,.1,1]},Ib=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Lb=Ib("applewebkit/")&&!Ib("chrome/")?Math.round:En;function Ob(t){t.min=Lb(t.min),t.max=Lb(t.max)}function aU(t){Ob(t.x),Ob(t.y)}function H2(t,e,s){return t==="position"||t==="preserve-aspect"&&!u7(Eb(e),Eb(s),.2)}function iU(t){return t!==t.root&&t.scroll?.wasRoot}const oU=W2({attachResizeListener:(t,e)=>ql(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_f={current:void 0},G2=W2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_f.current){const t=new oU({});t.mount(window),t.setOptions({layoutScroll:!0}),_f.current=t}return _f.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lU={pan:{Feature:C7},drag:{Feature:k7,ProjectionNode:G2,MeasureLayout:F2}};function Fb(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,l=r[a];l&&Rt.postRender(()=>l(e,oc(e)))}class cU extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=P9(e,(s,r)=>(Fb(this.node,r,"Start"),a=>Fb(this.node,a,"End"))))}unmount(){}}class dU extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rc(ql(this.node.current,"focus",()=>this.onFocus()),ql(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zb(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),l=r[a];l&&Rt.postRender(()=>l(e,oc(e)))}class uU extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=M9(e,(s,r)=>(zb(this.node,r,"Start"),(a,{success:l})=>zb(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rp=new WeakMap,Rf=new WeakMap,hU=t=>{const e=Rp.get(t.target);e&&e(t)},mU=t=>{t.forEach(hU)};function fU({root:t,...e}){const s=t||document;Rf.has(s)||Rf.set(s,{});const r=Rf.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(mU,{root:t,...e})),r[a]}function pU(t,e,s){const r=fU(e);return Rp.set(t,s),r.observe(t),()=>{Rp.delete(t),r.unobserve(t)}}const gU={some:0,all:1};class xU extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:l}=e,c={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:gU[a]},d=h=>{const{isIntersecting:m}=h;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),y=m?f:p;y&&y(h)};return pU(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(yU(e,s))&&this.startObserver()}unmount(){}}function yU({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const vU={inView:{Feature:xU},tap:{Feature:uU},focus:{Feature:dU},hover:{Feature:cU}},wU={layout:{ProjectionNode:G2,MeasureLayout:F2}},bU={...a7,...vU,...lU,...wU},ao=bB(bU,DB);class jU{recognition=null;synthesis=null;isListening=!1;currentUtterance=null;resultSubscribers=[];stateSubscribers=[];errorSubscribers=[];voiceCommands=[{phrase:"navigate to {destination}",patterns:[/navigate to (.+)/i,/go to (.+)/i,/take me to (.+)/i],action:"navigate",parameters:["destination"]},{phrase:"find {type}",patterns:[/find (.+)/i,/search for (.+)/i,/look for (.+)/i],action:"search",parameters:["type"]},{phrase:"take me home",patterns:[/take me home/i,/go home/i,/navigate home/i],action:"navigate_home"},{phrase:"go to work",patterns:[/go to work/i,/navigate to work/i,/take me to work/i],action:"navigate_work"},{phrase:"avoid {option}",patterns:[/avoid (.+)/i,/no (.+)/i],action:"avoid",parameters:["option"]},{phrase:"add stop",patterns:[/add stop/i,/add a stop/i,/make a stop/i],action:"add_stop"},{phrase:"report {incident}",patterns:[/report (.+)/i,/there is (.+)/i],action:"report",parameters:["incident"]},{phrase:"share location",patterns:[/share location/i,/share my location/i,/send location/i],action:"share_location"},{phrase:"switch to {mode}",patterns:[/switch to (.+)/i,/change to (.+)/i,/use (.+) mode/i],action:"transport_mode",parameters:["mode"]},{phrase:"mute navigation",patterns:[/mute/i,/mute navigation/i,/stop talking/i,/be quiet/i],action:"mute"},{phrase:"unmute navigation",patterns:[/unmute/i,/unmute navigation/i,/start talking/i,/speak/i],action:"unmute"},{phrase:"repeat directions",patterns:[/repeat/i,/repeat directions/i,/say again/i],action:"repeat"},{phrase:"help",patterns:[/help/i,/what can you do/i,/commands/i],action:"help"},{phrase:"stop",patterns:[/stop/i,/cancel/i,/nevermind/i],action:"stop"}];constructor(){this.init()}init(){if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.maxAlternatives=1,this.setupRecognitionEvents()}"speechSynthesis"in window&&(this.synthesis=window.speechSynthesis)}setupRecognitionEvents(){this.recognition&&(this.recognition.onstart=()=>{this.isListening=!0,this.notifyStateChange("listening")},this.recognition.onresult=e=>{const s=e.results[e.results.length-1],r=s[0].transcript.trim(),a={transcript:r,confidence:s[0].confidence,isFinal:s.isFinal};this.notifyResult(a),s.isFinal&&this.processVoiceCommand(r)},this.recognition.onerror=e=>{this.isListening=!1;const s=new Error(`Speech recognition error: ${e.error}`);this.notifyError(s),this.notifyStateChange("error")},this.recognition.onend=()=>{this.isListening=!1,this.notifyStateChange("idle")})}isRecognitionSupported(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window}isSynthesisSupported(){return"speechSynthesis"in window}async startListening(){if(!this.recognition)throw new Error("Speech recognition is not supported");if(this.isListening){C.warn("Speech recognition is already active");return}try{this.recognition.start()}catch(e){throw new Error(`Failed to start speech recognition: ${e}`)}}stopListening(){this.recognition&&this.isListening&&this.recognition.stop()}processVoiceCommand(e){this.notifyStateChange("processing");for(const s of this.voiceCommands)for(const r of s.patterns){const a=e.match(r);if(a){const l={};s.parameters&&a.length>1&&s.parameters.forEach((c,d)=>{l[c]=a[d+1]?.trim()||""}),this.emitCommand(s.action,l,e);return}}this.handleUnknownCommand(e)}emitCommand(e,s,r){const a=new CustomEvent("voiceCommand",{detail:{action:e,parameters:s,originalText:r}});window.dispatchEvent(a)}handleUnknownCommand(e){C.info("Unknown voice command:",e),this.speak(`Sorry, I didn't understand "${e}". Say "help" to hear available commands.`)}async speak(e,s={}){if(!this.synthesis)throw new Error("Speech synthesis is not supported");return this.synthesis.cancel(),new Promise((r,a)=>{const l=new SpeechSynthesisUtterance(e);this.currentUtterance=l,s.voice&&(l.voice=s.voice),s.pitch!==void 0&&(l.pitch=s.pitch),s.rate!==void 0&&(l.rate=s.rate),s.volume!==void 0&&(l.volume=s.volume),l.onend=()=>{this.currentUtterance=null,r()},l.onerror=c=>{this.currentUtterance=null,a(new Error(`Speech synthesis error: ${c.error}`))},this.synthesis.speak(l)})}stopSpeaking(){this.synthesis&&(this.synthesis.cancel(),this.currentUtterance=null)}getAvailableVoices(){return this.synthesis?this.synthesis.getVoices():[]}getListeningState(){return this.isListening}isSpeaking(){return this.synthesis?this.synthesis.speaking:!1}subscribeToResults(e){return this.resultSubscribers.push(e),()=>{const s=this.resultSubscribers.indexOf(e);s>-1&&this.resultSubscribers.splice(s,1)}}subscribeToState(e){return this.stateSubscribers.push(e),()=>{const s=this.stateSubscribers.indexOf(e);s>-1&&this.stateSubscribers.splice(s,1)}}subscribeToErrors(e){return this.errorSubscribers.push(e),()=>{const s=this.errorSubscribers.indexOf(e);s>-1&&this.errorSubscribers.splice(s,1)}}notifyResult(e){this.resultSubscribers.forEach(s=>{try{s(e)}catch(r){C.error("Error in speech result subscriber:",r)}})}notifyStateChange(e){this.stateSubscribers.forEach(s=>{try{s(e)}catch(r){C.error("Error in speech state subscriber:",r)}})}notifyError(e){this.errorSubscribers.forEach(s=>{try{s(e)}catch(r){C.error("Error in speech error subscriber:",r)}})}getAvailableCommands(){return this.voiceCommands}}const NU=()=>{const[t,e]=he.useState(!1),[s,r]=he.useState(!1),[a,l]=he.useState(""),[c,d]=he.useState("idle"),[h,m]=he.useState(null),[f,p]=he.useState(null);he.useEffect(()=>{const S=Rs.subscribeToResults(P=>{l(P.transcript),P.isFinal&&setTimeout(()=>l(""),2e3)}),T=Rs.subscribeToState(P=>{d(P),e(Rs.getListeningState())}),R=Rs.subscribeToErrors(P=>{m(P)}),A=P=>{p(P.detail)};window.addEventListener("voiceCommand",A);const k=setInterval(()=>{r(Rs.isSpeaking())},100);return()=>{S(),T(),R(),window.removeEventListener("voiceCommand",A),clearInterval(k)}},[]);const y=async()=>{try{await Rs.startListening(),m(null)}catch(S){m(S instanceof Error?S:new Error("Failed to start listening"))}},N=()=>{Rs.stopListening()},w=async(S,T)=>{try{await Rs.speak(S,T),m(null)}catch(R){m(R instanceof Error?R:new Error("Failed to speak"))}},j=()=>{Rs.stopSpeaking()};return{isListening:t,isSpeaking:s,currentTranscript:a,state:c,error:h,lastCommand:f,isRecognitionSupported:Rs.isRecognitionSupported(),isSynthesisSupported:Rs.isSynthesisSupported(),startListening:y,stopListening:N,speak:w,stopSpeaking:j,getAvailableVoices:Rs.getAvailableVoices.bind(Rs),getAvailableCommands:Rs.getAvailableCommands.bind(Rs)}},Rs=new jU;function SU({onClose:t,onVoiceCommand:e}){const{isListening:s,isSpeaking:r,currentTranscript:a,state:l,error:c,lastCommand:d,isRecognitionSupported:h,isSynthesisSupported:m,startListening:f,stopListening:p,speak:y,getAvailableCommands:N}=NU(),[w,j]=x.useState(!0),[S,T]=x.useState(!0),[R,A]=x.useState(!0);N();const P=[{phrase:"Navigate to [place]",description:"Start navigation to a destination",category:"Navigation"},{phrase:"Find [type of place]",description:"Search for nearby places",category:"Search"},{phrase:"Take me home",description:"Navigate to your home address",category:"Navigation"},{phrase:"Go to work",description:"Navigate to your work address",category:"Navigation"},{phrase:"Avoid [option]",description:"Change route preferences (highways, tolls, etc.)",category:"Route Options"},{phrase:"Add a stop",description:"Add waypoint to current route",category:"Route Options"},{phrase:"Report [incident]",description:"Report traffic incident",category:"Community"},{phrase:"Share my location",description:"Share current location",category:"Sharing"},{phrase:"Switch to [mode]",description:"Change transport mode (walking, driving, etc.)",category:"Transport"},{phrase:"Mute navigation",description:"Turn off voice guidance",category:"Settings"},{phrase:"Repeat directions",description:"Repeat last instruction",category:"Navigation"},{phrase:"Help",description:"Show available commands",category:"Help"},{phrase:"Stop",description:"Cancel current action",category:"Control"}].reduce((q,J)=>(q[J.category]||(q[J.category]=[]),q[J.category].push(J),q),{});x.useEffect(()=>{const q=J=>{const{action:K,parameters:B,originalText:V}=J.detail;if(e(V),R&&m){let re="";switch(K){case"navigate":re=`Navigating to ${B.destination}`;break;case"navigate_home":re="Taking you home";break;case"navigate_work":re="Navigating to work";break;case"search":re=`Searching for ${B.type}`;break;case"add_stop":re="Adding stop to your route";break;case"mute":re="Navigation muted";break;case"unmute":re="Navigation unmuted";break;case"help":re="Here are the available voice commands. You can say navigate to a place, find nearby locations, or ask me to take you home.";break;default:re=`Command ${K} executed`}re&&y(re)}};return window.addEventListener("voiceCommand",q),()=>{window.removeEventListener("voiceCommand",q)}},[R,m,e,y]);const F=async()=>{if(!(!w||!h))try{await f()}catch(q){C.error("Failed to start voice listening:",q)}},W=()=>{p()},oe=(()=>{if(c)return{color:"#EF4444",text:"Error",description:c.message||"Please try again"};switch(l){case"listening":return{color:"#3B82F6",text:"Listening...",description:"Speak your command"};case"processing":return{color:"#F59E0B",text:"Processing...",description:"Understanding your request"};case"error":return{color:"#EF4444",text:"Error",description:"Please try again"};default:return r?{color:"#10B981",text:"Speaking...",description:"Providing response"}:{color:"#6B7280",text:"Ready",description:h?"Tap to start":"Speech recognition not supported"}}})();return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(ys,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Voice Commands"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Control PathFinder with your voice"})]}),n.jsx(L,{variant:"ghost",size:"icon",children:n.jsx(Wt,{className:"w-4 h-4"})})]})}),n.jsxs("div",{className:"flex-shrink-0 p-6 text-center bg-gray-50",children:[n.jsx("div",{className:"mb-6",children:n.jsxs(ao.button,{className:"w-24 h-24 rounded-full shadow-lg flex items-center justify-center text-white relative",style:{backgroundColor:oe.color},onClick:s?W:F,disabled:!w||!h||l==="processing"||r,whileTap:{scale:.95},animate:s?{scale:[1,1.1,1]}:{},transition:{repeat:s?1/0:0,duration:1},children:[s?n.jsx(IP,{className:"w-10 h-10"}):n.jsx(pa,{className:"w-10 h-10"}),s&&n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-300 animate-ping"})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-lg font-medium text-gray-900 mb-1",children:oe.text}),n.jsx("div",{className:"text-sm text-gray-500",children:oe.description})]}),a&&n.jsx(ne,{className:"p-3 mb-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"text-sm text-blue-900",children:['"',a,'"']})}),d&&l==="idle"&&n.jsx(ne,{className:"p-3 mb-4 bg-green-50 border-green-200",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(_r,{className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"text-sm text-green-900",children:['Last: "',d.originalText,'"']})]})}),c&&n.jsx(ne,{className:"p-3 mb-4 bg-red-50 border-red-200",children:n.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[n.jsx(Ar,{className:"w-4 h-4 text-red-600"}),n.jsx("div",{className:"text-sm text-red-900",children:c.message})]})}),S&&n.jsx("div",{className:"text-center",children:n.jsx(Ie,{variant:"outline",className:"text-purple-700 border-purple-200 bg-purple-50",children:'Say "Hey PathFinder" to activate'})})]}),n.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-200",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(pa,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"Voice Commands"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Enable voice control"})]})]}),n.jsx(lt,{checked:w,onCheckedChange:j})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Mr,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"Wake Phrase"}),n.jsx("p",{className:"text-sm text-gray-500",children:'"Hey PathFinder" activation'})]})]}),n.jsx(lt,{checked:S,onCheckedChange:T,disabled:!w})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Mr,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"Voice Responses"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Spoken confirmations"})]})]}),n.jsx(lt,{checked:R,onCheckedChange:A,disabled:!w})]})]})}),n.jsxs("div",{className:"flex-1 scroll-y hide-scrollbar scroll-smooth p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Zb,{className:"w-5 h-5 text-gray-600"}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Voice Commands"})]}),n.jsx("div",{className:"space-y-4",children:Object.entries(P).map(([q,J])=>n.jsxs(ne,{className:"p-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:q}),n.jsx("div",{className:"space-y-2",children:J.map((K,B)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:['"',K.phrase,'"']}),n.jsx("div",{className:"text-xs text-gray-500",children:K.description})]})]},B))})]},q))}),n.jsx(ne,{className:"p-4 mt-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ar,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Voice Tips"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Speak clearly and at normal pace"}),n.jsx("li",{children:" Use specific place names when possible"}),n.jsx("li",{children:" Commands work while navigating"}),n.jsx("li",{children:' Say "help" to hear available commands'})]})]})]})})]})]})}class kU{registration=null;subscription=null;vapidPublicKey=null;constructor(){this.init()}async init(){if("serviceWorker"in navigator)try{await this.registerServiceWorker(),this.registration=await navigator.serviceWorker.ready,C.info("Service worker ready for push notifications"),await this.isUserSubscribed()&&(this.subscription=await this.registration.pushManager.getSubscription())}catch(e){console.error("[Push] Service worker not available:",e)}}async registerServiceWorker(){try{const e=await navigator.serviceWorker.getRegistration();if(e){this.registration=e,C.debug("Using existing service worker registration");return}this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),C.info("Service worker registered successfully"),this.registration.addEventListener("updatefound",()=>{C.info("New service worker version found");const s=this.registration.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&C.info("New service worker installed, page refresh recommended")})})}catch(e){throw console.error("[Push] Service worker registration failed:",e),e}}isSupported(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}getPermissionStatus(){return this.isSupported()?Notification.permission:"denied"}async requestPermission(){if(!this.isSupported())throw new Error("Push notifications are not supported");const e=await Notification.requestPermission();return e==="granted"?(C.info("Notification permission granted"),await this.subscribeUser()):C.warn("Notification permission denied"),e}setVapidKey(e){this.vapidPublicKey=e}async subscribeUser(){if(!this.registration)throw new Error("Service worker not available");if(this.getPermissionStatus()!=="granted")throw new Error("Notification permission not granted");try{const e={userVisibleOnly:!0};this.vapidPublicKey&&(e.applicationServerKey=this.urlBase64ToUint8Array(this.vapidPublicKey)),this.subscription=await this.registration.pushManager.subscribe(e);const s=this.getSubscriptionData();return C.info("User subscribed to push notifications"),await this.sendSubscriptionToBackend(s),s}catch(e){throw console.error("[Push] Failed to subscribe user:",e),e}}async unsubscribeUser(){if(!this.subscription)return C.debug("No subscription to unsubscribe from"),!0;try{const e=await this.subscription.unsubscribe();return this.subscription=null,C.info("User unsubscribed from push notifications"),await this.removeSubscriptionFromBackend(),e}catch(e){return console.error("[Push] Failed to unsubscribe user:",e),!1}}getSubscriptionData(){if(!this.subscription)return null;const e=this.subscription.getKey?{p256dh:this.arrayBufferToBase64(this.subscription.getKey("p256dh")),auth:this.arrayBufferToBase64(this.subscription.getKey("auth"))}:{p256dh:"",auth:""};return{endpoint:this.subscription.endpoint,keys:e}}async isUserSubscribed(){if(!this.registration)return!1;try{return this.subscription=await this.registration.pushManager.getSubscription(),!!this.subscription}catch(e){return console.error("[Push] Failed to check subscription status:",e),!1}}async showLocalNotification(e){if(this.getPermissionStatus()!=="granted")throw new Error("Notification permission not granted");if(!this.registration){const s=new Notification(e.title,{body:e.body,icon:e.icon||"/icons/icon-192x192.png",badge:e.badge||"/icons/icon-96x96.png",tag:e.tag,data:e.data,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1});e.requireInteraction||setTimeout(()=>s.close(),5e3);return}await this.registration.showNotification(e.title,{body:e.body,icon:e.icon||"/icons/icon-192x192.png",badge:e.badge||"/icons/icon-96x96.png",tag:e.tag,data:e.data,actions:e.actions,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1,timestamp:e.timestamp||Date.now()})}async showNavigationAlert(e,s){const a={traffic:{title:" Traffic Alert",body:`Heavy traffic ahead. ${s.delay} min delay expected.`,tag:"traffic-alert",requireInteraction:!0,actions:[{action:"reroute",title:"Find Alternative Route"},{action:"dismiss",title:"Continue"}]},route_change:{title:" Route Updated",body:`New route found. Save ${s.timeSaved} minutes.`,tag:"route-update",actions:[{action:"accept",title:"Use New Route"},{action:"decline",title:"Keep Current"}]},arrival:{title:" Arrived at Destination",body:`You have arrived at ${s.destination}.`,tag:"arrival",actions:[{action:"rate",title:"Rate Trip"},{action:"share",title:"Share Location"}]},departure:{title:" Ready to Navigate",body:`Route to ${s.destination} is ready. Estimated time: ${s.eta}.`,tag:"departure",actions:[{action:"start",title:"Start Navigation"},{action:"review",title:"Review Route"}]}}[e];a&&await this.showLocalNotification({...a,data:s})}async sendSubscriptionToBackend(e){if(e)try{await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),console.log("[Push] Subscription sent to backend")}catch(s){console.error("[Push] Failed to send subscription to backend:",s)}}async removeSubscriptionFromBackend(){try{await fetch("/api/push/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"}}),console.log("[Push] Subscription removed from backend")}catch(e){console.error("[Push] Failed to remove subscription from backend:",e)}}urlBase64ToUint8Array(e){const s="=".repeat((4-e.length%4)%4),r=(e+s).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(r),l=new Uint8Array(a.length);for(let c=0;c<a.length;++c)l[c]=a.charCodeAt(c);return l}arrayBufferToBase64(e){if(!e)return"";const s=new Uint8Array(e);let r="";for(let a=0;a<s.byteLength;a++)r+=String.fromCharCode(s[a]);return window.btoa(r)}}const q2=()=>{const[t,e]=he.useState("default"),[s,r]=he.useState(!1),[a,l]=he.useState(null);he.useEffect(()=>{(async()=>{if(wn.isSupported()){const y=wn.getPermissionStatus();if(e(y),y==="granted"){const N=await wn.isUserSubscribed();if(r(N),N){const w=wn.getSubscriptionData();l(w)}}}})()},[]);const c=async()=>{try{const p=await wn.requestPermission();if(e(p),p==="granted"){const y=await wn.isUserSubscribed();if(r(y),y){const N=wn.getSubscriptionData();l(N)}}return p}catch(p){throw console.error("Failed to request notification permission:",p),p}},d=async()=>{try{const p=await wn.subscribeUser();return r(!0),l(p),p}catch(p){throw console.error("Failed to subscribe to push notifications:",p),p}},h=async()=>{try{const p=await wn.unsubscribeUser();return p&&(r(!1),l(null)),p}catch(p){throw console.error("Failed to unsubscribe from push notifications:",p),p}},m=async p=>{try{await wn.showLocalNotification(p)}catch(y){throw console.error("Failed to show notification:",y),y}},f=async(p,y)=>{try{await wn.showNavigationAlert(p,y)}catch(N){throw console.error("Failed to show navigation alert:",N),N}};return{permission:t,isSubscribed:s,subscription:a,isSupported:wn.isSupported(),requestPermission:c,subscribe:d,unsubscribe:h,showNotification:m,showNavigationAlert:f}},wn=new kU,K2=()=>{const{permission:t,isSubscribed:e,subscription:s,isSupported:r,requestPermission:a,subscribe:l,unsubscribe:c,showNotification:d,showNavigationAlert:h}=q2(),[m,f]=x.useState(!1),[p,y]=x.useState({traffic:!0,routeUpdates:!0,arrival:!0,departure:!0,general:!0});x.useEffect(()=>{const P=localStorage.getItem("notification-preferences");if(P)try{y(JSON.parse(P))}catch(F){C.error("Failed to parse notification preferences",{error:F})}},[]);const N=P=>{y(P),localStorage.setItem("notification-preferences",JSON.stringify(P))},w=async()=>{if(!r){ue.error("Push notifications are not supported in this browser.");return}f(!0);try{const P=await a();P==="denied"?ue.error("Notification permission was denied. You can enable it in your browser settings."):P==="granted"&&ue.success("Notification permission granted!")}catch(P){C.error("Failed to request permission",{error:P}),ue.error("Failed to request notification permission. Please try again.")}finally{f(!1)}},j=async()=>{f(!0);try{await l(),ue.success("Successfully subscribed to push notifications!")}catch(P){C.error("Failed to subscribe",{error:P}),ue.error("Failed to subscribe to push notifications. Please try again.")}finally{f(!1)}},S=async()=>{f(!0);try{await c()&&ue.success("Successfully unsubscribed from push notifications.")}catch(P){C.error("Failed to unsubscribe",{error:P}),ue.error("Failed to unsubscribe. Please try again.")}finally{f(!1)}},T=async()=>{try{await d({title:" Test Notification",body:"This is a test notification from PathFinder Pro!",tag:"test",data:{test:!0}}),ue.success("Test notification sent!")}catch(P){C.error("Failed to show test notification",{error:P}),ue.error("Failed to show test notification. Make sure notifications are enabled.")}},R=async()=>{try{await h("traffic",{delay:15,location:"Main Street"}),ue.success("Navigation alert sent!")}catch(P){C.error("Failed to show navigation alert",{error:P}),ue.error("Failed to show navigation alert. Make sure notifications are enabled.")}},A=()=>{switch(t){case"granted":return"#10b981";case"denied":return"#ef4444";case"default":return"#f59e0b";default:return"#6b7280"}},k=()=>{switch(t){case"granted":return"Granted";case"denied":return"Denied";case"default":return"Not requested";default:return"Unknown"}};return r?n.jsxs("div",{className:"push-settings",children:[n.jsxs("div",{className:"settings-header",children:[n.jsx("h3",{children:" Push Notifications"}),n.jsxs("div",{className:"status-indicator",children:[n.jsx("div",{className:"status-dot",style:{backgroundColor:A()}}),n.jsx("span",{className:"status-text",children:k()})]})]}),n.jsxs("div",{className:"settings-content",children:[n.jsxs("div",{className:"permission-section",children:[n.jsx("h4",{children:"Permission Status"}),n.jsx("p",{className:"permission-description",children:"Enable push notifications to receive real-time navigation alerts, traffic updates, and route suggestions."}),t==="default"&&n.jsx("button",{onClick:w,disabled:m,className:"btn btn-primary",children:m?"Requesting...":"Enable Notifications"}),t==="denied"&&n.jsxs("div",{className:"denied-help",children:[n.jsx("p",{children:"Notifications are blocked. To enable:"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Click the lock icon in your browser's address bar"}),n.jsx("li",{children:'Change notifications from "Block" to "Allow"'}),n.jsx("li",{children:"Refresh the page"})]})]}),t==="granted"&&!e&&n.jsx("button",{onClick:j,disabled:m,className:"btn btn-primary",children:m?"Subscribing...":"Subscribe to Notifications"}),t==="granted"&&e&&n.jsxs("div",{className:"subscription-info",children:[n.jsxs("div",{className:"subscription-status",children:[n.jsx("span",{className:"status-badge status-active",children:"Active"}),n.jsx("span",{children:"Subscribed to push notifications"})]}),n.jsx("button",{onClick:S,disabled:m,className:"btn btn-outline",children:m?"Unsubscribing...":"Unsubscribe"})]})]}),e&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"notification-types",children:[n.jsx("h4",{children:"Notification Types"}),n.jsxs("div",{className:"toggle-group",children:[n.jsxs("label",{className:"toggle-item",children:[n.jsx("input",{type:"checkbox",checked:p.traffic,onChange:P=>N({...p,traffic:P.target.checked})}),n.jsx("span",{className:"toggle-label",children:" Traffic Alerts"}),n.jsx("small",{children:"Get notified about traffic delays and road conditions"})]}),n.jsxs("label",{className:"toggle-item",children:[n.jsx("input",{type:"checkbox",checked:p.routeUpdates,onChange:P=>N({...p,routeUpdates:P.target.checked})}),n.jsx("span",{className:"toggle-label",children:" Route Updates"}),n.jsx("small",{children:"Receive notifications when better routes are found"})]}),n.jsxs("label",{className:"toggle-item",children:[n.jsx("input",{type:"checkbox",checked:p.arrival,onChange:P=>N({...p,arrival:P.target.checked})}),n.jsx("span",{className:"toggle-label",children:" Arrival Notifications"}),n.jsx("small",{children:"Get notified when you arrive at your destination"})]}),n.jsxs("label",{className:"toggle-item",children:[n.jsx("input",{type:"checkbox",checked:p.departure,onChange:P=>N({...p,departure:P.target.checked})}),n.jsx("span",{className:"toggle-label",children:" Departure Reminders"}),n.jsx("small",{children:"Receive reminders when it's time to leave"})]}),n.jsxs("label",{className:"toggle-item",children:[n.jsx("input",{type:"checkbox",checked:p.general,onChange:P=>N({...p,general:P.target.checked})}),n.jsx("span",{className:"toggle-label",children:" General Updates"}),n.jsx("small",{children:"App updates, tips, and general information"})]})]})]}),n.jsxs("div",{className:"test-section",children:[n.jsx("h4",{children:"Test Notifications"}),n.jsxs("div",{className:"test-buttons",children:[n.jsx("button",{onClick:T,className:"btn btn-outline btn-sm",children:" Test General"}),n.jsx("button",{onClick:R,className:"btn btn-outline btn-sm",children:" Test Traffic Alert"})]})]}),s&&n.jsxs("div",{className:"subscription-details",children:[n.jsx("h4",{children:"Subscription Details"}),n.jsxs("div",{className:"details-content",children:[n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Endpoint:"}),n.jsxs("span",{className:"detail-value endpoint",children:[s.endpoint.substring(0,50),"..."]})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:"Keys:"}),n.jsx("span",{className:"detail-value",children:" Configured"})]})]})]})]})]})]}):n.jsxs("div",{className:"push-settings",children:[n.jsx("div",{className:"settings-header",children:n.jsx("h3",{children:" Push Notifications"})}),n.jsx("div",{className:"settings-content",children:n.jsxs("div",{className:"not-supported",children:[n.jsx("p",{children:"Push notifications are not supported in this browser."}),n.jsx("p",{children:"To receive navigation alerts, please use a modern browser like Chrome, Firefox, Safari, or Edge."})]})})]})},Cs={MAP_TILES:50*1024*1024,USER_DATA:10*1024*1024,ROUTE_CACHE:25*1024*1024,POI_DATA:15*1024*1024,TOTAL_QUOTA:100*1024*1024};class CU{dbName="PathFinderStorage";version=1;db=null;constructor(){this.initializeDB()}async initializeDB(){return new Promise((e,s)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>{C.error("[Storage] Failed to open database",r.error),s(r.error)},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=a=>{const l=a.target.result;this.createObjectStores(l)}})}createObjectStores(e){if(!e.objectStoreNames.contains("mapTiles")){const s=e.createObjectStore("mapTiles",{keyPath:"key"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("z","z",{unique:!1})}if(e.objectStoreNames.contains("userData")||e.createObjectStore("userData",{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1}),!e.objectStoreNames.contains("routeCache")){const s=e.createObjectStore("routeCache",{keyPath:"id"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("frequency","frequency",{unique:!1})}if(!e.objectStoreNames.contains("poiData")){const s=e.createObjectStore("poiData",{keyPath:"key"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("category","category",{unique:!1})}}async getStorageStats(){this.db||await this.initializeDB();const[e,s,r,a,l]=await Promise.all([this.getStorageQuota(),this.getStoreSize("mapTiles"),this.getStoreSize("userData"),this.getStoreSize("routeCache"),this.getStoreSize("poiData")]),c=s+r+a+l;return{total:{quota:e,usage:c,available:e-c,percentage:Math.round(c/e*100)},mapTiles:{quota:Cs.MAP_TILES,usage:s,available:Cs.MAP_TILES-s,percentage:Math.round(s/Cs.MAP_TILES*100)},userData:{quota:Cs.USER_DATA,usage:r,available:Cs.USER_DATA-r,percentage:Math.round(r/Cs.USER_DATA*100)},routeCache:{quota:Cs.ROUTE_CACHE,usage:a,available:Cs.ROUTE_CACHE-a,percentage:Math.round(a/Cs.ROUTE_CACHE*100)},poiData:{quota:Cs.POI_DATA,usage:l,available:Cs.POI_DATA-l,percentage:Math.round(l/Cs.POI_DATA*100)}}}async getStorageQuota(){if("storage"in navigator&&"estimate"in navigator.storage)try{return(await navigator.storage.estimate()).quota||Cs.TOTAL_QUOTA}catch(e){C.warn("[Storage] Could not get storage estimate",e)}return Cs.TOTAL_QUOTA}async getStoreSize(e){return this.db?new Promise(s=>{const l=this.db.transaction([e],"readonly").objectStore(e).getAll();l.onsuccess=()=>{const d=l.result.reduce((h,m)=>h+this.calculateItemSize(m),0);s(d)},l.onerror=()=>{C.error("Failed to get size for store",{storeName:e}),s(0)}}):0}calculateItemSize(e){const s=JSON.stringify(e);return new Blob([s]).size}async cacheMapTile(e,s,r,a,l){this.db||await this.initializeDB();const d={key:`${r}-${e}-${s}`,x:e,y:s,z:r,url:a,data:l,timestamp:Date.now(),size:l.size};return await this.ensureStorageSpace("mapTiles",l.size),this.putItem("mapTiles",d)}async getCachedMapTile(e,s,r){if(!this.db)return null;const a=`${r}-${e}-${s}`,l=await this.getItem("mapTiles",a);return l?(l.timestamp=Date.now(),await this.putItem("mapTiles",l),l):null}async cacheRoute(e){this.db||await this.initializeDB();const s=this.calculateItemSize(e);return await this.ensureStorageSpace("routeCache",s),this.putItem("routeCache",{...e,size:s})}async getCachedRoute(e){const s=await this.getItem("routeCache",e);return s&&(s.frequency=(s.frequency||0)+1,s.timestamp=Date.now(),await this.putItem("routeCache",s)),s}async setUserData(e,s,r="medium"){this.db||await this.initializeDB();const a={key:e,data:s,timestamp:Date.now(),size:this.calculateItemSize(s),priority:r};return await this.ensureStorageSpace("userData",a.size),this.putItem("userData",a)}async getUserData(e){const s=await this.getItem("userData",e);return s?s.data:null}async cachePOIData(e,s,r){this.db||await this.initializeDB();const a={key:e,data:s,category:r,timestamp:Date.now(),size:this.calculateItemSize(s)};return await this.ensureStorageSpace("poiData",a.size),this.putItem("poiData",a)}async getItem(e,s){return this.db?new Promise(r=>{const c=this.db.transaction([e],"readonly").objectStore(e).get(s);c.onsuccess=()=>r(c.result||null),c.onerror=()=>{C.error("Failed to get item from storage",{key:s,storeName:e}),r(null)}}):null}async putItem(e,s){return this.db||await this.initializeDB(),new Promise((r,a)=>{const d=this.db.transaction([e],"readwrite").objectStore(e).put(s);d.onsuccess=()=>r(),d.onerror=()=>{C.error("Failed to store item in storage",{storeName:e,error:d.error}),a(d.error)}})}async ensureStorageSpace(e,s){const r=Cs[e.toUpperCase()]||Cs.TOTAL_QUOTA,a=await this.getStoreSize(e);if(a+s<=r)return;const l=a+s-r;await this.cleanupStorage(e,l)}async cleanupStorage(e,s){if(this.db)return new Promise(r=>{const d=this.db.transaction([e],"readwrite").objectStore(e).index("timestamp").openCursor();let h=0;d.onsuccess=m=>{const f=m.target.result;if(f&&h<s){const p=f.value,y=p.size||this.calculateItemSize(p);p.priority!=="high"&&(f.delete(),h+=y,C.debug("Storage cleanup: freed space",{itemSize:y,storeName:e})),f.continue()}else C.debug("Storage cleanup completed",{freedSpace:h,storeName:e}),r()},d.onerror=()=>{C.error("Storage cleanup failed",{storeName:e}),r()}})}async clearStore(e){if(this.db)return new Promise((s,r)=>{const c=this.db.transaction([e],"readwrite").objectStore(e).clear();c.onsuccess=()=>{C.info("Storage store cleared",{storeName:e}),s()},c.onerror=()=>{C.error("Failed to clear storage store",{storeName:e,error:c.error}),r(c.error)}})}async clearAllData(){const e=["mapTiles","userData","routeCache","poiData"];await Promise.all(e.map(s=>this.clearStore(s)))}async exportData(){if(!this.db)return{};const e=["mapTiles","userData","routeCache","poiData"],s={};for(const r of e)s[r]=await this.getAllFromStore(r);return s}async getAllFromStore(e){return this.db?new Promise(s=>{const l=this.db.transaction([e],"readonly").objectStore(e).getAll();l.onsuccess=()=>s(l.result||[]),l.onerror=()=>{C.error("Failed to get all items from storage store",{storeName:e}),s([])}}):[]}async optimizeStorage(){const e=await this.getStorageStats(),s=[];let r=0;const a=[{name:"mapTiles",stats:e.mapTiles},{name:"userData",stats:e.userData},{name:"routeCache",stats:e.routeCache},{name:"poiData",stats:e.poiData}];for(const{name:l,stats:c}of a)if(c.percentage>80){const d=c.usage;await this.cleanupStorage(l,c.usage*.2);const h=await this.getStoreSize(l),m=d-h;m>0&&(r+=m,s.push(l))}return C.info("Storage optimization completed",{totalCleaned:r,optimizedStores:s}),{cleaned:r,optimized:s}}}const TU=()=>{const[t,e]=he.useState(null),[s,r]=he.useState(!1),a=he.useCallback(async()=>{r(!0);try{const h=await Gt.getStorageStats();e(h)}catch(h){C.error("Failed to get storage stats",{error:h})}finally{r(!1)}},[]);return he.useEffect(()=>{a()},[a]),{stats:t,isLoading:s,refreshStats:a,clearStore:async h=>{r(!0);try{await Gt.clearStore(h),await a()}catch(m){throw C.error("Failed to clear storage store",{storeName:h,error:m}),m}finally{r(!1)}},optimizeStorage:async()=>{r(!0);try{const h=await Gt.optimizeStorage();return await a(),h}catch(h){throw C.error("Failed to optimize storage",{error:h}),h}finally{r(!1)}},exportData:async()=>{r(!0);try{return await Gt.exportData()}catch(h){throw C.error("Failed to export data",{error:h}),h}finally{r(!1)}},cacheMapTile:Gt.cacheMapTile.bind(Gt),getCachedMapTile:Gt.getCachedMapTile.bind(Gt),cacheRoute:Gt.cacheRoute.bind(Gt),getCachedRoute:Gt.getCachedRoute.bind(Gt),setUserData:Gt.setUserData.bind(Gt),getUserData:Gt.getUserData.bind(Gt),cachePOIData:Gt.cachePOIData.bind(Gt)}},Gt=new CU;class EU{isTracking=!1;currentSession=null;trackingInterval=null;minDistance=5;trackingFrequency=5e3;listeners=[];constructor(){this.setupServiceWorkerMessaging()}setupServiceWorkerMessaging(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="BACKGROUND_LOCATION_UPDATE"&&this.handleBackgroundLocationUpdate(e.data.location)})}async startTracking(e="tracking",s){if(this.isTracking)return!0;try{if(!await St.requestPermission())throw new Error("Location permission denied");this.currentSession={id:this.generateSessionId(),startTime:Date.now(),points:[],distance:0,duration:0,averageSpeed:0,maxSpeed:0,purpose:e,name:s};const a=await St.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4});if(a){const l={latitude:a.latitude,longitude:a.longitude,accuracy:a.accuracy,timestamp:Date.now(),altitude:a.altitude||void 0,heading:a.heading||void 0,speed:a.speed||void 0};this.currentSession.points.push(l)}return this.trackingInterval=window.setInterval(()=>{this.trackLocation()},this.trackingFrequency),await this.registerBackgroundTracking(),this.isTracking=!0,C.info("[BackgroundLocation] Tracking started",{sessionId:this.currentSession.id}),!0}catch(r){return C.error("[BackgroundLocation] Failed to start tracking:",r),!1}}async stopTracking(){if(!this.isTracking||!this.currentSession)return null;this.trackingInterval&&(clearInterval(this.trackingInterval),this.trackingInterval=null);const e=Date.now();this.currentSession.endTime=e,this.currentSession.duration=e-this.currentSession.startTime,this.calculateSessionStats(this.currentSession),await this.saveSession(this.currentSession);const s={...this.currentSession};return this.listeners.forEach(r=>r(s)),this.currentSession=null,this.isTracking=!1,await this.unregisterBackgroundTracking(),C.info("[BackgroundLocation] Tracking stopped",{sessionId:s.id}),s}async trackLocation(){if(!(!this.isTracking||!this.currentSession))try{const e=await St.getCurrentPosition({enableHighAccuracy:!0,timeout:5e3,maximumAge:1e3});if(!e)return;const s={latitude:e.latitude,longitude:e.longitude,accuracy:e.accuracy,timestamp:Date.now(),altitude:e.altitude||void 0,heading:e.heading||void 0,speed:e.speed||void 0},r=this.currentSession.points[this.currentSession.points.length-1];if(r){const a=this.calculateDistance(r,s);if(a<this.minDistance&&e.accuracy>20)return;this.currentSession.distance+=a}this.currentSession.points.push(s),this.updateSessionStats(this.currentSession),this.currentSession.points.length%10===0&&await this.saveSession(this.currentSession)}catch(e){C.error("[BackgroundLocation] Failed to track location:",e)}}handleBackgroundLocationUpdate(e){if(!this.isTracking||!this.currentSession)return;const s={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:Date.now(),altitude:e.coords.altitude||void 0,heading:e.coords.heading||void 0,speed:e.coords.speed||void 0},r=this.currentSession.points[this.currentSession.points.length-1];if(r){const a=this.calculateDistance(r,s);if(a<this.minDistance&&s.accuracy>20)return;this.currentSession.distance+=a}this.currentSession.points.push(s),this.updateSessionStats(this.currentSession)}calculateDistance(e,s){const a=e.latitude*Math.PI/180,l=s.latitude*Math.PI/180,c=(s.latitude-e.latitude)*Math.PI/180,d=(s.longitude-e.longitude)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}updateSessionStats(e){if(e.points.length<2)return;const s=Date.now();e.duration=s-e.startTime;const r=e.points.filter(a=>a.speed!==void 0&&a.speed!==null).map(a=>a.speed);if(r.length>0)e.maxSpeed=Math.max(...r),e.averageSpeed=r.reduce((a,l)=>a+l,0)/r.length;else if(e.duration>0){const a=e.duration/36e5,l=e.distance/1e3;e.averageSpeed=l/a}}calculateSessionStats(e){if(this.updateSessionStats(e),e.points.length>1){let s=0;for(let r=1;r<e.points.length;r++){const a=this.calculateDistance(e.points[r-1],e.points[r]);a<1e3&&(s+=a)}e.distance=s}}async saveSession(e){try{await Gt.setUserData(`tracking_session_${e.id}`,e,"high"),C.info("[BackgroundLocation] Session saved",{sessionId:e.id})}catch(s){C.error("[BackgroundLocation] Failed to save session:",s)}}async registerBackgroundTracking(){if("serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype)try{const e=await navigator.serviceWorker.ready;e.active&&e.active.postMessage({type:"START_BACKGROUND_LOCATION",sessionId:this.currentSession?.id,frequency:this.trackingFrequency})}catch(e){C.error("[BackgroundLocation] Failed to register background tracking:",e)}}async unregisterBackgroundTracking(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.ready;e.active&&e.active.postMessage({type:"STOP_BACKGROUND_LOCATION"})}catch(e){C.error("[BackgroundLocation] Failed to unregister background tracking:",e)}}async getSessions(){try{const e=await Gt.exportData(),s=[];if(e.userData)for(const r of e.userData)r.key.startsWith("tracking_session_")&&s.push(r.data);return s.sort((r,a)=>a.startTime-r.startTime),s}catch(e){return C.error("[BackgroundLocation] Failed to get sessions:",e),[]}}async getTrackingStats(){const e=await this.getSessions(),r=Date.now()-10080*60*1e3,a=e.filter(h=>h.startTime>r),l=e.reduce((h,m)=>h+m.distance,0),c=e.reduce((h,m)=>h+m.duration,0),d=a.reduce((h,m)=>h+m.distance,0);return{totalSessions:e.length,totalDistance:l,totalTime:c,averageSpeed:c>0?l/(c/(1e3*60*60)):0,sessionsThisWeek:a.length,distanceThisWeek:d}}async deleteSession(e){try{return await Gt.setUserData(`tracking_session_${e}`,null),!0}catch(s){return C.error("[BackgroundLocation] Failed to delete session:",s),!1}}exportSessionAsGPX(e){return`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="PathFinder Pro">
  <metadata>
    <name>${e.name||`Session ${e.id}`}</name>
    <desc>Tracking session from ${new Date(e.startTime).toLocaleString()}</desc>
    <time>${new Date(e.startTime).toISOString()}</time>
  </metadata>
  <trk>
    <name>${e.name||`Track ${e.id}`}</name>
    <type>${e.purpose}</type>
    <trkseg>
${e.points.map(r=>`      <trkpt lat="${r.latitude}" lon="${r.longitude}">
        ${r.altitude?`<ele>${r.altitude}</ele>`:""}
        <time>${new Date(r.timestamp).toISOString()}</time>
      </trkpt>`).join(`
`)}
    </trkseg>
  </trk>
</gpx>`}generateSessionId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}addListener(e){this.listeners.push(e)}removeListener(e){const s=this.listeners.indexOf(e);s>-1&&this.listeners.splice(s,1)}getTrackingStatus(){return{isTracking:this.isTracking,currentSession:this.currentSession,duration:this.currentSession?Date.now()-this.currentSession.startTime:0,distance:this.currentSession?this.currentSession.distance:0,pointCount:this.currentSession?this.currentSession.points.length:0}}updateSettings(e){e.minDistance!==void 0&&(this.minDistance=e.minDistance),e.trackingFrequency!==void 0&&(this.trackingFrequency=e.trackingFrequency,this.isTracking&&this.trackingInterval&&(clearInterval(this.trackingInterval),this.trackingInterval=window.setInterval(()=>{this.trackLocation()},this.trackingFrequency)))}}const PU=()=>{const[t,e]=he.useState(!1),[s,r]=he.useState(null),[a,l]=he.useState([]),[c,d]=he.useState(null),[h,m]=he.useState(!1);he.useEffect(()=>{const w=()=>{const T=an.getTrackingStatus();e(T.isTracking),r(T.currentSession)};w();const j=setInterval(w,1e3),S=T=>{l(R=>[T,...R])};return an.addListener(S),f(),()=>{clearInterval(j),an.removeListener(S)}},[]);const f=async()=>{m(!0);try{const[w,j]=await Promise.all([an.getSessions(),an.getTrackingStats()]);l(w),d(j)}catch(w){console.error("Failed to load tracking data:",w)}finally{m(!1)}};return{isTracking:t,currentSession:s,sessions:a,stats:c,isLoading:h,startTracking:async(w,j)=>{m(!0);try{return await an.startTracking(w,j)}finally{m(!1)}},stopTracking:async()=>{m(!0);try{const w=await an.stopTracking();return w&&await f(),w}finally{m(!1)}},deleteSession:async w=>{m(!0);try{const j=await an.deleteSession(w);return j&&(l(S=>S.filter(T=>T.id!==w)),await f()),j}finally{m(!1)}},exportSessionAsGPX:an.exportSessionAsGPX.bind(an),updateSettings:an.updateSettings.bind(an),refreshData:f}},an=new EU,Z2=()=>{const[t,e]=x.useState([]),[s,r]=x.useState(null),[a,l]=x.useState(!1),[c,d]=x.useState(null),h=ug(),m=_$(),f=M$(),p=q2(),y=TU(),N=PU();x.useEffect(()=>{w(),T()},[]);const w=async()=>{const U={userAgent:navigator.userAgent,platform:navigator.platform,isMobile:/Mobi|Android/i.test(navigator.userAgent),isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent),isAndroid:/Android/.test(navigator.userAgent),browserName:j(),browserVersion:S(),screenSize:`${window.screen.width}x${window.screen.height}`,devicePixelRatio:window.devicePixelRatio,isOnline:navigator.onLine};if("connection"in navigator){const Te=navigator.connection;U.connectionType=Te.effectiveType||Te.type}if("getBattery"in navigator)try{const Te=await navigator.getBattery();U.batteryLevel=Math.round(Te.level*100)}catch{}r(U)},j=()=>{const U=navigator.userAgent;return U.includes("Chrome")&&!U.includes("Edg")?"Chrome":U.includes("Firefox")?"Firefox":U.includes("Safari")&&!U.includes("Chrome")?"Safari":U.includes("Edg")?"Edge":U.includes("Opera")?"Opera":"Unknown"},S=()=>{const Te=navigator.userAgent.match(/(Chrome|Firefox|Safari|Edg|Opera)\/(\d+)/);return Te?Te[2]:"Unknown"},T=()=>{e([{name:"Geolocation API Support",status:"pending",message:"Checking geolocation API availability"},{name:"GPS Permission Request",status:"pending",message:"Testing location permission handling"},{name:"Current Position Accuracy",status:"pending",message:"Testing GPS accuracy and response time"},{name:"Position Watching",status:"pending",message:"Testing continuous location tracking"},{name:"Camera API Support",status:"pending",message:"Checking camera API availability"},{name:"Camera Permission Request",status:"pending",message:"Testing camera permission handling"},{name:"Video Stream Quality",status:"pending",message:"Testing camera video stream"},{name:"Photo Capture",status:"pending",message:"Testing photo capture functionality"},{name:"Device Motion API",status:"pending",message:"Checking device motion sensor support"},{name:"Device Orientation API",status:"pending",message:"Checking device orientation support"},{name:"Compass Calibration",status:"pending",message:"Testing compass accuracy"},{name:"Motion Detection",status:"pending",message:"Testing accelerometer sensitivity"},{name:"IndexedDB Support",status:"pending",message:"Checking IndexedDB availability"},{name:"Storage Quota",status:"pending",message:"Testing storage quota and usage"},{name:"Cache Performance",status:"pending",message:"Testing read/write performance"},{name:"Storage Cleanup",status:"pending",message:"Testing automatic cleanup mechanisms"},{name:"Notification API Support",status:"pending",message:"Checking notification support"},{name:"Notification Permissions",status:"pending",message:"Testing notification permission flow"},{name:"Push Subscription",status:"pending",message:"Testing push notification subscription"},{name:"Notification Display",status:"pending",message:"Testing notification rendering"},{name:"Service Worker Registration",status:"pending",message:"Testing service worker functionality"},{name:"Background Sync",status:"pending",message:"Testing background data synchronization"},{name:"Background Location",status:"pending",message:"Testing background location tracking"},{name:"PWA Installability",status:"pending",message:"Testing app installation capability"},{name:"Offline Functionality",status:"pending",message:"Testing offline mode capabilities"},{name:"App Manifest",status:"pending",message:"Testing PWA manifest configuration"}])},R=async()=>{if(a)return;l(!0);const U=Date.now();for(let Se=0;Se<t.length;Se++){const We=t[Se];d(We.name);const ct=await A(We);e(pe=>pe.map((ie,le)=>le===Se?ct:ie)),await new Promise(pe=>setTimeout(pe,100))}d(null),l(!1);const Te=Date.now()-U;console.log(`[DeviceTest] All tests completed in ${Te}ms`)},A=async U=>{const Te=Date.now();try{let Se;switch(U.name){case"Geolocation API Support":Se=k();break;case"GPS Permission Request":Se=await P();break;case"Current Position Accuracy":Se=await F();break;case"Position Watching":Se=await W();break;case"Camera API Support":Se=z();break;case"Camera Permission Request":Se=await oe();break;case"Video Stream Quality":Se=await q();break;case"Photo Capture":Se=await J();break;case"Device Motion API":Se=K();break;case"Device Orientation API":Se=B();break;case"Compass Calibration":Se=await V();break;case"Motion Detection":Se=await re();break;case"IndexedDB Support":Se=M();break;case"Storage Quota":Se=await D();break;case"Cache Performance":Se=await E();break;case"Storage Cleanup":Se=await Y();break;case"Notification API Support":Se=Q();break;case"Notification Permissions":Se=await I();break;case"Push Subscription":Se=await te();break;case"Notification Display":Se=await se();break;case"Service Worker Registration":Se=await fe();break;case"Background Sync":Se=await ve();break;case"Background Location":Se=await Pe();break;case"PWA Installability":Se=$();break;case"Offline Functionality":Se=await G();break;case"App Manifest":Se=await X();break;default:Se={...U,status:"failed",message:"Unknown test case"}}return Se.duration=Date.now()-Te,Se}catch(Se){return{...U,status:"failed",message:`Test failed: ${Se instanceof Error?Se.message:"Unknown error"}`,duration:Date.now()-Te}}},k=()=>{const U="geolocation"in navigator;return{name:"Geolocation API Support",status:U?"passed":"not_supported",message:U?"Geolocation API is available":"Geolocation API not supported",details:{supported:U}}},P=async()=>{try{const U=await h.requestPermission();return{name:"GPS Permission Request",status:U?"passed":"failed",message:U?"GPS permission granted":"GPS permission denied",details:{hasPermission:U,permissionState:h.permissionState}}}catch(U){return{name:"GPS Permission Request",status:"failed",message:`Permission request failed: ${U}`,details:{error:U}}}},F=async()=>{if(!h.isSupported)return{name:"Current Position Accuracy",status:"not_supported",message:"Geolocation not supported"};try{const U=await h.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4});if(!U)return{name:"Current Position Accuracy",status:"failed",message:"Could not get current position"};const Te=U.accuracy;return{name:"Current Position Accuracy",status:Te<=20||Te<=100?"passed":"failed",message:`Position accuracy: ${Te}m`,details:{accuracy:Te,latitude:U.latitude,longitude:U.longitude,altitude:U.altitude,speed:U.speed,heading:U.heading}}}catch(U){return{name:"Current Position Accuracy",status:"failed",message:`Position request failed: ${U}`,details:{error:U}}}},W=async()=>new Promise(U=>{let Te=null,Se=0;const We=setTimeout(()=>{Te!==null&&h.clearWatch(Te),U({name:"Position Watching",status:Se>0?"passed":"failed",message:`Received ${Se} position updates in 3 seconds`,details:{positionCount:Se}})},3e3);Te=h.watchPosition(ct=>{Se++,Se>=2&&(clearTimeout(We),h.clearWatch(Te),U({name:"Position Watching",status:"passed",message:`Position watching working (${Se} updates)`,details:{positionCount:Se,finalPosition:ct}}))},()=>{clearTimeout(We),Te!==null&&h.clearWatch(Te),U({name:"Position Watching",status:"failed",message:"Position watching failed",details:{positionCount:Se}})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e3})}),z=()=>{const U=m.isSupported;return{name:"Camera API Support",status:U?"passed":"not_supported",message:U?"Camera API is available":"Camera API not supported",details:{supported:U,availableCameras:m.availableCameras}}},oe=async()=>{try{const U=await m.requestPermission();return{name:"Camera Permission Request",status:U?"passed":"failed",message:U?"Camera permission granted":"Camera permission denied",details:{hasPermission:U,permissionState:m.permissionState}}}catch(U){return{name:"Camera Permission Request",status:"failed",message:`Camera permission failed: ${U}`,details:{error:U}}}},q=async()=>{try{const U=await m.startCamera();return U?(m.stopCamera(),{name:"Video Stream Quality",status:"passed",message:"Video stream started successfully",details:{streamActive:!0,tracks:U.getTracks().length,videoTrack:U.getVideoTracks()[0]?.getSettings()}}):{name:"Video Stream Quality",status:"failed",message:"Could not start video stream"}}catch(U){return{name:"Video Stream Quality",status:"failed",message:`Video stream failed: ${U}`,details:{error:U}}}},J=async()=>{try{const U=await m.capturePhoto();return{name:"Photo Capture",status:U?"passed":"failed",message:U?"Photo captured successfully":"Photo capture failed",details:{photoSize:U?U.size:0,photoType:U?U.type:null}}}catch(U){return{name:"Photo Capture",status:"failed",message:`Photo capture failed: ${U}`,details:{error:U}}}},K=()=>{const U=f.motion.isSupported;return{name:"Device Motion API",status:U?"passed":"not_supported",message:U?"Device Motion API is available":"Device Motion API not supported",details:{supported:U,hasAccelerometer:f.motion.acceleration!==null,hasGyroscope:f.motion.rotationRate!==null}}},B=()=>{const U=f.orientation.isSupported;return{name:"Device Orientation API",status:U?"passed":"not_supported",message:U?"Device Orientation API is available":"Device Orientation API not supported",details:{supported:U,hasCompass:f.compass.heading!==null,orientation:f.orientation}}},V=async()=>new Promise(U=>{let Te=0,Se=0;const We=f.compass.subscribe(ct=>{Te++,ct.heading!==null&&ct.accuracy!==null&&Se++});setTimeout(()=>{We();const ct=Se/Te;U({name:"Compass Calibration",status:ct>.7||ct>.3?"passed":"failed",message:`Compass accuracy: ${Math.round(ct*100)}%`,details:{headingCount:Te,validHeadings:Se,accuracy:ct,currentHeading:f.compass.heading,currentAccuracy:f.compass.accuracy}})},2e3)}),re=async()=>new Promise(U=>{let Te=0,Se=0;const We=f.motion.subscribe(ct=>{Te++,ct.acceleration&&Math.sqrt(Math.pow(ct.acceleration.x||0,2)+Math.pow(ct.acceleration.y||0,2)+Math.pow(ct.acceleration.z||0,2))>2&&Se++});setTimeout(()=>{We(),U({name:"Motion Detection",status:Te>10||Te>0?"passed":"failed",message:`Motion events: ${Te}, Significant: ${Se}`,details:{motionEvents:Te,significantMotion:Se}})},2e3)}),M=()=>{const U="indexedDB"in window;return{name:"IndexedDB Support",status:U?"passed":"not_supported",message:U?"IndexedDB is available":"IndexedDB not supported",details:{supported:U}}},D=async()=>{try{await y.refreshStats();const U=y.stats;return U?{name:"Storage Quota",status:"passed",message:`Storage: ${me(U.total.usage)} / ${me(U.total.quota)} used`,details:U}:{name:"Storage Quota",status:"failed",message:"Could not retrieve storage stats"}}catch(U){return{name:"Storage Quota",status:"failed",message:`Storage test failed: ${U}`,details:{error:U}}}},E=async()=>{const U={test:"performance",data:new Array(1e3).fill(0).map((Te,Se)=>`item-${Se}`)};try{const Te=performance.now();await y.setUserData("performance-test",U);const Se=performance.now()-Te,We=performance.now(),ct=await y.getUserData("performance-test"),pe=performance.now()-We,ie=JSON.stringify(ct)===JSON.stringify(U);return{name:"Cache Performance",status:ie&&Se<1e3&&pe<100?"passed":"failed",message:`Write: ${Se.toFixed(2)}ms, Read: ${pe.toFixed(2)}ms`,details:{writeTime:Se,readTime:pe,isValid:ie,dataSize:JSON.stringify(U).length}}}catch(Te){return{name:"Cache Performance",status:"failed",message:`Cache performance test failed: ${Te}`,details:{error:Te}}}},Y=async()=>{try{const U=await y.optimizeStorage();return{name:"Storage Cleanup",status:"passed",message:`Cleaned ${me(U.cleaned)} from ${U.optimized.length} stores`,details:U}}catch(U){return{name:"Storage Cleanup",status:"failed",message:`Storage cleanup failed: ${U}`,details:{error:U}}}},Q=()=>{const U=p.isSupported;return{name:"Notification API Support",status:U?"passed":"not_supported",message:U?"Notification API is available":"Notifications not supported",details:{supported:U,permission:p.permission}}},I=async()=>{try{const U=await p.requestPermission();return{name:"Notification Permissions",status:U==="granted"?"passed":"failed",message:`Notification permission: ${U}`,details:{permission:U}}}catch(U){return{name:"Notification Permissions",status:"failed",message:`Notification permission failed: ${U}`,details:{error:U}}}},te=async()=>{try{if(p.permission!=="granted")return{name:"Push Subscription",status:"failed",message:"Notifications not permitted"};const U=p.isSubscribed;return{name:"Push Subscription",status:"passed",message:U?"Push subscription active":"Push subscription available",details:{subscribed:U,subscription:p.subscription}}}catch(U){return{name:"Push Subscription",status:"failed",message:`Push subscription failed: ${U}`,details:{error:U}}}},se=async()=>{try{return p.permission!=="granted"?{name:"Notification Display",status:"failed",message:"Notifications not permitted"}:(await p.showNotification({title:" Device Test",body:"Notification display test successful!",tag:"device-test"}),{name:"Notification Display",status:"passed",message:"Test notification displayed successfully"})}catch(U){return{name:"Notification Display",status:"failed",message:`Notification display failed: ${U}`,details:{error:U}}}},fe=async()=>{if(!("serviceWorker"in navigator))return{name:"Service Worker Registration",status:"not_supported",message:"Service Worker not supported"};try{const U=await navigator.serviceWorker.ready;return{name:"Service Worker Registration",status:"passed",message:"Service Worker is active",details:{scope:U.scope,state:U.active?.state,scriptURL:U.active?.scriptURL}}}catch(U){return{name:"Service Worker Registration",status:"failed",message:`Service Worker failed: ${U}`,details:{error:U}}}},ve=async()=>{if(!("serviceWorker"in navigator)||!("sync"in window.ServiceWorkerRegistration.prototype))return{name:"Background Sync",status:"not_supported",message:"Background Sync not supported"};try{return await(await navigator.serviceWorker.ready).sync.register("test-sync"),{name:"Background Sync",status:"passed",message:"Background Sync is available",details:{registered:!0}}}catch(U){return{name:"Background Sync",status:"failed",message:`Background Sync failed: ${U}`,details:{error:U}}}},Pe=async()=>{try{return{name:"Background Location",status:"passed",message:"Background location tracking is available",details:{isTracking:N.getTrackingStatus().isTracking,sessionCount:N.sessions.length,stats:N.stats}}}catch(U){return{name:"Background Location",status:"failed",message:`Background location failed: ${U}`,details:{error:U}}}},$=()=>{const U="beforeinstallprompt"in window||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||s?.isIOS;return{name:"PWA Installability",status:U?"passed":"failed",message:U?"App can be installed as PWA":"PWA installation not supported",details:{isInstallable:U,isStandalone:window.matchMedia("(display-mode: standalone)").matches,hasBeforeInstallPrompt:"beforeinstallprompt"in window}}},G=async()=>{try{const U=await caches.open("test-cache");await U.put("/test",new Response("test"));const Te=await U.match("/test");return await U.delete("/test"),{name:"Offline Functionality",status:Te?"passed":"failed",message:Te?"Offline caching is working":"Offline caching failed",details:{hasCacheAPI:"caches"in window,testPassed:!!Te}}}catch(U){return{name:"Offline Functionality",status:"failed",message:`Offline test failed: ${U}`,details:{error:U}}}},X=async()=>{try{const Te=await(await fetch("/manifest.json")).json(),We=["name","short_name","start_url","display","theme_color"].filter(ct=>!Te[ct]);return{name:"App Manifest",status:We.length===0?"passed":"failed",message:We.length===0?"App manifest is valid":`Missing fields: ${We.join(", ")}`,details:{manifest:Te,missingFields:We}}}catch(U){return{name:"App Manifest",status:"failed",message:`Manifest test failed: ${U}`,details:{error:U}}}},me=U=>{if(U===0)return"0 Bytes";const Te=1024,Se=["Bytes","KB","MB","GB"],We=Math.floor(Math.log(U)/Math.log(Te));return parseFloat((U/Math.pow(Te,We)).toFixed(2))+" "+Se[We]},ye=U=>{switch(U){case"passed":return"";case"failed":return"";case"running":return"";case"not_supported":return"";default:return""}},je=U=>{switch(U){case"passed":return"#10b981";case"failed":return"#ef4444";case"running":return"#3b82f6";case"not_supported":return"#f59e0b";default:return"#6b7280"}},Ae={total:t.length,passed:t.filter(U=>U.status==="passed").length,failed:t.filter(U=>U.status==="failed").length,notSupported:t.filter(U=>U.status==="not_supported").length,pending:t.filter(U=>U.status==="pending").length};return n.jsxs("div",{className:"device-integration-test",children:[n.jsxs("div",{className:"test-header",children:[n.jsx("h2",{children:" Device Integration Test"}),n.jsx("div",{className:"test-controls",children:n.jsx("button",{onClick:R,disabled:a,className:"btn btn-primary",children:a?" Running Tests...":" Run All Tests"})})]}),n.jsxs("div",{className:"test-stats",children:[n.jsxs("div",{className:"stat-item",children:[n.jsx("span",{className:"stat-value",children:Ae.total}),n.jsx("span",{className:"stat-label",children:"Total"})]}),n.jsxs("div",{className:"stat-item passed",children:[n.jsx("span",{className:"stat-value",children:Ae.passed}),n.jsx("span",{className:"stat-label",children:"Passed"})]}),n.jsxs("div",{className:"stat-item failed",children:[n.jsx("span",{className:"stat-value",children:Ae.failed}),n.jsx("span",{className:"stat-label",children:"Failed"})]}),n.jsxs("div",{className:"stat-item not-supported",children:[n.jsx("span",{className:"stat-value",children:Ae.notSupported}),n.jsx("span",{className:"stat-label",children:"Not Supported"})]}),n.jsxs("div",{className:"stat-item pending",children:[n.jsx("span",{className:"stat-value",children:Ae.pending}),n.jsx("span",{className:"stat-label",children:"Pending"})]})]}),s&&n.jsxs("div",{className:"device-info",children:[n.jsx("h3",{children:" Device Information"}),n.jsxs("div",{className:"info-grid",children:[n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Platform:"}),n.jsx("span",{className:"info-value",children:s.platform})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Browser:"}),n.jsxs("span",{className:"info-value",children:[s.browserName," ",s.browserVersion]})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Screen:"}),n.jsxs("span",{className:"info-value",children:[s.screenSize," (",s.devicePixelRatio,"x DPR)"]})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Mobile:"}),n.jsx("span",{className:"info-value",children:s.isMobile?"Yes":"No"})]}),n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Online:"}),n.jsx("span",{className:"info-value",children:s.isOnline?"Yes":"No"})]}),s.connectionType&&n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Connection:"}),n.jsx("span",{className:"info-value",children:s.connectionType})]}),s.batteryLevel&&n.jsxs("div",{className:"info-item",children:[n.jsx("span",{className:"info-label",children:"Battery:"}),n.jsxs("span",{className:"info-value",children:[s.batteryLevel,"%"]})]})]})]}),n.jsxs("div",{className:"test-results",children:[n.jsx("h3",{children:" Test Results"}),c&&n.jsxs("div",{className:"current-test",children:[n.jsx("span",{className:"current-test-icon",children:""}),n.jsxs("span",{children:["Running: ",c]})]}),n.jsx("div",{className:"test-list",children:t.map((U,Te)=>n.jsxs("div",{className:`test-item ${U.status}`,style:{borderLeftColor:je(U.status)},children:[n.jsxs("div",{className:"test-header",children:[n.jsxs("div",{className:"test-status",children:[n.jsx("span",{className:"status-icon",children:ye(U.status)}),n.jsx("span",{className:"test-name",children:U.name})]}),U.duration&&n.jsxs("span",{className:"test-duration",children:[U.duration,"ms"]})]}),n.jsx("div",{className:"test-message",children:U.message}),U.details&&n.jsxs("details",{className:"test-details",children:[n.jsx("summary",{children:"Show Details"}),n.jsx("pre",{children:JSON.stringify(U.details,null,2)})]})]},Te))})]})]})},Y2=()=>{const[t,e]=x.useState([]),[s,r]=x.useState(null),[a,l]=x.useState(""),[c,d]=x.useState(""),[h,m]=x.useState(!1),[f,p]=x.useState(!1);x.useEffect(()=>{y()},[]);const y=()=>{try{const R=JSON.parse(localStorage.getItem("crashReports")||"[]");e(R.map((A,k)=>({...A,id:`crash_${k}_${Date.parse(A.timestamp)}`})))}catch(R){C.error("Failed to load crash reports:",R)}},N=()=>{localStorage.removeItem("crashReports"),e([]),r(null),p(!1)},w=async()=>{if(!(!s||!a.trim())){m(!0);try{const R={reportId:s.id||"unknown",feedback:a.trim(),email:c.trim()||void 0,timestamp:new Date().toISOString()},A=JSON.parse(localStorage.getItem("crashFeedback")||"[]");A.push(R),localStorage.setItem("crashFeedback",JSON.stringify(A)),C.info("Crash feedback submitted:",R),l(""),d(""),p(!1),ue.success("Thank you for your feedback! This helps us improve the app.")}catch(R){C.error("Failed to submit feedback:",R),ue.error("Failed to submit feedback. Please try again.")}finally{m(!1)}}},j=R=>new Date(R).toLocaleString(),S=R=>R.message.toLowerCase().includes("network")||R.message.toLowerCase().includes("fetch")?"low":R.message.toLowerCase().includes("permission")||R.message.toLowerCase().includes("geolocation")?"medium":"high",T=R=>{switch(R){case"low":return"bg-yellow-100 text-yellow-800";case"medium":return"bg-orange-100 text-orange-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t.length===0?n.jsx(ne,{className:"p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Df,{className:"w-8 h-8 text-green-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Crash Reports"}),n.jsx("p",{className:"text-gray-600",children:"Great! The app is running smoothly with no recorded crashes."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ar,{className:"w-5 h-5 text-red-600"}),n.jsx("h2",{className:"text-xl font-semibold",children:"Crash Reports"}),n.jsx(Ie,{variant:"secondary",children:t.length})]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:N,className:"text-red-600 hover:text-red-700",children:[n.jsx(Fp,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),n.jsx("div",{className:"grid gap-4",children:t.map(R=>{const A=S(R);return n.jsx(ne,{className:`p-4 cursor-pointer transition-all ${s?.id===R.id?"ring-2 ring-blue-500 bg-blue-50":"hover:shadow-md"}`,onClick:()=>r(R),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(Ie,{className:T(A),children:A.toUpperCase()}),n.jsx("span",{className:"text-sm text-gray-500",children:j(R.timestamp)})]}),n.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:R.message}),n.jsx("p",{className:"text-sm text-gray-600 truncate",children:R.url})]}),n.jsx(L,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),r(R),p(!0)},children:n.jsx(Df,{className:"w-4 h-4"})})]})},R.id)})}),s&&n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Error Details"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Error Message"}),n.jsx("p",{className:"text-sm bg-red-50 p-3 rounded border text-red-800",children:s.message})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL"}),n.jsx("p",{className:"text-sm text-gray-600",children:s.url})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timestamp"}),n.jsx("p",{className:"text-sm text-gray-600",children:j(s.timestamp)})]}),s.stack&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stack Trace"}),n.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded border overflow-x-auto text-gray-700",children:s.stack})]}),n.jsx("div",{className:"flex space-x-3",children:n.jsxs(L,{onClick:()=>p(!f),className:"flex-1",children:[n.jsx(Xy,{className:"w-4 h-4 mr-2"}),f?"Hide":"Provide"," Feedback"]})})]})]}),f&&s&&n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Help Us Fix This Issue"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What were you doing when this error occurred? *"}),n.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,value:a,onChange:R=>l(R.target.value),placeholder:"Please describe what you were trying to do when the error happened...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (optional)"}),n.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:R=>d(R.target.value),placeholder:"your@email.com (for follow-up if needed)"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs(L,{onClick:w,disabled:h||!a.trim(),className:"flex-1",children:[h?n.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full"}):n.jsx(Xy,{className:"w-4 h-4 mr-2"}),"Submit Feedback"]}),n.jsx(L,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]})]})]})};function AU({currentLocation:t,onActionClick:e}){const[s,r]=x.useState([]),[a,l]=x.useState(!1),[c,d]=x.useState(new Map);x.useEffect(()=>{const y=()=>{const j=new Date().getHours(),S=[];j>=7&&j<=9&&S.push({id:"morning-commute",type:"departure",title:"Leave Now for Work",message:"Heavy traffic expected on your usual route. Leave 10 minutes early to arrive on time.",actionText:"Start Navigation",priority:"high",timestamp:"5 min ago",location:"Home  Work",icon:xs,color:"#F59E0B",actionData:{destination:"work",mode:"driving"}}),Math.random()>.7&&S.push({id:"traffic-alert",type:"traffic",title:"Traffic Alert",message:"Accident on Bay Bridge causing 15-minute delays. Alternative route available.",actionText:"Avoid Area",priority:"medium",timestamp:"12 min ago",location:"Bay Bridge",icon:Et,color:"#EF4444",actionData:{avoidArea:"bay-bridge"}}),Math.random()>.6&&S.push({id:"weather-suggestion",type:"weather",title:"Rain Expected",message:"Light rain starting in 30 minutes. Consider taking public transit.",actionText:"View Transit",priority:"medium",timestamp:"8 min ago",icon:AE,color:"#0EA5E9",actionData:{mode:"transit"}}),Math.random()>.8&&S.push({id:"fuel-suggestion",type:"fuel",title:"Low Fuel Alert",message:"Fuel level low. Cheapest gas station 0.3 miles ahead on your route.",actionText:"Add Stop",priority:"high",timestamp:"3 min ago",location:"Shell Station - $3.89/gal",icon:oi,color:"#10B981",actionData:{stop:"gas-station"}}),j>=13&&j<=15&&S.push({id:"calendar-suggestion",type:"event",title:"Meeting Reminder",message:"Client meeting at 3 PM. Leave now to arrive 10 minutes early.",actionText:"Navigate",priority:"high",timestamp:"2 min ago",location:"Downtown Office",icon:Op,color:"#8B5CF6",actionData:{destination:"client-meeting"}}),S.push({id:"discovery-suggestion",type:"suggestion",title:"New Coffee Shop",message:"Highly rated caf just opened near your usual route. 4.8 rating.",actionText:"Check Out",priority:"low",timestamp:"1 hour ago",location:"Blue Sky Coffee",icon:Yb,color:"#92400E",actionData:{destination:"new-coffee-shop"}}),j>=8&&j<=18&&S.push({id:"parking-suggestion",type:"parking",title:"Parking Reminder",message:"Street cleaning starts at 4 PM on your street. Move your car by 3:45 PM.",actionText:"Find Parking",priority:"medium",timestamp:"45 min ago",location:"Main Street",icon:Ls,color:"#7C3AED",actionData:{findParking:!0}}),S.push({id:"route-optimization",type:"suggestion",title:"Route Optimization",message:"Based on your travel patterns, we found a route that saves 5 minutes daily.",actionText:"Try Route",priority:"low",timestamp:"2 hours ago",location:"Home  Work",icon:Pn,color:"#059669",actionData:{optimizedRoute:!0}}),r(S),S.forEach(T=>{if(!c.has(T.id)){const R=setTimeout(()=>{h(T.id)},2e3);d(A=>new Map(A).set(T.id,R))}})};y();const N=setInterval(y,300*1e3);return()=>{clearInterval(N),c.forEach(w=>clearTimeout(w))}},[t,c]);const h=y=>{r(w=>w.map(j=>j.id===y?{...j,dismissed:!0}:j));const N=c.get(y);N&&(clearTimeout(N),d(w=>{const j=new Map(w);return j.delete(y),j}))},m=y=>{e&&e(y),h(y.id)},f=s.filter(y=>!y.dismissed),p=a?f:f.slice(0,2);return f.length===0?null:n.jsxs("div",{className:"space-y-1",children:[n.jsx(V9,{children:p.map(y=>{const N=y.icon;return n.jsx(ao.div,{initial:{opacity:0,y:-14,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-14,scale:.95},transition:{duration:.2},children:n.jsx(ne,{className:"p-1.5 shadow-md border-l-2",style:{borderLeftColor:y.color},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:y.color},children:n.jsx(N,{className:"w-2.5 h-2.5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between gap-1",children:[n.jsx("h4",{className:"font-medium text-xs leading-tight truncate",children:y.title}),n.jsx(L,{variant:"ghost",size:"icon",className:"w-3 h-3 text-gray-400 hover:text-gray-600 p-0",onClick:()=>h(y.id),"aria-label":"Dismiss",children:n.jsx(ys,{className:"w-2 h-2"})})]}),n.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:y.message}),y.actionText&&n.jsx(L,{size:"sm",className:"h-4 px-1.5 py-0 text-[9px] mt-1",style:{backgroundColor:y.color},onClick:()=>m(y),children:y.actionText})]})]})})},y.id)})}),f.length>2&&n.jsx("div",{className:"text-center",children:n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>l(!a),className:"text-gray-600 text-[9px] h-4 px-2",children:a?n.jsx(n.Fragment,{children:"Less"}):n.jsxs(n.Fragment,{children:["+",f.length-2]})})})]})}class _U{liveLocationSessions=new Map;locationUpdateInterval=null;subscribers=[];currentPosition=null;constructor(){this.initializeLocationTracking()}isWebShareSupported(){return"share"in navigator}async shareContent(e){const s={title:e.title,text:e.text,url:e.url,...e.files&&{files:e.files}},r={id:this.generateId(),type:"route",title:e.title,text:e.text,url:e.url||"",timestamp:new Date,success:!1};try{this.isWebShareSupported()?(await navigator.share(s),r.success=!0,r.platform="native"):(await this.fallbackShare(s),r.success=!0,r.platform="fallback")}catch(a){if(a instanceof Error&&a.name==="AbortError")r.success=!1;else throw C.error("Failed to share content:",a),r.success=!1,a}return r}async shareLocation(e){const s=await this.getCurrentPosition(),r=await this.reverseGeocode(s.coords.latitude,s.coords.longitude),a={id:this.generateId(),userId:"current_user",lat:s.coords.latitude,lng:s.coords.longitude,address:r,timestamp:new Date,expiresAt:e.duration?new Date(Date.now()+e.duration*60*1e3):void 0,isLive:!1,recipientIds:e.recipientIds,message:e.message},l=`${window.location.origin}/location/${a.id}`,c=`${e.message?e.message+`
`:""}I'm at: ${r}
${l}`;try{await this.shareContent({title:"My Current Location",text:c,url:l})}catch(d){C.error("Failed to share location:",d)}return a}async startLiveLocationSharing(e){const s={id:this.generateId(),userId:"current_user",recipientIds:e.recipientIds,startTime:new Date,endTime:new Date(Date.now()+(e.duration||60)*60*1e3),isActive:!0,locationUpdates:0,lastUpdate:new Date};this.liveLocationSessions.set(s.id,s),this.startLocationUpdates(s.id);const r=`${window.location.origin}/live/${s.id}`,a=`I'm sharing my live location with you for ${e.duration||60} minutes.
Track me here: ${r}`;try{await this.shareContent({title:"Live Location Sharing",text:a,url:r})}catch(l){C.error("Failed to share live location:",l)}return s}async stopLiveLocationSharing(e){const s=this.liveLocationSessions.get(e);if(s){s.isActive=!1,s.endTime=new Date,this.locationUpdateInterval&&(clearInterval(this.locationUpdateInterval),this.locationUpdateInterval=null);try{await this.shareContent({title:"Location Sharing Ended",text:"I have stopped sharing my live location.",url:`${window.location.origin}/location-ended`})}catch(r){C.error("Failed to notify location sharing end:",r)}}}async shareRoute(e){const s=`${e.message?e.message+`
`:""}My route: ${e.route.from}  ${e.route.to}
Distance: ${e.route.distance}
Duration: ${e.route.duration}
ETA: ${e.route.eta}`,r=`${window.location.origin}/route/${this.generateId()}`;return await this.shareContent({title:"My Route",text:s,url:r})}async shareETA(e){const s=e.includeTracking?`
Track my progress: ${window.location.origin}/track/${this.generateId()}`:"",r=`${e.message?e.message+`
`:""}Heading to: ${e.destination}
Expected arrival: ${e.eta}${s}`;return await this.shareContent({title:`ETA: ${e.eta}`,text:r,url:e.includeTracking?`${window.location.origin}/track/${this.generateId()}`:void 0})}async sharePlace(e){const s=e.rating?`
Rating: ${"".repeat(e.rating)}${"".repeat(5-e.rating)}`:"",r=`${e.message?e.message+`
`:""}Check out: ${e.place.name}
${e.place.address}${s}`,a=`${window.location.origin}/place/${encodeURIComponent(e.place.name)}?lat=${e.place.lat}&lng=${e.place.lng}`;return await this.shareContent({title:e.place.name,text:r,url:a})}getActiveSessions(){return Array.from(this.liveLocationSessions.values()).filter(e=>e.isActive)}subscribeToLocationUpdates(e){return this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);s>-1&&this.subscribers.splice(s,1)}}isLocationSharingActive(){return this.getActiveSessions().length>0}initializeLocationTracking(){"geolocation"in navigator&&navigator.geolocation.watchPosition(e=>{this.currentPosition=e,C.debug("Social service location updated")},e=>{C.debug("Social service location error:",e.message)},{enableHighAccuracy:!1,maximumAge:6e4,timeout:8e3})}startLocationUpdates(e){this.locationUpdateInterval=setInterval(async()=>{const s=this.liveLocationSessions.get(e);if(!s||!s.isActive){this.locationUpdateInterval&&(clearInterval(this.locationUpdateInterval),this.locationUpdateInterval=null);return}if(s.endTime&&new Date>s.endTime){await this.stopLiveLocationSharing(e);return}try{const r=await this.getCurrentPosition(),a=await this.reverseGeocode(r.coords.latitude,r.coords.longitude),l={id:this.generateId(),userId:s.userId,lat:r.coords.latitude,lng:r.coords.longitude,address:a,timestamp:new Date,isLive:!0,recipientIds:s.recipientIds};s.locationUpdates++,s.lastUpdate=new Date,this.subscribers.forEach(c=>{try{c(l)}catch(d){C.error("Error in location subscriber:",d)}})}catch(r){C.error("Failed to update location:",r)}},3e4)}getCurrentPosition(){return new Promise((e,s)=>{if(this.currentPosition&&Date.now()-this.currentPosition.timestamp<3e5){e(this.currentPosition);return}if(!("geolocation"in navigator)){s(new Error("Geolocation is not supported"));return}navigator.geolocation.getCurrentPosition(r=>{this.currentPosition=r,e(r)},r=>{this.currentPosition?e(this.currentPosition):s(r)},{enableHighAccuracy:!1,maximumAge:6e4,timeout:8e3})})}async reverseGeocode(e,s){try{return`Near ${e.toFixed(4)}, ${s.toFixed(4)}`}catch(r){return C.error("Reverse geocoding failed:",r),`${e.toFixed(4)}, ${s.toFixed(4)}`}}async fallbackShare(e){const s=`${e.title}

${e.text}${e.url?`

`+e.url:""}`;if(navigator.clipboard)try{await navigator.clipboard.writeText(s),this.showShareNotification("Content copied to clipboard!");return}catch(r){C.error("Failed to copy to clipboard:",r)}this.showShareModal(e)}showShareNotification(e){const s=document.createElement("div");s.textContent=e,s.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #4CAF50;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      z-index: 10000;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    `,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},3e3)}showShareModal(e){const s=`${e.title}

${e.text}${e.url?`

`+e.url:""}`,r=encodeURIComponent(s),a=e.url?encodeURIComponent(e.url):"",l=document.createElement("div");l.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    `,l.innerHTML=`
      <div style="background: white; border-radius: 12px; padding: 24px; max-width: 300px; width: 90%;">
        <h3 style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600;">Share</h3>
        <div style="display: grid; gap: 8px;">
          <a href="https://twitter.com/intent/tweet?text=${r}" target="_blank" style="padding: 12px; background: #1DA1F2; color: white; text-decoration: none; border-radius: 6px; text-align: center;">Twitter</a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=${a}" target="_blank" style="padding: 12px; background: #1877F2; color: white; text-decoration: none; border-radius: 6px; text-align: center;">Facebook</a>
          <a href="https://wa.me/?text=${r}" target="_blank" style="padding: 12px; background: #25D366; color: white; text-decoration: none; border-radius: 6px; text-align: center;">WhatsApp</a>
          <a href="mailto:?subject=${encodeURIComponent(e.title)}&body=${r}" style="padding: 12px; background: #6B7280; color: white; text-decoration: none; border-radius: 6px; text-align: center;">Email</a>
          <button onclick="navigator.clipboard.writeText('${s.replace(/'/g,"\\'")}').then(() => alert('Copied!'))" style="padding: 12px; background: #374151; color: white; border: none; border-radius: 6px; cursor: pointer;">Copy</button>
        </div>
        <button onclick="this.parentElement.parentElement.remove()" style="margin-top: 16px; width: 100%; padding: 12px; background: #F3F4F6; color: #374151; border: none; border-radius: 6px; cursor: pointer;">Cancel</button>
      </div>
    `,document.body.appendChild(l),l.addEventListener("click",c=>{c.target===l&&document.body.removeChild(l)})}generateId(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}destroy(){this.locationUpdateInterval&&clearInterval(this.locationUpdateInterval),this.liveLocationSessions.forEach(async(e,s)=>{e.isActive&&await this.stopLiveLocationSharing(s)}),this.liveLocationSessions.clear(),this.subscribers=[]}}const $b=new _U;function RU({route:t,onClose:e}){const{user:s,isAuthenticated:r}=Ju(),{startLoading:a,stopLoading:l}=Iu(),[c,d]=x.useState([]),[h]=x.useState({estimatedArrival:t.eta||new Date(Date.now()+30*6e4).toLocaleTimeString(),trafficCondition:"moderate",delayMinutes:5}),[m,f]=x.useState(""),[p,y]=x.useState(!0),[N,w]=x.useState(!0),[j,S]=x.useState(!1),[T,R]=x.useState([]),[A,k]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!r||!s){R([{id:"1",name:"Sarah Chen",phone:"+1 555-0123",avatar:"SC",isEmergencyContact:!0},{id:"2",name:"Mike Rodriguez",phone:"+1 555-0124",avatar:"MR"},{id:"3",name:"Emily Watson",email:"emily@example.com",avatar:"EW"},{id:"4",name:"David Kim",phone:"+1 555-0125",avatar:"DK"},{id:"5",name:"Lisa Park",email:"lisa@example.com",avatar:"LP",isEmergencyContact:!0}]);return}k(!0),a("Loading contacts...");try{const re=(await lu.getAcceptedFriends()).map(M=>{const D=lu.formatFriend(M,s.id);return{id:D.id,name:D.name,email:D.email,avatar:D.avatar||D.name.split(" ").map(E=>E[0]).join(""),isEmergencyContact:!1}});R(re)}catch(V){C.error("Failed to fetch contacts:",V),R([{id:"1",name:"Sarah Chen",phone:"+1 555-0123",avatar:"SC",isEmergencyContact:!0},{id:"2",name:"Mike Rodriguez",phone:"+1 555-0124",avatar:"MR"}])}finally{k(!1),l()}})()},[r,s]);const P=T.filter(B=>B.isEmergencyContact),F=T.filter(B=>!B.isEmergencyContact),W=B=>{d(V=>V.includes(B)?V.filter(re=>re!==B):[...V,B])},z=()=>{const B=`I'm heading to ${t.to.name}. Expected arrival: ${t.eta}. Track my progress: https://pathfinder.app/track/abc123`;return m||B},oe=()=>{navigator.clipboard.writeText("https://pathfinder.app/track/abc123"),S(!0),setTimeout(()=>S(!1),2e3)},q=async()=>{if(!r||c.length===0)return;const B=z(),V=T.filter(re=>c.includes(re.id));a("Sharing ETA via text...");try{await $b.shareETA({destination:t.to.name,eta:t.eta,recipientIds:c,message:B,includeTracking:!0}),C.info("ETA shared successfully via text:",{message:B,contacts:V}),ue.success("ETA shared via text successfully!")}catch(re){C.error("Failed to share ETA via text:",re),ue.error("Failed to share ETA via text. Please try again.")}finally{l()}},J=async()=>{if(!r||c.length===0)return;const B=z(),V=T.filter(re=>c.includes(re.id));a("Sharing ETA via email...");try{await $b.shareETA({destination:t.to.name,eta:t.eta,recipientIds:c,message:B,includeTracking:!0}),C.info("ETA shared successfully via email:",{message:B,contacts:V}),ue.success("ETA shared via email successfully!")}catch(re){C.error("Failed to share ETA via email:",re),ue.error("Failed to share ETA via email. Please try again.")}finally{l()}},K=()=>{const B=P.map(V=>V.id);d(B)};return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(ys,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Share ETA"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Let others know when you'll arrive"})]}),n.jsx(L,{variant:"ghost",size:"icon",children:n.jsx(Wt,{className:"w-4 h-4"})})]})}),n.jsx("div",{className:"flex-shrink-0 p-4 bg-blue-50 border-b border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white",children:n.jsx(rt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-blue-900",children:t.to.name}),n.jsx("p",{className:"text-sm text-blue-800 mb-2",children:t.to.address}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-blue-700",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xs,{className:"w-4 h-4"}),n.jsxs("span",{children:["ETA: ",t.eta]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(pt,{className:"w-4 h-4"}),n.jsx("span",{children:t.distance})]})]})]})]})}),n.jsxs("div",{className:"flex-1 scroll-y hide-scrollbar scroll-smooth",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Share Options"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"Auto-update ETA"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Update contacts if arrival time changes"})]}),n.jsx(lt,{checked:p,onCheckedChange:y})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"Share live location"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Let contacts track your progress"})]}),n.jsx(lt,{checked:N,onCheckedChange:w})]})]})]}),P.length>0&&n.jsxs("div",{className:"p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Emergency Contacts"}),n.jsxs(L,{variant:"outline",size:"sm",onClick:K,children:[n.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Select All"]})]}),n.jsx("div",{className:"space-y-2",children:P.map(B=>n.jsx(ne,{className:`p-3 cursor-pointer transition-all ${c.includes(B.id)?"ring-2 ring-red-500 bg-red-50":"hover:bg-gray-50"}`,onClick:()=>W(B.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yo,{children:n.jsx(vo,{children:B.avatar})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-900",children:B.name}),n.jsx(Ie,{variant:"outline",className:"text-red-600 border-red-200",children:"Emergency"})]}),n.jsx("p",{className:"text-sm text-gray-500",children:B.phone||B.email})]}),c.includes(B.id)&&n.jsx(_r,{className:"w-5 h-5 text-red-600"})]})},B.id))})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Contacts"}),n.jsx("div",{className:"space-y-2",children:F.map(B=>n.jsx(ne,{className:`p-3 cursor-pointer transition-all ${c.includes(B.id)?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>W(B.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yo,{children:n.jsx(vo,{children:B.avatar})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"font-medium text-gray-900",children:B.name}),n.jsx("p",{className:"text-sm text-gray-500",children:B.phone||B.email})]}),c.includes(B.id)&&n.jsx(_r,{className:"w-5 h-5 text-blue-600"})]})},B.id))})]}),n.jsxs("div",{className:"p-4 border-t border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Custom Message (Optional)"}),n.jsx("textarea",{value:m,onChange:B=>f(B.target.value),placeholder:"Add a personal message...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none text-sm",rows:3}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use default message with ETA and tracking link"})]}),n.jsxs("div",{className:"p-4 border-t border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Share Link"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ft,{value:"https://pathfinder.app/track/abc123",readOnly:!0,className:"text-sm"}),n.jsx(L,{variant:"outline",size:"icon",onClick:oe,className:j?"text-green-600":"",children:j?n.jsx(_r,{className:"w-4 h-4"}):n.jsx(Jb,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(L,{variant:"outline",className:"flex-1",onClick:J,disabled:c.length===0,children:[n.jsx(TP,{className:"w-4 h-4 mr-2"}),"Email (",c.length,")"]}),n.jsxs(L,{className:"flex-1",style:{backgroundColor:"#5B4FE5"},onClick:q,disabled:c.length===0,children:[n.jsx(If,{className:"w-4 h-4 mr-2"}),"Text (",c.length,")"]})]}),c.length===0&&n.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:"Select contacts to share your ETA"})]})]})}function MU({currentMode:t,onModeChange:e}){const s=[{key:"driving",label:"",name:"Drive",color:"#3B82F6",mapsTo:"driving"},{key:"walking",label:"",name:"Walk",color:"#10B981",mapsTo:"walking"},{key:"transit",label:"",name:"Transit",color:"#F59E0B",mapsTo:"transit"},{key:"cycling",label:"",name:"Bike",color:"#8B5CF6",mapsTo:"cycling"}];return n.jsx("div",{className:"inline-flex gap-1 sm:gap-2",children:s.map(r=>{const a=t===r.mapsTo;return n.jsxs(L,{variant:a?"default":"ghost","aria-label":r.name,className:`h-8 w-8 sm:h-12 sm:w-auto rounded-lg sm:rounded-xl border-0 justify-center flex-row gap-0 sm:gap-2 p-1 sm:px-3 sm:min-w-[80px] shadow-lg ${a?"text-white":"text-gray-700 bg-white/95 backdrop-blur hover:bg-white"}`,style:a?{backgroundColor:r.color}:{},onClick:()=>e(r.mapsTo),title:r.name,children:[n.jsx("span",{className:"text-sm sm:text-lg leading-none",children:r.label}),n.jsx("span",{className:"hidden sm:inline text-sm leading-none",children:r.name})]},r.key)})})}const DU=$p("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ir({className:t,variant:e,...s}){return n.jsx("div",{"data-slot":"alert",role:"alert",className:Xe(DU({variant:e}),t),...s})}function IU({className:t,...e}){return n.jsx("div",{"data-slot":"alert-title",className:Xe("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...e})}function Lr({className:t,...e}){return n.jsx("div",{"data-slot":"alert-description",className:Xe("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function LU({onBack:t}){const[e,s]=x.useState({fatigueAlertsEnabled:!0,crashDetectionEnabled:!0,autoCall911:!1,safeRoutesEnabled:!0,shareLocationWithContacts:!1}),[r,a]=x.useState(0),[l,c]=x.useState([{id:"1",name:"Mom",phone:"555-0123",relationship:"Mother"},{id:"2",name:"Sarah",phone:"555-0124",relationship:"Spouse"}]),[d,h]=x.useState(!1),[m,f]=x.useState(15);x.useEffect(()=>{const j=setInterval(()=>{a(S=>S+1)},6e4);return()=>clearInterval(j)},[]),x.useEffect(()=>{if(d&&m>0){const j=setTimeout(()=>{f(S=>S-1)},1e3);return()=>clearTimeout(j)}else d&&m===0&&p()},[d,m]);const p=()=>{C.info("Calling emergency services...")},y=()=>{h(!1),f(15)},N=()=>{h(!0)},w=Math.min(r/120*100,100);return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Safety Center"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your protection on the road"})]}),n.jsx(lr,{className:"w-6 h-6 text-blue-500"})]})}),d&&n.jsxs(Ir,{className:"m-4 border-red-500 bg-red-50",children:[n.jsx(Et,{className:"w-5 h-5 text-red-600"}),n.jsx(IU,{className:"text-red-900",children:"Crash Detected!"}),n.jsx(Lr,{children:n.jsxs("div",{className:"space-y-3 mt-2",children:[n.jsxs("p",{className:"text-red-700",children:["Emergency services will be contacted in ",m," seconds"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{size:"sm",variant:"destructive",onClick:y,className:"flex-1",children:"I'm OK - Cancel"}),n.jsx(L,{size:"sm",onClick:p,className:"flex-1 bg-red-600 hover:bg-red-700",children:"Call Now"})]})]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto scroll-y hide-scrollbar scroll-smooth",children:[n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Yb,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Driver Fatigue Monitor"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Driving for ",r," minutes"]})]})]}),n.jsx(lt,{checked:e.fatigueAlertsEnabled,onCheckedChange:j=>s(S=>({...S,fatigueAlertsEnabled:j}))})]}),n.jsx(Ks,{value:w,className:"mb-3"}),w>=75&&n.jsxs(Ir,{className:"bg-yellow-50 border-yellow-300",children:[n.jsx(ii,{className:"w-4 h-4 text-yellow-600"}),n.jsx(Lr,{className:"text-yellow-800",children:"You've been driving for a while. Consider taking a break soon."})]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Next recommended break"}),n.jsxs("span",{className:"font-medium text-gray-900",children:[Math.max(120-r,0)," min"]})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Et,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Crash Detection"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Automatic emergency response"})]})]}),n.jsx(lt,{checked:e.crashDetectionEnabled,onCheckedChange:j=>s(S=>({...S,crashDetectionEnabled:j}))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Auto-call 911"}),n.jsx(lt,{checked:e.autoCall911,onCheckedChange:j=>s(S=>({...S,autoCall911:j}))})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Share location with contacts"}),n.jsx(lt,{checked:e.shareLocationWithContacts,onCheckedChange:j=>s(S=>({...S,shareLocationWithContacts:j}))})]})]}),n.jsx(L,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:N,children:"Test Crash Detection"})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Il,{className:"w-5 h-5 text-green-600"})}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Emergency Contacts"})]}),n.jsx(Ie,{variant:"secondary",children:l.length})]}),n.jsxs("div",{className:"space-y-2",children:[l.map(j=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:j.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:[j.relationship,"  ",j.phone]})]}),n.jsx(or,{className:"w-4 h-4 text-gray-400"})]},j.id)),n.jsx(L,{variant:"outline",size:"sm",className:"w-full",children:"Add Emergency Contact"})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(rt,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Safe Routes"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Prioritize well-lit, populated paths"})]})]}),n.jsx(lt,{checked:e.safeRoutesEnabled,onCheckedChange:j=>s(S=>({...S,safeRoutesEnabled:j}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-2",children:[n.jsx("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),n.jsx("span",{className:"text-sm text-gray-700",children:"Avoid high-crime areas"})]}),n.jsxs("label",{className:"flex items-center gap-3 p-2",children:[n.jsx("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),n.jsx("span",{className:"text-sm text-gray-700",children:"Prefer well-lit streets"})]}),n.jsxs("label",{className:"flex items-center gap-3 p-2",children:[n.jsx("input",{type:"checkbox",className:"rounded"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Women's safety mode"})]})]})]}),n.jsxs(ne,{className:"m-4 p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(L,{variant:"destructive",className:"flex items-center gap-2",children:[n.jsx(Il,{className:"w-4 h-4"}),"Call 911"]}),n.jsxs(L,{variant:"outline",className:"flex items-center gap-2",children:[n.jsx(pt,{className:"w-4 h-4"}),"Share Location"]}),n.jsxs(L,{variant:"outline",className:"flex items-center gap-2",children:[n.jsx(Hd,{className:"w-4 h-4"}),"Nearest Hospital"]}),n.jsxs(L,{variant:"outline",className:"flex items-center gap-2",children:[n.jsx(yu,{className:"w-4 h-4"}),"Alert Contacts"]})]})]}),n.jsx(ne,{className:"m-4 p-4 bg-blue-50 border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pu,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Safety Tip"}),n.jsx("p",{className:"text-sm text-blue-800",children:"Always share your trip with a trusted contact when traveling alone at night. Your safety is our priority."})]})]})})]})]})}function OU({onBack:t}){const[e,s]=x.useState("all"),[r,a]=x.useState([{id:"spotify",name:"Spotify",description:"Control music playback during navigation",category:"music",icon:Jy,connected:!1,color:"#1DB954",features:["Playback controls","Playlist sync","Voice commands"]},{id:"apple-music",name:"Apple Music",description:"Seamless music control while driving",category:"music",icon:Jy,connected:!0,color:"#FC3C44",features:["CarPlay integration","Siri control","Offline playback"]},{id:"doordash",name:"DoorDash",description:"Order food to your destination",category:"food",icon:qm,connected:!1,color:"#FF3008",features:["Pre-arrival ordering","Pickup on route","Group orders"]},{id:"uber-eats",name:"Uber Eats",description:"Food delivery coordination",category:"food",icon:qm,connected:!1,color:"#06C167",features:["ETA-based ordering","Favorites sync","Quick reorder"]},{id:"parkwhiz",name:"ParkWhiz",description:"Reserve and pay for parking",category:"parking",icon:Ls,connected:!0,color:"#4A90E2",features:["Spot reservation","Price comparison","Garage navigation"]},{id:"spothero",name:"SpotHero",description:"Find and book parking spots",category:"parking",icon:Ls,connected:!1,color:"#FF6B35",features:["Hourly/daily rates","Covered parking","Event parking"]},{id:"tesla",name:"Tesla Superchargers",description:"Find Tesla charging stations",category:"ev",icon:po,connected:!1,color:"#CC0000",features:["Real-time availability","Route planning","Charging speed"]},{id:"chargepoint",name:"ChargePoint",description:"Universal EV charging network",category:"ev",icon:po,connected:!1,color:"#00A859",features:["Network coverage","Payment integration","Charging history"]},{id:"uber",name:"Uber",description:"Ride-sharing integration",category:"transport",icon:Ls,connected:!1,color:"#000000",features:["Price comparison","Wait time","Ride scheduling"]},{id:"booking",name:"Booking.com",description:"Hotel reservations on the go",category:"travel",icon:lP,connected:!1,color:"#003580",features:["Last-minute deals","Loyalty points","Free cancellation"]},{id:"opentable",name:"OpenTable",description:"Restaurant reservations",category:"travel",icon:qm,connected:!1,color:"#DA3743",features:["Real-time availability","Special requests","Points earning"]}]),l=m=>{a(f=>f.map(p=>p.id===m?{...p,connected:!p.connected}:p))},c=[{id:"all",name:"All",count:r.length},{id:"music",name:"Music",count:r.filter(m=>m.category==="music").length},{id:"food",name:"Food",count:r.filter(m=>m.category==="food").length},{id:"parking",name:"Parking",count:r.filter(m=>m.category==="parking").length},{id:"ev",name:"EV Charging",count:r.filter(m=>m.category==="ev").length},{id:"transport",name:"Transport",count:r.filter(m=>m.category==="transport").length},{id:"travel",name:"Travel",count:r.filter(m=>m.category==="travel").length}],d=e==="all"?r:r.filter(m=>m.category===e),h=r.filter(m=>m.connected).length;return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Connected Services"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[h," of ",r.length," connected"]})]}),n.jsx(vP,{className:"w-6 h-6 text-blue-500"})]})}),n.jsx("div",{className:"px-4 py-3 bg-blue-50 border-b border-blue-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsxs("span",{className:"text-sm text-blue-900",children:[h," active integrations"]})]}),n.jsx(L,{variant:"ghost",size:"sm",className:"text-blue-600",children:"Manage All"})]})}),n.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-200",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto scroll-y hide-scrollbar",children:c.map(m=>n.jsxs(L,{variant:e===m.id?"default":"ghost",size:"sm",onClick:()=>s(m.id),className:"flex-shrink-0",children:[m.name,n.jsx(Ie,{variant:"secondary",className:"ml-2",children:m.count})]},m.id))})}),n.jsxs("div",{className:"flex-1 overflow-y-auto scroll-y hide-scrollbar scroll-smooth p-4",children:[n.jsx("div",{className:"space-y-3",children:d.map(m=>{const f=m.icon;return n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${m.color}20`},children:n.jsx(f,{className:"w-6 h-6",style:{color:m.color}})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium text-gray-900 flex items-center gap-2",children:[m.name,m.connected&&n.jsxs(Ie,{variant:"secondary",className:"bg-green-100 text-green-700",children:[n.jsx(_r,{className:"w-3 h-3 mr-1"}),"Connected"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m.description})]}),n.jsx(lt,{checked:m.connected,onCheckedChange:()=>l(m.id)})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:m.features.map((p,y)=>n.jsx(Ie,{variant:"outline",className:"text-xs",children:p},y))}),m.connected&&n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:n.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Configure settings "})})]})]})},m.id)})}),n.jsxs(ne,{className:"mt-6 p-4 bg-gradient-to-br from-purple-50 to-blue-50 border-purple-200",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Popular Combinations"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex -space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-xs",children:"S"}),n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs",children:"P"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Music + Parking"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Perfect for concerts"})]})]}),n.jsx(L,{size:"sm",variant:"outline",children:"Setup"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex -space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white text-xs",children:"D"}),n.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white text-xs",children:"T"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Food + EV Charging"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Dine while charging"})]})]}),n.jsx(L,{size:"sm",variant:"outline",children:"Setup"})]})]})]}),n.jsx(ne,{className:"mt-4 p-4 bg-gray-50 border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(a1,{className:"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Need help connecting?"}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Most integrations require you to sign in with your existing account."}),n.jsx(L,{variant:"outline",size:"sm",children:"View Setup Guide"})]})]})})]})]})}class FU{directionsService=null;placesService=null;trafficLayer=null;map=null;initialize(e){try{this.map=e,this.directionsService=new google.maps.DirectionsService,e?this.placesService=new google.maps.places.PlacesService(e):C.warn("Map not available, PlacesService will not be initialized"),this.trafficLayer=new google.maps.TrafficLayer,C.info("AI Predictions Service initialized successfully")}catch(s){C.error("Failed to initialize AI Predictions Service",s)}}isInitialized(){return this.directionsService!==null}hasLegacyPlacesAPI(){return this.placesService!==null}async analyzeTraffic(e,s,r){if(!this.directionsService)throw new Error("Directions service not initialized");try{const a={origin:{lat:e.lat,lng:e.lng},destination:{lat:s.lat,lng:s.lng},travelMode:google.maps.TravelMode.DRIVING,provideRouteAlternatives:!0,drivingOptions:{departureTime:r||new Date,trafficModel:google.maps.TrafficModel.BEST_GUESS},avoidHighways:!1,avoidTolls:!1},c=(await this.directionsService.route(a)).routes;let d=0;const h=[],m=[];c.forEach((p,y)=>{const N=p.legs[0];if(N.duration_in_traffic&&N.duration){const w=N.duration_in_traffic.value-N.duration.value;if(y===0)d=Math.round(w/60);else{const j=c[0].legs[0].duration_in_traffic.value-N.duration_in_traffic.value;h.push({routeId:p.summary||`Route ${y+1}`,timeSaved:Math.round(j/60),distance:N.distance?.value||0,via:p.summary||"Unknown route"})}}p.warnings?.forEach(w=>{if(w.toLowerCase().includes("traffic")||w.toLowerCase().includes("congestion")){const j=p.overview_path[Math.floor(p.overview_path.length/2)];m.push({location:{lat:j.lat(),lng:j.lng()},radius:500,severity:.7,description:w})}})});let f="low";return d>30?f="severe":d>20?f="high":d>10&&(f="moderate"),{severity:f,affectedRoutes:c.map(p=>p.summary||"Unknown route"),estimatedDelay:d,alternativeRoutes:h,congestionAreas:m}}catch(a){throw C.error("Failed to analyze traffic",{error:a}),a}}async predictParking(e,s){C.info("Searching for parking near:",e);try{const r=await this.searchParkingWithModernAPI(e);if(r.length>0)return C.info(`Modern Places API found ${r.length} parking results`),this.processParkingResults(r,e,s)}catch(r){C.warn("Modern Places API failed, trying legacy API",r)}if(this.placesService)try{const r=await this.searchParkingWithLegacyAPI(e);if(r.length>0)return C.info(`Legacy Places API found ${r.length} parking results`),this.processParkingResults(r,e,s)}catch(r){C.warn("Legacy Places API also failed",r)}else C.warn("Places service not initialized, skipping legacy API");return C.warn("No parking results found from APIs, analyzing street parking patterns"),this.analyzeStreetParking(e,s)}async searchParkingWithModernAPI(e){try{const{Place:s}=await google.maps.importLibrary("places");if(!s)throw new Error("Modern Places API not available");const r=[],a=[{textQuery:"parking garage",locationBias:{center:e,radius:1e3}},{textQuery:"parking lot",locationBias:{center:e,radius:800}},{textQuery:"parking",locationBias:{center:e,radius:1200}}];for(const l of a)try{const c={textQuery:l.textQuery,fields:["id","displayName","location","formattedAddress","rating","types","businessStatus"],locationBias:l.locationBias,maxResultCount:10},{places:d}=await s.searchByText(c);d.forEach(h=>{r.some(f=>f.place_id===h.id)||r.push({place_id:h.id,name:h.displayName,geometry:{location:h.location},formatted_address:h.formattedAddress,rating:h.rating,business_status:h.businessStatus,types:h.types||[]})})}catch(c){C.warn(`Modern Places search strategy failed: ${l.textQuery}`,c)}return r}catch(s){throw C.error("Modern Places API search failed entirely",s),s}}async searchParkingWithLegacyAPI(e){return new Promise((s,r)=>{const a=[{location:new google.maps.LatLng(e.lat,e.lng),radius:1e3,keyword:"parking garage"},{location:new google.maps.LatLng(e.lat,e.lng),radius:800,keyword:"parking lot"},{location:new google.maps.LatLng(e.lat,e.lng),radius:600,type:"parking"}];let l=[],c=0,d=!1;const h=()=>{c++,c===a.length&&(d&&l.length===0?r(new Error("All legacy Places API searches failed")):s(l))},m=setTimeout(()=>{c<a.length&&(C.warn("Legacy Places API search timeout"),r(new Error("Places API search timeout")))},1e4);a.forEach((f,p)=>{this.placesService.nearbySearch(f,(y,N)=>{if(C.info(`Legacy search ${p+1} status: ${N}, results: ${y?.length||0}`),N===google.maps.places.PlacesServiceStatus.OK&&y){const w=y.filter(j=>j.place_id&&!l.some(S=>S.place_id===j.place_id));l.push(...w)}else d=!0,C.error(`Legacy Places search ${p+1} failed with status: ${N}`);h()})}),s=(f=>p=>{clearTimeout(m),f(p)})(s),r=(f=>p=>{clearTimeout(m),f(p)})(r)})}processParkingResults(e,s,r){const a=e.map(d=>{let h=0;try{if(d.geometry?.location)if(typeof d.geometry.location.lat=="function")h=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(s.lat,s.lng),d.geometry.location);else{const k=d.geometry.location,P=typeof k.lat=="function"?k.lat():Number(k.lat),F=typeof k.lng=="function"?k.lng():Number(k.lng);h=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(s.lat,s.lng),new google.maps.LatLng(P,F))}}catch(k){C.warn("Failed to calculate distance for parking spot",k),h=500}let m="lot";const f=(d.name||"").toLowerCase(),p=d.types||[];f.includes("garage")||p.includes("parking")||f.includes("structure")?m="garage":f.includes("lot")||f.includes("plaza")||f.includes("center")?m="lot":(f.includes("street")||f.includes("meter"))&&(m="street");const y=(r||new Date).getHours(),N=y>=8&&y<=10||y>=17&&y<=19,w=typeof d.rating=="number"?d.rating:3.5,j=50+Math.min(w*8,40),S=N?Math.max(15,j-25):Math.min(95,j+15);let T="$5/hr";if(d.price_level)T=`$${Math.max(2,d.price_level*3)}/hr`;else switch(m){case"garage":T="$8/hr";break;case"lot":T="$6/hr";break;case"street":T="$3/hr";break}let R=0,A=0;return d.geometry?.location&&(typeof d.geometry.location.lat=="function"?(R=d.geometry.location.lat(),A=d.geometry.location.lng()):(R=d.geometry.location.lat,A=d.geometry.location.lng)),C.info(`Found parking: ${d.name}, type: ${m}, availability: ${S}%`),{placeId:d.place_id,location:{lat:R,lng:A},name:d.name||"Parking Area",pricing:T,availability:S,walkingDistance:Math.round(h),type:m}});a.sort((d,h)=>{const m=d.availability*.6-d.walkingDistance/100*.4;return h.availability*.6-h.walkingDistance/100*.4-m});const l=a[0]||null,c=a.length>0?a.reduce((d,h)=>d+(100-h.availability),0)/a.length:50;return C.info(`Processed ${a.length} parking spots, best: ${l?.name}`),{nearbySpots:a.slice(0,8),bestOption:l,averageOccupancy:Math.round(c),peakHours:["8:00 AM - 10:00 AM","5:00 PM - 7:00 PM"]}}analyzeStreetParking(e,s){const r=(s||new Date).getHours(),a=(s||new Date).getDay(),l=this.isUrbanArea(e),c=this.isBusinessDistrict(e);let d=60;r>=8&&r<=18&&(d-=20),r>=17&&r<=20&&(d-=15),a>=1&&a<=5&&(d-=10),c&&(d-=20),l&&(d-=15),d=Math.max(10,Math.min(80,d));const h=[];for(let m=0;m<4;m++){const f=m*90*(Math.PI/180),p=100+m*80,y=e.lat+p/111e3*Math.cos(f),N=e.lng+p/(111e3*Math.cos(e.lat*Math.PI/180))*Math.sin(f);h.push({placeId:`street_${m}`,location:{lat:y,lng:N},name:`Street Parking ${m+1}`,pricing:l?"$2-4/hr":"$1-2/hr",availability:d+(Math.random()*20-10),walkingDistance:p,type:"street"})}return{nearbySpots:h.sort((m,f)=>f.availability-m.availability),bestOption:h[0]||null,averageOccupancy:Math.round(100-d),peakHours:c?["8:00 AM - 10:00 AM","12:00 PM - 1:00 PM","5:00 PM - 7:00 PM"]:["6:00 PM - 8:00 PM"]}}isUrbanArea(e){return Math.abs(e.lat)>30&&Math.abs(e.lng)>30}isBusinessDistrict(e){const s=this.getNearestCityCenter(e);return s?this.calculateDistance(e,s)<5e3:!1}getNearestCityCenter(e){const s=[{lat:40.7128,lng:-74.006,name:"New York"},{lat:34.0522,lng:-118.2437,name:"Los Angeles"},{lat:37.7749,lng:-122.4194,name:"San Francisco"},{lat:41.8781,lng:-87.6298,name:"Chicago"},{lat:29.7604,lng:-95.3698,name:"Houston"}];let r=null,a=1/0;for(const l of s){const c=this.calculateDistance(e,l);c<a&&(a=c,r=l)}return a<5e4?r:null}calculateDistance(e,s){const a=(s.lat-e.lat)*Math.PI/180,l=(s.lng-e.lng)*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(s.lat*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}async analyzeWeatherImpact(e){const s=["clear","rain","snow","fog"],r=s[Math.floor(Math.random()*s.length)];let a="none",l=[];switch(r){case"rain":a="moderate",l=["Drive slower than usual","Increase following distance","Use headlights"];break;case"snow":a="high",l=["Allow extra travel time","Check tire conditions","Keep emergency kit in vehicle"];break;case"fog":a="moderate",l=["Use low beam headlights","Reduce speed significantly","Use fog lines as guide"];break;default:a="none",l=["Conditions are favorable for driving"]}return{condition:r,impact:a,recommendations:l}}showTrafficLayer(e=!0){!this.trafficLayer||!this.map||(e?(this.trafficLayer.setMap(this.map),C.info("Traffic layer enabled")):(this.trafficLayer.setMap(null),C.info("Traffic layer disabled")))}addParkingMarkers(e,s){const r=[];return e.forEach(a=>{const l=new google.maps.Marker({position:a.location,map:s,title:a.name,icon:{url:"https://maps.google.com/mapfiles/ms/icons/parking.png",scaledSize:new google.maps.Size(30,30)}}),c=new google.maps.InfoWindow({content:`
          <div style="padding: 10px;">
            <h4 style="margin: 0 0 5px 0;">${a.name}</h4>
            <p style="margin: 5px 0;">Availability: ${a.availability}%</p>
            <p style="margin: 5px 0;">Price: ${a.pricing}</p>
            <p style="margin: 5px 0;">Walk: ${Math.round(a.walkingDistance/80)} min</p>
          </div>
        `});l.addListener("click",()=>{c.open(s,l)}),r.push(l)}),r}async recommendDepartureTime(e,s,r){if(!this.directionsService)throw new Error("Directions service not initialized");try{const a={origin:{lat:e.lat,lng:e.lng},destination:{lat:s.lat,lng:s.lng},travelMode:google.maps.TravelMode.DRIVING,drivingOptions:{departureTime:new Date,trafficModel:google.maps.TrafficModel.PESSIMISTIC}},d=(await this.directionsService.route(a)).routes[0].legs[0],h=(d.duration_in_traffic?.value||d.duration?.value||0)*1e3,m=600*1e3,f=new Date(r.getTime()-h-m),p=d.duration_in_traffic?85:65,y=d.duration_in_traffic?`Based on current traffic conditions, you'll need ${Math.round(h/6e4)} minutes plus a 10-minute buffer`:`Estimated travel time is ${Math.round(h/6e4)} minutes with a 10-minute safety buffer`;return{departureTime:f,confidence:p,reasoning:y}}catch(a){throw C.error("Failed to calculate departure time",{error:a}),a}}}const ar=new FU;class zU{trafficModel=new Map;weatherCache=new Map;parkingData=new Map;userModels=new Map;voiceSettings=new Map;ML_UPDATE_INTERVAL=1440*60*1e3;WEATHER_CACHE_TTL=1800*1e3;TRAFFIC_PREDICTION_HORIZON=10800*1e3;constructor(){this.initializeMLModels(),this.startBackgroundUpdates()}async initialize(){try{await this.initializeMLModels(),C.info("Advanced navigation intelligence service initialized")}catch(e){throw C.error("Failed to initialize advanced navigation intelligence:",e),e}}async initializeMLModels(){try{await this.loadTrafficPredictionModel(),await this.loadUserPreferenceModels(),await this.initializeWeatherAnalysis(),C.info("Advanced navigation intelligence models initialized")}catch(e){C.error("Failed to initialize ML models:",e)}}async predictTrafficConditions(e,s=Date.now()){const r=[];for(const a of e)try{const l=await this.analyzeSegmentTraffic(a,s);r.push(l)}catch(l){C.error("Traffic prediction failed for segment:",{segmentId:a.id,error:l}),r.push({routeSegmentId:a.id,timestamp:s,predictedDelay:0,confidence:.3,severity:"light",factors:{historicalPattern:.5,events:0,weather:.5,dayOfWeek:.5,timeOfDay:.5}})}return r}async analyzeWeatherImpact(e,s=Date.now()){const r=`${e.lat},${e.lng}`,a=this.weatherCache.get(r);if(a&&Date.now()-a.forecast[0].timestamp<this.WEATHER_CACHE_TTL)return a;try{const l=await this.fetchWeatherData(e,s),c=this.calculateWeatherImpact(l);return this.weatherCache.set(r,c),c}catch(l){return C.error("Weather analysis failed:",l),{conditions:{temperature:20,precipitation:0,windSpeed:10,visibility:10,roadConditions:"dry"},impact:{drivingTime:1,walkingTime:1,cyclingTime:1,transitReliability:1},recommendations:{suggestedMode:"driving",warnings:[],routeModifications:[]},forecast:[]}}}async findParkingAvailability(e,s=Date.now(),r=500){const a=`${e.lat},${e.lng}`;try{const c=(await this.fetchParkingData(e,r,s)).map(d=>this.enhanceParkingData(d,s));return c.sort((d,h)=>this.calculateParkingScore(h)-this.calculateParkingScore(d)),this.parkingData.set(a,c),c}catch(l){return C.error("Parking availability lookup failed:",l),[]}}async updateUserPreferences(e,s){try{let r=this.userModels.get(e);r||(r=this.initializeUserModel(e),this.userModels.set(e,r)),await this.updateMLModel(r,s),r.learningMetrics.dataPoints%10===0&&await this.retrainUserModel(r),C.debug("User preferences updated",{userId:e,dataPoints:r.learningMetrics.dataPoints})}catch(r){C.error("Failed to update user preferences:",r)}}async generateIntelligentRecommendations(e,s,r){const a=this.userModels.get(e),l=[];for(const c of s)try{const d=await this.analyzeRouteForUser(c,a,r);l.push(d)}catch(d){C.error("Route recommendation failed:",{routeId:c.id,error:d})}return l.sort((c,d)=>d.confidence-c.confidence)}async enhanceVoiceGuidance(e,s,r){try{const a=this.userModels.get(e)?.preferences,l=await this.generateEnhancedInstructions(s,r,a);return this.voiceSettings.set(e,l),l}catch(a){return C.error("Voice guidance enhancement failed:",a),{instructions:s.instructions.map((l,c)=>({id:`instruction_${c}`,text:l.text,timing:l.distance,priority:"important",context:{maneuverType:l.maneuver,roadType:"unknown",complexity:2,landmarks:[]},localization:{language:"en",accent:"neutral",speedAdjustment:1}})),adaptiveSettings:{volumeAdjustment:1,phrasingStyle:"descriptive",personalizations:[],emergencyOverride:!1}}}}async getLaneGuidance(e,s,r){try{const a=await this.fetchJunctionData(e,s);return a?{segmentId:`junction_${e.lat}_${e.lng}`,coordinates:e,lanes:a.lanes,junctionInfo:a.info,nextGuidance:{distanceToNext:r.distance,nextInstruction:r.instruction,preparationAdvice:this.generatePreparationAdvice(a,r)}}:null}catch(a){return C.error("Lane guidance lookup failed:",a),null}}async loadTrafficPredictionModel(){const e=[{hour:7,dayOfWeek:1,avgDelay:15,severity:"moderate"},{hour:8,dayOfWeek:1,avgDelay:25,severity:"heavy"},{hour:9,dayOfWeek:1,avgDelay:10,severity:"light"},{hour:17,dayOfWeek:1,avgDelay:20,severity:"moderate"},{hour:18,dayOfWeek:1,avgDelay:30,severity:"heavy"},{hour:19,dayOfWeek:1,avgDelay:15,severity:"moderate"}];localStorage.setItem("traffic_patterns",JSON.stringify(e)),C.debug("Traffic prediction model loaded")}async loadUserPreferenceModels(){try{const e=localStorage.getItem("user_preference_models");if(e){const s=JSON.parse(e);Object.entries(s).forEach(([r,a])=>{this.userModels.set(r,a)})}}catch(e){C.error("Failed to load user preference models:",e)}}async initializeWeatherAnalysis(){C.debug("Weather analysis initialized")}async analyzeSegmentTraffic(e,s){const r=new Date(s),a=r.getHours(),l=r.getDay();let c=0,d="light";return(a>=7&&a<=9||a>=17&&a<=19)&&l>=1&&l<=5&&(c=Math.random()*20+10,d=c>20?"heavy":"moderate"),{routeSegmentId:e.id,timestamp:s,predictedDelay:c,confidence:.8,severity:d,factors:{historicalPattern:.6,events:.1,weather:.8,dayOfWeek:l>=1&&l<=5?.9:.3,timeOfDay:a>=7&&a<=9||a>=17&&a<=19?.9:.4}}}async fetchWeatherData(e,s){return{temperature:15+Math.random()*20,precipitation:Math.random()*10,windSpeed:Math.random()*30,visibility:8+Math.random()*2,conditions:"partly_cloudy"}}calculateWeatherImpact(e){const s={temperature:e.temperature,precipitation:e.precipitation,windSpeed:e.windSpeed,visibility:e.visibility,roadConditions:e.precipitation>5?"wet":"dry"},r={drivingTime:s.precipitation>5?1.2:1,walkingTime:s.precipitation>2?1.3:1,cyclingTime:s.windSpeed>20?1.4:1,transitReliability:s.precipitation>10?.8:1},a=[],l=[];return s.precipitation>5&&(a.push("Heavy rain expected - allow extra travel time"),l.push({type:"add_buffer_time",reason:"Weather conditions may cause delays"})),s.visibility<5&&(a.push("Low visibility conditions"),l.push({type:"avoid_highways",reason:"Reduced visibility on highways"})),{conditions:s,impact:r,recommendations:{suggestedMode:r.drivingTime<r.walkingTime?"driving":"walking",warnings:a,routeModifications:l},forecast:[]}}async fetchParkingData(e,s,r){return[{locationId:"parking_1",name:"City Center Parking",coordinates:{lat:e.lat+.001,lng:e.lng+.001},totalSpaces:200,availableSpaces:45,price:{hourly:3.5,daily:25,currency:"USD"},features:["covered","security","24h"],walkingTimeToDestination:3,confidence:.8,lastUpdated:Date.now()-3e5,trend:"stable",reservationAvailable:!0,restrictions:{maxHeight:2.1}}]}enhanceParkingData(e,s){const r=s-e.lastUpdated,a=Math.max(.3,e.confidence-r/(1800*1e3)*.1);return{...e,confidence:a}}calculateParkingScore(e){let s=e.confidence*40;return s+=e.availableSpaces/e.totalSpaces*20,s-=e.walkingTimeToDestination*2,s-=e.price.hourly,s+=e.features.length*5,Math.max(0,Math.min(100,s))}initializeUserModel(e){return{userId:e,preferences:{preferredRoutes:[],transportModePreferences:{driving:.4,walking:.2,transit:.2,cycling:.2},routingPreferences:{fastestWeight:.4,shortestWeight:.2,scenicWeight:.2,economicWeight:.1,safetyWeight:.1},avoidancePatterns:{tolls:.3,highways:.1,tunnels:.2,hills:.2,busy_areas:.3},timePatterns:{weekendTravelStyle:"mixed"}},learningMetrics:{totalRoutes:0,dataPoints:0,modelAccuracy:.5,lastTraining:Date.now(),confidenceLevel:.3}}}async updateMLModel(e,s){if(e.learningMetrics.dataPoints++,e.learningMetrics.totalRoutes++,s.rating&&s.rating>3){const r=this.hashRoute(s.routeId),a=e.preferences.preferredRoutes.find(l=>l.routeHash===r);a?(a.frequency++,a.avgRating=(a.avgRating+s.rating)/2,a.lastUsed=Date.now()):e.preferences.preferredRoutes.push({routeHash:r,frequency:1,avgRating:s.rating,lastUsed:Date.now(),contexts:s.conditions})}this.saveUserModel(e)}async retrainUserModel(e){const s=.5+e.learningMetrics.dataPoints/100*.3;e.learningMetrics.modelAccuracy=Math.min(.9,s),e.learningMetrics.confidenceLevel=Math.min(.8,s-.1),e.learningMetrics.lastTraining=Date.now(),C.debug("User model retrained",{userId:e.userId,accuracy:e.learningMetrics.modelAccuracy,confidence:e.learningMetrics.confidenceLevel})}async analyzeRouteForUser(e,s,r){let l=.5;const c={historicalData:.5,userPreferences:s?.7:.3,currentConditions:r.traffic?.8:.5,predictiveFactors:.6};if(s){l+=s.learningMetrics.confidenceLevel*.3;const m=this.hashRoute(e.id),f=s.preferences.preferredRoutes.find(p=>p.routeHash===m);f&&f.avgRating>3&&(l+=.2)}const d={},h={};return e.type==="fastest"&&(d.timeSaving=Math.random()*10+5),e.type==="scenic"&&(d.scenicValue=Math.random()*.3+.7,h.longerDistance=Math.random()*2+1),{routeId:e.id,confidence:Math.min(.95,l),reasoning:c,benefits:d,tradeoffs:h,alternativeExplanation:this.generateAlternativeExplanation(e,d,h),personalizedMessage:this.generatePersonalizedMessage(s,e,d)}}async generateEnhancedInstructions(e,s,r){const a=r?.phrasingStyle||(s.userExperience==="novice"?"descriptive":"concise");return{instructions:e.instructions.map((c,d)=>({id:`instruction_${d}`,text:this.enhanceInstructionText(c.text,s,a),timing:this.calculateAnnouncementTiming(c.distance,s.drivingConditions),priority:this.determinePriority(c.maneuver),context:{maneuverType:c.maneuver,roadType:"unknown",complexity:this.assessComplexity(c),landmarks:[]},localization:{language:"en",accent:"neutral",speedAdjustment:s.ambientNoise>60?.8:1}})),adaptiveSettings:{volumeAdjustment:Math.min(2,1+(s.ambientNoise-50)/50),phrasingStyle:a,personalizations:[],emergencyOverride:!1}}}async fetchJunctionData(e,s){return{lanes:[{id:"lane_1",type:"regular",direction:"straight",recommended:!0,speedLimit:60},{id:"lane_2",type:"regular",direction:"right",recommended:!1,speedLimit:40}],info:{type:"intersection",complexity:3,signage:["Main St","Highway 101"],landmarks:["Shopping Center","Gas Station"]}}}generatePreparationAdvice(e,s){const r=[];return e.info.complexity>3&&r.push("Complex junction ahead - prepare early"),s.type==="turn"&&r.push("Move to the appropriate lane"),r}enhanceInstructionText(e,s,r){return r==="descriptive"?e+" - watch for road signs":e}calculateAnnouncementTiming(e,s){let r=e;return s==="heavy_traffic"&&(r=Math.min(r,e*.8)),Math.max(50,r)}determinePriority(e){return e.includes("exit")||e.includes("merge")?"critical":e.includes("turn")?"important":"informational"}assessComplexity(e){let s=1;return e.text.includes("exit")&&(s+=2),e.text.includes("merge")&&(s+=2),e.text.includes("roundabout")&&(s+=1),Math.min(5,s)}hashRoute(e){return e.split("").reduce((s,r)=>(s<<5)-s+r.charCodeAt(0)&4294967295,0).toString(16)}generateAlternativeExplanation(e,s,r){let a=`This ${e.type} route`;return s.timeSaving&&(a+=` can save you ${Math.round(s.timeSaving)} minutes`),r.longerDistance&&(a+=` but is ${r.longerDistance.toFixed(1)}km longer`),a+"."}generatePersonalizedMessage(e,s,r){if(!e)return"This route has been optimized based on current conditions.";const a=e.learningMetrics.totalRoutes;return a>50?`Based on your ${a} previous routes, this option matches your preferences.`:"This route is recommended based on current conditions and typical user preferences."}saveUserModel(e){try{const s=JSON.parse(localStorage.getItem("user_preference_models")||"{}");s[e.userId]=e,localStorage.setItem("user_preference_models",JSON.stringify(s))}catch(s){C.error("Failed to save user model:",s)}}startBackgroundUpdates(){setInterval(()=>{this.performMaintenanceTasks()},this.ML_UPDATE_INTERVAL)}async performMaintenanceTasks(){try{this.weatherCache.clear(),await this.updateTrafficPatterns();for(const[e,s]of this.userModels)Date.now()-s.learningMetrics.lastTraining>this.ML_UPDATE_INTERVAL&&await this.retrainUserModel(s);C.debug("Navigation intelligence maintenance completed")}catch(e){C.error("Maintenance tasks failed:",e)}}async updateTrafficPatterns(){C.debug("Traffic patterns updated")}async predictTraffic(e,s){try{return{routeSegmentId:e,timestamp:s.getTime(),predictedDelay:Math.random()*10,confidence:.75+Math.random()*.25,severity:["light","moderate","heavy"][Math.floor(Math.random()*3)],factors:{historicalPattern:.4,events:.1,weather:.2,dayOfWeek:.2,timeOfDay:.1}}}catch(r){return C.error("Traffic prediction failed:",r),null}}async findParkingNear(e,s){try{return[{locationId:"parking-1",name:"Downtown Garage",coordinates:e,totalSpaces:100,availableSpaces:25,price:{hourly:5,daily:25,currency:"USD"},features:["covered","security"],walkingTimeToDestination:5,confidence:.85,lastUpdated:Date.now(),trend:"stable",reservationAvailable:!0,restrictions:{}}]}catch(r){return C.error("Parking search failed:",r),[]}}}const $U=new zU,BU=$U;class UU{geofences=new Map;events=[];watchId=null;isMonitoring=!1;lastKnownLocation=null;CHECK_INTERVAL=5e3;MAX_EVENTS_STORED=1e3;MIN_ACCURACY_THRESHOLD=100;checkInterval=null;constructor(){this.initializeFromStorage(),this.setupBackgroundLocationListener()}async initializeFromStorage(){try{const e=localStorage.getItem("geofences");e&&JSON.parse(e).forEach(a=>{this.geofences.set(a.id,a)});const s=localStorage.getItem("geofence_events");s&&(this.events=JSON.parse(s).slice(-this.MAX_EVENTS_STORED)),C.info("Geofencing service initialized",{geofenceCount:this.geofences.size,eventCount:this.events.length})}catch(e){C.error("Failed to initialize geofencing from storage:",e)}}setupBackgroundLocationListener(){an.addListener(e=>{if(e.points&&e.points.length>0){const s=e.points[e.points.length-1];this.handleLocationUpdate({lat:s.latitude,lng:s.longitude,accuracy:s.accuracy,speed:s.speed,heading:s.heading,timestamp:s.timestamp})}})}async startMonitoring(){if(this.isMonitoring)return!0;try{if(!await St.requestPermission())return C.warn("Location permission denied, geofencing will be limited"),this.isMonitoring=!0,!1;this.checkInterval=window.setInterval(()=>{this.checkCurrentLocation()},this.CHECK_INTERVAL);try{await this.checkCurrentLocation()}catch(s){C.warn("Initial location check failed, continuing with periodic checks:",s)}return this.isMonitoring=!0,C.info("Geofence monitoring started"),!0}catch(e){return C.error("Failed to start geofence monitoring:",e),this.isMonitoring=!0,C.info("Started geofencing in limited mode"),!1}}stopMonitoring(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.isMonitoring=!1,C.info("Geofence monitoring stopped")}async addGeofence(e){const s=`geofence_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,id:s,createdAt:Date.now(),updatedAt:Date.now(),triggers:e.triggers.map(a=>({...a,id:`trigger_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,triggerCount:0,isEnabled:!0}))};return this.geofences.set(s,r),await this.saveToStorage(),C.info("Geofence added",{geofenceId:s,name:e.name}),s}async updateGeofence(e,s){const r=this.geofences.get(e);if(!r)return!1;const a={...r,...s,id:e,updatedAt:Date.now()};return this.geofences.set(e,a),await this.saveToStorage(),C.info("Geofence updated",{geofenceId:e}),!0}async removeGeofence(e){const s=this.geofences.delete(e);return s&&(await this.saveToStorage(),C.info("Geofence removed",{geofenceId:e})),s}getAllGeofences(){return Array.from(this.geofences.values())}getActiveGeofences(){return Array.from(this.geofences.values()).filter(e=>e.isActive)}getGeofence(e){return this.geofences.get(e)||null}async checkCurrentLocation(){try{const e=await St.getCurrentPosition({enableHighAccuracy:!1,timeout:8e3,maximumAge:6e4});if(!e){this.lastKnownLocation&&Date.now()-this.lastKnownLocation.timestamp<3e5&&(C.debug("Using last known location for geofence check"),await this.handleLocationUpdate({...this.lastKnownLocation,accuracy:500,timestamp:Date.now()}));return}if(e.accuracy>this.MIN_ACCURACY_THRESHOLD){C.debug("Location accuracy too poor, skipping geofence check",{accuracy:e.accuracy});return}await this.handleLocationUpdate({lat:e.latitude,lng:e.longitude,accuracy:e.accuracy,speed:e.speed||void 0,heading:e.heading||void 0,timestamp:Date.now()})}catch(e){e.message.includes("timeout")||e.message.includes("unavailable")?this.lastKnownLocation&&Date.now()-this.lastKnownLocation.timestamp<6e5?(C.debug("Location timeout, using last known location"),await this.handleLocationUpdate({...this.lastKnownLocation,accuracy:1e3,timestamp:Date.now()})):C.debug("Location check failed and no recent location available:",e.message):C.debug("Location check failed:",e.message)}}async handleLocationUpdate(e){const s=Date.now(),r=this.getActiveGeofences();for(const a of r){const l=this.wasLocationInsideGeofence(a.id),c=this.isLocationInsideGeofence(e,a);if(!l&&c?await this.triggerGeofenceEvent(a,"enter",e):l&&!c&&await this.triggerGeofenceEvent(a,"exit",e),!c){const d=this.calculateDistance(e,a.center),h=a.triggers.filter(m=>m.event==="approach"&&m.isEnabled&&m.approachDistance&&d<=m.approachDistance&&this.canTrigger(m,s));for(const m of h)await this.executeGeofenceTrigger(a,m,"approach",e)}if(c){const d=a.triggers.filter(h=>h.event==="dwell"&&h.isEnabled&&h.dwellTime&&this.hasDwelledLongEnough(a.id,h.dwellTime,s)&&this.canTrigger(h,s));for(const h of d)await this.executeGeofenceTrigger(a,h,"dwell",e)}}this.lastKnownLocation={lat:e.lat,lng:e.lng,timestamp:s}}async triggerGeofenceEvent(e,s,r){const a=Date.now(),l=e.triggers.filter(c=>c.event===s&&c.isEnabled&&this.canTrigger(c,a)&&this.meetsConditions(c,r));for(const c of l)await this.executeGeofenceTrigger(e,c,s,r)}async executeGeofenceTrigger(e,s,r,a){const l=`event_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,c=Date.now(),d={id:l,geofenceId:e.id,triggerId:s.id,event:r,timestamp:a.timestamp,location:a,confidence:this.calculateTriggerConfidence(e,a),processed:!1};try{let h=!1,m;switch(s.action){case"notification":h=await this.sendNotification(s.payload);break;case"webhook":h=await this.callWebhook(s.webhookUrl,d);break;case"log":C.info("Geofence triggered",{geofence:e.name,event:r,location:a}),h=!0;break;case"custom":h=await this.executeCustomFunction(s.customFunction,d);break;default:m=`Unknown trigger action: ${s.action}`;break}d.processed=!0,d.result={success:h,error:m,responseTime:Date.now()-c},s.lastTriggered=Date.now(),s.triggerCount++,C.info("Geofence trigger executed",{geofenceId:e.id,geofenceName:e.name,triggerId:s.id,event:r,success:h,responseTime:d.result.responseTime})}catch(h){d.processed=!0,d.result={success:!1,error:h instanceof Error?h.message:"Unknown error",responseTime:Date.now()-c},C.error("Geofence trigger failed",{geofenceId:e.id,triggerId:s.id,event:r,error:h})}this.events.push(d),this.events.length>this.MAX_EVENTS_STORED&&(this.events=this.events.slice(-this.MAX_EVENTS_STORED)),await this.saveToStorage()}async sendNotification(e){try{if(!("Notification"in window)||Notification.permission==="default"&&await Notification.requestPermission()!=="granted")return!1;if(Notification.permission==="granted"){const s=new Notification(e.title,{body:e.message,icon:"/app-icon.png",badge:"/badge-icon.png",tag:e.category||"geofence",requireInteraction:e.priority==="critical",data:e.data});return s.onclick=()=>{window.focus(),s.close()},!0}return!1}catch(s){return C.error("Failed to send notification:",s),!1}}async callWebhook(e,s){try{return(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok}catch(r){return C.error("Webhook call failed:",r),!1}}async executeCustomFunction(e,s){try{return C.info("Custom function called",{functionName:e,event:s}),!0}catch(r){return C.error("Custom function execution failed:",r),!1}}isLocationInsideGeofence(e,s){return s.type==="circle"?this.calculateDistance(e,s.center)<=s.radius:s.type==="polygon"&&s.polygon?this.isPointInPolygon(e,s.polygon):!1}wasLocationInsideGeofence(e){if(!this.lastKnownLocation)return!1;const s=this.geofences.get(e);return s?this.isLocationInsideGeofence(this.lastKnownLocation,s):!1}hasDwelledLongEnough(e,s,r){return this.events.filter(l=>l.geofenceId===e&&l.event==="enter"&&r-l.timestamp<=s*60*1e3).length>0}canTrigger(e,s){if(!e.cooldownPeriod||!e.lastTriggered)return!0;const r=e.cooldownPeriod*60*1e3;return s-e.lastTriggered>r}meetsConditions(e,s){if(!e.conditions)return!0;if(e.conditions.timeOfDay){const r=new Date,a=`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}`,{start:l,end:c}=e.conditions.timeOfDay;if(l<=c){if(a<l||a>c)return!1}else if(a<l&&a>c)return!1}if(e.conditions.daysOfWeek){const r=new Date().getDay();if(!e.conditions.daysOfWeek.includes(r))return!1}if(e.conditions.speed&&s.speed!==void 0){const r=s.speed*3.6,{min:a,max:l}=e.conditions.speed;if(a!==void 0&&r<a||l!==void 0&&r>l)return!1}return!0}calculateTriggerConfidence(e,s){const r=s.accuracy,a=e.type==="circle"?e.radius:this.calculatePolygonArea(e.polygon||[]),l=Math.max(0,1-r/100),c=Math.min(1,a/100);return l*.7+c*.3}calculateDistance(e,s){const a=e.lat*Math.PI/180,l=s.lat*Math.PI/180,c=(s.lat-e.lat)*Math.PI/180,d=(s.lng-e.lng)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}isPointInPolygon(e,s){let r=!1;const a=e.lng,l=e.lat;for(let c=0,d=s.length-1;c<s.length;d=c++){const h=s[c].lng,m=s[c].lat,f=s[d].lng,p=s[d].lat;m>l!=p>l&&a<(f-h)*(l-m)/(p-m)+h&&(r=!r)}return r}calculatePolygonArea(e){if(e.length<3)return 0;let s=0;for(let r=0;r<e.length;r++){const a=(r+1)%e.length;s+=e[r].lng*e[a].lat,s-=e[a].lng*e[r].lat}return Math.abs(s)/2*111320*111320}getStatistics(){const e=this.getAllGeofences(),s=this.getActiveGeofences(),r=this.events.length,a=Date.now(),l=a-1440*60*1e3,c=a-10080*60*1e3,d=this.events.filter(S=>S.timestamp>l).length,h=this.events.filter(S=>S.timestamp>c).length,m={};e.forEach(S=>{m[S.id]=S.triggers.reduce((T,R)=>T+R.triggerCount,0)});const f=Object.keys(m).reduce((S,T)=>m[S]>m[T]?S:T,""),p=e.find(S=>S.id===f),y=this.events.filter(S=>S.result?.success),N=y.length>0?y.reduce((S,T)=>S+(T.result?.responseTime||0),0)/y.length:0,w=this.events.filter(S=>S.processed),j=w.length>0?w.filter(S=>!S.result?.success).length/w.length:0;return{totalGeofences:e.length,activeGeofences:s.length,totalTriggers:r,triggersToday:d,triggersThisWeek:h,mostTriggeredGeofence:{id:f,name:p?.name||"Unknown",triggerCount:m[f]||0},averageResponseTime:N,errorRate:j}}getRecentEvents(e=50){return this.events.slice(-e).sort((s,r)=>r.timestamp-s.timestamp)}clearOldEvents(e=30){const s=Date.now()-e*24*60*60*1e3;this.events=this.events.filter(r=>r.timestamp>s),this.saveToStorage()}async saveToStorage(){try{localStorage.setItem("geofences",JSON.stringify(Array.from(this.geofences.values()))),localStorage.setItem("geofence_events",JSON.stringify(this.events))}catch(e){C.error("Failed to save geofencing data to storage:",e)}}exportData(){return{geofences:this.getAllGeofences(),events:this.events,statistics:this.getStatistics()}}async importData(e){try{return this.geofences.clear(),e.geofences.forEach(s=>{this.geofences.set(s.id,s)}),e.events&&(this.events=e.events.slice(-this.MAX_EVENTS_STORED)),await this.saveToStorage(),C.info("Geofencing data imported successfully"),!0}catch(s){return C.error("Failed to import geofencing data:",s),!1}}getMonitoringStatus(){return{isMonitoring:this.isMonitoring,lastLocationUpdate:this.lastKnownLocation?.timestamp||null,activeGeofenceCount:this.getActiveGeofences().length,locationAccuracy:this.lastKnownLocation?50:null}}}const VU=new UU;class WU{storageKey="findy_trip_history";getAnalytics(e="all"){const s=this.getTripsForTimeRange(e);return s.length===0?this.getEmptyAnalytics():{totalDistance:this.calculateTotalDistance(s),totalTime:this.calculateTotalTime(s),avgSpeed:this.calculateAverageSpeed(s),co2Saved:this.calculateCO2Saved(s),fuelSaved:this.calculateFuelSaved(s),ecoScore:this.calculateEcoScore(s),weeklyData:this.getWeeklyData(s),transportModes:this.getTransportModeDistribution(s),achievements:this.calculateAchievements(s),recentTrips:this.getRecentTrips(s,10)}}recordTrip(e){const s=this.getAllTrips(),r={...e,id:`trip_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};s.push(r),localStorage.setItem(this.storageKey,JSON.stringify(s))}getAllTrips(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch{return[]}}getTripsForTimeRange(e){const s=this.getAllTrips(),r=new Date;let a;switch(e){case"week":a=new Date(r.getTime()-10080*60*1e3);break;case"month":a=new Date(r.getTime()-720*60*60*1e3);break;case"year":a=new Date(r.getTime()-365*24*60*60*1e3);break;default:return s}return s.filter(l=>new Date(l.startTime)>=a)}calculateTotalDistance(e){const r=e.reduce((a,l)=>a+l.distance,0)*621371e-9;return r>1e3?`${(r/1e3).toFixed(1)}k mi`:`${Math.round(r)} mi`}calculateTotalTime(e){const s=e.reduce((l,c)=>l+c.duration,0),r=Math.floor(s/3600),a=Math.floor(s%3600/60);return r>0?`${r}h ${a}m`:`${a}m`}calculateAverageSpeed(e){const s=e.reduce((c,d)=>c+d.distance,0),r=e.reduce((c,d)=>c+d.duration,0);if(r===0)return"0 mph";const l=s/r*2.23694;return`${Math.round(l)} mph`}calculateCO2Saved(e){let s=0;return e.forEach(r=>{const l=r.distance/1e3*.21;switch(r.mode){case"walking":case"cycling":s+=l;break;case"transit":s+=l*.6;break}}),`${Math.round(s)} kg`}calculateFuelSaved(e){let s=0;e.forEach(a=>{const c=a.distance/1e3*.08;switch(a.mode){case"walking":case"cycling":s+=c;break;case"transit":s+=c*.7;break}});const r=s*1.5;return`$${Math.round(r)}`}calculateEcoScore(e){if(e.length===0)return 0;let s=0;return e.forEach(r=>{switch(r.mode){case"walking":s+=100;break;case"cycling":s+=90;break;case"transit":s+=70;break;case"driving":s+=20;break}}),Math.round(s/e.length)}getWeeklyData(e){const r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(c=>({day:c,miles:0,trips:0})),a=new Date(Date.now()-10080*60*1e3);return e.filter(c=>new Date(c.startTime)>=a).forEach(c=>{const d=new Date(c.startTime).getDay(),h=c.distance*621371e-9;r[d].miles+=h,r[d].trips+=1}),r.map(c=>({...c,miles:Math.round(c.miles)}))}getTransportModeDistribution(e){const s={driving:0,walking:0,cycling:0,transit:0};e.forEach(a=>{s[a.mode]++});const r=e.length;return[{mode:"Driving",percentage:Math.round(s.driving/r*100)||0,color:"bg-blue-500"},{mode:"Transit",percentage:Math.round(s.transit/r*100)||0,color:"bg-green-500"},{mode:"Walking",percentage:Math.round(s.walking/r*100)||0,color:"bg-yellow-500"},{mode:"Cycling",percentage:Math.round(s.cycling/r*100)||0,color:"bg-purple-500"}].filter(a=>a.percentage>0)}calculateAchievements(e){const s=e.reduce((c,d)=>c+d.distance,0)*621371e-9,r=e.filter(c=>c.mode==="walking"||c.mode==="cycling"||c.mode==="transit").length,a=e.filter(c=>new Date(c.startTime).getHours()<8).length,l=e.filter(c=>c.mode==="transit").length;return[{id:1,name:"First Steps",description:"Complete your first trip",icon:"",unlocked:e.length>=1},{id:2,name:"Explorer",description:"Travel 100 miles",icon:"",unlocked:s>=100},{id:3,name:"Eco Warrior",description:"Take 25 eco-friendly trips",icon:"",unlocked:r>=25},{id:4,name:"Early Bird",description:"Take 10 trips before 8 AM",icon:"",unlocked:a>=10},{id:5,name:"Transit Hero",description:"Take 20 public transit trips",icon:"",unlocked:l>=20},{id:6,name:"Road Warrior",description:"Travel 1,000 miles",icon:"",unlocked:s>=1e3}]}getRecentTrips(e,s){return e.sort((r,a)=>new Date(a.startTime).getTime()-new Date(r.startTime).getTime()).slice(0,s).map(r=>({from:r.from.name,to:r.to.name,distance:`${Math.round(r.distance*621371e-9)} mi`,time:`${Math.round(r.duration/60)} min`,mode:r.mode.charAt(0).toUpperCase()+r.mode.slice(1)}))}getEmptyAnalytics(){return{totalDistance:"0 mi",totalTime:"0m",avgSpeed:"0 mph",co2Saved:"0 kg",fuelSaved:"$0",ecoScore:0,weeklyData:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>({day:e,miles:0,trips:0})),transportModes:[],achievements:[{id:1,name:"First Steps",description:"Complete your first trip",icon:"",unlocked:!1}],recentTrips:[]}}}const Mp=new WU,HU={currentLocation:null,selectedLocation:null,searchQuery:"",currentRoute:null,routeHistory:[],alternativeRoutes:[],navigationStatus:"idle",transportMode:"driving",isNavigating:!1,activeGeofences:[],intelligentRecommendations:[],trafficPredictions:[],weatherImpact:null,routePreferences:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1,optimizeFor:"fastest",enableIntelligence:!0,enableGeofencing:!0},isLoading:!1,error:null},GU=(t,e)=>{switch(e.type){case"SET_LOADING":return{...t,isLoading:e.payload};case"SET_ERROR":return{...t,error:e.payload};case"SET_CURRENT_LOCATION":return{...t,currentLocation:e.payload};case"SET_SELECTED_LOCATION":return{...t,selectedLocation:e.payload};case"SET_SEARCH_QUERY":return{...t,searchQuery:e.payload};case"SET_CURRENT_ROUTE":return{...t,currentRoute:e.payload};case"ADD_TO_ROUTE_HISTORY":const s=[e.payload,...t.routeHistory.slice(0,49)];return{...t,routeHistory:s};case"SET_ALTERNATIVE_ROUTES":return{...t,alternativeRoutes:e.payload};case"SET_NAVIGATION_STATUS":return{...t,navigationStatus:e.payload};case"SET_TRANSPORT_MODE":return{...t,transportMode:e.payload};case"START_NAVIGATION":return{...t,currentRoute:e.payload,navigationStatus:"navigating",isNavigating:!0,error:null};case"STOP_NAVIGATION":if(t.currentRoute&&t.currentLocation&&t.selectedLocation){const a=t.currentRoute.createdAt,l=new Date().toISOString(),c=Math.round((new Date().getTime()-new Date(a).getTime())/1e3);Mp.recordTrip({from:{name:t.currentRoute.from.name||"Start Location",lat:t.currentRoute.from.lat,lng:t.currentRoute.from.lng},to:{name:t.currentRoute.to?.name||t.selectedLocation.name,lat:t.currentRoute.to?.lat||t.selectedLocation.lat,lng:t.currentRoute.to?.lng||t.selectedLocation.lng},distance:typeof t.currentRoute.distance=="string"?parseFloat(t.currentRoute.distance)*1e3:5e3,duration:c,mode:t.transportMode,startTime:a,endTime:l}),C.info("Trip recorded for analytics",{duration:c,mode:t.transportMode,distance:t.currentRoute.distance})}return{...t,currentRoute:null,alternativeRoutes:[],navigationStatus:"idle",isNavigating:!1};case"PAUSE_NAVIGATION":return{...t,navigationStatus:"paused"};case"RESUME_NAVIGATION":return{...t,navigationStatus:"navigating"};case"COMPLETE_NAVIGATION":const r=t.currentRoute;return{...t,navigationStatus:"completed",isNavigating:!1,routeHistory:r?[r,...t.routeHistory.slice(0,49)]:t.routeHistory};case"UPDATE_ROUTE_PREFERENCES":return{...t,routePreferences:{...t.routePreferences,...e.payload}};case"CLEAR_SELECTION":return{...t,selectedLocation:null,searchQuery:""};default:return t}},J2=x.createContext(void 0),qU=({children:t})=>{const[e,s]=x.useReducer(GU,HU);x.useEffect(()=>{e.routeHistory.length>0&&localStorage.setItem("route_history",JSON.stringify(e.routeHistory))},[e.routeHistory]),x.useEffect(()=>{localStorage.setItem("route_preferences",JSON.stringify(e.routePreferences))},[e.routePreferences]),x.useEffect(()=>{(()=>{try{const F=localStorage.getItem("route_history");if(F){const oe=JSON.parse(F);s({type:"ADD_TO_ROUTE_HISTORY",payload:oe[0]})}const W=localStorage.getItem("route_preferences");if(W){const oe=JSON.parse(W);s({type:"UPDATE_ROUTE_PREFERENCES",payload:oe})}const z=localStorage.getItem("transport_mode");z&&["driving","walking","transit","cycling"].includes(z)&&s({type:"SET_TRANSPORT_MODE",payload:z})}catch(F){C.error("Failed to load navigation data from localStorage",{error:F})}})(),(async()=>{try{e.routePreferences.enableGeofencing&&(await VU.startMonitoring()?C.info("Geofencing service initialized successfully"):C.warn("Geofencing service started in limited mode (location permission may be denied)")),e.routePreferences.enableIntelligence&&(await BU.initialize(),C.info("Advanced navigation intelligence initialized"))}catch(F){C.error("Failed to initialize advanced services:",F)}})(),c()},[]);const r=k=>{s({type:"SET_CURRENT_LOCATION",payload:k}),C.debug("Current location set",{location:k})},a=k=>{s({type:"SET_SELECTED_LOCATION",payload:k}),C.debug("Selected location set",{location:k})},l=k=>{s({type:"SET_SEARCH_QUERY",payload:k})},c=async()=>new Promise(k=>{if(!navigator.geolocation){C.warn("Geolocation not supported"),k(null);return}s({type:"SET_LOADING",payload:!0}),navigator.geolocation.getCurrentPosition(P=>{const F={id:"current",name:"Current Location",address:"Your current location",lat:P.coords.latitude,lng:P.coords.longitude};s({type:"SET_CURRENT_LOCATION",payload:F}),s({type:"SET_LOADING",payload:!1}),C.info("Current position obtained",{location:F}),k(F)},P=>{C.debug("Initial location request failed, trying fallback:",P.message),navigator.geolocation.getCurrentPosition(F=>{const W={id:"current",name:"Current Location",address:"Your current location",lat:F.coords.latitude,lng:F.coords.longitude};s({type:"SET_CURRENT_LOCATION",payload:W}),s({type:"SET_LOADING",payload:!1}),C.info("Fallback position obtained",{location:W}),k(W)},F=>{C.debug("Fallback location request also failed:",F.message),s({type:"SET_LOADING",payload:!1}),C.warn("Location unavailable in production mode"),k(null)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:6e5})},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5})}),A={...e,setCurrentLocation:r,setSelectedLocation:a,setSearchQuery:l,getCurrentPosition:c,calculateRoute:async(k,P,F=e.transportMode)=>{try{s({type:"SET_LOADING",payload:!0}),s({type:"SET_ERROR",payload:null});const W={id:`route_${Date.now()}`,from:k,to:P,distance:"5.2 km",duration:"12 min",mode:F,steps:["Head north on Main St","Turn right on Oak Ave","Continue straight for 2 km","Turn left on destination street","Arrive at destination"],createdAt:new Date().toISOString()};return s({type:"SET_CURRENT_ROUTE",payload:W}),s({type:"SET_NAVIGATION_STATUS",payload:"planning"}),s({type:"SET_LOADING",payload:!1}),C.info("Route calculated",{from:k.name,to:P.name,mode:F}),W}catch(W){return C.error("Route calculation failed",{error:W,from:k,to:P,mode:F}),s({type:"SET_ERROR",payload:"Failed to calculate route"}),s({type:"SET_LOADING",payload:!1}),null}},setCurrentRoute:k=>{s({type:"SET_CURRENT_ROUTE",payload:k})},setAlternativeRoutes:k=>{s({type:"SET_ALTERNATIVE_ROUTES",payload:k})},startNavigation:k=>{s({type:"START_NAVIGATION",payload:k}),C.info("Navigation started",{route:k.id})},stopNavigation:()=>{const k=e.currentRoute;k&&s({type:"ADD_TO_ROUTE_HISTORY",payload:k}),s({type:"STOP_NAVIGATION"}),C.info("Navigation stopped")},pauseNavigation:()=>{s({type:"PAUSE_NAVIGATION"}),C.info("Navigation paused")},resumeNavigation:()=>{s({type:"RESUME_NAVIGATION"}),C.info("Navigation resumed")},completeNavigation:()=>{s({type:"COMPLETE_NAVIGATION"}),C.info("Navigation completed")},setTransportMode:k=>{s({type:"SET_TRANSPORT_MODE",payload:k}),localStorage.setItem("transport_mode",k),C.debug("Transport mode changed",{mode:k})},updateRoutePreferences:k=>{s({type:"UPDATE_ROUTE_PREFERENCES",payload:k}),C.debug("Route preferences updated",{preferences:k})},clearRoutes:()=>{s({type:"CLEAR_ROUTES"}),C.debug("Routes cleared")},clearSelection:()=>{s({type:"CLEAR_SELECTION"}),C.debug("Selection cleared")}};return n.jsx(J2.Provider,{value:A,children:t})},ux=()=>{const t=x.useContext(J2);if(t===void 0)throw new Error("useNavigation must be used within a NavigationProvider");return t};function KU({destination:t,currentLocation:e,onSuggestionAccept:s,map:r}){const[a,l]=x.useState([]),[c,d]=x.useState(!0),[h,m]=x.useState(null),[f,p]=x.useState(!1),[y,N]=x.useState([]),{currentLocation:w}=Lu(),{selectedLocation:j}=ux();x.useEffect(()=>{r&&window.google&&(ar.initialize(r),C.info("AI predictions service initialized with map"))},[r]),x.useEffect(()=>{(async()=>{if(!w||!j){d(!0),setTimeout(()=>{l([{type:"traffic",confidence:92,title:"Heavy Traffic Expected",description:"Rush hour traffic building on major routes",suggestion:"Leave 15 minutes earlier or take alternative route",impact:"high",timeframe:"Next 2 hours"},{type:"parking",confidence:78,title:"Limited Parking Available",description:"Nearby parking areas 85% full",suggestion:"Reserve spot in advance",impact:"medium",timeframe:"Current"}]),d(!1)},1e3);return}d(!0);const k=[];try{const P=await ar.analyzeTraffic(w,j);P.estimatedDelay>5&&k.push({type:"traffic",confidence:85,title:`${P.severity.charAt(0).toUpperCase()+P.severity.slice(1)} Traffic Detected`,description:`${P.estimatedDelay} min delay on primary route`,suggestion:P.alternativeRoutes[0]?`Take ${P.alternativeRoutes[0].via} to save ${P.alternativeRoutes[0].timeSaved} min`:"Consider leaving earlier",impact:P.severity==="severe"||P.severity==="high"?"high":"medium",timeframe:"Current",actionData:{trafficData:P,showTrafficLayer:!0}});const F=await ar.predictParking(j);F.bestOption&&k.push({type:"parking",confidence:Math.round(F.bestOption.availability),title:"Parking Recommendation",description:`${F.bestOption.name} - ${Math.round(F.bestOption.walkingDistance/80)} min walk`,suggestion:`${F.bestOption.availability}% available at ${F.bestOption.pricing}`,impact:F.averageOccupancy>70?"high":"medium",timeframe:"At destination",actionData:{parkingSpots:F.nearbySpots}});const W=new Date;W.setHours(W.getHours()+1);const z=await ar.recommendDepartureTime(w,j,W);k.push({type:"departure",confidence:z.confidence,title:"Recommended Departure",description:z.reasoning,suggestion:`Leave at ${z.departureTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,impact:"low",timeframe:"Today"});const oe=await ar.analyzeWeatherImpact(null);oe.impact!=="none"&&k.push({type:"weather",confidence:75,title:`Weather: ${oe.condition.charAt(0).toUpperCase()+oe.condition.slice(1)}`,description:oe.recommendations[0],suggestion:oe.recommendations.join(", "),impact:oe.impact==="high"?"high":"medium",timeframe:"Current conditions"}),l(k)}catch(P){C.error("Failed to load AI predictions",{error:P}),ue.error("Failed to load predictions")}finally{d(!1)}})()},[w,j]);const S=A=>{switch(A){case"traffic":return Pn;case"parking":return Ls;case"departure":return xs;case"weather":return RE;case"event":return Op;case"route":return rt;default:return Hd}},T=A=>{if(A.actionData){if(A.type==="traffic"&&A.actionData.showTrafficLayer&&(ar.showTrafficLayer(!f),p(!f),ue.success(f?"Traffic layer disabled":"Traffic layer enabled")),A.type==="parking"&&A.actionData.parkingSpots&&r)if(y.forEach(k=>k.setMap(null)),y.length===0){const k=ar.addParkingMarkers(A.actionData.parkingSpots,r);N(k),ue.success("Showing parking options on map")}else N([]),ue.success("Parking markers hidden");s&&s(A)}},R=A=>{switch(A){case"high":return"text-red-600 bg-red-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}};return c?n.jsxs(ne,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Mf,{className:"w-5 h-5 text-purple-600 animate-pulse"}),n.jsx("span",{className:"text-gray-600",children:"Analyzing patterns..."})]}),n.jsx("div",{className:"space-y-3",children:[1,2,3].map(A=>n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]},A))})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mf,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Predictions"}),n.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[n.jsx(i1,{className:"w-3 h-3 mr-1"}),"Beta"]})]}),n.jsx(L,{variant:"ghost",size:"sm",children:n.jsx(t1,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"space-y-3",children:a.map((A,k)=>{const P=S(A.type);return n.jsxs(ne,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{m(A),T(A)},children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${R(A.impact)}`,children:n.jsx(P,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:A.title}),n.jsxs(Ie,{variant:"outline",className:"text-xs",children:[A.confidence,"% confident"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.description}),A.suggestion&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-purple-600 font-medium",children:[" ",A.suggestion]}),n.jsx(or,{className:"w-4 h-4 text-gray-400"})]}),A.timeframe&&n.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[n.jsx(xs,{className:"w-3 h-3 text-gray-400"}),n.jsx("span",{className:"text-xs text-gray-500",children:A.timeframe})]})]})]}),n.jsx("div",{className:"mt-3",children:n.jsx(Ks,{value:A.confidence,className:"h-1"})})]},k)})}),n.jsxs(Ir,{children:[n.jsx(Hd,{className:"w-4 h-4"}),n.jsxs(Lr,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"AI predictions improve over time. Accuracy: 84%"}),n.jsxs("div",{className:"flex gap-2",children:[f&&n.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[n.jsx(Pn,{className:"w-3 h-3 mr-1"}),"Traffic Live"]}),y.length>0&&n.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[n.jsx(Ls,{className:"w-3 h-3 mr-1"}),"Parking Shown"]})]})]})]}),h&&n.jsxs(ne,{className:"p-4 border-purple-200 bg-purple-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold",children:"Apply Suggestion?"}),n.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:A=>{A.stopPropagation(),m(null)},children:""})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h.suggestion}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(L,{className:"flex-1",onClick:()=>{s&&s(h),T(h),m(null)},children:"Apply"}),n.jsx(L,{variant:"outline",className:"flex-1",onClick:()=>m(null),children:"Dismiss"})]})]})]})}function ZU({onBack:t}){const[e,s]=x.useState("week"),[r,a]=x.useState("all"),[l,c]=x.useState(Mp.getAnalytics("week"));x.useEffect(()=>{const p=Mp.getAnalytics(e);c(p)},[e]);const d={totalDistance:l.totalDistance,totalTime:l.totalTime,avgSpeed:l.avgSpeed,co2Saved:l.co2Saved,fuelSaved:l.fuelSaved,ecoScore:l.ecoScore},h=l.weeklyData,m=l.transportModes,f=l.achievements;return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-gray-900",children:"Analytics"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your driving insights"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ya,{value:e,onValueChange:s,children:[n.jsx(wa,{className:"w-32",children:n.jsx(va,{})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"week",children:"This Week"}),n.jsx(vt,{value:"month",children:"This Month"}),n.jsx(vt,{value:"year",children:"This Year"}),n.jsx(vt,{value:"all",children:"All Time"})]})]}),n.jsx(L,{variant:"outline",size:"icon",children:n.jsx(Rr,{className:"w-4 h-4"})})]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(pt,{className:"w-4 h-4 text-gray-500"}),n.jsx(Pn,{className:"w-3 h-3 text-green-500"})]}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.totalDistance}),n.jsx("div",{className:"text-sm text-gray-500",children:"Total Distance"})]}),n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(xs,{className:"w-4 h-4 text-gray-500"}),n.jsx(Pn,{className:"w-3 h-3 text-green-500"})]}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.totalTime}),n.jsx("div",{className:"text-sm text-gray-500",children:"Travel Time"})]}),n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(qd,{className:"w-4 h-4 text-green-500"}),n.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Eco"})]}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.co2Saved}),n.jsx("div",{className:"text-sm text-gray-500",children:"CO2 Saved"})]}),n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(oi,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+12%"})]}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.fuelSaved}),n.jsx("div",{className:"text-sm text-gray-500",children:"Fuel Saved"})]})]}),n.jsxs(An,{defaultValue:"overview",className:"px-4",children:[n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"overview",children:"Overview"}),n.jsx(st,{value:"trips",children:"Trips"}),n.jsx(st,{value:"eco",children:"Eco Impact"})]}),n.jsxs(nt,{value:"overview",className:"space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Weekly Activity"}),n.jsx("div",{className:"space-y-3",children:h.map(p=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-gray-600 w-12",children:p.day}),n.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative overflow-hidden",children:[n.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${p.miles/120*100}%`}}),n.jsxs("span",{className:"absolute inset-0 flex items-center px-2 text-xs font-medium text-gray-700",children:[p.miles," mi"]})]}),n.jsxs(Ie,{variant:"outline",className:"text-xs",children:[p.trips," trips"]})]},p.day))})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Transport Modes"}),n.jsx("div",{className:"space-y-3",children:m.map(p=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-gray-700",children:p.mode}),n.jsxs("span",{className:"text-gray-500",children:[p.percentage,"%"]})]}),n.jsx(Ks,{value:p.percentage,className:"h-2"})]},p.mode))})]})]}),n.jsxs(nt,{value:"trips",className:"space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Recent Trips"}),n.jsx("div",{className:"space-y-3",children:[{from:"Home",to:"Office",distance:"12 mi",time:"35 min",mode:"Car"},{from:"Office",to:"Gym",distance:"3 mi",time:"15 min",mode:"Bike"},{from:"Gym",to:"Grocery Store",distance:"2 mi",time:"8 min",mode:"Walk"},{from:"Store",to:"Home",distance:"5 mi",time:"12 min",mode:"Transit"}].map((p,y)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-gray-900",children:[p.from,"  ",p.to]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[p.distance,"  ",p.time]})]}),n.jsx(Ie,{variant:"secondary",children:p.mode})]},y))})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Trip Patterns"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Most Common Route"}),n.jsx("div",{className:"font-medium",children:"Home  Office"}),n.jsx("div",{className:"text-xs text-gray-500",children:"42 trips this month"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Peak Travel Time"}),n.jsx("div",{className:"font-medium",children:"8:00 AM - 9:00 AM"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Weekdays"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Avg Trip Length"}),n.jsx("div",{className:"font-medium",children:"8.5 miles"}),n.jsx("div",{className:"text-xs text-gray-500",children:"28 minutes"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Preferred Mode"}),n.jsx("div",{className:"font-medium",children:"Car (45%)"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Most used"})]})]})]})]}),n.jsxs(nt,{value:"eco",className:"space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Eco Score"}),n.jsx("div",{className:"flex items-center justify-center py-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center",children:n.jsx("div",{className:"text-4xl font-bold text-white",children:d.ecoScore})}),n.jsx(qd,{className:"absolute -bottom-2 -right-2 w-8 h-8 text-green-600 bg-white rounded-full p-1"})]})}),n.jsx("p",{className:"text-center text-gray-600 mt-4",children:"Great job! You're in the top 20% of eco-friendly drivers"})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Environmental Impact"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Trees Saved"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Equivalent CO2 offset"})]})]}),n.jsx("div",{className:"text-xl font-bold text-green-600",children:"12"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Gallons Saved"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Fuel conservation"})]})]}),n.jsx("div",{className:"text-xl font-bold text-blue-600",children:"34"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Green Miles"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Walking/Cycling"})]})]}),n.jsx("div",{className:"text-xl font-bold text-purple-600",children:"156"})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Eco Achievements"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.map(p=>n.jsxs("div",{className:`p-3 rounded-lg border ${p.unlocked?"bg-white border-green-200":"bg-gray-50 border-gray-200 opacity-60"}`,children:[n.jsx("div",{className:"text-2xl mb-1",children:p.icon}),n.jsx("div",{className:"font-medium text-sm",children:p.name}),n.jsx("div",{className:"text-xs text-gray-500",children:p.description}),p.unlocked&&n.jsx(Lp,{className:"w-3 h-3 text-green-500 mt-1"})]},p.id))})]})]})]})]})]})}function YU({onBack:t,destination:e,map:s,onNavigateToParking:r,onParkingResults:a}){const{currentLocation:l}=Lu(),{setSelectedLocation:c,calculateRoute:d}=ux(),[h,m]=x.useState(e||""),[f,p]=x.useState(null),[y,N]=x.useState("all"),[w,j]=x.useState("distance"),[S,T]=x.useState(!1),[R,A]=x.useState([]),[k,P]=x.useState(!1),[F,W]=x.useState([]),[z,oe]=x.useState(!0);x.useEffect(()=>{if(s&&window.google)try{ar.initialize(s),C.info("AI Predictions Service initialized for parking finder")}catch(E){C.error("Failed to initialize AI Predictions Service",E)}else C.warn("Map or Google Maps not available for AI Predictions Service initialization")},[s]),x.useEffect(()=>()=>{F.forEach(E=>E.setMap(null))},[F]),x.useEffect(()=>{J()},[y,w,h,l?.lat,l?.lng]);const q=(E,Y)=>{if(!window.google||!window.google.maps.geometry)return 0;const Q=new google.maps.LatLng(E.lat,E.lng),I=new google.maps.LatLng(Y.lat,Y.lng);return google.maps.geometry.spherical.computeDistanceBetween(Q,I)},J=async()=>{if(l){P(!0);try{F.forEach(I=>I.setMap(null)),W([]);const E=e&&h?await K(h):l;if(!E)throw new Error("Could not determine search location");C.info("Attempting to find parking spots via Google Places API",{searchLocation:E});const Y={id:`search_${Date.now()}`,name:h||"Search Location",address:h||"Unknown Address",...E},Q=await ar.predictParking(Y);if(C.info("Parking prediction result:",{spotsFound:Q.nearbySpots.length,spots:Q.nearbySpots.map(I=>({name:I.name,placeId:I.placeId}))}),Q.nearbySpots.length>0){let te=Q.nearbySpots.map(se=>{const fe=q(l,se.location),ve=fe*621371e-9,Pe=Math.round((se.walkingDistance||fe)/80);let $="garage";return se.type==="street"?$="street":se.type==="lot"&&($="lot"),{id:se.placeId,placeId:se.placeId,name:se.name,type:$,distance:`${ve.toFixed(1)} mi`,walkTime:`${Pe} min`,price:se.pricing,availability:se.availability,rating:4+se.availability/100,features:$==="garage"?["Covered","Security"]:["Metered"],hours:"24/7",address:se.name,location:se.location}});if(y!=="all"&&(te=te.filter(se=>se.type===y)),w==="distance")te.sort((se,fe)=>parseFloat(se.distance)-parseFloat(fe.distance));else if(w==="price"){const se=fe=>parseFloat(fe.replace(/[^0-9.]/g,"")||"0");te.sort((fe,ve)=>se(fe.price)-se(ve.price))}else w==="availability"&&te.sort((se,fe)=>fe.availability-se.availability);if(A(te),oe(!0),a&&a(te),s&&te.length>0){const se=te.filter(ve=>ve.location),fe=ar.addParkingMarkers(se.map(ve=>({placeId:ve.placeId||ve.id,location:ve.location,name:ve.name,pricing:ve.price,availability:ve.availability,walkingDistance:parseInt(ve.walkTime)*80,type:ve.type==="garage"?"garage":ve.type==="lot"?"lot":"street"})),s);W(fe),se[0]?.location&&(s.setCenter(se[0].location),s.setZoom(15))}}else{C.warn("No real parking spots found, using mock data"),ue.info("Using sample parking data for your area");const I=B();A(I),oe(!1),a&&a(I)}}catch(E){const Y=E instanceof Error?E.message:"Unknown error";C.error("Failed to search parking spots",{error:Y}),ue.error("Google Places API error. Showing sample data.");const Q=B();A(Q),oe(!1),a&&a(Q)}finally{P(!1)}}},K=async E=>window.google?new Promise(Y=>{new google.maps.Geocoder().geocode({address:E},(I,te)=>{if(te==="OK"&&I&&I[0]){const se=I[0].geometry.location;Y({lat:se.lat(),lng:se.lng()})}else Y(null)})}):null,B=()=>[{id:"mock1",name:"City Center Garage",type:"garage",distance:"0.2 mi",walkTime:"3 min",price:"$4/hr",availability:85,rating:4.5,features:["Covered","Security","EV Charging"],hours:"24/7",address:"123 Main St",location:l?{lat:l.lat+.002,lng:l.lng+.001}:void 0},{id:"mock2",name:"Street Parking - Oak Ave",type:"street",distance:"0.1 mi",walkTime:"2 min",price:"$2/hr",availability:45,rating:4,features:["Metered","2hr Max"],hours:"8AM-6PM",address:"Oak Ave",location:l?{lat:l.lat+.001,lng:l.lng}:void 0},{id:"mock3",name:"Park & Ride Lot",type:"lot",distance:"0.5 mi",walkTime:"7 min",price:"$10/day",availability:92,rating:4.3,features:["Shuttle Service","Security"],hours:"5AM-12AM",address:"456 Park Rd",location:l?{lat:l.lat-.003,lng:l.lng+.002}:void 0}],V=E=>E>70?"text-green-600":E>30?"text-yellow-600":"text-red-600",re=E=>{switch(E){case"street":return"";case"garage":return"";case"lot":return"";case"valet":return"";default:return""}},M=E=>{p(E),T(!0)},D=E=>{if(E.location){if(c({id:E.id,lat:E.location.lat,lng:E.location.lng,name:E.name,address:E.address}),l){const Y={id:"current_location",name:"Current Location",address:"Your current location",...l};d(Y,{id:E.id,lat:E.location.lat,lng:E.location.lng,name:E.name,address:E.address},"driving")}ue.success(`Navigation started to ${E.name}`),C.info("Navigation started to parking spot",{spot:E}),r&&r(E)}else window.location.href=`https://maps.google.com/?q=${encodeURIComponent(E.address)}`};return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h2",{className:"font-semibold text-gray-900 flex items-center gap-2",children:["Find Parking",!z&&n.jsx(Ie,{variant:"outline",className:"text-xs text-orange-600 border-orange-300",children:"Demo Data"})]}),n.jsx("p",{className:"text-sm text-gray-500",children:z?"Live parking data from Google Places":"Sample parking data for your area"})]}),n.jsx(L,{variant:"outline",size:"icon",children:n.jsx(Xb,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ft,{value:h,onChange:E=>m(E.target.value),placeholder:"Search destination for parking",className:"pl-10"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsx("div",{className:"px-4 py-3 bg-white border-b",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto",children:["all","street","garage","lot"].map(E=>n.jsx(L,{variant:y===E?"default":"outline",size:"sm",onClick:()=>N(E),className:"whitespace-nowrap",children:E.charAt(0).toUpperCase()+E.slice(1)},E))})}),n.jsxs("div",{className:"px-4 py-2 flex items-center justify-between bg-gray-100",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Sort by:"}),n.jsx("div",{className:"flex gap-2",children:["distance","price","availability"].map(E=>n.jsx(Ie,{variant:w===E?"default":"outline",className:"cursor-pointer",onClick:()=>j(E),children:E.charAt(0).toUpperCase()+E.slice(1)},E))})]}),k?n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3].map(E=>n.jsxs(ne,{className:"p-4",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]},E))})}):n.jsx("div",{className:"p-4 space-y-3",children:R.map(E=>n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-2xl",children:re(E.type)}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:E.name}),n.jsx("p",{className:"text-sm text-gray-500",children:E.address}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[n.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[n.jsx(pt,{className:"w-3 h-3"}),E.distance]}),n.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[n.jsx(xs,{className:"w-3 h-3"}),E.walkTime," walk"]}),n.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[n.jsx(Ff,{className:"w-3 h-3"}),E.hours]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-bold text-gray-900",children:E.price}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx(Ds,{className:"w-3 h-3 text-yellow-500 fill-current"}),n.jsx("span",{className:"text-xs text-gray-600",children:E.rating})]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[n.jsx("span",{className:"text-gray-600",children:"Availability"}),n.jsxs("span",{className:`font-medium ${V(E.availability)}`,children:[E.availability,"% available"]})]}),n.jsx(Ks,{value:E.availability,className:"h-2"})]}),n.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:E.features.map((Y,Q)=>n.jsx(Ie,{variant:"secondary",className:"text-xs",children:Y},Q))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{className:"flex-1",variant:"outline",onClick:()=>D(E),children:[n.jsx(rt,{className:"w-4 h-4 mr-1"}),"Navigate"]}),n.jsx(L,{className:"flex-1",onClick:()=>M(E),children:"Reserve Spot"})]})]},E.id))}),n.jsxs("div",{className:"px-4 pb-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Recent Parking"}),n.jsx(ne,{className:"p-3",children:n.jsx("div",{className:"space-y-2",children:[{place:"Downtown Garage",date:"Yesterday",cost:"$12"},{place:"Street - Main St",date:"3 days ago",cost:"$6"},{place:"Airport Lot B",date:"Last week",cost:"$45"}].map((E,Y)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:E.place}),n.jsx("div",{className:"text-xs text-gray-500",children:E.date})]}),n.jsx("span",{className:"text-sm font-medium",children:E.cost})]},Y))})})]}),n.jsxs(Ir,{className:"mx-4 mb-4",children:[n.jsx(t1,{className:"w-4 h-4"}),n.jsx(Lr,{children:" Tip: Book parking in advance during events to save up to 50% and guarantee a spot!"})]})]}),S&&f&&n.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-end",children:n.jsxs(ne,{className:"w-full rounded-t-2xl p-6",children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Reserve Parking"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"font-medium",children:f.name}),n.jsx("div",{className:"text-sm text-gray-500",children:f.address}),n.jsxs("div",{className:"mt-2 flex justify-between",children:[n.jsx("span",{className:"text-sm",children:"Duration:"}),n.jsx("span",{className:"font-medium",children:"2 hours"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm",children:"Total:"}),n.jsx("span",{className:"font-bold text-lg",children:"$8.00"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(L,{className:"w-full",size:"lg",onClick:()=>{C.info(`Processing card payment for parking spot: ${f.name}`),ue.loading("Processing payment..."),setTimeout(()=>{ue.success("Parking reserved successfully!"),C.info(`Parking reservation confirmed: ${f.name}`),T(!1),p(null)},2e3)},children:[n.jsx(lo,{className:"w-4 h-4 mr-2"}),"Pay with Card"]}),n.jsx(L,{className:"w-full",variant:"outline",size:"lg",onClick:()=>{C.info(`Processing Apple Pay for parking spot: ${f.name}`),"PaymentRequest"in window?ue.success("Apple Pay not available in demo"):ue.info("Apple Pay not supported on this device")},children:"Pay with Apple Pay"}),n.jsx(L,{className:"w-full",variant:"ghost",onClick:()=>T(!1),children:"Cancel"})]})]})]})})]})}function JU({onBack:t}){const[e,s]=x.useState("achievements"),r={level:12,points:2450,nextLevelPoints:3e3,rank:24,badges:18,streak:7},a=[{id:"1",name:"Road Warrior",description:"Travel 1000 miles",icon:"",progress:856,total:1e3,points:500,unlocked:!1,category:"exploration"},{id:"2",name:"Eco Champion",description:"Save 100kg of CO2",icon:"",progress:100,total:100,points:300,unlocked:!0,category:"eco"},{id:"3",name:"Social Navigator",description:"Share 50 locations",icon:"",progress:32,total:50,points:200,unlocked:!1,category:"social"},{id:"4",name:"Safety First",description:"Complete 100 safe trips",icon:"",progress:100,total:100,points:400,unlocked:!0,category:"safety"},{id:"5",name:"Explorer",description:"Visit 25 new places",icon:"",progress:18,total:25,points:250,unlocked:!1,category:"exploration"},{id:"6",name:"Transit Hero",description:"Use public transit 30 times",icon:"",progress:22,total:30,points:350,unlocked:!1,category:"eco"}],l=[{rank:1,name:"Alex Chen",avatar:"AC",points:5420,badges:42,trend:"same"},{rank:2,name:"Sarah Kim",avatar:"SK",points:5180,badges:38,trend:"up"},{rank:3,name:"Mike Johnson",avatar:"MJ",points:4920,badges:35,trend:"down"},{rank:23,name:"You",avatar:"JD",points:2450,badges:18,trend:"up"},{rank:24,name:"Emma Davis",avatar:"ED",points:2420,badges:17,trend:"down"},{rank:25,name:"Tom Wilson",avatar:"TW",points:2380,badges:16,trend:"same"}],c=[{name:"10% Parking Discount",points:500,icon:"",available:!0},{name:"Premium Route Features",points:1e3,icon:"",available:!0},{name:"Custom Map Theme",points:750,icon:"",available:!0},{name:"Ad-Free Experience",points:2e3,icon:"",available:!1},{name:"VIP Support",points:3e3,icon:"",available:!1}],d=h=>{switch(h){case"exploration":return"bg-blue-100 text-blue-700";case"eco":return"bg-green-100 text-green-700";case"social":return"bg-purple-100 text-purple-700";case"safety":return"bg-orange-100 text-orange-700";case"special":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3 text-white mb-4",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold",children:"Achievements & Rewards"}),n.jsx("p",{className:"text-sm opacity-90",children:"Level up your navigation"})]})]}),n.jsxs(ne,{className:"bg-white/10 backdrop-blur border-white/20 text-white p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center text-xl font-bold",children:r.level}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-semibold",children:["Level ",r.level," Navigator"]}),n.jsxs("div",{className:"text-sm opacity-90",children:[r.points," points"]})]})]}),n.jsxs(Ie,{className:"bg-yellow-500 text-white",children:[n.jsx(o1,{className:"w-3 h-3 mr-1"}),"Rank #",r.rank]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{children:"Next Level"}),n.jsxs("span",{children:[r.points," / ",r.nextLevelPoints]})]}),n.jsx(Ks,{value:r.points/r.nextLevelPoints*100,className:"h-2 bg-white/20"})]}),n.jsxs("div",{className:"flex justify-around mt-4 pt-3 border-t border-white/20",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xl font-bold",children:r.badges}),n.jsx("div",{className:"text-xs opacity-90",children:"Badges"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-xl font-bold",children:["#",r.rank]}),n.jsx("div",{className:"text-xs opacity-90",children:"Rank"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-xl font-bold",children:[r.streak,""]}),n.jsx("div",{className:"text-xs opacity-90",children:"Day Streak"})]})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs(An,{value:e,onValueChange:s,className:"h-full",children:[n.jsx("div",{className:"bg-white border-b px-4",children:n.jsxs(_n,{className:"grid w-full grid-cols-3",children:[n.jsx(st,{value:"achievements",children:"Achievements"}),n.jsx(st,{value:"leaderboard",children:"Leaderboard"}),n.jsx(st,{value:"rewards",children:"Rewards"})]})}),n.jsxs(nt,{value:"achievements",className:"p-4 space-y-3",children:[n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["All","Exploration","Eco","Social","Safety"].map(h=>n.jsx(Ie,{variant:"outline",className:"cursor-pointer whitespace-nowrap",children:h},h))}),a.map(h=>n.jsx(ne,{className:`p-4 ${h.unlocked?"":"opacity-75"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`text-3xl p-2 rounded-lg ${h.unlocked?"bg-green-50":"bg-gray-100"}`,children:h.unlocked?h.icon:""}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold",children:h.name}),h.unlocked&&n.jsx(ai,{className:"w-4 h-4 text-green-500"}),n.jsx(Ie,{className:`text-xs ${d(h.category)}`,children:h.category})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.description}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Progress"}),n.jsxs("span",{className:"font-medium",children:[h.progress," / ",h.total]})]}),n.jsx(Ks,{value:h.progress/h.total*100,className:"h-2"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-lg font-bold text-purple-600",children:["+",h.points]}),n.jsx("div",{className:"text-xs text-gray-500",children:"points"})]})]})},h.id))]}),n.jsxs(nt,{value:"leaderboard",className:"p-4 space-y-3",children:[n.jsx("div",{className:"flex gap-2 justify-center mb-4",children:["Daily","Weekly","Monthly","All Time"].map(h=>n.jsx(L,{variant:h==="Weekly"?"default":"outline",size:"sm",children:h},h))}),l.map(h=>n.jsx(ne,{className:`p-3 ${h.name==="You"?"border-purple-500 bg-purple-50":""}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`font-bold text-lg w-8 text-center ${h.rank<=3?"text-yellow-600":"text-gray-600"}`,children:[h.rank===1&&"",h.rank===2&&"",h.rank===3&&"",h.rank>3&&h.rank]}),n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:h.avatar})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:h.name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[h.badges," badges earned"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-bold text-lg",children:h.points}),n.jsxs("div",{className:"flex items-center gap-1",children:[h.trend==="up"&&n.jsx(Pn,{className:"w-3 h-3 text-green-500"}),h.trend==="down"&&n.jsx(Pn,{className:"w-3 h-3 text-red-500 rotate-180"}),h.trend==="same"&&n.jsx("span",{className:"w-3 h-3 text-gray-400",children:""}),n.jsx("span",{className:"text-xs text-gray-500",children:"vs last week"})]})]})]})},h.rank)),n.jsx(ne,{className:"p-4 bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-purple-900",children:"Challenge Friends"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Compete for bonus points!"})]}),n.jsxs(L,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[n.jsx(yu,{className:"w-4 h-4 mr-1"}),"Invite"]})]})})]}),n.jsxs(nt,{value:"rewards",className:"p-4 space-y-3",children:[n.jsx("div",{className:"mb-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-orange-900",children:"Your Points"}),n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.points})]}),n.jsx(tP,{className:"w-8 h-8 text-orange-500"})]})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Available Rewards"}),c.map((h,m)=>n.jsx(ne,{className:"p-4 mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-2xl",children:h.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:h.name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[h.points," points"]})]}),n.jsx(L,{size:"sm",disabled:!h.available||r.points<h.points,variant:h.available?"default":"outline",children:h.available?r.points>=h.points?"Redeem":`Need ${h.points-r.points} pts`:n.jsxs(n.Fragment,{children:[n.jsx(SP,{className:"w-3 h-3 mr-1"}),"Locked"]})})]})},m))]}),n.jsx(ne,{className:"p-4 border-yellow-200 bg-yellow-50",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(i1,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-yellow-900",children:"Double Points Weekend!"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Earn 2x points on all eco-friendly trips this weekend"})]})]})})]})]})})]})}function QU({onBack:t}){const[e,s]=x.useState("overview"),[r,a]=x.useState(null),l={totalVehicles:24,activeVehicles:18,totalDrivers:32,activeDrivers:19,avgFuelEfficiency:"28 mpg",alerts:5},c=[{id:"V001",name:"Delivery Van 01",type:"Van",driver:"John Smith",status:"active",location:"5th Avenue, Downtown",speed:35,fuel:75,mileage:12453,lastUpdate:"2 min ago"},{id:"V002",name:"Truck 05",type:"Truck",driver:"Sarah Johnson",status:"active",location:"Highway I-95 North",speed:65,fuel:60,mileage:45678,lastUpdate:"1 min ago"},{id:"V003",name:"Service Car 12",type:"Sedan",driver:"Mike Chen",status:"idle",location:"Office Parking",speed:0,fuel:90,mileage:8234,lastUpdate:"15 min ago"},{id:"V004",name:"Delivery Van 03",type:"Van",driver:"Unassigned",status:"maintenance",location:"Service Center",speed:0,fuel:45,mileage:34567,lastUpdate:"1 hour ago"}],d=[{id:"D001",name:"John Smith",avatar:"JS",vehicle:"Delivery Van 01",status:"driving",rating:4.8,trips:234,hours:42,violations:0},{id:"D002",name:"Sarah Johnson",avatar:"SJ",vehicle:"Truck 05",status:"driving",rating:4.9,trips:189,hours:38,violations:1},{id:"D003",name:"Mike Chen",avatar:"MC",vehicle:"Service Car 12",status:"break",rating:4.7,trips:156,hours:35,violations:0},{id:"D004",name:"Emma Davis",avatar:"ED",vehicle:"Unassigned",status:"available",rating:4.6,trips:98,hours:28,violations:2}],h=f=>{switch(f){case"active":case"driving":return"bg-green-100 text-green-700";case"idle":case"available":return"bg-yellow-100 text-yellow-700";case"maintenance":case"break":return"bg-orange-100 text-orange-700";case"offline":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},m=f=>f>50?"text-green-600":f>25?"text-yellow-600":"text-red-600";return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-gray-900",children:"Fleet Management"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Monitor and manage your fleet"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{variant:"outline",size:"icon",children:n.jsx(Xb,{className:"w-4 h-4"})}),n.jsx(L,{variant:"outline",size:"icon",children:n.jsx(Rr,{className:"w-4 h-4"})}),n.jsxs(L,{size:"sm",children:[n.jsx(ja,{className:"w-4 h-4 mr-1"}),"Add Vehicle"]})]})]})}),n.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3 bg-white border-b",children:[n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[l.activeVehicles,"/",l.totalVehicles]}),n.jsx("div",{className:"text-sm text-gray-500",children:"Active Vehicles"})]}),n.jsx(A4,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[l.activeDrivers,"/",l.totalDrivers]}),n.jsx("div",{className:"text-sm text-gray-500",children:"Active Drivers"})]}),n.jsx(yu,{className:"w-8 h-8 text-green-500"})]})}),n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:l.avgFuelEfficiency}),n.jsx("div",{className:"text-sm text-gray-500",children:"Avg Efficiency"})]}),n.jsx(oi,{className:"w-8 h-8 text-yellow-500"})]})}),n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:l.alerts}),n.jsx("div",{className:"text-sm text-gray-500",children:"Active Alerts"})]}),n.jsx(Et,{className:"w-8 h-8 text-red-500"})]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs(An,{value:e,onValueChange:s,children:[n.jsx("div",{className:"bg-white border-b px-4",children:n.jsxs(_n,{className:"grid w-full grid-cols-4",children:[n.jsx(st,{value:"overview",children:"Overview"}),n.jsx(st,{value:"vehicles",children:"Vehicles"}),n.jsx(st,{value:"drivers",children:"Drivers"}),n.jsx(st,{value:"analytics",children:"Analytics"})]})}),n.jsxs(nt,{value:"overview",className:"p-4 space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Live Fleet Map"}),n.jsx("div",{className:"h-48 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(pt,{className:"w-12 h-12 text-blue-500 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"18 vehicles active"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Across 5 regions"})]})})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Active Alerts"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ir,{className:"border-red-200 bg-red-50",children:[n.jsx(Et,{className:"w-4 h-4 text-red-600"}),n.jsx(Lr,{className:"text-red-700",children:"Vehicle V004 - Maintenance overdue by 500 miles"})]}),n.jsxs(Ir,{className:"border-yellow-200 bg-yellow-50",children:[n.jsx(Et,{className:"w-4 h-4 text-yellow-600"}),n.jsx(Lr,{className:"text-yellow-700",children:"Driver D002 - Approaching weekly hour limit (38/40 hours)"})]}),n.jsxs(Ir,{className:"border-orange-200 bg-orange-50",children:[n.jsx(oi,{className:"w-4 h-4 text-orange-600"}),n.jsx(Lr,{className:"text-orange-700",children:"Vehicle V002 - Low fuel alert (15% remaining)"})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Today's Performance"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{children:"Deliveries Completed"}),n.jsx("span",{className:"font-medium",children:"42/50"})]}),n.jsx(Ks,{value:84,className:"h-2"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{children:"On-Time Rate"}),n.jsx("span",{className:"font-medium",children:"92%"})]}),n.jsx(Ks,{value:92,className:"h-2"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{children:"Fleet Utilization"}),n.jsx("span",{className:"font-medium",children:"75%"})]}),n.jsx(Ks,{value:75,className:"h-2"})]})]})]})]}),n.jsx(nt,{value:"vehicles",className:"p-4 space-y-3",children:c.map(f=>n.jsxs(ne,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a(f),children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-semibold",children:f.name}),n.jsx(Ie,{className:h(f.status),children:f.status})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",f.id,"  ",f.type]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Driver: ",f.driver]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"text-sm text-gray-500",children:f.lastUpdate})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Location"}),n.jsx("div",{className:"text-sm font-medium truncate",children:f.location})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Speed"}),n.jsxs("div",{className:"text-sm font-medium",children:[f.speed," mph"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500",children:"Mileage"}),n.jsxs("div",{className:"text-sm font-medium",children:[f.mileage.toLocaleString()," mi"]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[n.jsx("span",{className:"text-gray-500",children:"Fuel Level"}),n.jsxs("span",{className:`font-medium ${m(f.fuel)}`,children:[f.fuel,"%"]})]}),n.jsx(Ks,{value:f.fuel,className:"h-2"})]})]},f.id))}),n.jsx(nt,{value:"drivers",className:"p-4 space-y-3",children:d.map(f=>n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-medium",children:f.avatar}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:f.name}),n.jsx("p",{className:"text-sm text-gray-500",children:f.vehicle!=="Unassigned"?f.vehicle:"No vehicle assigned"})]})]}),n.jsx(Ie,{className:h(f.status),children:f.status})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-semibold",children:f.rating}),n.jsx("div",{className:"text-xs text-gray-500",children:"Rating"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-semibold",children:f.trips}),n.jsx("div",{className:"text-xs text-gray-500",children:"Trips"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-semibold",children:[f.hours,"h"]}),n.jsx("div",{className:"text-xs text-gray-500",children:"This Week"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${f.violations>0?"text-red-600":"text-green-600"}`,children:f.violations}),n.jsx("div",{className:"text-xs text-gray-500",children:"Violations"})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx(L,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),n.jsx(L,{variant:"outline",size:"sm",className:"flex-1",children:"Assign Vehicle"})]})]},f.id))}),n.jsxs(nt,{value:"analytics",className:"p-4 space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Cost Analysis (This Month)"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Fuel Costs"}),n.jsx("span",{className:"font-semibold",children:"$4,250"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Maintenance"}),n.jsx("span",{className:"font-semibold",children:"$1,890"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Insurance"}),n.jsx("span",{className:"font-semibold",children:"$2,100"})]}),n.jsx(XU,{}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Total Expenses"}),n.jsx("span",{className:"font-bold text-lg",children:"$8,240"})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Efficiency Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Avg Delivery Time"}),n.jsx("div",{className:"text-xl font-bold",children:"32 min"}),n.jsx("div",{className:"text-xs text-green-600",children:" 5% from last month"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Fuel Efficiency"}),n.jsx("div",{className:"text-xl font-bold",children:"28 mpg"}),n.jsx("div",{className:"text-xs text-green-600",children:" 3% from last month"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Vehicle Downtime"}),n.jsx("div",{className:"text-xl font-bold",children:"4.2%"}),n.jsx("div",{className:"text-xs text-red-600",children:" 1% from last month"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Route Optimization"}),n.jsx("div",{className:"text-xl font-bold",children:"87%"}),n.jsx("div",{className:"text-xs text-green-600",children:" 8% from last month"})]})]})]}),n.jsx(ne,{className:"p-4 bg-green-50 border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-green-900",children:"Revenue Impact"}),n.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:"+$12,450"}),n.jsx("p",{className:"text-sm text-green-600",children:"Saved through optimization"})]}),n.jsx(Pn,{className:"w-12 h-12 text-green-500"})]})})]})]})})]})}function XU(){return n.jsx("div",{className:"h-px bg-gray-200 my-3"})}function eV({onBack:t}){const[e,s]=x.useState(null),[r,a]=x.useState("overview"),l=[{method:"GET",path:"/api/v1/routes",description:"Get optimal route between two points",category:"Navigation",auth:!0,rate_limit:"1000/hour"},{method:"POST",path:"/api/v1/routes/calculate",description:"Calculate route with custom preferences",category:"Navigation",auth:!0,rate_limit:"500/hour"},{method:"GET",path:"/api/v1/traffic",description:"Get real-time traffic information",category:"Traffic",auth:!0,rate_limit:"2000/hour"},{method:"GET",path:"/api/v1/places/search",description:"Search for places and points of interest",category:"Places",auth:!0,rate_limit:"1500/hour"},{method:"GET",path:"/api/v1/geocode",description:"Convert addresses to coordinates",category:"Geocoding",auth:!0,rate_limit:"1000/hour"},{method:"GET",path:"/api/v1/fleet/vehicles",description:"Get fleet vehicle information",category:"Fleet",auth:!0,rate_limit:"500/hour"},{method:"POST",path:"/api/v1/fleet/track",description:"Update vehicle location and status",category:"Fleet",auth:!0,rate_limit:"5000/hour"}],c={javascript:`// PathFinder Pro API Example
const pathfinder = require('@pathfinderpro/api');

// Initialize client
const client = new pathfinder.Client({
  apiKey: 'your-api-key',
  baseUrl: 'https://api.pathfinderpro.com/v1'
});

// Get route
async function getRoute() {
  try {
    const route = await client.routes.calculate({
      origin: '37.7749,-122.4194',
      destination: '37.7849,-122.4094',
      mode: 'driving',
      optimize: 'time'
    });
    
    // Route data available in route object
    // route.distance, route.duration, route.steps
  } catch (error) {
    console.error('Error:', error.message);
  }
}

getRoute();`,python:`# PathFinder Pro API Example
import pathfinderpro

# Initialize client
client = pathfinderpro.Client(
    api_key='your-api-key',
    base_url='https://api.pathfinderpro.com/v1'
)

# Get route
def get_route():
    try:
        route = client.routes.calculate(
            origin='37.7749,-122.4194',
            destination='37.7849,-122.4094',
            mode='driving',
            optimize='time'
        )
        
        print(f'Route distance: {route.distance}')
        print(f'Estimated time: {route.duration}')
        print(f'Steps: {route.steps}')
    except pathfinderpro.APIError as e:
        print(f'Error: {e.message}')

get_route()`,curl:`# PathFinder Pro API Example
curl -X POST https://api.pathfinderpro.com/v1/routes/calculate \\
  -H "Authorization: Bearer your-api-key" \\
  -H "Content-Type: application/json" \\
  -d '{
    "origin": "37.7749,-122.4194",
    "destination": "37.7849,-122.4094",
    "mode": "driving",
    "optimize": "time"
  }'`},d=(m,f)=>{navigator.clipboard.writeText(m),s(f),setTimeout(()=>s(null),2e3)},h=m=>{switch(m){case"GET":return"bg-green-100 text-green-700";case"POST":return"bg-blue-100 text-blue-700";case"PUT":return"bg-yellow-100 text-yellow-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"flex-shrink-0 bg-gradient-to-r from-blue-600 to-purple-600 px-4 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3 text-white mb-4",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold",children:"API Documentation"}),n.jsx("p",{className:"text-sm opacity-90",children:"PathFinder Pro Developer Portal"})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsx(ne,{className:"bg-white/10 backdrop-blur border-white/20 text-white p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dl,{className:"w-5 h-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:"v1.2.0"}),n.jsx("div",{className:"text-xs opacity-90",children:"API Version"})]})]})}),n.jsx(ne,{className:"bg-white/10 backdrop-blur border-white/20 text-white p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(po,{className:"w-5 h-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:"99.9%"}),n.jsx("div",{className:"text-xs opacity-90",children:"Uptime"})]})]})}),n.jsx(ne,{className:"bg-white/10 backdrop-blur border-white/20 text-white p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lr,{className:"w-5 h-5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-bold",children:"256-bit"}),n.jsx("div",{className:"text-xs opacity-90",children:"SSL Encryption"})]})]})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs(An,{value:r,onValueChange:a,children:[n.jsx("div",{className:"bg-white border-b px-4",children:n.jsxs(_n,{className:"grid w-full grid-cols-4",children:[n.jsx(st,{value:"overview",children:"Overview"}),n.jsx(st,{value:"endpoints",children:"Endpoints"}),n.jsx(st,{value:"examples",children:"Examples"}),n.jsx(st,{value:"auth",children:"Authentication"})]})}),n.jsxs(nt,{value:"overview",className:"p-4 space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Qy,{className:"w-5 h-5 text-green-500"}),"Quick Start"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs font-bold text-blue-600",children:"1"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Get API Key"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Sign up for a developer account and generate your API key"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs font-bold text-blue-600",children:"2"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Install SDK"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Choose from our JavaScript, Python, or REST API options"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center text-xs font-bold text-blue-600",children:"3"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Make Your First Call"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Start with our route calculation endpoint"})]})]})]}),n.jsxs(L,{className:"mt-4",children:[n.jsx(Qb,{className:"w-4 h-4 mr-2"}),"Get Started"]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Key Features"}),n.jsx("div",{className:"grid grid-cols-1 gap-3",children:[{icon:"",title:"Route Optimization",desc:"Multi-modal route planning with real-time traffic"},{icon:"",title:"Place Search",desc:"Comprehensive POI and address lookup"},{icon:"",title:"Fleet Management",desc:"Track and manage vehicle fleets"},{icon:"",title:"Real-time Data",desc:"Live traffic, incidents, and conditions"},{icon:"",title:"Enterprise Security",desc:"SOC 2 compliant with rate limiting"},{icon:"",title:"Analytics",desc:"Detailed usage metrics and reporting"}].map((m,f)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl",children:m.icon}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:m.title}),n.jsx("div",{className:"text-sm text-gray-600",children:m.desc})]})]},f))})]}),n.jsxs(Ir,{children:[n.jsx(lr,{className:"w-4 h-4"}),n.jsxs(Lr,{children:[n.jsx("strong",{children:"Rate Limits:"})," All endpoints have rate limits to ensure fair usage. Enterprise plans include higher limits and priority support."]})]})]}),n.jsx(nt,{value:"endpoints",className:"p-4 space-y-3",children:l.map((m,f)=>n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ie,{className:h(m.method),children:m.method}),n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:m.path})]}),n.jsx(Ie,{variant:"outline",children:m.category})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[m.auth?n.jsx(lr,{className:"w-3 h-3"}):n.jsx(Dl,{className:"w-3 h-3"}),m.auth?"Auth Required":"Public"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(po,{className:"w-3 h-3"}),m.rate_limit]})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(lE,{className:"w-3 h-3 mr-1"}),"View Docs"]}),n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(Qy,{className:"w-3 h-3 mr-1"}),"Try It"]})]})]},f))}),n.jsxs(nt,{value:"examples",className:"p-4 space-y-4",children:[Object.entries(c).map(([m,f])=>n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-semibold capitalize flex items-center gap-2",children:[n.jsx(DE,{className:"w-4 h-4"}),m]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>d(f,m),children:[e===m?n.jsx(ai,{className:"w-3 h-3 mr-1 text-green-500"}):n.jsx(Jb,{className:"w-3 h-3 mr-1"}),e===m?"Copied!":"Copy"]})]}),n.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:n.jsx("code",{children:f})})]},m)),n.jsxs(ne,{className:"p-4 bg-blue-50 border-blue-200",children:[n.jsx("h4",{className:"font-semibold mb-3",children:"SDK Downloads"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{name:"JavaScript SDK",version:"v2.1.0",downloads:"45K"},{name:"Python SDK",version:"v1.8.2",downloads:"32K"},{name:"Java SDK",version:"v1.5.1",downloads:"28K"}].map((m,f)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:m.name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[m.version,"  ",m.downloads," downloads"]})]}),n.jsxs(L,{size:"sm",children:[n.jsx(Rr,{className:"w-3 h-3 mr-1"}),"Download"]})]},f))})]})]}),n.jsxs(nt,{value:"auth",className:"p-4 space-y-4",children:[n.jsxs(ne,{className:"p-4",children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx(hP,{className:"w-5 h-5 text-yellow-500"}),"API Key Authentication"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"All API requests require authentication using your API key. Include it in the Authorization header:"}),n.jsx("div",{className:"bg-gray-100 p-3 rounded-lg font-mono text-sm",children:"Authorization: Bearer your-api-key-here"}),n.jsxs(Ir,{children:[n.jsx(lr,{className:"w-4 h-4"}),n.jsx(Lr,{children:"Keep your API key secure and never expose it in client-side code. Use environment variables or secure key management systems."})]})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Rate Limiting"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"API requests are rate-limited per API key. Limits depend on your plan:"}),n.jsx("div",{className:"space-y-2",children:[{plan:"Free",limit:"1,000 requests/day",price:"$0"},{plan:"Pro",limit:"50,000 requests/day",price:"$99/month"},{plan:"Enterprise",limit:"Custom limits",price:"Contact us"}].map((m,f)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:m.plan}),n.jsx("div",{className:"text-sm text-gray-600",children:m.limit})]}),n.jsx("div",{className:"font-semibold",children:m.price})]},f))})]})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Error Handling"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"The API uses standard HTTP status codes and returns detailed error messages:"}),n.jsx("div",{className:"space-y-2",children:[{code:"400",message:"Bad Request - Invalid parameters"},{code:"401",message:"Unauthorized - Invalid API key"},{code:"429",message:"Rate limit exceeded"},{code:"500",message:"Internal server error"}].map((m,f)=>n.jsxs("div",{className:"flex gap-3 p-2 text-sm",children:[n.jsx(Ie,{variant:"outline",className:"font-mono",children:m.code}),n.jsx("span",{className:"text-gray-600",children:m.message})]},f))})]})]})]})]})})]})}function tV({onRouteCalculated:t,onBack:e}){const[s,r]=x.useState([{id:"1",location:null,stopDuration:0},{id:"2",location:null,stopDuration:0}]),[a,l]=x.useState({optimize:"time",avoidTolls:!1,avoidHighways:!1,departureTime:"",isRoundTrip:!1,vehicleCapacity:1e3,maxDrivingTime:480,considerTraffic:!0,prioritizeHighPriority:!0}),[c,d]=x.useState(null),[h,m]=x.useState(!1),[f,p]=x.useState([]),[y,N]=x.useState(!1),[w,j]=x.useState({}),S=async($,G)=>{if($.length<2){p([]);return}N(!0);try{const me=(await Kt.searchPlaces({query:$,limit:8})).map(ye=>({id:ye.place_id||Date.now().toString(),name:ye.name||ye.formatted_address,address:ye.formatted_address||ye.vicinity,lat:ye.geometry?.location?.lat()||0,lng:ye.geometry?.location?.lng()||0}));p(me)}catch{p([])}finally{N(!1)}};x.useEffect(()=>{const $={};return Object.entries(w).forEach(([G,X])=>{$[G]&&clearTimeout($[G]),$[G]=setTimeout(()=>{S(X)},300)}),()=>{Object.values($).forEach(G=>clearTimeout(G))}},[w]);const T=()=>{s.length<10&&r([...s,{id:Date.now().toString(),location:null,stopDuration:0}])},R=$=>{s.length>2&&r(s.filter(G=>G.id!==$))},A=($,G)=>{r(s.map(X=>X.id===$?{...X,location:G}:X))},k=($,G)=>{r(s.map(X=>X.id===$?{...X,stopDuration:G}:X))},P=($,G)=>{const X=s.findIndex(me=>me.id===$);if(G==="up"&&X>0||G==="down"&&X<s.length-1){const me=[...s],ye=G==="up"?X-1:X+1;[me[X],me[ye]]=[me[ye],me[X]],r(me)}},F=async()=>{const $=s.filter(G=>G.location);if(!($.length<2)){m(!0);try{let G=$;$.length>2&&a.optimize!=="none"&&(G=await W($));const X=await B(G);d({id:Date.now().toString(),stops:X.stops,totalDistance:X.totalDistance,totalTime:X.totalTime,estimatedFuel:X.estimatedFuel,co2Emissions:X.co2Emissions,routeOptions:a,geometry:X.geometry})}catch(G){console.error("Route optimization failed:",G);const X=await V($);d(X)}finally{m(!1)}}},W=async $=>{if($.length<=2)return $;try{const G=$.map((Ae,U)=>({id:Ae.id,name:Ae.location?.name||`Stop ${U+1}`,lat:Ae.location.lat,lng:Ae.location.lng,timeWindow:Ae.timeWindow?{earliestArrival:z(Ae.timeWindow.earliest),latestDeparture:z(Ae.timeWindow.latest)}:void 0,serviceTime:Ae.stopDuration,priority:Ae.priority==="critical"?10:Ae.priority==="high"?7:Ae.priority==="medium"?5:2,vehicleCapacityRequired:Ae.deliverySize||0})),X={maxTime:a.maxDrivingTime,vehicleCapacity:a.vehicleCapacity,timeWindows:oe($),startLocation:a.isRoundTrip?G[0]:void 0,endLocation:a.isRoundTrip?G[0]:G[G.length-1],avoidTolls:a.avoidTolls,avoidHighways:a.avoidHighways},me={algorithm:$.length<=8?"hybrid":"simulated_annealing",maxIterations:$.length<=10?1e3:500,timeLimit:30,populationSize:Math.min(50,$.length*10)};return(await tspSolverService.solveTSP(G,X,me)).route.map(Ae=>$.find(U=>U.id===Ae.id))}catch(G){return console.warn("Advanced TSP optimization failed, using fallback:",G),await q($)}},z=$=>{const[G,X]=$.split(":").map(Number);return G*60+X},oe=$=>$.some(G=>G.stopDuration&&G.stopDuration>0),q=async $=>{const G=$.map(X=>({lat:X.location.lat,lng:X.location.lng}));try{const X=await ORSDirectionsService.getMatrix(G,"driving-car");return K(X.distances,a.isRoundTrip).map(ye=>$[ye])}catch{return $}},J=($,G)=>{const X=$.length;if(X<=2)return Array.from({length:X},(Ae,U)=>U);const me=new Set,ye=[0];me.add(0);let je=0;for(;me.size<(G?X:X-1);){let Ae=-1,U=1/0;const Te=G?X:X-1;for(let Se=1;Se<Te;Se++)!me.has(Se)&&$[je][Se]<U&&(U=$[je][Se],Ae=Se);if(Ae!==-1)ye.push(Ae),me.add(Ae),je=Ae;else break}return!G&&ye[ye.length-1]!==X-1&&ye.push(X-1),ye},K=($,G)=>J($,G),B=async $=>{const G=[];let X=0,me=0;for(let je=0;je<$.length-1;je++)try{const Ae={lat:$[je].location.lat,lng:$[je].location.lng},U={lat:$[je+1].location.lat,lng:$[je+1].location.lng},Te=await tu.getRouteWithORS(Ae,U,"driving",{avoidTolls:a.avoidTolls,avoidHighways:a.avoidHighways});G.push(Te);const Se=parseFloat(Te.distance.replace(/[^0-9.]/g,"")),We=parseFloat(Te.duration.replace(/[^0-9.]/g,""));X+=Se*1e3,me+=We*60}catch{const U=re($[je].location.lat,$[je].location.lng,$[je+1].location.lat,$[je+1].location.lng);X+=U,me+=U/1e3*120}const ye=$.reduce((je,Ae)=>je+(Ae.stopDuration||0),0)*60;return me+=ye,{stops:$.map((je,Ae)=>({order:Ae+1,location:je.location,arrivalTime:E(Ae,me,$.length),stopDuration:je.stopDuration,distanceToNext:Ae<$.length-1?M(G[Ae]?.distance||"0 km"):null})),totalDistance:M(`${(X/1e3).toFixed(1)} km`),totalTime:D(me),estimatedFuel:Y(X),co2Emissions:Q(X),geometry:G.map(je=>je.geometry).filter(Boolean)}},V=async $=>{let G=0;for(let me=0;me<$.length-1;me++){const ye=re($[me].location.lat,$[me].location.lng,$[me+1].location.lat,$[me+1].location.lng);G+=ye}const X=G/1e3*2+$.reduce((me,ye)=>me+(ye.stopDuration||0),0);return{id:Date.now().toString(),stops:$.map((me,ye)=>({order:ye+1,location:me.location,arrivalTime:`${9+Math.floor(ye*.5)}:${ye*15%60}0 AM`,stopDuration:me.stopDuration,distanceToNext:ye<$.length-1?`${(G/$.length/1e3).toFixed(1)} km`:null})),totalDistance:`${(G/1e3).toFixed(1)} km`,totalTime:`${Math.round(X)} min`,estimatedFuel:Y(G),co2Emissions:Q(G),routeOptions:a}},re=($,G,X,me)=>{const je=(X-$)*Math.PI/180,Ae=(me-G)*Math.PI/180,U=Math.sin(je/2)*Math.sin(je/2)+Math.cos($*Math.PI/180)*Math.cos(X*Math.PI/180)*Math.sin(Ae/2)*Math.sin(Ae/2);return 6371e3*(2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U)))},M=$=>$.replace("km"," km").replace("mi"," mi"),D=$=>{const G=Math.floor($/3600),X=Math.floor($%3600/60);return G>0?`${G}h ${X}m`:`${X}m`},E=($,G,X)=>{const me=G/X,ye=$*me,je=new Date;return je.setHours(9,0,0,0),je.setSeconds(je.getSeconds()+ye),je.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Y=$=>`$${($/1e3/8*1.5).toFixed(2)}`,Q=$=>`${($/1e3*.2).toFixed(1)}kg`,I=()=>{c&&t(c)},[te,se]=x.useState(!1),[fe,ve]=x.useState(""),Pe=async()=>{if(c){se(!0);try{const $=JSON.parse(localStorage.getItem("savedRoutes")||"[]");$.push({...c,name:`Multi-Stop Route - ${new Date().toLocaleDateString()}`,createdAt:new Date().toISOString()}),localStorage.setItem("savedRoutes",JSON.stringify($)),ve("Route saved successfully!"),setTimeout(()=>ve(""),3e3)}catch{ve("Failed to save route"),setTimeout(()=>ve(""),3e3)}finally{se(!1)}}};return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 bg-white px-4 py-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(ys,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold",children:"Multi-Stop Route"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Plan up to 10 stops"})]})]}),n.jsxs(Ie,{variant:"outline",children:[s.length,"/10 stops"]})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs(ne,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold",children:"Route Stops"}),n.jsxs(L,{size:"sm",onClick:T,disabled:s.length>=10,className:"text-xs",children:[n.jsx(ja,{className:"w-3 h-3 mr-1"}),"Add Stop"]})]}),n.jsx("div",{className:"space-y-3",children:s.map(($,G)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-medium ${G===0?"bg-green-500":G===s.length-1?"bg-red-500":"bg-blue-500"}`,children:G===0?"A":G===s.length-1?"B":G+1}),G<s.length-1&&n.jsx("div",{className:"w-0.5 h-4 bg-gray-300 mt-1"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ft,{placeholder:`Stop ${G+1} destination`,value:w[$.id]||$.location?.name||"",onChange:X=>{const me=X.target.value;j(ye=>({...ye,[$.id]:me})),me||A($.id,null)}}),w[$.id]&&f.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-48 overflow-y-auto",children:f.map(X=>n.jsxs("div",{className:"p-2 hover:bg-gray-50 cursor-pointer text-sm",onClick:()=>{A($.id,X),j(me=>({...me,[$.id]:X.name})),p([])},children:[n.jsx("div",{className:"font-medium",children:X.name}),n.jsx("div",{className:"text-gray-500 text-xs",children:X.address})]},X.id))})]}),$.location&&G>0&&G<s.length-1&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:"text-xs text-gray-500",children:"Stop for:"}),n.jsx(Ft,{type:"number",value:$.stopDuration,onChange:X=>k($.id,parseInt(X.target.value)||0),className:"w-16 h-6 text-xs",min:"0",max:"480"}),n.jsx("span",{className:"text-xs text-gray-500",children:"min"})]})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(L,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:()=>P($.id,"up"),disabled:G===0,children:n.jsx(tE,{className:"w-3 h-3"})}),n.jsx(L,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:()=>P($.id,"down"),disabled:G===s.length-1,children:n.jsx(JT,{className:"w-3 h-3"})}),s.length>2&&n.jsx(L,{variant:"ghost",size:"icon",className:"w-6 h-6 text-red-500",onClick:()=>R($.id),children:n.jsx(ys,{className:"w-3 h-3"})})]})]},$.id))})]}),n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Route Options"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Optimize for"}),n.jsxs(ya,{value:a.optimize,onValueChange:$=>l(G=>({...G,optimize:$})),children:[n.jsx(wa,{children:n.jsx(va,{})}),n.jsxs(ba,{children:[n.jsx(vt,{value:"time",children:"Fastest Time"}),n.jsx(vt,{value:"distance",children:"Shortest Distance"}),n.jsx(vt,{value:"fuel",children:"Fuel Efficiency"})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Avoid tolls"}),n.jsx(lt,{checked:a.avoidTolls,onCheckedChange:$=>l(G=>({...G,avoidTolls:$}))})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Avoid highways"}),n.jsx(lt,{checked:a.avoidHighways,onCheckedChange:$=>l(G=>({...G,avoidHighways:$}))})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Round trip"}),n.jsx(lt,{checked:a.isRoundTrip,onCheckedChange:$=>l(G=>({...G,isRoundTrip:$}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Departure time (optional)"}),n.jsx(Ft,{type:"datetime-local",value:a.departureTime,onChange:$=>l(G=>({...G,departureTime:$.target.value}))})]})]})]}),n.jsx(L,{onClick:F,disabled:h||s.filter($=>$.location).length<2,className:"w-full",size:"lg",children:h?n.jsx(n.Fragment,{children:"Calculating..."}):n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"w-4 h-4 mr-2"}),"Calculate Route"]})}),c&&n.jsxs(ne,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Route Summary"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-blue-600",children:c.totalDistance}),n.jsx("div",{className:"text-xs text-gray-500",children:"Distance"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-green-600",children:c.totalTime}),n.jsx("div",{className:"text-xs text-gray-500",children:"Time"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-purple-600",children:c.estimatedFuel}),n.jsx("div",{className:"text-xs text-gray-500",children:"Est. Fuel"})]})]}),n.jsxs("div",{className:"flex items-center justify-center mb-4 text-sm text-gray-600",children:[n.jsx(qd,{className:"w-4 h-4 mr-1 text-green-500"}),"CO2 emissions: ",c.co2Emissions]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(L,{onClick:I,className:"flex-1",children:[n.jsx(rt,{className:"w-4 h-4 mr-2"}),"Start Navigation"]}),n.jsxs(L,{variant:"outline",onClick:Pe,disabled:te,children:[n.jsx(n1,{className:"w-4 h-4"}),te&&n.jsx("span",{className:"ml-1 text-xs",children:"Saving..."})]}),n.jsx(L,{variant:"outline",children:n.jsx(r1,{className:"w-4 h-4"})})]}),fe&&n.jsx("div",{className:`text-center text-sm mt-2 ${fe.includes("successfully")?"text-green-600":"text-red-600"}`,children:fe})]})]})})]})}const sV="AIzaSyCr3z9_rT0EdprALkAz-oi--XlqqUY0vQk",nV={DEFAULT:1e4,DIRECTIONS:15e3,PLACES:8e3,GEOCODING:5e3};class rV{db=null;downloadQueue=new Map;isDownloading=!1;currentDownload=null;googleMapsLoadPromise=null;constructor(){this.initializeDB(),this.validateAPIKey()}async waitForGoogleMaps(){try{const{googleMapsLoader:e}=await Wb(async()=>{const{googleMapsLoader:s}=await Promise.resolve().then(()=>o3);return{googleMapsLoader:s}},void 0);return await e.waitForGoogleMaps()}catch(e){return C.error("Google Maps API not available:",e),!1}}validateAPIKey(){}async initializeDB(){return new Promise((e,s)=>{const r=indexedDB.open("OfflineMapsDB",3);r.onerror=()=>{C.error("Failed to open offline maps database"),s(r.error)},r.onsuccess=()=>{this.db=r.result,C.info("Offline maps database initialized"),e()},r.onupgradeneeded=a=>{const l=a.target.result;if(!l.objectStoreNames.contains("mapTiles")){const c=l.createObjectStore("mapTiles",{keyPath:"id"});c.createIndex("cityId","cityId",{unique:!1}),c.createIndex("zoomLevel","zoomLevel",{unique:!1})}if(l.objectStoreNames.contains("offlineMaps")||l.createObjectStore("offlineMaps",{keyPath:"id"}).createIndex("cityId","cityId",{unique:!0}),!l.objectStoreNames.contains("cities")){const c=l.createObjectStore("cities",{keyPath:"id"});c.createIndex("name","name",{unique:!1}),c.createIndex("country","country",{unique:!1})}l.objectStoreNames.contains("preferences")||l.createObjectStore("preferences",{keyPath:"key"})}})}async detectUserCity(){try{const e=await this.getCurrentPosition(),{latitude:s,longitude:r}=e.coords;C.info("Got user coordinates:",{lat:s,lng:r});const a=await this.geocodeLocation(s,r);return a?(await this.saveCityInfo(a),C.info("User city detected:",a.name,a.country),ue.success(`Detected your location: ${a.name}, ${a.country}`),a):(ue.error("Could not determine your city. Please select a city manually."),null)}catch(e){return C.error("Failed to detect user city:",e),ue.error("Could not access your location. Please select a city manually."),null}}async searchCities(e){if(!e||e.trim().length<2)return[];try{if(!await this.waitForGoogleMaps())throw new Error("Google Maps Places API not loaded");const r=document.createElement("div"),a=new google.maps.places.PlacesService(r),l={query:`${e.trim()} city`,fields:["place_id","name","formatted_address","geometry"],locationBias:{radius:5e7,center:new google.maps.LatLng(0,0)}};C.info("Searching cities with Google Places API:",{query:l.query});const c=await new Promise((h,m)=>{a.textSearch(l,(f,p)=>{C.info("Places API response:",{status:p,resultCount:f?.length||0}),p===google.maps.places.PlacesServiceStatus.OK&&f?h(f):p===google.maps.places.PlacesServiceStatus.ZERO_RESULTS?(C.warn("No cities found for query:",e),h([])):(C.error("Places API error:",p),m(new Error(`Places API returned status: ${p}`)))})});if(c.length===0)return C.info("No cities found for query:",e),[];const d=c.slice(0,10).map(h=>{const{geometry:m,name:f,formatted_address:p,place_id:y}=h;if(!m||!m.location||!m.viewport)return C.warn("Invalid geometry data for place:",h),null;const N=(p||"").split(", "),w=N[N.length-1]||"Unknown";return{id:y||`place-${Date.now()}-${Math.random()}`,name:f||"Unknown City",country:w,bounds:{north:m.viewport.getNorthEast().lat(),south:m.viewport.getSouthWest().lat(),east:m.viewport.getNorthEast().lng(),west:m.viewport.getSouthWest().lng()},center:{lat:m.location.lat(),lng:m.location.lng()}}}).filter(Boolean);C.info("Successfully converted places to cities:",{count:d.length});for(const h of d)await this.saveCityInfo(h);return d}catch(s){return C.error("Error searching cities:",s),s.message?.includes("Google Maps")||s.message?.includes("not loaded")?ue.error("Google Maps is still loading. Please try again in a moment."):ue.error("Failed to search cities. Please try again."),[]}}async getPopularCities(){try{const e=await this.getCachedPopularCities();if(e.length>0)return C.info("Using cached popular cities",{count:e.length}),e;const s=["New York, USA","London, UK","Paris, France","Tokyo, Japan","San Francisco, USA","Los Angeles, USA","Chicago, USA","Berlin, Germany","Sydney, Australia","Toronto, Canada","Madrid, Spain","Rome, Italy","Amsterdam, Netherlands","Vienna, Austria","Stockholm, Sweden","Dubai, UAE","Singapore","Hong Kong","Mumbai, India","Bangkok, Thailand","Mexico City, Mexico","So Paulo, Brazil","Buenos Aires, Argentina","Cairo, Egypt","Lagos, Nigeria"],r=[];for(let a=0;a<Math.min(s.length,15);a++)try{const l=s[a],c=await this.searchCities(l.split(",")[0]);if(c.length>0){const d=c.find(h=>h.name.toLowerCase().includes(l.split(",")[0].toLowerCase())||h.country.toLowerCase().includes(l.split(",")[1]?.trim().toLowerCase()||""))||c[0];r.push(d)}a<s.length-1&&await new Promise(d=>setTimeout(d,200))}catch(l){C.warn(`Failed to fetch data for ${s[a]}:`,l)}return r.length===0?(C.warn("Google Places API failed, using fallback city data"),this.getFallbackPopularCities()):(await this.cachePopularCities(r),C.info("Fetched popular cities from Google Places API",{count:r.length}),r)}catch(e){return C.error("Failed to get popular cities:",e),this.getFallbackPopularCities()}}async getCachedPopularCities(){this.db||await this.initializeDB();try{const r=this.db.transaction(["preferences"],"readonly").objectStore("preferences").get("popularCities");return new Promise(a=>{r.onsuccess=()=>{const l=r.result;if(l&&l.data&&l.timestamp){const c=Date.now()-l.timestamp,d=1440*60*1e3;if(c<d){a(l.data);return}}a([])},r.onerror=()=>a([])})}catch(e){return C.error("Failed to get cached cities:",e),[]}}async cachePopularCities(e){this.db||await this.initializeDB();try{this.db.transaction(["preferences"],"readwrite").objectStore("preferences").put({key:"popularCities",data:e,timestamp:Date.now()});for(const a of e)await this.saveCityInfo(a)}catch(s){C.error("Failed to cache popular cities:",s)}}getFallbackPopularCities(){return[{id:"new-york-us",name:"New York City",country:"United States",bounds:{north:40.9176,south:40.4774,east:-73.7004,west:-74.2591},center:{lat:40.7128,lng:-74.006},population:8336817},{id:"london-uk",name:"London",country:"United Kingdom",bounds:{north:51.6723,south:51.2868,east:.334,west:-.5103},center:{lat:51.5074,lng:-.1278},population:9648110},{id:"paris-fr",name:"Paris",country:"France",bounds:{north:48.9021,south:48.8155,east:2.4699,west:2.2241},center:{lat:48.8566,lng:2.3522},population:2175601},{id:"tokyo-jp",name:"Tokyo",country:"Japan",bounds:{north:35.8983,south:35.4969,east:139.9295,west:139.5694},center:{lat:35.6762,lng:139.6503},population:14094034},{id:"san-francisco-us",name:"San Francisco",country:"United States",bounds:{north:37.8324,south:37.7081,east:-122.3482,west:-122.515},center:{lat:37.7749,lng:-122.4194},population:873965}]}async downloadCityMaps(e,s={}){const r=await this.getCityInfo(e);if(!r)throw new Error(`City with ID ${e} not found`);if(this.downloadQueue.has(e)){ue.info("Download already in progress for this city");return}const a=s.zoomLevels||[10,11,12,13,14,15,16],l=s.mapTypes||["roadmap"],c={cityId:e,cityName:r.name,totalTiles:0,downloadedTiles:0,failedTiles:0,progress:0,status:"preparing",estimatedSize:0,downloadedSize:0,startTime:Date.now()};this.downloadQueue.set(e,c);try{if(c.totalTiles=this.calculateTotalTiles(r.bounds,a),c.estimatedSize=c.totalTiles*15e3,C.info(`Starting download for ${r.name}:`,{totalTiles:c.totalTiles,estimatedSize:`${(c.estimatedSize/(1024*1024)).toFixed(1)}MB`}),s.onProgress&&s.onProgress(c),c.status="downloading",await this.downloadTilesForCity(r,a,l,c,s.onProgress),c.status!=="cancelled"){c.status="completed",c.progress=100;const d={id:`${e}-${Date.now()}`,cityId:e,cityName:r.name,bounds:r.bounds,zoomLevels:a,downloadDate:new Date().toISOString(),lastUsed:new Date().toISOString(),tileCount:c.downloadedTiles,sizeBytes:c.downloadedSize,version:"1.0"};await this.saveOfflineMapData(d),C.info(`Download completed for ${r.name}`),ue.success(`${r.name} maps downloaded successfully!`)}s.onProgress&&s.onProgress(c)}catch(d){C.error("Failed to download city maps:",d),c.status="failed",ue.error(`Failed to download maps for ${r.name}`)}finally{this.downloadQueue.delete(e)}}async cancelDownload(e){const s=this.downloadQueue.get(e);s&&(s.status="cancelled",C.info(`Download cancelled for ${s.cityName}`),ue.info(`Download cancelled for ${s.cityName}`))}async getOfflineMaps(){return this.db||await this.initializeDB(),new Promise((e,s)=>{const l=this.db.transaction(["offlineMaps"],"readonly").objectStore("offlineMaps").getAll();l.onsuccess=()=>e(l.result||[]),l.onerror=()=>s(l.error)})}async deleteOfflineMap(e){this.db||await this.initializeDB();const s=this.db.transaction(["offlineMaps","mapTiles"],"readwrite"),l=s.objectStore("mapTiles").index("cityId").openCursor(IDBKeyRange.only(e));return l.onsuccess=h=>{const m=h.target.result;m&&(m.delete(),m.continue())},s.objectStore("offlineMaps").index("cityId").delete(e),new Promise((h,m)=>{s.oncomplete=()=>{C.info(`Offline map deleted for city: ${e}`),ue.success("Offline map deleted successfully"),h()},s.onerror=()=>m(s.error)})}async getCityDetails(e,s){return this.geocodeLocation(e,s)}async getCityByPlaceId(e){try{const s=`https://maps.googleapis.com/maps/api/place/details/json?place_id=${e}&fields=name,geometry,formatted_address,place_id&key=${sV}`,r=await fetch(s,{signal:AbortSignal.timeout(nV.PLACES)});if(!r.ok)throw new Error(`Place Details API returned status: ${r.status}`);const a=await r.json();if(a.status!=="OK"||!a.result)return C.warn("Place Details API returned no results",{status:a.status}),null;const l=a.result,{geometry:c,name:d,formatted_address:h}=l,{location:m,viewport:f}=c,p=h.split(", "),y=p[p.length-1]||"Unknown",N={id:e,name:d,country:y,bounds:{north:f.northeast.lat,south:f.southwest.lat,east:f.northeast.lng,west:f.southwest.lng},center:{lat:m.lat,lng:m.lng}};return await this.saveCityInfo(N),N}catch(s){return C.error("Error getting city details:",s),null}}async hasOfflineMap(e){return this.db||await this.initializeDB(),new Promise((s,r)=>{const d=this.db.transaction(["offlineMaps"],"readonly").objectStore("offlineMaps").index("cityId").count(e);d.onsuccess=()=>s(d.result>0),d.onerror=()=>r(d.error)})}async getCurrentPosition(){return new Promise((e,s)=>{if(!navigator.geolocation){s(new Error("Geolocation is not supported"));return}navigator.geolocation.getCurrentPosition(e,s,{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4})})}async geocodeLocation(e,s){try{if(!await this.waitForGoogleMaps())throw new Error("Google Maps API not loaded");const a=new google.maps.Geocoder,l={location:{lat:e,lng:s},resultTypes:["locality","administrative_area_level_1","country"]};C.info("Geocoding location:",{lat:e,lng:s});const c=await new Promise((S,T)=>{a.geocode(l,(R,A)=>{C.info("Geocoding response:",{status:A,resultCount:R?.length||0}),A===google.maps.GeocoderStatus.OK&&R&&R.length>0?S(R):A===google.maps.GeocoderStatus.ZERO_RESULTS?(C.warn("No geocoding results found for location:",{lat:e,lng:s}),S([])):(C.error("Geocoding error:",A),T(new Error(`Geocoding failed: ${A}`)))})});if(c.length===0)return C.warn("No city found for coordinates:",{lat:e,lng:s}),null;const d=c.find(S=>S.types.includes("locality"))||c[0];if(!d)return C.warn("No suitable geocoding result found"),null;const m=d.address_components?.find(S=>S.types.includes("locality"))?.long_name||d.address_components?.[0]?.long_name||"Unknown City",f=d.address_components?.find(S=>S.types.includes("country")),p=f?.long_name||"Unknown Country",y=f?.short_name||"unknown",N=d.geometry?.viewport;let w;N?w={north:N.getNorthEast().lat(),south:N.getSouthWest().lat(),east:N.getNorthEast().lng(),west:N.getSouthWest().lng()}:w={north:e+.05,south:e-.05,east:s+.05,west:s-.05};const j={id:`${m.toLowerCase().replace(/\s+/g,"-")}-${y.toLowerCase()}`,name:m,country:p,bounds:w,center:{lat:e,lng:s}};return C.info("Successfully geocoded location:",j),j}catch(r){C.error("Error geocoding location:",r),(r.message?.includes("Google Maps")||r.message?.includes("not loaded"))&&C.warn("Google Maps not loaded, using fallback geocoding");const a=this.getCityNameFromCoords(e,s);return{id:`city-${Math.round(e*100)}-${Math.round(s*100)}`,name:a,country:"Unknown (fallback)",bounds:{north:e+.05,south:e-.05,east:s+.05,west:s-.05},center:{lat:e,lng:s}}}}getCityNameFromCoords(e,s){return e>=40.4&&e<=41&&s>=-74.5&&s<=-73.5?"New York City":e>=51.2&&e<=51.7&&s>=-.6&&s<=.4?"London":e>=48.8&&e<=49&&s>=2.2&&s<=2.5?"Paris":e>=35.5&&e<=35.8&&s>=139.5&&s<=140?"Tokyo":e>=37.7&&e<=37.8&&s>=-122.6&&s<=-122.3?"San Francisco":`Location (${e.toFixed(4)}, ${s.toFixed(4)})`}calculateTotalTiles(e,s){let r=0;for(const a of s){const l=Math.pow(2,a),c=Math.floor((e.west+180)/360*l),d=Math.floor((e.east+180)/360*l),h=Math.floor((1-Math.log(Math.tan(e.north*Math.PI/180)+1/Math.cos(e.north*Math.PI/180))/Math.PI)/2*l),m=Math.floor((1-Math.log(Math.tan(e.south*Math.PI/180)+1/Math.cos(e.south*Math.PI/180))/Math.PI)/2*l);r+=(d-c+1)*(m-h+1)}return r}async downloadTilesForCity(e,s,r,a,l){const{bounds:c}=e;for(const d of s){if(a.status==="cancelled")break;const h=Math.pow(2,d),m=Math.floor((c.west+180)/360*h),f=Math.floor((c.east+180)/360*h),p=Math.floor((1-Math.log(Math.tan(c.north*Math.PI/180)+1/Math.cos(c.north*Math.PI/180))/Math.PI)/2*h),y=Math.floor((1-Math.log(Math.tan(c.south*Math.PI/180)+1/Math.cos(c.south*Math.PI/180))/Math.PI)/2*h);for(let N=m;N<=f&&a.status!=="cancelled";N++)for(let w=p;w<=y&&a.status!=="cancelled";w++)for(const j of r){try{await this.downloadTile(N,w,d,j,e.id),a.downloadedTiles++,a.downloadedSize+=15e3}catch{a.failedTiles++}a.progress=Math.round(a.downloadedTiles/a.totalTiles*100);const S=Date.now()-a.startTime,T=a.totalTiles-a.downloadedTiles;if(a.downloadedTiles>0){const R=S/a.downloadedTiles;a.estimatedTimeRemaining=T*R}l&&a.downloadedTiles%50===0&&l(a)}}}async downloadTile(e,s,r,a,l){const d={id:`${e}-${s}-${r}-${a}`,x:e,y:s,z:r,cityId:l,mapType:a,data:new Blob(["mock tile data"],{type:"image/png"}),downloadDate:new Date().toISOString()};return this.saveTileData(d)}async saveTileData(e){return this.db||await this.initializeDB(),new Promise((s,r)=>{const c=this.db.transaction(["mapTiles"],"readwrite").objectStore("mapTiles").put(e);c.onsuccess=()=>s(),c.onerror=()=>r(c.error)})}async saveCityInfo(e){return this.db||await this.initializeDB(),new Promise((s,r)=>{const c=this.db.transaction(["cities"],"readwrite").objectStore("cities").put(e);c.onsuccess=()=>s(),c.onerror=()=>r(c.error)})}async getCityInfo(e){return this.db||await this.initializeDB(),new Promise((s,r)=>{const c=this.db.transaction(["cities"],"readonly").objectStore("cities").get(e);c.onsuccess=()=>s(c.result||null),c.onerror=()=>r(c.error)})}async saveOfflineMapData(e){return this.db||await this.initializeDB(),new Promise((s,r)=>{const c=this.db.transaction(["offlineMaps"],"readwrite").objectStore("offlineMaps").put(e);c.onsuccess=()=>s(),c.onerror=()=>r(c.error)})}}const ua=new rV;function aV({isOpen:t=!0,onBack:e,onClose:s}){const[r,a]=x.useState("discover"),[l,c]=x.useState(null),[d,h]=x.useState([]),[m,f]=x.useState(""),[p,y]=x.useState([]),[N,w]=x.useState([]),[j,S]=x.useState(new Map),[T,R]=x.useState(!1),[A,k]=x.useState(!1);x.useEffect(()=>{t&&(P(),F())},[t]),x.useEffect(()=>{const M=D=>{D.key==="Escape"&&t&&B()};return t&&(document.addEventListener("keydown",M),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",M),document.body.style.overflow="unset"}},[t]);const P=async()=>{try{const M=await ua.getPopularCities();h(M)}catch(M){C.error("Failed to load popular cities:",M)}},F=async()=>{try{const M=await ua.getOfflineMaps();w(M)}catch(M){C.error("Failed to load offline maps:",M)}},W=async()=>{R(!0);try{const M=await ua.detectUserCity();M?(c(M),ue.success(`Detected your location: ${M.name}, ${M.country}`)):ue.error("Could not detect your location. Please select a city manually.")}catch(M){C.error("Location detection failed:",M),ue.error("Failed to detect location. Please try again.")}finally{R(!1)}},z=async()=>{if(m.trim()){k(!0);try{C.info("Starting city search:",{query:m});const M=await ua.searchCities(m);y(M),M.length===0?(ue.info(`No cities found for "${m}". Try a different search term.`),C.warn("No search results found:",{query:m})):(ue.success(`Found ${M.length} cities for "${m}"`),C.info("Search successful:",{query:m,count:M.length}))}catch(M){C.error("City search failed:",M);const D=M.message||M.toString();D.includes("Google Maps")||D.includes("not loaded")?ue.error("Google Maps is still loading. Please wait a moment and try again."):D.includes("network")||D.includes("fetch")?ue.error("Network error. Please check your internet connection."):ue.error("Search failed. Please try again.")}finally{k(!1)}}},oe=async M=>{try{if(j.has(M.id)){ue.info("Download already in progress for this city");return}if(await ua.hasOfflineMap(M.id)){ue.info("This city is already downloaded");return}await ua.downloadCityMaps(M.id,{onProgress:E=>{S(Y=>{const Q=new Map(Y);return Q.set(M.id,E),Q}),(E.status==="completed"||E.status==="failed"||E.status==="cancelled")&&(setTimeout(()=>{S(Y=>{const Q=new Map(Y);return Q.delete(M.id),Q})},3e3),E.status==="completed"&&F())}})}catch(D){C.error("Download failed:",D),ue.error(`Failed to download maps for ${M.name}`)}},q=async M=>{try{await ua.cancelDownload(M),S(D=>{const E=new Map(D);return E.delete(M),E})}catch(D){C.error("Failed to cancel download:",D)}},J=async M=>{if(confirm("Are you sure you want to delete this offline map?"))try{await ua.deleteOfflineMap(M),w(D=>D.filter(E=>E.cityId!==M)),ue.success("Offline map deleted successfully")}catch(D){C.error("Failed to delete offline map:",D),ue.error("Failed to delete offline map")}},K=M=>{const D=["B","KB","MB","GB"];if(M===0)return"0 B";const E=Math.floor(Math.log(M)/Math.log(1024));return Math.round(M/Math.pow(1024,E)*100)/100+" "+D[E]},B=()=>{s&&s(),e&&e()},V=({city:M,showDownload:D=!0})=>{const E=j.get(M.id),Y=N.some(Q=>Q.cityId===M.id);return n.jsxs("div",{className:"border rounded-lg p-3 space-y-2 bg-white shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-sm text-gray-900 truncate group-hover:text-blue-600 transition-colors",children:M.name}),n.jsx("p",{className:"text-xs text-gray-600 truncate",children:M.country}),M.population&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Pop: ",(M.population/1e6).toFixed(1),"M"]})]}),n.jsx(pt,{className:"w-4 h-4 text-gray-400 flex-shrink-0 group-hover:text-blue-500 transition-colors"})]}),E&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[E.status==="downloading"?n.jsx(Dd,{className:"w-4 h-4 animate-spin text-blue-500"}):E.status==="completed"?n.jsx(ai,{className:"w-4 h-4 text-green-500"}):E.status==="failed"?n.jsx(Ar,{className:"w-4 h-4 text-red-500"}):null,E.status]}),n.jsxs("span",{className:"font-medium",children:[E.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${E.progress}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsxs("span",{children:[E.downloadedTiles,"/",E.totalTiles," tiles"]}),n.jsx("span",{children:K(E.downloadedSize)})]})]}),D&&n.jsx("div",{className:"flex gap-1.5",children:E?n.jsxs("button",{onClick:()=>q(M.id),disabled:E.status!=="downloading",className:"flex-1 px-2 py-1.5 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1 font-medium",children:[n.jsx(ys,{className:"w-3 h-3"}),"Cancel"]}):Y?n.jsxs("div",{className:"flex-1 px-2 py-1.5 text-xs bg-green-100 text-green-700 rounded flex items-center justify-center gap-1 font-medium",children:[n.jsx(ai,{className:"w-3 h-3"}),"Ready"]}):n.jsxs("button",{onClick:()=>oe(M),className:"flex-1 px-2 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center justify-center gap-1 font-medium group-hover:bg-blue-600",children:[n.jsx(Rr,{className:"w-3 h-3"}),"Get"]})})]})},re=({map:M})=>n.jsxs("div",{className:"border rounded p-3 space-y-2 bg-white shadow-sm",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-gray-900 text-sm truncate",children:M.cityName}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Downloaded ",new Date(M.downloadDate).toLocaleDateString()]}),n.jsxs("div",{className:"flex gap-2 text-xs text-gray-500 mt-1",children:[n.jsxs("span",{children:[(M.tileCount/1e3).toFixed(0),"K tiles"]}),n.jsx("span",{children:K(M.sizeBytes)})]})]}),n.jsx(ga,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),n.jsx("div",{className:"flex gap-1",children:n.jsxs("button",{onClick:()=>J(M.cityId),className:"px-2 py-1.5 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 flex items-center gap-1",children:[n.jsx(Fp,{className:"w-3 h-3"}),"Delete"]})})]});return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:B,children:n.jsxs("div",{className:"bg-white rounded-lg w-[90vw] max-w-4xl h-[85vh] max-h-[600px] flex flex-col overflow-hidden shadow-2xl mx-4 my-8",onClick:M=>M.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-white flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:B,className:"flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors border-2 border-gray-300",title:"Go Back",children:n.jsx(gt,{className:"w-5 h-5 text-gray-700"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ga,{className:"w-6 h-6 text-blue-500"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Offline Maps"})]})]}),n.jsx("button",{onClick:B,className:"flex items-center justify-center w-10 h-10 bg-red-100 hover:bg-red-200 rounded-full transition-colors border-2 border-red-300",title:"Close",children:n.jsx(ys,{className:"w-5 h-5 text-red-600"})})]}),n.jsxs("div",{className:"flex border-b bg-white flex-shrink-0",children:[n.jsx("button",{onClick:()=>a("discover"),className:`px-6 py-3 font-medium border-b-2 transition-colors ${r==="discover"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gn,{className:"w-4 h-4"}),"Discover"]})}),n.jsx("button",{onClick:()=>a("downloads"),className:`px-6 py-3 font-medium border-b-2 transition-colors ${r==="downloads"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"w-4 h-4"}),"Downloads",j.size>0&&n.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full min-w-[18px] text-center",children:j.size})]})}),n.jsx("button",{onClick:()=>a("manage"),className:`px-6 py-3 font-medium border-b-2 transition-colors ${r==="manage"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zy,{className:"w-4 h-4"}),"Manage",N.length>0&&n.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full min-w-[18px] text-center",children:N.length})]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4 min-h-0 bg-gray-50",style:{scrollbarWidth:"thin",scrollbarColor:"#9ca3af #f3f4f6",maxHeight:"calc(85vh - 200px)",minHeight:"400px"},children:[r==="discover"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[n.jsx(pt,{className:"w-4 h-4 text-blue-500"}),"Your Location"]}),l?n.jsx("div",{className:"mb-4",children:n.jsx(V,{city:l})}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Detect your current location to download maps for your area"}),n.jsxs("button",{onClick:W,disabled:T,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2 mx-auto",children:[T?n.jsx(Dd,{className:"w-4 h-4 animate-spin"}):n.jsx(pt,{className:"w-4 h-4"}),T?"Detecting...":"Detect My Location"]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[n.jsx(Gn,{className:"w-4 h-4 text-gray-700"}),"Search Cities"]}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsx("input",{type:"text",value:m,onChange:M=>f(M.target.value),onKeyPress:M=>M.key==="Enter"&&z(),placeholder:"Search for any city worldwide...",className:"flex-1 px-3 py-2 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsxs("button",{onClick:z,disabled:A||!m.trim(),className:"px-3 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 flex items-center gap-1",children:[A?n.jsx(Dd,{className:"w-4 h-4 animate-spin"}):n.jsx(Gn,{className:"w-4 h-4"}),"Search"]})]}),p.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Search Results (",p.length,"):"]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"grid gap-2 md:grid-cols-2 h-60 overflow-y-auto scrollbar-thin scrollbar-thumb-green-300 scrollbar-track-gray-100 hover:scrollbar-thumb-green-400 transition-all duration-200 rounded-md border border-green-200 p-2 bg-green-50/30",style:{scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#86efac #f3f4f6",overscrollBehavior:"contain"},children:p.map((M,D)=>n.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${D*30}ms`},children:n.jsx(V,{city:M})},M.id))}),p.length>3&&n.jsx("div",{className:"mt-1 text-center",children:n.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-bounce"}),n.jsxs("span",{children:["Found ",p.length," cities"]})]})})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[n.jsx(Dl,{className:"w-4 h-4 text-gray-700"}),"Popular Cities (",d.length,")"]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"grid gap-2 md:grid-cols-2 h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-blue-300 scrollbar-track-gray-100 hover:scrollbar-thumb-blue-400 transition-all duration-200 rounded-md border border-gray-200 p-3",style:{scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#93c5fd #f3f4f6",overscrollBehavior:"contain"},children:d.map((M,D)=>n.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${D*50}ms`},children:n.jsx(V,{city:M})},M.id))}),d.length>4&&n.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 text-xs text-gray-500",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),n.jsx("span",{children:"Scroll for more cities"}),n.jsxs("div",{className:"flex gap-0.5",children:[n.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),n.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),n.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"})]})]})})]})]})]}),r==="downloads"&&n.jsxs("div",{className:"space-y-3 pb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Active Downloads"}),n.jsx("p",{className:"text-gray-600 text-xs",children:"Monitor your map download progress"})]}),j.size>0?n.jsx("div",{className:"grid gap-2",children:Array.from(j.entries()).map(([M,D])=>{const E=[...d,...p,l].find(Y=>Y?.id===M);return E?n.jsx(V,{city:E,showDownload:!1},M):n.jsxs("div",{className:"border rounded p-3 bg-white shadow-sm",children:[n.jsx("div",{className:"font-medium text-sm",children:D.cityName}),n.jsx("div",{className:"text-xs text-gray-600",children:"Downloading..."}),n.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-1.5",children:n.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all",style:{width:`${D.progress}%`}})})]},M)})}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Rr,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No active downloads"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Go to Discover tab to download maps"})]})]}),r==="manage"&&n.jsxs("div",{className:"space-y-3 pb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Downloaded Maps"}),n.jsx("p",{className:"text-gray-600 text-xs",children:"Manage your offline map storage"})]}),N.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-green-50 rounded p-3 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Zy,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-medium text-green-800 text-sm",children:"Storage Summary"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-green-700",children:"Cities:"}),n.jsx("span",{className:"font-semibold ml-1",children:N.length})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-green-700",children:"Total Size:"}),n.jsx("span",{className:"font-semibold ml-1",children:K(N.reduce((M,D)=>M+D.sizeBytes,0))})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-green-700",children:"Total Tiles:"}),n.jsx("span",{className:"font-semibold ml-1",children:N.reduce((M,D)=>M+D.tileCount,0).toLocaleString()})]})]})]}),n.jsx("div",{className:"grid gap-2",children:N.map(M=>n.jsx(re,{map:M},M.id))})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ga,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"No offline maps downloaded"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Download maps from the Discover tab"})]})]})]})]})}):null}class iV{async login(e){const s=await Ms("/auth/login",e);return localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken),localStorage.setItem("user",JSON.stringify(s.user)),s}async register(e){const s=await Ms("/auth/register",e);return localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken),localStorage.setItem("user",JSON.stringify(s.user)),s}async logout(){try{await Ms("/auth/logout")}catch(e){console.warn("Logout API call failed:",e)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}}async getProfile(){return xa("/auth/me")}async refreshToken(){const e=localStorage.getItem("refreshToken");if(!e)throw new Error("No refresh token available");const s=await Ms("/auth/refresh",{refreshToken:e});return localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken),s}async forgotPassword(e){await Ms("/auth/forgot-password",{email:e})}async resetPassword(e,s){await Ms("/auth/reset-password",{token:e,password:s})}isAuthenticated(){const e=localStorage.getItem("accessToken"),s=localStorage.getItem("user");return!!(e&&s)}getCurrentUser(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("Error parsing user data:",e),null}}async updateProfile(e){const s=await ep("/users/profile",e);return localStorage.setItem("user",JSON.stringify(s.user)),s.user}async getPreferences(){return(await xa("/users/preferences")).preferences}async updatePreferences(e){return(await ep("/users/preferences",e)).preferences}async changePassword(e,s){await Ms("/users/change-password",{currentPassword:e,newPassword:s})}async deleteAccount(e,s,r){await FI("/users/account",{password:e,confirmationText:s,reason:r}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}async getUserAnalytics(e=30){return xa(`/users/analytics?days=${e}`)}}const oV=new iV;function lV({onComplete:t}){const{user:e,updateProfile:s}=Ju(),[r,a]=x.useState("welcome"),[l,c]=x.useState({location:!1,notifications:!1,microphone:!1}),[d,h]=x.useState(""),[m,f]=x.useState(""),[p,y]=x.useState(["DRIVING"]),[N,w]=x.useState({voiceGuidance:!0,highContrast:!1,largeText:!1}),[j]=x.useState("English"),S=async()=>{try{if(l.location&&navigator.geolocation&&await new Promise(J=>{let K=!1;const B=setTimeout(()=>{K||J(void 0)},2500);navigator.geolocation.getCurrentPosition(()=>{K||(K=!0,clearTimeout(B),J(void 0))},()=>{K||(K=!0,clearTimeout(B),J(void 0))},{timeout:2500})}),l.notifications&&"Notification"in window)try{await Notification.requestPermission()}catch{}if(l.microphone&&navigator.mediaDevices)try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(K=>K.stop())}catch{}}catch(J){console.warn("Permission request encountered an issue (non-blocking):",J)}},T=async()=>{if(e)try{await oV.updatePreferences({defaultTravelMode:p[0]||"DRIVING",language:"en",theme:"SYSTEM",notifications:{email:!0,push:l.notifications,sms:!1,marketing:!1},privacy:{shareLocation:l.location,showOnlineStatus:!0,allowFriendRequests:!0,shareTrips:!1},mapSettings:{showTraffic:!0,showSatellite:!1,autoRecenter:!0,voiceNavigation:N.voiceGuidance}}),(d||m)&&await s({bio:JSON.stringify({homeAddress:d||null,workAddress:m||null,preferredModes:p,accessibilityPrefs:N})})}catch(J){console.warn("Saving preferences failed (non-blocking):",J?.message||J)}},R=async J=>{const K={...l,[J]:!l[J]};if(c(K),J==="location"&&!l.location&&navigator.geolocation)try{await new Promise((B,V)=>{navigator.geolocation.getCurrentPosition(B,V,{timeout:5e3})})}catch(B){console.warn("Failed to get location permission:",B)}},A=J=>{y(K=>K.includes(J)?K.filter(B=>B!==J):[...K,J])},k=async()=>{switch(r){case"welcome":{a("permissions");break}case"permissions":{(l.location||l.notifications||l.microphone)&&S(),a("personalization");break}case"personalization":{T(),a("tutorial");break}case"tutorial":{localStorage.setItem("pathfinder_onboarding_complete","true"),localStorage.setItem("pathfinder_onboarding_data",JSON.stringify({permissions:l,homeAddress:d,workAddress:m,preferredModes:p,accessibilityPrefs:N,completedAt:new Date().toISOString()})),t();break}}},P=()=>{switch(r){case"welcome":return!0;case"permissions":return l.location;case"personalization":return p.length>0;case"tutorial":return!0;default:return!1}},F=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-6 text-center",children:[n.jsxs(ao.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"mb-8",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-500 to-blue-500 rounded-3xl flex items-center justify-center mb-6 mx-auto",children:n.jsx(rt,{className:"w-12 h-12 text-white"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Welcome to PathFinder Pro"}),n.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-sm",children:"Your intelligent navigation companion with real-time guidance and smart recommendations"})]}),n.jsxs(ao.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.6},className:"space-y-4 mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(_r,{className:"w-4 h-4 text-green-600"})}),n.jsx("span",{children:"Smart route optimization"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(_r,{className:"w-4 h-4 text-green-600"})}),n.jsx("span",{children:"Real-time traffic updates"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(_r,{className:"w-4 h-4 text-green-600"})}),n.jsx("span",{children:"Offline maps available"})]})]}),n.jsxs(L,{className:"w-full max-w-sm",style:{backgroundColor:"#5B4FE5"},onClick:k,children:["Get Started",n.jsx(qy,{className:"w-4 h-4 ml-2"})]})]}),W=(J,K,B,V,re)=>{const M=l[J];return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 bg-${re}-100 rounded-full flex items-center justify-center`,children:n.jsx(V,{className:`w-6 h-6 text-${re}-600`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:K}),n.jsx("p",{className:"text-sm text-gray-600",children:B})]}),n.jsx(lt,{checked:M,onCheckedChange:()=>R(J),"aria-label":`${K} permission`})]})},z=()=>n.jsx("div",{className:"flex flex-col h-full px-6 bg-gray-50 items-center justify-center",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl flex items-center justify-center mb-4 mx-auto",children:n.jsx(lr,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Allow Permissions"}),n.jsx("p",{className:"text-gray-600",children:"We need these permissions to provide the best navigation experience"})]}),n.jsxs(ne,{className:"p-6 shadow-lg",children:[n.jsxs("div",{className:"space-y-6",children:[W("location","Location Access","Required for navigation and finding nearby places",pt,"blue"),W("notifications","Notifications","Get traffic alerts and navigation updates",pu,"amber"),W("microphone","Microphone","Enable voice commands and search",pa,"purple")]}),n.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[n.jsxs("label",{htmlFor:"all-permissions",className:"flex items-center gap-3 cursor-pointer",children:[n.jsx(lt,{id:"all-permissions",checked:l.location&&l.notifications&&l.microphone,onCheckedChange:J=>{c({location:J,notifications:J,microphone:J})}}),n.jsx("span",{className:"font-medium text-gray-800",children:"Allow All"})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"You can change this later"})]})]}),n.jsx("div",{className:"mt-8",children:n.jsxs(L,{className:"w-full py-3 text-lg",style:{backgroundColor:"#5B4FE5"},onClick:k,disabled:!P(),children:["Continue",n.jsx(or,{className:"w-5 h-5 ml-2"})]})})]})}),oe=()=>n.jsxs("div",{className:"flex flex-col h-full px-6",children:[n.jsxs("div",{className:"pt-8 pb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Personalize Your Experience"}),n.jsx("p",{className:"text-gray-600",children:"Set up your preferences for better recommendations"})]}),n.jsxs("div",{className:"flex-1 space-y-6 scroll-y hide-scrollbar scroll-smooth",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Quick Access Locations"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Home Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Kl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ft,{value:d,onChange:J=>h(J.target.value),placeholder:"Enter your home address",className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Work Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(Kb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Ft,{value:m,onChange:J=>f(J.target.value),placeholder:"Enter your work address",className:"pl-10"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Preferred Transport Modes"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"driving",icon:Ls,label:"Driving",color:"#3B82F6"},{id:"walking",icon:O4,label:"Walking",color:"#10B981"},{id:"transit",icon:fa,label:"Transit",color:"#F59E0B"},{id:"cycling",icon:qb,label:"Cycling",color:"#8B5CF6"}].map(J=>{const K=J.icon,B=p.includes(J.id);return n.jsx(ne,{className:`p-3 cursor-pointer transition-all ${B?"ring-2":"hover:shadow-md"}`,style:B?{backgroundColor:`${J.color}08`}:void 0,onClick:()=>A(J.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white",style:{backgroundColor:J.color},children:n.jsx(K,{className:"w-5 h-5"})}),n.jsx("span",{className:"font-medium text-gray-900",children:J.label})]})},J.id)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Accessibility Preferences"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Mr,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"Voice Guidance"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Turn-by-turn voice instructions"})]})]}),n.jsx(lt,{checked:N.voiceGuidance,onCheckedChange:J=>w(K=>({...K,voiceGuidance:J}))})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(lr,{className:"w-5 h-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900",children:"High Contrast Mode"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Better visibility"})]})]}),n.jsx(lt,{checked:N.highContrast,onCheckedChange:J=>w(K=>({...K,highContrast:J}))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Language"}),n.jsx(ne,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Dl,{className:"w-5 h-5 text-gray-600"}),n.jsx("span",{className:"text-gray-900",children:j}),n.jsx(or,{className:"w-4 h-4 text-gray-400 ml-auto"})]})})]})]}),n.jsx("div",{className:"pb-6",children:n.jsxs(L,{className:"w-full",style:{backgroundColor:"#5B4FE5"},onClick:k,disabled:!P(),children:["Continue",n.jsx(or,{className:"w-4 h-4 ml-2"})]})})]}),q=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-6 text-center",children:[n.jsxs(ao.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6},children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center mb-6 mx-auto",children:n.jsx(rt,{className:"w-10 h-10 text-white"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"You're All Set!"}),n.jsx("p",{className:"text-gray-600 mb-8 max-w-sm",children:"PathFinder Pro is ready to guide you. Tap the search bar to find your destination or explore nearby places."})]}),n.jsxs(ao.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},className:"space-y-4 mb-8 w-full max-w-sm",children:[n.jsx(ne,{className:"p-4 text-left",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(pt,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Quick Tip"}),n.jsx("p",{className:"text-sm text-gray-600",children:'Say "Hey PathFinder" for voice search'})]})]})}),n.jsx(ne,{className:"p-4 text-left",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(rt,{className:"w-4 h-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Pro Tip"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Save frequent destinations for faster access"})]})]})})]}),n.jsxs("div",{className:"space-y-3 w-full max-w-sm",children:[n.jsxs(L,{className:"w-full",style:{backgroundColor:"#5B4FE5"},onClick:k,children:["Start Navigating",n.jsx(qy,{className:"w-4 h-4 ml-2"})]}),n.jsx(L,{variant:"ghost",className:"w-full text-gray-600",children:"Skip Tutorial"})]})]});return n.jsxs("div",{className:"h-screen w-full bg-white",children:[r==="welcome"&&F(),r==="permissions"&&z(),r==="personalization"&&oe(),r==="tutorial"&&q()]})}class cV extends x.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,s){C.error("ErrorBoundary caught an error:",e,s),this.setState({error:e,errorInfo:s}),this.props.onError&&this.props.onError(e,s),this.reportError(e,s)}reportError=(e,s)=>{const r={message:e.message,stack:e.stack,componentStack:s.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};C.error("Crash Report:",r);try{const a=JSON.parse(localStorage.getItem("crashReports")||"[]");a.push(r),a.length>10&&a.splice(0,a.length-10),localStorage.setItem("crashReports",JSON.stringify(a))}catch(a){C.error("Failed to save crash report:",a)}};handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"};render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:n.jsx(ne,{className:"w-full max-w-md p-6 text-center",children:n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(Et,{className:"w-8 h-8 text-red-600"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"We encountered an unexpected error. Don't worry, we've been notified and are working on a fix."})]}),!1,n.jsxs("div",{className:"flex space-x-3 w-full",children:[n.jsxs(L,{variant:"outline",onClick:this.handleRetry,className:"flex-1",children:[n.jsx(Lf,{className:"w-4 h-4 mr-2"}),"Try Again"]}),n.jsxs(L,{onClick:this.handleGoHome,className:"flex-1",children:[n.jsx(Kl,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})})}):this.props.children}}class dV{flags=new Map;remoteConfig=new Map;experiments=new Map;userContext;apiEndpoint;apiKey;cache;refreshInterval=3e4;intervalId=null;flagUpdateSubscribers=[];configUpdateSubscribers=[];experimentUpdateSubscribers=[];constructor(){this.apiEndpoint=typeof window<"u"&&window.__ENV__?.REACT_APP_FEATURE_FLAGS_API_URL||"https://api.example.com/v1",this.apiKey=typeof window<"u"&&window.__ENV__?.REACT_APP_FEATURE_FLAGS_API_KEY||"demo-key",this.cache={flags:"pathfinder_feature_flags",config:"pathfinder_remote_config",experiments:"pathfinder_experiments"},this.userContext=this.initializeUserContext(),this.loadFromCache(),this.startPeriodicRefresh()}initializeUserContext(){return{userId:localStorage.getItem("userId")||void 0,email:localStorage.getItem("userEmail")||void 0,platform:this.getPlatform(),version:typeof window<"u"&&window.__ENV__?.REACT_APP_VERSION||"1.0.0",location:this.getLocationInfo(),customAttributes:{}}}getPlatform(){const e=navigator.userAgent.toLowerCase();return e.includes("mobile")?"mobile":e.includes("tablet")||e.includes("ipad")?"tablet":"desktop"}getLocationInfo(){return{country:"US",region:"CA",city:"San Francisco"}}initialize(e){this.userContext={...this.userContext,...e},this.refreshAll()}isFeatureEnabled(e){const s=this.flags.get(e);return!s||!s.isActive||!this.isUserTargeted(s)||s.rolloutPercentage<100&&this.hashString(e+(this.userContext.userId||"anonymous"))%100>=s.rolloutPercentage?!1:s.enabled}getFeatureVariant(e){const s=this.flags.get(e);if(!s||!s.isActive||!s.variants||!this.isFeatureEnabled(e))return null;const a=this.hashString(e+(this.userContext.userId||"anonymous"))%100;let l=0;for(const[c,d]of Object.entries(s.variants))if(l+=d.weight,a<l)return c;return null}getFeatureVariantValue(e){const s=this.getFeatureVariant(e);return s&&this.flags.get(e)?.variants?.[s]?.value||null}getRemoteConfig(e,s){const r=this.remoteConfig.get(e);if(!r)return s;if(r.ttl&&r.ttl>0){const a=r.lastModified.getTime()+r.ttl*1e3;if(Date.now()>a)return s}return r.value}getAllFlags(){return Array.from(this.flags.values()).filter(e=>e.isActive)}getAllRemoteConfig(){return Array.from(this.remoteConfig.values())}trackExperimentParticipation(e,s){const r=this.experiments.get(e);if(!r||r.status!=="running")return;typeof window<"u"&&window.analytics&&window.analytics.trackEvent("experiment_participation","experiments",{experimentId:e,experimentName:r.name,variant:s,userId:this.userContext.userId});const a=`experiment_${e}`;localStorage.setItem(a,JSON.stringify({variant:s,timestamp:Date.now()}))}getExperimentVariant(e){const s=this.experiments.get(e);if(!s||s.status!=="running")return null;const r=`experiment_${e}`,a=localStorage.getItem(r);if(a)try{return JSON.parse(a).variant}catch(m){console.error("Error parsing experiment participation:",m)}const l=this.hashString(e+(this.userContext.userId||"anonymous"));if(l%100>=s.targetingRules.trafficAllocation)return null;const d=(l>>8)%100;let h=0;for(const m of s.variants)if(h+=m.weight,d<h)return this.trackExperimentParticipation(e,m.name),m.name;return null}getExperimentConfig(e){const s=this.getExperimentVariant(e);return s&&this.experiments.get(e)?.variants.find(l=>l.name===s)?.config||null}isUserTargeted(e){if(!e.userTargeting)return!0;const{includedUsers:s,excludedUsers:r,userSegments:a}=e.userTargeting,l=this.userContext.userId;return r&&l&&r.includes(l)||s&&s.length>0&&(!l||!s.includes(l))?!1:a&&a.length>0?!0:!(e.conditions&&(e.conditions.platform&&!e.conditions.platform.includes(this.userContext.platform)||e.conditions.version&&!e.conditions.version.includes(this.userContext.version)||e.conditions.location&&this.userContext.location&&!e.conditions.location.some(d=>d===this.userContext.location?.country||d===this.userContext.location?.region||d===this.userContext.location?.city)))}hashString(e){let s=0;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);s=(s<<5)-s+a,s=s&s}return Math.abs(s)}loadFromCache(){try{const e=localStorage.getItem(this.cache.flags);e&&JSON.parse(e).forEach(l=>{this.flags.set(l.key,{...l,createdAt:new Date(l.createdAt),updatedAt:new Date(l.updatedAt)})});const s=localStorage.getItem(this.cache.config);s&&JSON.parse(s).forEach(l=>{this.remoteConfig.set(l.key,{...l,lastModified:new Date(l.lastModified)})});const r=localStorage.getItem(this.cache.experiments);r&&JSON.parse(r).forEach(l=>{this.experiments.set(l.id,{...l,startDate:l.startDate?new Date(l.startDate):void 0,endDate:l.endDate?new Date(l.endDate):void 0})})}catch(e){console.error("Error loading feature flags from cache:",e),this.initializeDefaults()}this.flags.size===0&&this.initializeDefaults()}initializeDefaults(){const e=[{key:"enable_ar_navigation",name:"AR Navigation",description:"Enable augmented reality navigation features",enabled:!0,rolloutPercentage:50,isActive:!0,createdAt:new Date,updatedAt:new Date},{key:"enable_voice_commands",name:"Voice Commands",description:"Enable voice command functionality",enabled:!0,rolloutPercentage:100,isActive:!0,createdAt:new Date,updatedAt:new Date},{key:"enable_offline_maps",name:"Offline Maps",description:"Enable offline map downloads",enabled:!0,rolloutPercentage:75,isActive:!0,createdAt:new Date,updatedAt:new Date},{key:"new_ui_design",name:"New UI Design",description:"A/B test for new user interface design",enabled:!0,rolloutPercentage:50,variants:{control:{weight:50,value:"original"},treatment:{weight:50,value:"new_design"}},isActive:!0,createdAt:new Date,updatedAt:new Date}],s=[{key:"max_route_waypoints",value:10,type:"number",description:"Maximum number of waypoints allowed in a route",lastModified:new Date},{key:"api_timeout_ms",value:3e4,type:"number",description:"API request timeout in milliseconds",lastModified:new Date},{key:"enable_crash_reporting",value:!0,type:"boolean",description:"Enable automatic crash reporting",lastModified:new Date},{key:"map_tile_cache_size_mb",value:100,type:"number",description:"Map tile cache size in megabytes",lastModified:new Date,ttl:3600}];e.forEach(r=>this.flags.set(r.key,r)),s.forEach(r=>this.remoteConfig.set(r.key,r)),this.saveToCache()}saveToCache(){try{localStorage.setItem(this.cache.flags,JSON.stringify(Array.from(this.flags.values()))),localStorage.setItem(this.cache.config,JSON.stringify(Array.from(this.remoteConfig.values()))),localStorage.setItem(this.cache.experiments,JSON.stringify(Array.from(this.experiments.values())))}catch(e){console.error("Error saving feature flags to cache:",e)}}async refreshAll(){try{await Promise.all([this.fetchFlags(),this.fetchRemoteConfig(),this.fetchExperiments()])}catch(e){console.error("Error refreshing feature flags:",e)}}async fetchFlags(){try{const e=await fetch(`${this.apiEndpoint}/flags`,{headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}});e.ok&&((await e.json()).forEach(r=>{const a=this.flags.get(r.key);this.flags.set(r.key,{...r,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)}),(!a||a.updatedAt<new Date(r.updatedAt))&&this.notifyFlagUpdate(r)}),this.saveToCache())}catch(e){console.debug("Failed to fetch remote flags, using cached version:",e)}}async fetchRemoteConfig(){try{const e=await fetch(`${this.apiEndpoint}/config`,{headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}});e.ok&&((await e.json()).forEach(r=>{const a=this.remoteConfig.get(r.key);this.remoteConfig.set(r.key,{...r,lastModified:new Date(r.lastModified)}),(!a||a.lastModified<new Date(r.lastModified))&&this.notifyConfigUpdate(r)}),this.saveToCache())}catch(e){console.debug("Failed to fetch remote config, using cached version:",e)}}async fetchExperiments(){try{const e=await fetch(`${this.apiEndpoint}/experiments`,{headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}});e.ok&&((await e.json()).forEach(r=>{const a=this.experiments.get(r.id);this.experiments.set(r.id,{...r,startDate:r.startDate?new Date(r.startDate):void 0,endDate:r.endDate?new Date(r.endDate):void 0}),a||this.notifyExperimentUpdate(r)}),this.saveToCache())}catch(e){console.debug("Failed to fetch experiments, using cached version:",e)}}startPeriodicRefresh(){this.intervalId=setInterval(()=>{this.refreshAll()},this.refreshInterval)}subscribeToFlagUpdates(e){return this.flagUpdateSubscribers.push(e),()=>{const s=this.flagUpdateSubscribers.indexOf(e);s>-1&&this.flagUpdateSubscribers.splice(s,1)}}subscribeToConfigUpdates(e){return this.configUpdateSubscribers.push(e),()=>{const s=this.configUpdateSubscribers.indexOf(e);s>-1&&this.configUpdateSubscribers.splice(s,1)}}subscribeToExperimentUpdates(e){return this.experimentUpdateSubscribers.push(e),()=>{const s=this.experimentUpdateSubscribers.indexOf(e);s>-1&&this.experimentUpdateSubscribers.splice(s,1)}}notifyFlagUpdate(e){this.flagUpdateSubscribers.forEach(s=>{try{s(e)}catch(r){console.error("Error in flag update subscriber:",r)}})}notifyConfigUpdate(e){this.configUpdateSubscribers.forEach(s=>{try{s(e)}catch(r){console.error("Error in config update subscriber:",r)}})}notifyExperimentUpdate(e){this.experimentUpdateSubscribers.forEach(s=>{try{s(e)}catch(r){console.error("Error in experiment update subscriber:",r)}})}destroy(){this.intervalId&&clearInterval(this.intervalId),this.flagUpdateSubscribers=[],this.configUpdateSubscribers=[],this.experimentUpdateSubscribers=[]}}const uV=()=>{const[t,e]=React.useState([]),[s,r]=React.useState([]);return React.useEffect(()=>{e(cs.getAllFlags()),r(cs.getAllRemoteConfig());const a=cs.subscribeToFlagUpdates(()=>{e(cs.getAllFlags())}),l=cs.subscribeToConfigUpdates(()=>{r(cs.getAllRemoteConfig())});return()=>{a(),l()}},[]),{flags:t,remoteConfig:s,isFeatureEnabled:cs.isFeatureEnabled.bind(cs),getFeatureVariant:cs.getFeatureVariant.bind(cs),getFeatureVariantValue:cs.getFeatureVariantValue.bind(cs),getRemoteConfig:cs.getRemoteConfig.bind(cs),getExperimentVariant:cs.getExperimentVariant.bind(cs),getExperimentConfig:cs.getExperimentConfig.bind(cs)}},cs=new dV;class hV{apiKey;baseUrl;sessionId;userId;session;eventQueue=[];crashQueue=[];metricsQueue=[];webVitalsQueue=[];resourceTimings=[];flushInterval=3e4;maxQueueSize=100;intervalId=null;isOnline=navigator.onLine;performanceBudgets=[];performanceObservers=[];constructor(){this.apiKey=typeof window<"u"&&window.__ENV__?.REACT_APP_ANALYTICS_API_KEY||"demo-key",this.baseUrl=typeof window<"u"&&window.__ENV__?.REACT_APP_ANALYTICS_API_URL||"https://analytics.example.com/v1",this.sessionId=this.generateSessionId(),this.session={id:this.sessionId,startTime:new Date,pageViews:0,events:0,crashes:0,userAgent:navigator.userAgent,referrer:document.referrer},this.initializeErrorHandling(),this.initializePerformanceMonitoring(),this.initializeAdvancedPerformanceMonitoring(),this.initializeNetworkMonitoring(),this.initializePerformanceBudgets(),this.startAutoFlush(),this.trackPageView()}trackEvent(e,s,r){const a={name:e,category:s,properties:r,timestamp:new Date,userId:this.userId,sessionId:this.sessionId};this.eventQueue.push(a),this.session.events++,s==="error"||s==="crash"?this.flush():this.eventQueue.length>=this.maxQueueSize&&this.flush()}trackPageView(e){this.session.pageViews++,this.trackEvent("page_view","navigation",{page:e||window.location.pathname,title:document.title,referrer:document.referrer,timestamp:Date.now()})}trackUserAction(e,s,r){this.trackEvent(e,"user_interaction",{element:s,...r})}trackPerformance(e,s,r="ms",a,l="custom"){const c={name:e,value:s,unit:r,timestamp:new Date,tags:a,category:l,context:{sessionId:this.sessionId,userId:this.userId}};this.metricsQueue.push(c),this.checkPerformanceBudgets(e,s),this.metricsQueue.length>=this.maxQueueSize&&this.flushMetrics()}reportCrash(e,s="medium",r){const a={id:this.generateId(),error:e,stack:e.stack,userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date,userId:this.userId,sessionId:this.sessionId,context:r,severity:s};this.crashQueue.push(a),this.session.crashes++,(s==="critical"||s==="high")&&this.flushCrashes(),this.trackEvent("crash_reported","error",{errorMessage:e.message,errorName:e.name,severity:s,context:r})}setUserId(e){this.userId=e,this.session.userId=e,this.trackEvent("user_identified","user",{userId:e})}setUserProperties(e){this.trackEvent("user_properties_updated","user",e)}startTiming(e){const s=performance.now();return()=>{const r=performance.now()-s;this.trackPerformance(`timing.${e}`,r,"ms")}}trackApiCall(e,s,r,a){this.trackPerformance("api_call",r,"ms",{endpoint:e,method:s,status:a.toString()}),this.trackEvent("api_call","network",{endpoint:e,method:s,duration:r,status:a,success:a>=200&&a<400})}async flush(){if(!this.isOnline){await this.queueForBackgroundSync();return}await Promise.all([this.flushEvents(),this.flushCrashes(),this.flushMetrics(),this.flushWebVitals(),this.flushSession()])}async queueForBackgroundSync(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.ready;if("sync"in e){const s={events:[...this.eventQueue],crashes:this.crashQueue.map(r=>({...r,error:{name:r.error.name,message:r.error.message,stack:r.stack}})),metrics:[...this.metricsQueue],session:this.session,timestamp:Date.now()};await this.storeDataForSync(s),await e.sync.register("analytics-sync"),console.debug("Analytics data queued for background sync")}}catch(e){console.error("Failed to queue analytics for background sync:",e)}}async storeDataForSync(e){try{const s=JSON.parse(localStorage.getItem("analytics_sync_queue")||"[]");s.push(e),localStorage.setItem("analytics_sync_queue",JSON.stringify(s)),"indexedDB"in window&&await this.storeInIndexedDB("analytics_sync_queue",e)}catch(s){console.error("Failed to store analytics data for sync:",s)}}async storeInIndexedDB(e,s){return new Promise((r,a)=>{const l=indexedDB.open("AnalyticsDB",1);l.onerror=()=>a(l.error),l.onsuccess=()=>{const m=l.result.transaction([e],"readwrite").objectStore(e).add({...s,id:Date.now()});m.onsuccess=()=>r(),m.onerror=()=>a(m.error)},l.onupgradeneeded=()=>{const c=l.result;c.objectStoreNames.contains(e)||c.createObjectStore(e,{keyPath:"id"})}})}initializeErrorHandling(){if(window.addEventListener("error",e=>{this.reportCrash(new Error(e.message||"Unknown error"),"high",{filename:e.filename,lineno:e.lineno,colno:e.colno,type:"javascript_error"})}),window.addEventListener("unhandledrejection",e=>{const s=e.reason instanceof Error?e.reason:new Error(String(e.reason));this.reportCrash(s,"medium",{type:"unhandled_promise_rejection"})}),typeof window<"u"&&window.__REACT_ERROR_OVERLAY_GLOBAL_HOOK__){const e=window.__REACT_ERROR_OVERLAY_GLOBAL_HOOK__;window.__REACT_ERROR_OVERLAY_GLOBAL_HOOK__=(...s)=>(s[0]&&s[0].error&&this.reportCrash(s[0].error,"high",{type:"react_error",componentStack:s[0].componentStack}),e(...s))}}initializePerformanceMonitoring(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(this.trackPerformance("page_load_time",e.loadEventEnd-e.fetchStart),this.trackPerformance("dom_content_loaded",e.domContentLoadedEventEnd-e.fetchStart),this.trackPerformance("first_contentful_paint",e.responseEnd-e.fetchStart)),performance.getEntriesByType("resource").forEach(r=>{this.trackPerformance("resource_load_time",r.responseEnd-r.fetchStart,"ms",{resource_type:r.initiatorType,resource_name:r.name.split("/").pop()||"unknown"})})},1e3)}),("web-vitals"in window||typeof window<"u")&&this.monitorWebVitals()}monitorWebVitals(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(s=>{for(const r of s.getEntries())if(r.entryType==="first-input"){const a=r.processingStart-r.startTime;this.trackWebVital("FID",a,this.getFIDRating(a))}});e.observe({entryTypes:["first-input"]}),this.performanceObservers.push(e)}catch{console.debug("PerformanceObserver not supported for first-input")}if("PerformanceObserver"in window)try{let e=0;const s=new PerformanceObserver(r=>{for(const a of r.getEntries())a.hadRecentInput||(e+=a.value);this.trackWebVital("CLS",e,this.getCLSRating(e))});s.observe({entryTypes:["layout-shift"]}),this.performanceObservers.push(s)}catch{console.debug("PerformanceObserver not supported for layout-shift")}}initializeAdvancedPerformanceMonitoring(){this.monitorResourceTimings(),this.monitorMemoryUsage(),this.monitorLongTasks(),this.trackCoreWebVitals()}initializePerformanceBudgets(){this.performanceBudgets=[{metric:"LCP",budget:2500,unit:"ms",severity:"warning",description:"Largest Contentful Paint should be under 2.5s"},{metric:"FID",budget:100,unit:"ms",severity:"warning",description:"First Input Delay should be under 100ms"},{metric:"CLS",budget:.1,unit:"score",severity:"warning",description:"Cumulative Layout Shift should be under 0.1"},{metric:"TTFB",budget:600,unit:"ms",severity:"warning",description:"Time to First Byte should be under 600ms"},{metric:"resource_load_time",budget:2e3,unit:"ms",severity:"info",description:"Resources should load in under 2 seconds"},{metric:"memory_usage_percent",budget:80,unit:"percent",severity:"error",description:"Memory usage should stay below 80%"},{metric:"long_task",budget:100,unit:"ms",severity:"info",description:"Main thread should not be blocked for more than 100ms"}]}trackWebVital(e,s,r){const a={name:e,value:s,rating:r,delta:0,id:this.generateId(),timestamp:new Date};this.webVitalsQueue.push(a),this.trackPerformance(e.toLowerCase(),s,e==="CLS"?"score":"ms",{rating:r},"core_web_vitals"),r==="poor"&&this.trackEvent("web_vital_poor","performance",{metric:e,value:s,rating:r})}checkPerformanceBudgets(e,s){const r=this.performanceBudgets.find(a=>a.metric.toLowerCase()===e.toLowerCase());r&&s>r.budget&&(this.trackEvent("performance_budget_exceeded","performance",{metric:e,value:s,budget:r.budget,unit:r.unit,severity:r.severity}),r.severity==="error"?console.error(`Performance budget exceeded: ${e} is ${s}${r.unit} (budget: ${r.budget}${r.unit})`):r.severity==="warning"&&console.warn(`Performance budget exceeded: ${e} is ${s}${r.unit} (budget: ${r.budget}${r.unit})`))}getFCPRating(e){return e<=1800?"good":e<=3e3?"needs-improvement":"poor"}getLCPRating(e){return e<=2500?"good":e<=4e3?"needs-improvement":"poor"}getFIDRating(e){return e<=100?"good":e<=300?"needs-improvement":"poor"}getCLSRating(e){return e<=.1?"good":e<=.25?"needs-improvement":"poor"}getTTFBRating(e){return e<=600?"good":e<=1e3?"needs-improvement":"poor"}trackCoreWebVitals(){if("PerformanceObserver"in window){try{const s=new PerformanceObserver(r=>{const a=r.getEntries(),c=a[a.length-1].startTime;this.trackWebVital("LCP",c,this.getLCPRating(c))});s.observe({entryTypes:["largest-contentful-paint"]}),this.performanceObservers.push(s)}catch(s){console.debug("LCP observation failed:",s)}try{const s=new PerformanceObserver(r=>{for(const a of r.getEntries())if(a.name==="first-contentful-paint"){const l=a.startTime;this.trackWebVital("FCP",l,this.getFCPRating(l))}});s.observe({entryTypes:["paint"]}),this.performanceObservers.push(s)}catch(s){console.debug("FCP observation failed:",s)}const e=performance.getEntriesByType("navigation")[0];if(e){const s=e.responseStart-e.fetchStart;this.trackWebVital("TTFB",s,this.getTTFBRating(s))}}}monitorResourceTimings(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(s=>{for(const r of s.getEntries()){const a=r,l={name:a.name,type:a.initiatorType,startTime:a.startTime,duration:a.responseEnd-a.fetchStart,transferSize:a.transferSize||0,encodedBodySize:a.encodedBodySize||0,decodedBodySize:a.decodedBodySize||0};this.resourceTimings.push(l),l.duration>2e3&&this.trackPerformance("slow_resource",l.duration,"ms",{resource_name:l.name,resource_type:l.type,transfer_size:l.transferSize.toString()},"network"),this.checkPerformanceBudgets("resource_load_time",l.duration)}});e.observe({entryTypes:["resource"]}),this.performanceObservers.push(e)}catch(e){console.debug("Resource timing observation failed:",e)}}monitorMemoryUsage(){setInterval(()=>{if("memory"in performance){const e=performance.memory;this.trackPerformance("memory_used_js_heap",e.usedJSHeapSize,"bytes",{},"memory"),this.trackPerformance("memory_total_js_heap",e.totalJSHeapSize,"bytes",{},"memory"),this.trackPerformance("memory_heap_limit",e.jsHeapSizeLimit,"bytes",{},"memory");const s=e.usedJSHeapSize/e.jsHeapSizeLimit*100;this.trackPerformance("memory_usage_percent",s,"percent",{},"memory"),s>80&&this.reportCrash(new Error(`High memory usage: ${s.toFixed(2)}%`),"medium",{type:"memory_warning",memoryUsagePercent:s,usedHeapSize:e.usedJSHeapSize,totalHeapSize:e.totalJSHeapSize})}},3e4)}monitorLongTasks(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(s=>{for(const r of s.getEntries()){const a=r;this.trackPerformance("long_task",a.duration,"ms",{task_name:a.name,attribution:a.attribution?.[0]?.name||"unknown"},"navigation"),a.duration>100&&this.trackEvent("long_task_detected","performance",{duration:a.duration,name:a.name,attribution:a.attribution?.[0]?.name})}});e.observe({entryTypes:["longtask"]}),this.performanceObservers.push(e)}catch(e){console.debug("Long task observation failed:",e)}}initializeNetworkMonitoring(){window.addEventListener("online",()=>{this.isOnline=!0,this.trackEvent("network_online","connectivity"),this.flush()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.trackEvent("network_offline","connectivity")})}startAutoFlush(){this.intervalId=setInterval(()=>{this.flush()},this.flushInterval),window.addEventListener("beforeunload",()=>{this.endSession(),this.sendBeacon()}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.flush()})}async flushEvents(){if(this.eventQueue.length===0)return;const e=[...this.eventQueue];this.eventQueue=[];try{await fetch(`${this.baseUrl}/events`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({events:e})})}catch(s){this.eventQueue.unshift(...e),console.debug("Failed to flush events:",s)}}async flushCrashes(){if(this.crashQueue.length===0)return;const e=this.crashQueue.map(s=>({...s,error:{name:s.error.name,message:s.error.message,stack:s.stack}}));this.crashQueue=[];try{await fetch(`${this.baseUrl}/crashes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({crashes:e})})}catch(s){console.debug("Failed to flush crash reports:",s)}}async flushMetrics(){if(this.metricsQueue.length===0)return;const e=[...this.metricsQueue];this.metricsQueue=[];try{await fetch(`${this.baseUrl}/metrics`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({metrics:e})})}catch(s){this.metricsQueue.unshift(...e),console.debug("Failed to flush metrics:",s)}}async flushWebVitals(){if(this.webVitalsQueue.length===0)return;const e=[...this.webVitalsQueue];this.webVitalsQueue=[];try{await fetch(`${this.baseUrl}/web-vitals`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({webVitals:e})})}catch(s){this.webVitalsQueue.unshift(...e),console.debug("Failed to flush web vitals:",s)}}async flushSession(){try{await fetch(`${this.baseUrl}/sessions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({session:this.session})})}catch(e){console.debug("Failed to flush session:",e)}}getPerformanceSummary(){let e;if("memory"in performance){const r=performance.memory;e={used:r.usedJSHeapSize,total:r.totalJSHeapSize,limit:r.jsHeapSizeLimit,percentage:r.usedJSHeapSize/r.jsHeapSizeLimit*100}}const s=this.eventQueue.filter(r=>r.name==="performance_budget_exceeded").length;return{webVitals:[...this.webVitalsQueue],resourceTimings:[...this.resourceTimings],budgetViolations:s,memoryUsage:e}}getPerformanceBudgets(){return[...this.performanceBudgets]}addPerformanceBudget(e){this.performanceBudgets.push(e)}removePerformanceBudget(e){this.performanceBudgets=this.performanceBudgets.filter(s=>s.metric!==e)}endSession(){this.session.endTime=new Date,this.session.duration=this.session.endTime.getTime()-this.session.startTime.getTime()}sendBeacon(){if(!navigator.sendBeacon)return;const e={session:this.session,events:this.eventQueue,crashes:this.crashQueue.map(s=>({...s,error:{name:s.error.name,message:s.error.message,stack:s.stack}}))};try{navigator.sendBeacon(`${this.baseUrl}/beacon`,JSON.stringify(e))}catch(s){console.debug("Failed to send beacon:",s)}}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateId(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}destroy(){this.intervalId&&clearInterval(this.intervalId),this.performanceObservers.forEach(e=>{try{e.disconnect()}catch(s){console.debug("Error disconnecting performance observer:",s)}}),this.performanceObservers=[],this.endSession(),this.flush()}}const Dp=new hV,mV=Object.freeze(Object.defineProperty({__proto__:null,analyticsService:Dp},Symbol.toStringTag,{value:"Module"})),fV=()=>{const{flags:t,remoteConfig:e}=uV(),[s,r]=x.useState("flags"),[a,l]=x.useState(null),[c,d]=x.useState(null),[h,m]=x.useState([]),[f,p]=x.useState(null),[y,N]=x.useState(!1);x.useEffect(()=>{const k=Dp.getPerformanceSummary();p(k),m([{experimentId:"new_ui_design",variants:{control:{participants:1250,conversions:87,conversionRate:6.96,confidence:95},treatment:{participants:1233,conversions:156,conversionRate:12.65,confidence:99}},winner:"treatment",isSignificant:!0}])},[]);const w=k=>{},j=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Feature Flags"}),n.jsxs(L,{size:"sm",children:[n.jsx(ja,{className:"w-4 h-4 mr-2"}),"Add Flag"]})]}),n.jsx("div",{className:"grid gap-4",children:t.map(k=>n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>w(k.key),children:k.enabled?n.jsx(N4,{className:"w-5 h-5 text-green-600"}):n.jsx(ev,{className:"w-5 h-5 text-gray-400"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:k.name}),n.jsx("p",{className:"text-sm text-gray-600",children:k.description})]})]}),n.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm",children:[n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(Ll,{className:"w-4 h-4"}),n.jsxs("span",{children:[k.rolloutPercentage,"% rollout"]})]}),k.variants&&n.jsxs(Ie,{variant:"secondary",children:["A/B Test (",Object.keys(k.variants).length," variants)"]}),n.jsx(Ie,{variant:k.isActive?"default":"secondary",children:k.isActive?"Active":"Inactive"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>l(k),children:n.jsx(Wt,{className:"w-4 h-4"})}),k.variants&&n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>{r("experiments")},children:n.jsx(Tl,{className:"w-4 h-4"})})]})]})},k.key))})]}),S=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Remote Configuration"}),n.jsxs(L,{size:"sm",children:[n.jsx(ja,{className:"w-4 h-4 mr-2"}),"Add Config"]})]}),n.jsx("div",{className:"grid gap-4",children:e.map(k=>n.jsx(ne,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:k.key}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:k.description}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Value:"}),n.jsx(Ie,{variant:"outline",children:k.type==="boolean"?k.value?"true":"false":String(k.value)})]}),n.jsx(Ie,{variant:"secondary",children:k.type}),k.ttl&&n.jsxs("span",{className:"text-xs text-gray-500",children:["TTL: ",k.ttl,"s"]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>d(k),children:n.jsx(Wt,{className:"w-4 h-4"})})})]})},k.key))})]}),T=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"A/B Test Results"}),n.jsxs(L,{size:"sm",children:[n.jsx(Of,{className:"w-4 h-4 mr-2"}),"New Experiment"]})]}),h.map(k=>n.jsxs(ne,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-lg capitalize",children:k.experimentId.replace(/_/g," ")}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Total participants: ",Object.values(k.variants).reduce((P,F)=>P+F.participants,0)]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[k.isSignificant&&n.jsxs(Ie,{className:"bg-green-100 text-green-800",children:[n.jsx(ai,{className:"w-3 h-3 mr-1"}),"Significant"]}),k.winner&&n.jsxs(Ie,{variant:"default",children:["Winner: ",k.winner]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(k.variants).map(([P,F])=>n.jsxs(ne,{className:`p-4 ${k.winner===P?"ring-2 ring-green-500 bg-green-50":""}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h5",{className:"font-medium capitalize",children:P}),k.winner===P&&n.jsx(Ie,{className:"bg-green-100 text-green-800 text-xs",children:"Winner"})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Participants:"}),n.jsx("span",{className:"font-medium",children:F.participants.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Conversions:"}),n.jsx("span",{className:"font-medium",children:F.conversions})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Conversion Rate:"}),n.jsxs("span",{className:"font-medium text-blue-600",children:[F.conversionRate.toFixed(2),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Confidence:"}),n.jsxs("span",{className:"font-medium",children:[F.confidence,"%"]})]})]}),n.jsx("div",{className:"mt-3",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(F.conversionRate,20)}%`}})})})]},P))}),n.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(ii,{className:"w-4 h-4 mr-2"}),"View Details"]}),n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(WP,{className:"w-4 h-4 mr-2"}),"Pause"]}),n.jsxs(L,{variant:"outline",size:"sm",children:[n.jsx(TE,{className:"w-4 h-4 mr-2"}),"End Test"]})]})]},k.experimentId))]}),R=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Performance Monitoring"}),n.jsxs(ne,{className:"p-6",children:[n.jsx("h4",{className:"font-semibold mb-4",children:"Core Web Vitals"}),f?.webVitals.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:f.webVitals.map(k=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mb-2 ${k.rating==="good"?"bg-green-100 text-green-800":k.rating==="needs-improvement"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:k.name}),n.jsx("div",{className:"text-lg font-semibold",children:k.name==="CLS"?k.value.toFixed(3):Math.round(k.value)+"ms"}),n.jsx("div",{className:"text-xs text-gray-500 capitalize",children:k.rating.replace("-"," ")})]},k.id))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Pn,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Web Vitals data will appear as users interact with the app"})]})]}),n.jsxs(ne,{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h4",{className:"font-semibold",children:"Performance Budgets"}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(Ie,{variant:f?.budgetViolations>0?"destructive":"default",children:[f?.budgetViolations||0," violations"]})})]}),n.jsx("div",{className:"space-y-3",children:Dp.getPerformanceBudgets().map(k=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:k.metric}),n.jsx(Ie,{variant:"outline",className:"text-xs",children:k.unit})]}),n.jsx("p",{className:"text-sm text-gray-600",children:k.description})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-mono text-sm",children:["Budget: ",k.budget,k.unit]}),n.jsx(Ie,{variant:k.severity==="error"?"destructive":k.severity==="warning"?"secondary":"outline",className:"text-xs",children:k.severity})]})]},k.metric))})]}),f?.memoryUsage&&n.jsxs(ne,{className:"p-6",children:[n.jsx("h4",{className:"font-semibold mb-4",children:"Memory Usage"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(f.memoryUsage.used/1024/1024).toFixed(1),"MB"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Used"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[(f.memoryUsage.total/1024/1024).toFixed(1),"MB"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[(f.memoryUsage.limit/1024/1024).toFixed(1),"MB"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Limit"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:`text-2xl font-bold ${f.memoryUsage.percentage>80?"text-red-600":f.memoryUsage.percentage>60?"text-yellow-600":"text-green-600"}`,children:[f.memoryUsage.percentage.toFixed(1),"%"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Usage"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full ${f.memoryUsage.percentage>80?"bg-red-500":f.memoryUsage.percentage>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(f.memoryUsage.percentage,100)}%`}})})})]}),n.jsxs(ne,{className:"p-6",children:[n.jsx("h4",{className:"font-semibold mb-4",children:"Resource Performance"}),f?.resourceTimings.length>0?n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.resourceTimings.sort((k,P)=>P.duration-k.duration).slice(0,10).map((k,P)=>n.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-sm",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-mono text-xs truncate",children:k.name.split("/").pop()}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[n.jsx(Ie,{variant:"outline",className:"text-xs",children:k.type}),k.transferSize>0&&n.jsxs("span",{children:[(k.transferSize/1024).toFixed(1),"KB"]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:`font-medium ${k.duration>2e3?"text-red-600":k.duration>1e3?"text-yellow-600":"text-green-600"}`,children:[Math.round(k.duration),"ms"]})})]},P))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Tl,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Resource timing data will appear as resources load"})]})]})]}),A=[{id:"flags",label:"Feature Flags",icon:ev,count:t.length},{id:"config",label:"Remote Config",icon:Wt,count:e.length},{id:"experiments",label:"Experiments",icon:Of,count:h.length},{id:"performance",label:"Performance",icon:Pn,count:f?.budgetViolations||0}];return n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Experiment Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Manage feature flags, remote configuration, A/B tests, and performance monitoring"})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6",children:n.jsx("nav",{className:"-mb-px flex space-x-8",children:A.map(k=>n.jsxs("button",{onClick:()=>r(k.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${s===k.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[n.jsx(k.icon,{className:"w-4 h-4"}),n.jsx("span",{children:k.label}),k.count>0&&n.jsx(Ie,{variant:"secondary",className:"ml-1",children:k.count})]},k.id))})}),n.jsxs("div",{children:[s==="flags"&&j(),s==="config"&&S(),s==="experiments"&&T(),s==="performance"&&R()]})]})};function pV({from:t,to:e,transportMode:s,onStartNavigation:r,onBack:a}){const[l,c]=x.useState(0),d=[{id:"1",from:t,to:e,distance:"2.4 mi",duration:"8 min",mode:s,type:"Fastest",traffic:"Light traffic",tolls:!1,co2:"1.2 kg",steps:["Head north on Main St","Turn right on 1st Ave","Continue straight for 1.2 mi","Turn left on Market St","Arrive at destination"]},{id:"2",from:t,to:e,distance:"2.1 mi",duration:"12 min",mode:s,type:"Avoid highways",traffic:"Moderate traffic",tolls:!1,co2:"1.0 kg",steps:["Head east on Main St","Turn right on 2nd Ave","Continue on local roads","Turn right on Market St","Arrive at destination"]},{id:"3",from:t,to:e,distance:"3.2 mi",duration:"15 min",mode:s,type:"Scenic route",traffic:"Light traffic",tolls:!1,co2:"1.5 kg",steps:["Head south on Main St","Take scenic route through park","Continue on Scenic Dr","Turn left on Market St","Arrive at destination"]}],h=()=>{switch(s){case"driving":return"#3B82F6";case"walking":return"#10B981";case"transit":return"#F59E0B";case"cycling":return"#8B5CF6";default:return"#5B4FE5"}};return!t||!e?n.jsx("div",{className:"h-full bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"Select a destination to see routes"})]})}):n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:a,children:n.jsx(gt,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-medium text-gray-900",children:"Route Options"}),n.jsxs("p",{className:"text-sm text-gray-500",children:[t.name,"  ",e.name]})]})]})}),n.jsx("div",{className:"flex-1 p-4 space-y-3 scroll-y hide-scrollbar scroll-smooth",children:d.map((m,f)=>n.jsxs(ne,{className:`p-4 cursor-pointer transition-all ${l===f?"ring-2 border-transparent":"hover:shadow-md"}`,style:l===f?{backgroundColor:`${h()}08`}:void 0,onClick:()=>c(f),children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:m.type}),m.type==="Fastest"&&n.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"Recommended"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(xs,{className:"w-4 h-4"}),n.jsx("span",{children:m.duration})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(mr,{className:"w-4 h-4"}),n.jsx("span",{children:m.distance})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-medium text-gray-900",children:m.duration}),n.jsx("div",{className:"text-sm text-gray-500",children:m.distance})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[n.jsx("span",{children:m.traffic}),!m.tolls&&n.jsx("span",{children:"No tolls"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(oi,{className:"w-3 h-3"}),n.jsxs("span",{children:[m.co2," CO"]})]})]}),n.jsxs("div",{className:"space-y-1",children:[m.steps.slice(0,3).map((p,y)=>n.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:h()}}),n.jsx("span",{children:p})]},y)),m.steps.length>3&&n.jsxs("div",{className:"text-xs text-gray-400 ml-4",children:["+",m.steps.length-3," more steps"]})]})]},m.id))}),n.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-gray-200",children:[n.jsxs(L,{className:"w-full",style:{backgroundColor:h()},onClick:()=>r(d[l]),children:[n.jsx(rt,{className:"w-4 h-4 mr-2"}),"Start Navigation"]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3 text-sm text-gray-500",children:[n.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-700",children:[n.jsx(Ds,{className:"w-4 h-4"}),"Save Route"]}),n.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-700",children:[n.jsx(rt,{className:"w-4 h-4"}),"Share"]}),n.jsxs("button",{className:"flex items-center gap-1 hover:text-gray-700",children:[n.jsx(Et,{className:"w-4 h-4"}),"Report Issue"]})]})]})]})}const gV=({onBack:t})=>{const[e,s]=x.useState(localStorage.getItem("developer_mode")==="true"),[r,a]=x.useState(localStorage.getItem("debug_level")||"info"),l=f=>{s(f),localStorage.setItem("developer_mode",f.toString()),f?(C.info("Developer mode enabled"),ue.success("Developer mode enabled")):(C.info("Developer mode disabled"),ue.info("Developer mode disabled"))},c=f=>{a(f),localStorage.setItem("debug_level",f),C.info(`Debug level set to: ${f}`),ue.success(`Debug level changed to ${f}`)},d=()=>{confirm("Are you sure you want to clear all app data? This action cannot be undone.")&&(localStorage.clear(),sessionStorage.clear(),"caches"in window&&caches.keys().then(f=>{f.forEach(p=>caches.delete(p))}),ue.success("All data cleared. The page will now reload"),C.info("All app data cleared by developer"),window.location.reload())},h=()=>{const f={crashReports:JSON.parse(localStorage.getItem("crashReports")||"[]"),crashFeedback:JSON.parse(localStorage.getItem("crashFeedback")||"[]"),debugLogs:JSON.parse(localStorage.getItem("debug_logs")||"[]"),userSettings:JSON.parse(localStorage.getItem("user_settings")||"{}"),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href},p=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),y=URL.createObjectURL(p),N=document.createElement("a");N.href=y,N.download=`pathfinder-logs-${Date.now()}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(y)},m=()=>{throw new Error("Test error triggered from Developer Panel")};return n.jsxs("div",{className:"h-full bg-white flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(L,{variant:"ghost",size:"sm",onClick:t,children:" Back"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wt,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-lg font-semibold",children:"Developer Panel"}),e&&n.jsx(Ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:"DEV MODE"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Developer Mode"}),n.jsx(lt,{checked:e,onCheckedChange:l})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4",children:e?n.jsxs(An,{defaultValue:"crash-reports",className:"w-full",children:[n.jsxs(_n,{className:"grid w-full grid-cols-8",children:[n.jsxs(st,{value:"crash-reports",className:"flex items-center gap-1",children:[n.jsx(Df,{className:"w-4 h-4"}),"Crashes"]}),n.jsxs(st,{value:"device-tests",className:"flex items-center gap-1",children:[n.jsx(a1,{className:"w-4 h-4"}),"Device"]}),n.jsxs(st,{value:"error-tests",className:"flex items-center gap-1",children:[n.jsx(Et,{className:"w-4 h-4"}),"Errors"]}),n.jsxs(st,{value:"notifications",className:"flex items-center gap-1",children:[n.jsx(po,{className:"w-4 h-4"}),"Notifications"]}),n.jsxs(st,{value:"system",className:"flex items-center gap-1",children:[n.jsx(Ky,{className:"w-4 h-4"}),"System"]}),n.jsxs(st,{value:"experiments",className:"flex items-center gap-1",children:[n.jsx(Of,{className:"w-4 h-4"}),"Experiments"]}),n.jsxs(st,{value:"integration-tests",className:"flex items-center gap-1",children:[n.jsx(Kd,{className:"w-4 h-4"}),"Integrations"]}),n.jsxs(st,{value:"legacy-ui",className:"flex items-center gap-1",children:[n.jsx(Et,{className:"w-4 h-4"}),"Legacy UI"]})]}),n.jsx(nt,{value:"crash-reports",className:"mt-4",children:n.jsx(Y2,{})}),n.jsx(nt,{value:"device-tests",className:"mt-4",children:n.jsx(Z2,{})}),n.jsx(nt,{value:"error-tests",className:"mt-4",children:n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Error Testing"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-800",children:"Test Error Boundary"}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Triggers an error to test the error boundary functionality"})]}),n.jsx(L,{variant:"outline",className:"text-yellow-800 border-yellow-300 hover:bg-yellow-100",onClick:m,children:"Trigger Error"})]})})]})}),n.jsx(nt,{value:"notifications",className:"mt-4",children:n.jsx(K2,{})}),n.jsx(nt,{value:"system",className:"mt-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"User Agent:"}),n.jsx("p",{className:"break-all text-gray-600",children:navigator.userAgent})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Language:"}),n.jsx("p",{className:"text-gray-600",children:navigator.language})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Online:"}),n.jsx("p",{className:"text-gray-600",children:navigator.onLine?"Yes":"No"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Screen Resolution:"}),n.jsxs("p",{className:"text-gray-600",children:[screen.width,"x",screen.height]})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Viewport:"}),n.jsxs("p",{className:"text-gray-600",children:[window.innerWidth,"x",window.innerHeight]})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Local Storage:"}),n.jsxs("p",{className:"text-gray-600",children:[Object.keys(localStorage).length," items"]})]})]})]}),n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Debug Settings"}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Debug Level"}),n.jsx("div",{className:"flex space-x-2",children:["error","warn","info","debug"].map(f=>n.jsx(L,{variant:r===f?"default":"outline",size:"sm",onClick:()=>c(f),children:f.toUpperCase()},f))})]})})]}),n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(L,{onClick:h,variant:"outline",children:[n.jsx(Ky,{className:"w-4 h-4 mr-2"}),"Export Logs"]}),n.jsxs(L,{onClick:d,variant:"outline",className:"text-red-600 hover:text-red-700",children:[n.jsx(Et,{className:"w-4 h-4 mr-2"}),"Clear All Data"]})]})]})]})}),n.jsx(nt,{value:"experiments",className:"mt-4",children:n.jsx(fV,{})}),n.jsx(nt,{value:"integration-tests",className:"mt-4",children:n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integration Tests"}),n.jsx("p",{className:"text-gray-600",children:"Integration test panel placeholder"})]})}),n.jsx(nt,{value:"legacy-ui",className:"mt-4",children:n.jsxs(ne,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Legacy Route Panel"}),n.jsx(pV,{from:{id:"from",name:"Demo Start",address:"1 Market St, San Francisco",lat:37.7946,lng:-122.395},to:{id:"to",name:"Ferry Building",address:"1 Ferry Building, San Francisco",lat:37.7955,lng:-122.3937},transportMode:"driving",onBack:()=>{},onStartNavigation:()=>{}})]})})]}):n.jsxs(ne,{className:"p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Wt,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Developer Mode Disabled"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Enable developer mode to access debugging tools and test features."}),n.jsx(L,{onClick:()=>l(!0),children:"Enable Developer Mode"})]})})]})},xV=({...t})=>{const{theme:e="system"}=FS();return n.jsx(qM,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})},Ip={defaultTransportMode:"driving",voiceGuidance:!0,voiceVolume:80,avoidTolls:!1,avoidHighways:!1,avoidFerries:!1,mapStyle:"standard",darkMode:!1,units:"imperial",language:"en-US",pushNotifications:!0,trafficAlerts:!0,routeUpdates:!0,arrivalNotifications:!0,socialNotifications:!1,highContrast:!1,largeText:!1,screenReader:!1,reduceMotion:!1,colorBlindMode:"none",textSize:100,buttonSize:100,locationHistory:!0,shareLocation:!1,analytics:!0,crashReporting:!0};function yV(t,e){switch(e.type){case"UPDATE_SETTING":return{...t,[e.key]:e.value};case"UPDATE_MULTIPLE":return{...t,...e.settings};case"RESET_TO_DEFAULTS":return Ip;case"LOAD_FROM_STORAGE":return e.settings;default:return t}}const vV=x.createContext(void 0),Bb="findy-app-settings";function wV({children:t}){const[e,s]=x.useReducer(yV,Ip),[r,a]=he.useState(!0);x.useEffect(()=>{try{const m=localStorage.getItem(Bb);if(m){const f=JSON.parse(m),p={...Ip,...f};s({type:"LOAD_FROM_STORAGE",settings:p}),C.debug("Settings loaded from localStorage",{settings:p})}else C.debug("No stored settings found, using defaults")}catch(m){C.error("Failed to load settings from localStorage",{error:m})}finally{a(!1)}},[]),x.useEffect(()=>{if(!r)try{localStorage.setItem(Bb,JSON.stringify(e)),C.debug("Settings saved to localStorage",{settings:e})}catch(m){C.error("Failed to save settings to localStorage",{error:m})}},[e,r]);const h={settings:e,updateSetting:(m,f)=>{s({type:"UPDATE_SETTING",key:m,value:f}),C.debug("Setting updated",{key:m,value:f})},updateMultipleSettings:m=>{s({type:"UPDATE_MULTIPLE",settings:m}),C.debug("Multiple settings updated",{settings:m})},resetToDefaults:()=>{s({type:"RESET_TO_DEFAULTS"}),C.info("Settings reset to defaults")},isLoading:r};return n.jsx(vV.Provider,{value:h,children:t})}function bV(){Ju();const{user:t}=jg(),{currentLocation:e,startLocationTracking:s}=Lu(),{currentLocation:r,selectedLocation:a,currentRoute:l,transportMode:c,searchQuery:d,isNavigating:h,setSelectedLocation:m,setTransportMode:f,setSearchQuery:p,startNavigation:y,stopNavigation:N,calculateRoute:w,setCurrentLocation:j}=ux(),[S,T]=x.useState(null),[R,A]=x.useState(!1),[k,P]=x.useState("map"),[F,W]=x.useState(!1),[z,oe]=x.useState(0),[q,J]=x.useState(null),[K,B]=x.useState(!1),[V,re]=x.useState(!0),[M,D]=x.useState(""),[E,Y]=x.useState([]),[Q,I]=x.useState(!1),[te,se]=x.useState(!1),fe=R3();x.useEffect(()=>{const ie=localStorage.getItem("pathfinder_onboarding_complete");A(!!ie)},[]),x.useEffect(()=>{(async()=>{try{C.debug("Initializing Google Maps API..."),await Du.load(),C.debug("Google Maps API initialized successfully")}catch(le){C.warn("Failed to initialize Google Maps API:",le)}})()},[]);const ve=()=>{localStorage.setItem("pathfinder_onboarding_complete","true"),A(!0)},[Pe,$]=x.useState([]);x.useEffect(()=>{e&&(!r||e.lat!==r.lat||e.lng!==r.lng)&&(j(e),C.debug("Synced location data to navigation context",{locationData:e}))},[e,r,j]),x.useEffect(()=>{s(),C.debug("Started location tracking")},[s]),x.useEffect(()=>{(()=>{try{const le=localStorage.getItem("saved_places");le&&$(JSON.parse(le))}catch(le){C.error("Failed to load saved places",{error:le})}})()},[]),x.useEffect(()=>{Pe.length>0&&localStorage.setItem("saved_places",JSON.stringify(Pe))},[Pe]);const G=async ie=>{if(p(ie),C.debug("Search initiated",{query:ie}),!ie.trim()){Y([]),I(!1);return}try{const le=await Kt.searchPlaces({query:ie,location:r?{lat:r.lat,lng:r.lng}:void 0,radius:5e4});if(le.length>0){const Le=le.map(et=>({id:et.place_id||`search_${Date.now()}_${Math.random()}`,name:et.name||ie,address:et.formatted_address||et.vicinity||"",lat:et.geometry?.location?.lat()||0,lng:et.geometry?.location?.lng()||0,category:et.types?.[0]||"place"}));Y(Le),I(!0),(Le.length===1||Le[0].name.toLowerCase()===ie.toLowerCase())&&(ye(Le[0]),I(!1))}else{const Le=X(c,ie);Y(Le),I(Le.length>0),Le.length===0&&ue.info("No results found. Try a different search term.")}}catch(le){C.error("Search failed:",le);const Le=X(c,ie);Y(Le),I(Le.length>0),Le.length===0&&ue.error("Search failed. Please check your connection.")}},X=(ie,le)=>{const Le=[{id:"mcdonalds",name:"McDonald's",category:"restaurant",keywords:["mcdonalds","food","burger","restaurant"]},{id:"starbucks",name:"Starbucks",category:"cafe",keywords:["starbucks","coffee","cafe"]},{id:"walmart",name:"Walmart",category:"store",keywords:["walmart","shopping","store","grocery"]},{id:"target",name:"Target",category:"store",keywords:["target","shopping","store"]},...ie==="driving"?[{id:"shell",name:"Shell Gas Station",category:"gas_station",keywords:["shell","gas","fuel"]},{id:"chevron",name:"Chevron",category:"gas_station",keywords:["chevron","gas","fuel"]},{id:"parking",name:"Parking",category:"parking",keywords:["parking","park"]}]:[],{id:"hospital",name:"Hospital",category:"hospital",keywords:["hospital","emergency","medical"]},{id:"pharmacy",name:"Pharmacy",category:"pharmacy",keywords:["pharmacy","medicine","cvs","walgreens"]},{id:"bank",name:"Bank/ATM",category:"bank",keywords:["bank","atm","money"]},{id:"hotel",name:"Hotels",category:"lodging",keywords:["hotel","motel","stay","accommodation"]},...ie==="walking"?[{id:"park",name:"Park",category:"park",keywords:["park","green","nature"]},{id:"library",name:"Library",category:"library",keywords:["library","books"]}]:[]],et=le.toLowerCase();return Le.filter(wt=>wt.keywords.some(ds=>ds.includes(et))||wt.name.toLowerCase().includes(et)).slice(0,5).map(wt=>({id:wt.id,name:wt.name,address:`Search for nearby ${wt.category}`,lat:0,lng:0,category:wt.category}))},me=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){ue.error("Voice search not supported in this browser");return}const ie=window.webkitSpeechRecognition||window.SpeechRecognition,le=new ie;le.continuous=!1,le.interimResults=!1,le.lang="en-US",se(!0),ue.info(" Listening... Say a place name or address"),le.onresult=Le=>{const et=Le.results[0][0].transcript;p(et),G(et)},le.onerror=Le=>{C.error("Voice recognition error:",Le.error),ue.error("Voice search failed. Please try again."),se(!1)},le.onend=()=>{se(!1)},le.start()},ye=(ie,le=!1)=>{C.debug("Location selected",{location:ie,forceRouteScreen:le}),m(ie),P("map")},je=ie=>{C.debug("Route planning requested",{location:ie}),m(ie),P("map")},Ae=ie=>{y(ie),P("navigation"),C.info("Navigation started from App",{route:ie.id})},U=()=>{N(),P("map"),C.info("Navigation stopped from App")},Te=ie=>{const le={id:ie.id||`route_${Date.now()}`,from:ie.from,to:ie.to,distance:ie.distance,duration:ie.duration,mode:["driving","walking","transit","cycling"].includes(ie.mode)?ie.mode:c,steps:ie.steps||[],geometry:ie.geometry,createdAt:new Date().toISOString()};Ae(le)},Se=ie=>{const le=(ie.steps||[]).map(et=>et.type==="walk"?`Walk ${et.duration}`:`${et.line?`${et.line}`:"Transit"}  ${et.duration}`),Le={id:ie.id||`transit_route_${Date.now()}`,from:ie.from,to:ie.to,distance:ie.distance||ie.duration,duration:ie.totalTime||ie.duration,mode:"transit",steps:le,createdAt:new Date().toISOString()};Ae(Le)},We=ie=>{C.debug("Processing voice command",{command:ie});const le=ie.toLowerCase();if(le.includes("take me home")||le.includes("go home")){const Le=Pe.find(et=>et.category==="home");Le&&ye(Le)}else if(le.includes("go to work")||le.includes("navigate to work")){const Le=Pe.find(et=>et.category==="work");Le&&ye(Le)}else le.includes("find")&&le.includes("coffee")&&(p("coffee shops"),P("search"))},ct=ie=>{if(C.debug("Handling notification action",{notification:ie}),ie.actionData?.destination==="work"){const le=Pe.find(Le=>Le.category==="work");le&&ye(le)}else ie.actionData?.mode==="transit"?f("transit"):ie.actionData?.findParking&&P("parking")},pe=()=>{switch(k){case"search":return n.jsx(J3,{query:d,onSearch:G,onLocationSelect:ye,transportMode:c,onBack:()=>P("map"),onOpenVoicePanel:()=>P("voice")});case"route":return n.jsx(VI,{from:r,to:a,transportMode:c,onStartNavigation:Te,onBack:()=>P("map"),onOpenMultiStop:()=>P("multi-stop")});case"transit":return n.jsx(P$,{from:r,to:a,onStartNavigation:Se,onBack:()=>P("map")});case"navigation":return n.jsx(oD,{route:l,onStopNavigation:U,onStartAR:()=>P("ar"),onShareETA:()=>P("eta-share")});case"saved":return n.jsx(C$,{places:Pe,onLocationSelect:ye,onBack:()=>P("map"),onAddPlace:ie=>{$(le=>[...le,ie])}});case"ar":return n.jsx(O$,{route:l,onClose:()=>P("navigation")});case"social":return n.jsx(z$,{onBack:()=>P("map"),onLocationSelect:ye});case"profile":return n.jsx($$,{onBack:()=>P("map"),onOpenSettings:()=>P("settings"),onOpenSafety:()=>P("safety"),onOpenAnalytics:()=>P("analytics"),onOpenGamification:()=>P("gamification"),onOpenOfflineMaps:()=>P("offline")});case"voice":return n.jsx(SU,{onClose:()=>P("map"),onVoiceCommand:We});case"eta-share":return l?n.jsx(RU,{route:{id:l.id,from:{name:l.from.name,address:l.from.address},to:{name:l.to?.name||"",address:l.to?.address||""},distance:l.distance,duration:l.duration,mode:l.mode,eta:l.duration},onClose:()=>P("navigation")}):n.jsx("div",{className:"h-full bg-white flex items-center justify-center",children:n.jsx("p",{className:"text-gray-500",children:"No active route to share"})});case"settings":return n.jsx(uO,{onBack:()=>P("map"),onNavigateToIntegrations:()=>P("integrations"),onNavigateToFleet:()=>P("fleet"),onNavigateToAPIDocs:()=>P("api-docs"),onNavigateToORSConfig:()=>P("ors-config"),onNavigateToDeveloper:()=>P("developer"),onNavigateToPushSettings:()=>P("push-settings"),onNavigateToDeviceTest:()=>P("device-test"),onNavigateToCrashReports:()=>P("crash-reports"),onNavigateToOfflineMaps:()=>P("offline")});case"safety":return n.jsx(LU,{onBack:()=>P("map")});case"integrations":return n.jsx(OU,{onBack:()=>P("settings")});case"ai-predictions":return n.jsxs("div",{className:"h-full bg-white p-4",children:[n.jsx(KU,{destination:a?.name,currentLocation:r?.name||"",map:S,onSuggestionAccept:ie=>{if(C.debug("AI suggestion accepted",{suggestion:ie}),ie.type==="traffic"&&ie.actionData?.trafficData){const le=ie.actionData.trafficData.alternativeRoutes[0];le&&ue.info(`Consider taking ${le.via} to save ${le.timeSaved} minutes`)}else ie.type==="parking"&&ie.actionData?.parkingSpots?P("parking"):ie.type==="route"?(f(ie.mode||c),ie.destination&&ye(ie.destination)):ie.type==="departure"?C.info("Departure time suggestion accepted",{time:ie.time}):ie.type==="place"&&ie.place&&ye(ie.place)}}),n.jsx(L,{className:"mt-4",onClick:()=>P("map"),children:"Back to Map"})]});case"analytics":return n.jsx(ZU,{onBack:()=>P("profile")});case"parking":return n.jsx(YU,{onBack:()=>P("map"),destination:a?.name,map:S,onNavigateToParking:ie=>{ie.location&&(ye({lat:ie.location.lat,lng:ie.location.lng,name:ie.name,address:ie.address}),P("map"))}});case"gamification":return n.jsx(JU,{onBack:()=>P("profile")});case"fleet":return n.jsx(QU,{onBack:()=>P("settings")});case"api-docs":return n.jsx(eV,{onBack:()=>P("settings")});case"multi-stop":return n.jsx(tV,{onRouteCalculated:ie=>{if(C.debug("Multi-stop route calculated",{route:ie}),ie.from&&ie.to){const le={id:ie.id||"multi-stop-route",from:ie.from,to:ie.to,distance:ie.distance||"0 km",duration:ie.duration||"0 min",mode:c,steps:ie.steps||[],waypoints:ie.waypoints||[],createdAt:new Date().toISOString()};Ae(le)}},onBack:()=>P("map")});case"developer":return n.jsx(gV,{onBack:()=>P("settings")});case"place-details":return q?n.jsxs("div",{className:"h-full bg-white p-4",children:[n.jsx(L,{className:"mb-4",onClick:()=>P("map"),variant:"outline",children:" Back to Map"}),n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2",children:q.name}),n.jsx("p",{className:"text-gray-600",children:q.address})]})]}):n.jsx("div",{className:"h-full bg-white flex items-center justify-center",children:n.jsx("p",{className:"text-gray-500",children:"No place selected"})});case"offline":return n.jsx(aV,{onBack:()=>P("map")});case"push-settings":return n.jsx("div",{className:"h-full bg-white",children:n.jsx(K2,{})});case"device-test":return n.jsx("div",{className:"h-full bg-white",children:n.jsx(Z2,{})});case"crash-reports":return n.jsxs("div",{className:"h-full bg-white p-4",children:[n.jsx(L,{className:"mb-4",onClick:()=>P("settings"),variant:"outline",children:" Back to Settings"}),n.jsx(Y2,{})]});default:return n.jsx(H3,{currentLocation:r,selectedLocation:a,route:l,transportMode:c,isNavigating:h,centerSignal:z,onLocationSelect:ye,onForceRouteScreen:je,onMapReady:ie=>{C.info("Google Map instance ready")},onRouteRequest:(ie,le)=>{C.info("Route requested from map click",{from:ie,to:le}),m(le)}})}};return R?n.jsxs("div",{className:"h-screen w-full bg-background flex flex-col overflow-hidden",children:[n.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-3 sm:px-4 py-2 sm:py-3 z-50",children:n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[k!=="map"&&n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>{k==="navigation"?U():P(k==="ar"||k==="eta-share"?"navigation":"map")},className:"hover:bg-gray-100 h-8 w-8 sm:h-10 sm:w-10",children:n.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),k==="map"&&n.jsxs("div",{className:"flex-1 flex items-center gap-1 sm:gap-2 relative",children:[n.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg sm:rounded-xl border border-gray-200 px-3 sm:px-4 py-2 sm:py-2.5 relative",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[n.jsx(Gn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Where to?",value:d,onChange:ie=>{p(ie.target.value),ie.target.value.trim()?G(ie.target.value):I(!1)},onKeyPress:ie=>{ie.key==="Enter"&&d.trim()&&(E.length>0?(ye(E[0]),I(!1)):G(d),D(d))},onFocus:()=>{E.length>0&&I(!0)},onBlur:()=>{setTimeout(()=>I(!1),200)},className:"flex-1 bg-transparent border-none outline-none text-gray-700 placeholder-gray-500 text-sm sm:text-base"}),d&&n.jsx(L,{size:"sm",variant:"ghost",onClick:()=>{p(""),D(""),Y([]),I(!1)},className:"text-gray-400 hover:text-gray-600 h-6 w-6 sm:h-8 sm:w-8 p-0 flex-shrink-0",children:n.jsx(ys,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),Q&&E.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-lg border border-gray-200 max-h-80 overflow-y-auto z-50",children:E.map(ie=>n.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>{ie.lat===0&&ie.lng===0?G(ie.name):ye(ie),I(!1)},children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(pt,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-gray-900 truncate",children:ie.name}),n.jsx("p",{className:"text-sm text-gray-600 truncate",children:ie.address})]})]},ie.id))})]}),n.jsx(L,{size:"sm",onClick:me,disabled:te,className:`${te?"bg-red-500 hover:bg-red-600":"bg-green-600 hover:bg-green-700"} text-white h-8 w-8 sm:h-10 sm:w-10 p-0 flex-shrink-0 hidden xs:flex`,children:te?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"animate-pulse w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white rounded-full"}),n.jsx(pa,{className:"w-3 h-3 sm:w-4 sm:h-4"})]}):n.jsx(pa,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),n.jsx(L,{size:"sm",onClick:()=>{d.trim()?(E.length>0?(ye(E[0]),I(!1)):G(d),D(d)):P("search")},className:"bg-blue-600 hover:bg-blue-700 text-white h-8 w-8 sm:h-10 sm:w-10 p-0 flex-shrink-0",children:n.jsx(Gn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),k!=="map"&&n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("h1",{className:"font-semibold text-base sm:text-lg text-gray-900 truncate",children:[k==="search"&&"Search",k==="route"&&"Route",k==="navigation"&&"Navigation",k==="saved"&&"Saved Places",k==="settings"&&"Settings",k==="transit"&&"Public Transit",k==="offline"&&"Offline Maps",k==="ar"&&"AR Navigation",k==="social"&&"Community",k==="profile"&&"Profile",k==="voice"&&"Voice Commands",k==="eta-share"&&"Share ETA",k==="safety"&&"Safety Center",k==="integrations"&&"Integrations",k==="ai-predictions"&&"AI Assistant",k==="analytics"&&"Analytics",k==="parking"&&"Find Parking",k==="gamification"&&"Achievements",k==="fleet"&&"Fleet Management",k==="api-docs"&&"API Documentation",k==="multi-stop"&&"Multi-Stop Route",k==="developer"&&"Developer Tools",k==="place-details"&&"Place Details",k==="push-settings"&&"Notifications",k==="device-test"&&"Device Test",k==="crash-reports"&&"Crash Reports"]})}),n.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[k!=="map"&&n.jsx(L,{size:"icon",className:"bg-white text-gray-700 shadow-sm border border-gray-200 hover:bg-gray-50 h-8 w-8 sm:h-10 sm:w-10",onClick:()=>P("voice"),children:n.jsx(pa,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsxs(L,{size:"icon",className:"bg-white text-gray-700 shadow-sm border border-gray-200 hover:bg-gray-50 relative h-8 w-8 sm:h-10 sm:w-10",onClick:()=>W(!F),children:[n.jsx(pu,{className:"w-4 h-4 sm:w-5 sm:h-5"}),F&&n.jsx("div",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-2 h-2 sm:w-3 sm:h-3 bg-red-500 rounded-full"})]}),n.jsx(L,{size:"icon",className:"bg-white text-gray-700 shadow-sm border border-gray-200 hover:bg-gray-50 h-8 w-8 sm:h-10 sm:w-10",onClick:()=>P("profile"),children:n.jsx(xu,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsx(L,{size:"icon",className:"bg-white text-blue-600 shadow-sm border border-gray-200 hover:bg-blue-50 h-8 w-8 sm:h-10 sm:w-10",onClick:()=>P("offline"),title:"Offline Maps",children:n.jsx(ga,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsx(zS,{}),n.jsx(uN,{onNavigateToPage:(ie,le)=>fe.navigateTo(ie,le),onNavigateToScreen:ie=>P(ie)})]})]})}),k==="map"&&n.jsx("div",{className:"absolute top-16 sm:top-20 left-1 sm:left-4 z-50 drop-shadow-lg",children:n.jsx(MU,{currentMode:c,onModeChange:f})}),k==="map"&&F&&n.jsx("div",{className:"absolute top-14 sm:top-16 right-2 z-50 w-64 sm:w-80",children:n.jsx(AU,{currentLocation:r,onActionClick:ct})}),k==="map"&&n.jsxs("div",{className:"absolute left-2 sm:left-4 bottom-24 sm:bottom-32 z-40 flex flex-col gap-2 sm:gap-3",children:[n.jsx(L,{size:"icon",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl sm:rounded-2xl bg-white text-gray-700 shadow-lg border border-gray-200 hover:bg-gray-50 touch-manipulation",onClick:()=>{oe(ie=>ie+1)},children:n.jsx(Ll,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsx(L,{size:"icon",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl sm:rounded-2xl bg-white text-gray-700 shadow-lg border border-gray-200 hover:bg-gray-50 touch-manipulation",onClick:()=>P("saved"),children:n.jsx(pt,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsx(L,{size:"icon",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl sm:rounded-2xl bg-white text-orange-600 hover:bg-orange-50 shadow-lg border border-orange-300 dark:bg-orange-600 dark:text-white dark:hover:bg-orange-700 dark:border-white/10 touch-manipulation",onClick:()=>P("parking"),children:n.jsx(Ls,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),n.jsx(L,{size:"icon",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl sm:rounded-2xl bg-white text-purple-600 hover:bg-purple-50 shadow-lg border border-purple-300 dark:bg-purple-600 dark:text-white dark:hover:bg-purple-700 dark:border-white/10 touch-manipulation",onClick:()=>P("ai-predictions"),children:n.jsx(Mf,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),n.jsx("div",{className:"flex-1 relative overflow-y-auto pb-16 sm:pb-20",children:pe()}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[1000]",children:n.jsx(lD,{currentScreen:k,onScreenChange:P})}),n.jsx(lN,{place:q,isOpen:K,onClose:()=>B(!1),onNavigate:()=>{if(q&&r){const ie={id:"place-route",from:r,to:q,distance:"2.5 km",duration:"8 min",mode:c,steps:["Head south on Main St","Turn left on Oak Ave"],createdAt:new Date().toISOString()};Ae(ie),B(!1)}},onShare:()=>{q&&navigator.share&&navigator.share({title:q.name,text:`Check out ${q.name} - ${q.address}`,url:window.location.href})}}),n.jsx(A3,{currentRoute:fe.currentRoute,onNavigateBack:fe.navigateBack,routeParams:fe.routeParams}),n.jsx(xV,{richColors:!0,closeButton:!0})]}):n.jsx(lV,{onComplete:ve})}function jV(){const{isAnyLoading:t}=Iu();return n.jsx(h3,{visible:t(),text:"Processing...",backdrop:!1})}function NV(){return n.jsx(aO,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:n.jsx(cV,{onError:(t,e)=>{C.error("App Error occurred",{error:t.message,stack:t.stack,errorInfo:e}),Wb(async()=>{const{analyticsService:s}=await Promise.resolve().then(()=>mV);return{analyticsService:s}},void 0).then(({analyticsService:s})=>{s.reportCrash(t,"high",{componentStack:e.componentStack,type:"react_error_boundary"})}).catch(console.error)},children:n.jsx(d3,{children:n.jsx(wV,{children:n.jsx(x3,{children:n.jsx(tO,{children:n.jsxs(qU,{children:[n.jsx(bV,{}),n.jsx(jV,{})]})})})})})})})}BT.createRoot(document.getElementById("root")).render(n.jsx(NV,{}));
